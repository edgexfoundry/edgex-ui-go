(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"7PPe":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i("tk/3"),c=i("JIr8"),r=i("fXoL"),o=i("9vc0");let s=(()=>{class e{constructor(e,t){this.http=e,this.errorSvc=t,this.endpoint="/command",this.version="/api/v2",this.urlPrefix=`${this.endpoint}${this.version}`,this.endpointHealthUrl="/ping",this.versionUrl="/version",this.configUrl="/config",this.deviceCoreCommandListUrl=this.urlPrefix+"/device/all",this.commandsByDeviceIdUrl=this.urlPrefix+"/device/",this.commandsByDeviceNameUrl=this.urlPrefix+"/device/name/",this.issueCmdByDeviceNameAndCmdNameUrl=this.urlPrefix+"/device/name/",this.httpPostOrPutJSONOptions={headers:new n.c({"Content-type":"application/json",Authorization:""})}}getConfig(){return this.http.get(`${this.urlPrefix}${this.configUrl}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findCommnadsByDeviceId(e){return this.http.get(`${this.commandsByDeviceIdUrl}${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}allDeviceCoreCommandsPagination(e,t){return this.http.get(`${this.deviceCoreCommandListUrl}?offset=${e}&limit=${t}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findDeviceAssociatedCommnadsByDeviceName(e){return this.http.get(`${this.commandsByDeviceNameUrl}${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findAllDeviceCommnads(){return this.http.get(this.urlPrefix+"/device").pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}issueGetBinaryCmd(e,t){return this.http.request("GET",`${this.commandsByDeviceIdUrl}${e}/command/${t}`,{responseType:"arraybuffer"}).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}issueGetCmd(e,t){return this.http.get(`${this.issueCmdByDeviceNameAndCmdNameUrl}${e}/${t}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}issueSetCmd(e,t,i){return this.http.put(`${this.issueCmdByDeviceNameAndCmdNameUrl}${e}/${t}`,JSON.stringify(i),this.httpPostOrPutJSONOptions).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(n.a),r.Qb(o.a))},e.\u0275prov=r.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"9vc0":function(e,t,i){"use strict";i.d(t,"a",function(){return o});var n=i("HDdC"),c=i("fXoL"),r=i("hsl2");let o=(()=>{class e{constructor(e){this.msgSvc=e}handleErrorForV2API(e){let t=Object.prototype.toString.call(e);if("[object Array]"===t){if(!e[0].statusCode.toString().startsWith("20"))return this.msgSvc.errors(`code: ${e[0].statusCode}, message: ${e[0].message}`),!0}else if("[object Object]"===t&&!e.statusCode.toString().startsWith("20"))return this.msgSvc.errors(`code: ${e.statusCode}, message: ${e.message}`),!0;return!1}handleError(e){return e.error instanceof ErrorEvent?this.msgSvc.errors("'An error occurred:', "+e.error.message):"[object Object]"===Object.prototype.toString.call(e.error)?this.msgSvc.errors(`code: ${e.error.statusCode} , message: ${e.error.message}`):"[object String]"===Object.prototype.toString.call(e.error)?this.msgSvc.errors(`code: ${e.status} , message: ${e.error}`):this.msgSvc.errors(`code: ${e.status} , message: ${e.message}`),function(e,t){return new n.a(t=>t.error(e))}(`Backend returned code ${e.error.statusCode}, body was: `+e.error.message)}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(r.a))},e.\u0275prov=c.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},limL:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i("tk/3"),c=i("JIr8"),r=i("fXoL"),o=i("9vc0");let s=(()=>{class e{constructor(e,t){this.http=e,this.errorSvc=t,this.endpoint="/metadata",this.version="/api/v2",this.urlPrefix=`${this.endpoint}${this.version}`,this.configUrl="/config",this.devicesListUrl=this.urlPrefix+"/device/all",this.addOneDeviceUrl=this.urlPrefix+"/device",this.updateOneDeviceUrl=this.urlPrefix+"/device",this.deleteOneDeviceByIdUrl=this.urlPrefix+"/device/Id",this.deleteOneDeviceByNameUrl=this.urlPrefix+"/device/name",this.findDeviceByNameUrl=this.urlPrefix+"/device/name",this.findDeviceByIdUrl=this.urlPrefix+"/device/id",this.findDevicesByServiceIdUrl=this.urlPrefix+"/device/service/id",this.findDevicesByServiceNameUrl=this.urlPrefix+"/device/service/name",this.findDevicesByProfileIdUrl=this.urlPrefix+"/device/profile/id",this.findDevicesByProfileNameUrl=this.urlPrefix+"/device/profile/name",this.deviceServicesListUrl=this.urlPrefix+"/deviceservice/all",this.updateDeviceServiceUrl=this.urlPrefix+"/deviceservice",this.findDeviceServiceByIdUrl=this.urlPrefix+"/deviceservice/id",this.findDeviceServiceByNameUrl=this.urlPrefix+"/deviceservice/name",this.deviceProfilesListUrl=this.urlPrefix+"/deviceprofile/all",this.findProfilesByIdUrl=this.urlPrefix+"/deviceprofile",this.findProfilesByNameUrl=this.urlPrefix+"/deviceprofile/name",this.updateDeviceProfileUrl=this.urlPrefix+"/deviceprofile",this.uploadProfileYamlFileUrl=this.urlPrefix+"/deviceprofile/uploadfile",this.uploadProfileYamlContentUrl=this.urlPrefix+"/deviceprofile/upload",this.deviceProfileYamlUrl=this.urlPrefix+"/deviceprofile/yaml",this.deleteProfileByIdUrl=this.urlPrefix+"/deviceprofile/id",this.deleteProfileByNamedUrl=this.urlPrefix+"/deviceprofile/name",this.httpPostOrPutJSONOptions={headers:new n.c({"Content-type":"application/json",Authorization:""})}}getConfig(){return this.http.get(`${this.urlPrefix}${this.configUrl}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}allDevices(){return this.http.get(""+this.devicesListUrl).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}allDevicesPagination(e,t){return this.http.get(`${this.devicesListUrl}?offset=${e}&limit=${t}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}addDevice(e){let t=""+this.addOneDeviceUrl;return e.apiVersion="v2",this.http.post(t,JSON.stringify([{apiVersion:"v2",device:e}]),this.httpPostOrPutJSONOptions).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}deleteOneDeviceByName(e){return this.http.delete(`${this.deleteOneDeviceByNameUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}deleteOneDeviceById(e){return this.http.delete(`${this.deleteOneDeviceByIdUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}updateDevice(e){return this.http.patch(""+this.updateOneDeviceUrl,JSON.stringify([{apiVersion:"v2",device:e}]),{headers:new n.c({"Content-type":"application/json"})}).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findDeviceByName(e){return this.http.get(`${this.findDeviceByNameUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findDeviceById(e){return this.http.get(`${this.findDeviceByIdUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findDevicesByServiceId(e){return this.http.get(`${this.findDevicesByServiceIdUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findDevicesByServiceName(e,t,i){return this.http.get(`${this.findDevicesByServiceNameUrl}/${i}?offset=${e}&limit=${t}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findDevicesByProfileId(e){return this.http.get(`${this.findDevicesByProfileIdUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findDevicesByProfileName(e,t,i){return this.http.get(`${this.findDevicesByProfileNameUrl}/${i}?offset=${e}&limit=${t}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}allDeviceServices(){return this.http.get(this.deviceServicesListUrl+"?offset=0&limit=-1").pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findAllDeviceServicesPagination(e,t){return this.http.get(`${this.deviceServicesListUrl}?offset=${e}&limit=${t}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}updateDeviceService(e){return this.http.patch(""+this.updateDeviceServiceUrl,JSON.stringify([{apiVersion:"v2",service:e}]),this.httpPostOrPutJSONOptions).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findDevcieServiceById(e){return this.http.get(`${this.findDeviceServiceByIdUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findDevcieServiceByName(e){return this.http.get(`${this.findDeviceServiceByNameUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}allDeviceProfoles(){return this.http.get(this.deviceProfilesListUrl+"?offset=0&limit=-1").pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}allDeviceProfolesPagination(e,t){return this.http.get(`${this.deviceProfilesListUrl}?offset=${e}&limit=${t}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}addProfileYamlByNameViaUIBackend(e){return this.http.request("POST","/api/v1/profile/yaml",{body:e,responseType:"text"}).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findProfileById(e){return this.http.get(`${this.findProfilesByIdUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findProfileByName(e){return this.http.get(`${this.findProfilesByNameUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findProfileYamlByNameViaUIBackend(e){return this.http.request("GET","/api/v1/profile/yaml/name/"+e,{responseType:"text"}).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}uploadProfileYamlFile(e){return this.http.request("POST",""+this.uploadProfileYamlFileUrl,{body:e,responseType:"text"}).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}updateDeviceProfile(e){return this.http.put(""+this.updateDeviceProfileUrl,e,this.httpPostOrPutJSONOptions).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}updateProfileYamlContentViaUIBackend(e){return this.http.put("/api/v1/profile/yaml",e,{headers:new n.c({"Content-Type":"text/plain; charset=utf-8"})}).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}uploadProfileYamlContent(e){return this.http.request("POST",""+this.uploadProfileYamlContentUrl,{body:e,responseType:"text",headers:new n.c({"Content-Type":"text/plain; charset=utf-8"})}).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findProfileYamlById(e){return this.http.request("GET",`${this.deviceProfileYamlUrl}/${e}`,{responseType:"text"})}deleteProfileById(e){return this.http.delete(`${this.deleteProfileByIdUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}deleteProfileByName(e){return this.http.delete(`${this.deleteProfileByNamedUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(n.a),r.Qb(o.a))},e.\u0275prov=r.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},qggS:function(e,t,i){"use strict";i.r(t),i.d(t,"MetadataModule",function(){return it});var n=i("ofXK"),c=i("3Pt+"),r=i("tyNb"),o=i("fXoL");let s=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Cb({type:e,selectors:[["app-metadata"]],decls:17,vars:0,consts:[[1,"card"],[1,"card-header"],[1,"nav","nav-tabs","card-header-tabs","font-weight-bold"],[1,"nav-item"],["routerLink","./device-service-list","routerLinkActive","active",1,"nav-link"],["routerLink","./device-center","routerLinkActive","active",1,"nav-link"],["routerLink","./device-profile-center","routerLinkActive","active",1,"nav-link"],["routerLink","./provision-watcher-center","routerLinkActive","active",1,"nav-link"],[1,"card-body"]],template:function(e,t){1&e&&(o.Lb(0,"div",0),o.Lb(1,"div",1),o.Lb(2,"ul",2),o.Lb(3,"li",3),o.Lb(4,"a",4),o.mc(5,"Device Service"),o.Kb(),o.Kb(),o.Lb(6,"li",3),o.Lb(7,"a",5),o.mc(8,"Device"),o.Kb(),o.Kb(),o.Lb(9,"li",3),o.Lb(10,"a",6),o.mc(11,"Device Profile"),o.Kb(),o.Kb(),o.Lb(12,"li",3),o.Lb(13,"a",7),o.mc(14,"Provision Watcher"),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(15,"div",8),o.Jb(16,"router-outlet"),o.Kb(),o.Kb())},directives:[r.h,r.g,r.j],styles:[".active-link[_ngcontent-%COMP%]{color:#922c48;background-color:rgba(146,44,72,.4)!important}"]}),e})();var a=i("limL"),b=i("hsl2");function l(e,t){if(1&e&&(o.Lb(0,"p"),o.mc(1),o.Kb()),2&e){const e=o.Vb().$implicit;o.xb(1),o.nc(e.description)}}function d(e,t){1&e&&(o.Lb(0,"p",19),o.mc(1,"no description."),o.Kb())}function m(e,t){if(1&e&&(o.Lb(0,"span",20),o.mc(1),o.Kb()),2&e){const e=o.Vb().$implicit;o.xb(1),o.nc(e.adminState)}}function v(e,t){if(1&e&&(o.Lb(0,"span",21),o.mc(1),o.Kb()),2&e){const e=o.Vb().$implicit;o.xb(1),o.nc(e.adminState)}}function p(e,t){if(1&e){const e=o.Mb();o.Lb(0,"a",22),o.Tb("click",function(){o.gc(e);const t=o.Vb().$implicit;return o.Vb().associatedDevicesSkip(t.name)}),o.Jb(1,"i",23),o.mc(2),o.Kb()}if(2&e){const e=o.Vb().$implicit,t=o.Vb();o.xb(2),o.oc(" Associated Devices \xa0 ",t.associatedDevices.get(e.name),"")}}function h(e,t){if(1&e){const e=o.Mb();o.Lb(0,"li",3),o.Lb(1,"div",4),o.Lb(2,"div",5),o.Jb(3,"i",6),o.Kb(),o.Lb(4,"div",7),o.Lb(5,"div",8),o.Lb(6,"h5",9),o.mc(7),o.Kb(),o.Kb(),o.kc(8,l,2,1,"p",10),o.kc(9,d,2,0,"ng-template",null,11,o.lc),o.Lb(11,"div"),o.Lb(12,"span",12),o.mc(13),o.Kb(),o.Lb(14,"span",13),o.kc(15,m,2,1,"span",14),o.kc(16,v,2,1,"span",15),o.Kb(),o.kc(17,p,3,1,"a",16),o.Lb(18,"span",17),o.Tb("click",function(){o.gc(e);const i=t.$implicit;return o.Vb().edit(i)}),o.Jb(19,"i",18),o.mc(20," Setting"),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb()}if(2&e){const e=t.$implicit,i=o.fc(10),n=o.Vb();o.xb(7),o.nc(e.name),o.xb(1),o.Yb("ngIf",e.description)("ngIfElse",i),o.xb(5),o.oc("Port ",n.getSvcPort(e.baseAddress),""),o.xb(1),o.Yb("ngSwitch",e.adminState),o.xb(1),o.Yb("ngSwitchCase","UNLOCKED"),o.xb(2),o.Yb("ngIf",n.associatedDevices.size)}}function u(e,t){if(1&e){const e=o.Mb();o.Lb(0,"div",24),o.Lb(1,"div",25),o.Jb(2,"i",26),o.Lb(3,"span"),o.mc(4),o.Kb(),o.Lb(5,"button",27),o.Tb("click",function(){return o.gc(e),o.Vb().updateSvc()}),o.mc(6,"Save"),o.Kb(),o.Kb(),o.Lb(7,"div",28),o.Lb(8,"form"),o.Lb(9,"div",29),o.Lb(10,"label",30),o.mc(11,"Description"),o.Kb(),o.Lb(12,"div",31),o.Lb(13,"input",32),o.Tb("ngModelChange",function(t){return o.gc(e),o.Vb().deviceSvcSelected.description=t}),o.Kb(),o.Kb(),o.Kb(),o.Lb(14,"div",29),o.Lb(15,"label",33),o.mc(16,"AdminState"),o.Kb(),o.Lb(17,"div",31),o.Lb(18,"select",34),o.Tb("ngModelChange",function(t){return o.gc(e),o.Vb().deviceSvcSelected.adminState=t}),o.Lb(19,"option",35),o.mc(20,"UNLOCKED"),o.Kb(),o.Lb(21,"option",36),o.mc(22,"LOCKED"),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb()}if(2&e){const e=o.Vb();o.xb(4),o.oc("edit ",e.deviceSvcSelected.name,""),o.xb(9),o.Yb("ngModel",e.deviceSvcSelected.description),o.xb(5),o.Yb("ngModel",e.deviceSvcSelected.adminState)}}let f=(()=>{class e{constructor(e,t,i,n){this.metaSvc=e,this.msgSvc=t,this.router=i,this.route=n,this.deviceServiceList=[],this.associatedDevices=new Map}ngOnInit(){this.metaSvc.allDeviceServices().subscribe(e=>{this.deviceServiceList=e.services,this.deviceServiceList.forEach(e=>{this.metaSvc.findDevicesByServiceName(0,20,e.name).subscribe(t=>{this.associatedDevices.set(e.name,t.devices.length>20?"20+":String(t.devices.length))})})})}getSvcPort(e){return new URL(e).port}edit(e){this.deviceSvcSelected=e}updateSvc(){this.metaSvc.updateDeviceService(this.deviceSvcSelected).subscribe(()=>{var e;this.msgSvc.success("update device service","name: "+(null===(e=this.deviceSvcSelected)||void 0===e?void 0:e.name)),this.deviceSvcSelected=void 0})}associatedDevicesSkip(e){this.router.navigate(["../device-center"],{queryParams:{svcName:e},relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(a.a),o.Ib(b.a),o.Ib(r.e),o.Ib(r.a))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-device-service-media-list"]],decls:3,vars:2,consts:[[1,"list-group","p-0"],["class","list-group-item list-group-item-action list-group-item-light",4,"ngFor","ngForOf"],["class","card mt-3",4,"ngIf"],[1,"list-group-item","list-group-item-action","list-group-item-light"],[1,"media"],[1,"align-self-center","mr-3"],[1,"fa","fa-tags","fa-2x","text-secondary"],[1,"media-body"],[1,"mt-0","mb-1"],[1,"d-inline","mr-3","align-middle","text-dark"],[4,"ngIf","ngIfElse"],["nodesc",""],[1,"badge","badge-info","mr-3"],[3,"ngSwitch"],["class","badge badge-success mr-3",4,"ngSwitchCase"],["class","badge badge-danger mr-3",4,"ngSwitchDefault"],["class","badge badge-primary","role","button",3,"click",4,"ngIf"],["role","button",1,"badge","badge-secondary","float-right",3,"click"],[1,"fa","fa-cog"],[1,"my-1"],[1,"badge","badge-success","mr-3"],[1,"badge","badge-danger","mr-3"],["role","button",1,"badge","badge-primary",3,"click"],[1,"fa","fa-sitemap"],[1,"card","mt-3"],[1,"card-header"],[1,"fa","fa-edit","mr-1","text-danger"],[1,"btn","btn-success","btn-sm","float-right",3,"click"],[1,"card-body"],[1,"form-group","row"],["for","deviceDesc",1,"col-md-2","col-form-label"],[1,"col-md-10"],["type","text","name","deviceSvcDescription",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],["name","deviceSvcAdminState",1,"form-control",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"]],template:function(e,t){1&e&&(o.Lb(0,"ul",0),o.kc(1,h,21,7,"li",1),o.Kb(),o.kc(2,u,23,3,"div",2)),2&e&&(o.xb(1),o.Yb("ngForOf",t.deviceServiceList),o.xb(1),o.Yb("ngIf",t.deviceSvcSelected))},directives:[n.j,n.k,n.l,n.m,n.n,c.n,c.e,c.f,c.a,c.d,c.g,c.l,c.h,c.m],styles:[""]}),e})(),g=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Cb({type:e,selectors:[["app-device-center"]],decls:1,vars:0,template:function(e,t){1&e&&o.Jb(0,"router-outlet")},directives:[r.j],styles:[""]}),e})();var L=i("7PPe");function K(e,t){if(1&e&&(o.Lb(0,"span"),o.Lb(1,"span",48),o.mc(2,"DeviceService"),o.Kb(),o.Lb(3,"span",49),o.mc(4),o.Kb(),o.Lb(5,"span"),o.mc(6,"Associated Device List"),o.Kb(),o.Kb()),2&e){const e=o.Vb();o.xb(4),o.nc(e.associatedSvcName)}}function S(e,t){if(1&e&&(o.Lb(0,"span"),o.Lb(1,"span",48),o.mc(2,"DeviceProfile"),o.Kb(),o.Lb(3,"span",49),o.mc(4),o.Kb(),o.Lb(5,"span"),o.mc(6,"Associated Device List"),o.Kb(),o.Kb()),2&e){const e=o.Vb();o.xb(4),o.nc(e.associatedProfileName)}}function x(e,t){1&e&&(o.Lb(0,"span"),o.mc(1,"Device List"),o.Kb())}function y(e,t){if(1&e&&(o.Lb(0,"span",60),o.mc(1),o.Kb()),2&e){const e=o.Vb().$implicit;o.xb(1),o.nc(e.adminState)}}function P(e,t){if(1&e&&(o.Lb(0,"span",61),o.mc(1),o.Kb()),2&e){const e=o.Vb().$implicit;o.xb(1),o.nc(e.adminState)}}function C(e,t){if(1&e&&(o.Lb(0,"span",60),o.mc(1),o.Kb()),2&e){const e=o.Vb().$implicit;o.xb(1),o.oc(" ",e.operatingState,"")}}function k(e,t){if(1&e&&(o.Lb(0,"span",61),o.mc(1),o.Kb()),2&e){const e=o.Vb().$implicit;o.xb(1),o.oc(" ",e.operatingState,"")}}const D=function(e){return{profileName:e}};function N(e,t){if(1&e){const e=o.Mb();o.Lb(0,"tr"),o.Lb(1,"td"),o.Lb(2,"input",19),o.Tb("click",function(i){o.gc(e);const n=t.$implicit;return o.Vb().selectOne(i,n)}),o.Kb(),o.Kb(),o.Lb(3,"td",50),o.mc(4),o.Kb(),o.Lb(5,"td",50),o.mc(6),o.Kb(),o.Lb(7,"td"),o.mc(8),o.Kb(),o.Lb(9,"td"),o.mc(10),o.Kb(),o.Lb(11,"td"),o.Lb(12,"span",51),o.kc(13,y,2,1,"span",52),o.kc(14,P,2,1,"span",53),o.Kb(),o.Kb(),o.Lb(15,"td",54),o.Lb(16,"span",51),o.kc(17,C,2,1,"span",52),o.kc(18,k,2,1,"span",53),o.Kb(),o.Kb(),o.Lb(19,"td",54),o.Lb(20,"span",55),o.Tb("click",function(){o.gc(e);const i=t.$implicit;return o.Vb().checkDeviceCommand(i)}),o.Jb(21,"i",56),o.Kb(),o.Kb(),o.Lb(22,"td",54),o.Lb(23,"span",55),o.Tb("click",function(){o.gc(e);const i=t.$implicit;return o.Vb().checkAutoEvent(i)}),o.Jb(24,"i",57),o.Kb(),o.Kb(),o.Lb(25,"td"),o.Lb(26,"a",58),o.mc(27),o.Kb(),o.Kb(),o.Lb(28,"td"),o.Lb(29,"a",59),o.mc(30),o.Kb(),o.Kb(),o.Kb()}if(2&e){const e=t.$implicit,i=o.Vb();o.Ab("table-active",i.isChecked(e.id)||i.associatedCmdDeviceName===e.name||i.associatedAutoEventsDeviceName===e.name),o.xb(2),o.Yb("checked",i.isChecked(e.id)),o.xb(2),o.nc(e.id),o.xb(2),o.nc(e.name),o.xb(2),o.nc(e.description),o.xb(2),o.nc(e.labels),o.xb(2),o.Yb("ngSwitch",e.adminState),o.xb(1),o.Yb("ngSwitchCase","UNLOCKED"),o.xb(3),o.Yb("ngSwitch",e.operatingState),o.xb(1),o.Yb("ngSwitchCase","UP"),o.xb(3),o.Ab("badge-danger",i.associatedCmdDeviceName===e.name),o.xb(3),o.Ab("badge-danger",i.associatedAutoEventsDeviceName===e.name),o.xb(3),o.Yb("queryParams",o.dc(18,D,e.profileName)),o.xb(1),o.nc(e.profileName),o.xb(3),o.nc(e.serviceName)}}function I(e,t){if(1&e&&(o.Lb(0,"tr"),o.Lb(1,"td"),o.mc(2),o.Kb(),o.Lb(3,"td"),o.Lb(4,"span",70),o.mc(5),o.Kb(),o.Kb(),o.Lb(6,"td"),o.Lb(7,"span",71),o.mc(8),o.Kb(),o.Kb(),o.Kb()),2&e){const e=t.$implicit;o.xb(2),o.nc(e.sourceName),o.xb(3),o.nc(e.interval),o.xb(3),o.nc(e.onChange)}}function M(e,t){if(1&e&&(o.Lb(0,"div"),o.Lb(1,"div",64),o.Lb(2,"div",65),o.Lb(3,"span",66),o.Jb(4,"i",57),o.Kb(),o.Lb(5,"span",67),o.mc(6),o.Kb(),o.mc(7," Associated AutoEvents "),o.Kb(),o.Lb(8,"div",68),o.Lb(9,"div",15),o.Lb(10,"table",16),o.Lb(11,"thead",17),o.Lb(12,"th",18),o.mc(13,"Resource"),o.Kb(),o.Lb(14,"th",18),o.mc(15,"Interval"),o.Kb(),o.Lb(16,"th",18),o.mc(17,"Onchange"),o.Kb(),o.Kb(),o.Lb(18,"tbody"),o.kc(19,I,9,3,"tr",69),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb()),2&e){const e=o.Vb(2);o.xb(6),o.oc(" ",e.associatedAutoEventsDeviceName,""),o.xb(13),o.Yb("ngForOf",e.autoEvents)}}function O(e,t){if(1&e&&(o.Lb(0,"div",64),o.Lb(1,"div",65),o.Lb(2,"span",66),o.Jb(3,"i",57),o.Kb(),o.Lb(4,"span",67),o.mc(5),o.Kb(),o.mc(6," Associated AutoEvents "),o.Kb(),o.Lb(7,"div",72),o.Lb(8,"h5",73),o.Jb(9,"i",43),o.mc(10," no associated AutoEvents"),o.Kb(),o.Kb(),o.Kb()),2&e){const e=o.Vb(2);o.xb(5),o.oc(" ",e.associatedAutoEventsDeviceName,"")}}function E(e,t){if(1&e&&(o.Lb(0,"div"),o.kc(1,M,20,2,"div",62),o.kc(2,O,11,1,"ng-template",null,63,o.lc),o.Kb()),2&e){const e=o.fc(3),t=o.Vb();o.xb(1),o.Yb("ngIf",t.autoEvents)("ngIfElse",e)}}function A(e,t){1&e&&o.Jb(0,"div")}function T(e,t){if(1&e&&(o.Lb(0,"div"),o.kc(1,A,1,0,"div",74),o.Kb()),2&e){const e=o.Vb(),t=o.fc(78),i=o.fc(80);o.xb(1),o.Yb("ngIf",e.deviceCoreCommand)("ngIfThen",t)("ngIfElse",i)}}function w(e,t){if(1&e){const e=o.Mb();o.Lb(0,"li",84),o.Tb("click",function(){o.gc(e);const i=t.$implicit;return o.Vb(2).selectCmd(i)}),o.mc(1),o.Kb()}if(2&e){const e=t.$implicit,i=o.Vb(2);o.Ab("list-group-item-info",(null==i.selectedCmd?null:i.selectedCmd.name)===e.name),o.xb(1),o.nc(e.name)}}function Y(e,t){if(1&e){const e=o.Mb();o.Lb(0,"button",96),o.Tb("click",function(){return o.gc(e),o.Vb(3).issueGetCmd()}),o.mc(1,"try"),o.Kb()}}function V(e,t){1&e&&o.Jb(0,"div")}function U(e,t){if(1&e&&(o.Lb(0,"span",101),o.mc(1),o.Kb()),2&e){const e=o.Vb(4);o.xb(1),o.oc(" ",e.cmdGetResponse,"")}}function B(e,t){if(1&e&&(o.Lb(0,"pre",102),o.mc(1),o.Kb()),2&e){const e=o.Vb(4);o.xb(1),o.nc(e.cmdGetResponseRaw)}}function J(e,t){if(1&e&&(o.Lb(0,"div"),o.Lb(1,"span",97),o.mc(2,"Response:"),o.Kb(),o.kc(3,U,2,1,"span",98),o.Kb(),o.Lb(4,"div",99),o.Lb(5,"span",97),o.mc(6,"ResponseRaw:"),o.Kb(),o.kc(7,B,2,1,"pre",100),o.Kb()),2&e){const e=o.Vb(3);o.xb(3),o.Yb("ngIf",e.cmdGetResponse),o.xb(4),o.Yb("ngIf",e.cmdGetResponseRaw)}}function j(e,t){1&e&&(o.Lb(0,"h6",73),o.Jb(1,"i",43),o.mc(2," no Get method"),o.Kb())}function F(e,t){if(1&e){const e=o.Mb();o.Lb(0,"button",96),o.Tb("click",function(){return o.gc(e),o.Vb(3).issueSetCmd()}),o.mc(1,"try"),o.Kb()}}function R(e,t){1&e&&o.Jb(0,"div")}function q(e,t){if(1&e&&(o.Lb(0,"div"),o.Lb(1,"label",109),o.mc(2),o.Kb(),o.Lb(3,"select",110),o.Lb(4,"option",111),o.mc(5,"false"),o.Kb(),o.Lb(6,"option",111),o.mc(7,"true"),o.Kb(),o.Kb(),o.Kb()),2&e){const e=o.Vb().$implicit;o.xb(1),o.Zb("for",e.resourceName),o.xb(1),o.oc(" ",e.resourceName," "),o.xb(1),o.Zb("id",e.resourceName),o.Zb("name",e.resourceName),o.xb(1),o.Yb("ngValue",!1),o.xb(2),o.Yb("ngValue",!0)}}function G(e,t){if(1&e&&(o.Lb(0,"label",109),o.mc(1),o.Kb(),o.Jb(2,"input",112)),2&e){const e=o.Vb().$implicit;o.Zb("for",e.resourceName),o.xb(1),o.nc(e.resourceName),o.xb(1),o.Zb("id",e.resourceName),o.Zb("name",e.resourceName),o.ac("placeholder","valueType: ",e.valueType,"")}}function W(e,t){if(1&e&&(o.Lb(0,"div",107),o.kc(1,q,8,6,"div",62),o.kc(2,G,3,5,"ng-template",null,108,o.lc),o.Kb()),2&e){const e=t.$implicit,i=o.fc(3);o.xb(1),o.Yb("ngIf","Bool"==e.valueType)("ngIfElse",i)}}function Z(e,t){if(1&e&&(o.Lb(0,"div",105),o.kc(1,W,4,2,"div",106),o.Kb()),2&e){const e=o.Vb(5);o.xb(1),o.Yb("ngForOf",e.selectedCmdSetParams)}}function _(e,t){if(1&e&&(o.Lb(0,"div",79),o.Lb(1,"div",65),o.mc(2,"Set Parameters"),o.Kb(),o.Lb(3,"div",76),o.kc(4,Z,2,1,"div",104),o.Kb(),o.Kb()),2&e){const e=o.Vb(4);o.xb(4),o.Yb("ngIf",e.selectedCmd)}}function X(e,t){if(1&e&&(o.Lb(0,"span",101),o.mc(1),o.Kb()),2&e){const e=o.Vb(4);o.xb(1),o.nc(e.cmdSetResponse)}}function z(e,t){if(1&e&&(o.Lb(0,"pre",102),o.mc(1),o.Kb()),2&e){const e=o.Vb(4);o.xb(1),o.nc(e.cmdSetResponseRaw)}}function H(e,t){if(1&e&&(o.kc(0,_,5,1,"div",103),o.Lb(1,"div"),o.Lb(2,"div"),o.Lb(3,"span",97),o.mc(4," Response:"),o.Kb(),o.kc(5,X,2,1,"span",98),o.Kb(),o.Lb(6,"div",99),o.Lb(7,"span",97),o.mc(8," ResponseRaw:"),o.Kb(),o.kc(9,z,2,1,"pre",100),o.Kb(),o.Kb()),2&e){const e=o.Vb(3);o.Yb("ngIf",e.selectedCmdSetParams),o.xb(5),o.Yb("ngIf",e.cmdSetResponse),o.xb(4),o.Yb("ngIf",e.cmdSetResponseRaw)}}function Q(e,t){1&e&&(o.Lb(0,"h6",73),o.Jb(1,"i",43),o.mc(2," no Set method"),o.Kb())}function ee(e,t){if(1&e&&(o.Lb(0,"div",0),o.Lb(1,"div",65),o.Lb(2,"span",85),o.Jb(3,"i",86),o.mc(4),o.Kb(),o.Lb(5,"span"),o.mc(6,"Get and Set"),o.Kb(),o.Kb(),o.Lb(7,"div",87),o.Lb(8,"div",77),o.Lb(9,"div",88),o.Lb(10,"div",79),o.Lb(11,"div",65),o.mc(12," Get "),o.kc(13,Y,2,0,"button",89),o.Kb(),o.Lb(14,"div",90),o.kc(15,V,1,0,"div",74),o.kc(16,J,8,2,"ng-template",null,91,o.lc),o.kc(18,j,3,0,"ng-template",null,92,o.lc),o.Kb(),o.Kb(),o.Kb(),o.Lb(20,"div",93),o.Lb(21,"div",0),o.Lb(22,"div",65),o.mc(23," Set "),o.kc(24,F,2,0,"button",89),o.Kb(),o.Lb(25,"div",76),o.kc(26,R,1,0,"div",74),o.kc(27,H,10,3,"ng-template",null,94,o.lc),o.kc(29,Q,3,0,"ng-template",null,95,o.lc),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb()),2&e){const e=o.fc(17),t=o.fc(19),i=o.fc(28),n=o.fc(30),c=o.Vb(2);o.xb(4),o.oc(" ",c.selectedCmd.name," method:"),o.xb(9),o.Yb("ngIf",c.selectedCmd.get),o.xb(2),o.Yb("ngIf",c.selectedCmd.get)("ngIfThen",e)("ngIfElse",t),o.xb(9),o.Yb("ngIf",c.selectedCmd.set),o.xb(2),o.Yb("ngIf",c.selectedCmd.set)("ngIfThen",i)("ngIfElse",n)}}function te(e,t){if(1&e&&(o.Lb(0,"div",64),o.Lb(1,"div",65),o.Lb(2,"span",66),o.Jb(3,"i",56),o.Kb(),o.Lb(4,"span",75),o.mc(5),o.Kb(),o.mc(6," Associated Commands "),o.Kb(),o.Lb(7,"div",76),o.Lb(8,"div",77),o.Lb(9,"div",78),o.Lb(10,"div",79),o.Lb(11,"div",1),o.mc(12," Command Name List "),o.Kb(),o.Lb(13,"div",68),o.Lb(14,"ul",80),o.kc(15,w,2,3,"li",81),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(16,"div",82),o.kc(17,ee,31,9,"div",83),o.Kb(),o.Kb(),o.Kb(),o.Kb()),2&e){const e=o.Vb();o.xb(5),o.nc(e.associatedCmdDeviceName),o.xb(10),o.Yb("ngForOf",e.deviceCoreCommand),o.xb(2),o.Yb("ngIf",e.selectedCmd)}}function ie(e,t){if(1&e&&(o.Lb(0,"div",64),o.Lb(1,"div",65),o.Lb(2,"span",66),o.Jb(3,"i",56),o.Kb(),o.Lb(4,"span",113),o.mc(5),o.Kb(),o.mc(6," Associated Commands "),o.Kb(),o.Lb(7,"div",72),o.Lb(8,"h5",73),o.Jb(9,"i",43),o.mc(10," no associated commands"),o.Kb(),o.Kb(),o.Kb()),2&e){const e=o.Vb();o.xb(5),o.nc(e.associatedCmdDeviceName)}}let ne=(()=>{class e{constructor(e,t,i,n,c){this.metaSvc=e,this.cmdSvc=t,this.msgSvc=i,this.route=n,this.router=c,this.deviceList=[],this.associatedSvcName="",this.associatedProfileName="",this.selectedDevice=[],this.isCheckedAll=!1,this.selectedCmd={},this.selectedCmdSetParams=[],this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.route.queryParams.subscribe(e=>e.svcName?(this.associatedSvcName=e.svcName,void this.getDeviceListByAssociatedSvc(this.associatedSvcName)):e.profileName?(this.associatedProfileName=e.profileName,void this.getDeviceListByAssociatedProfile(this.associatedProfileName)):(this.associatedSvcName="",this.associatedProfileName="",void this.getDeviceListPagination()))}renderPopoverComponent(){setTimeout(()=>{$('[data-toggle="popover"]').popover({trigger:"hover"})},250)}getDeviceList(){""===this.associatedSvcName?""===this.associatedProfileName?this.getDeviceListPagination():this.getDeviceListByAssociatedProfile(this.associatedSvcName):this.getDeviceListByAssociatedSvc(this.associatedSvcName)}getDeviceListByAssociatedSvc(e){this.metaSvc.findDevicesByServiceName(this.pageOffset,this.pageLimit,e).subscribe(e=>this.deviceList=e.devices)}getDeviceListByAssociatedProfile(e){this.metaSvc.findDevicesByProfileName(this.pageOffset,this.pageLimit,e).subscribe(e=>this.deviceList=e.devices)}getDeviceListPagination(){this.metaSvc.allDevicesPagination(this.pageOffset,this.pageLimit).subscribe(e=>{this.deviceList=e.devices})}refresh(){this.associatedProfileName="",this.associatedSvcName="",this.metaSvc.allDevicesPagination(0,this.pageLimit).subscribe(e=>{this.deviceList=e.devices,this.msgSvc.success("refresh"),this.resetPagination()})}edit(){this.router.navigate(["../edit-device"],{relativeTo:this.route,queryParams:{deviceName:this.selectedDevice[0].name}})}deleteConfirm(){$("#deleteConfirmDialog").modal("show")}delete(){this.selectedDevice.forEach((e,t)=>{this.metaSvc.deleteOneDeviceByName(e.name).subscribe(()=>{this.selectedDevice.splice(t,1),this.deviceList.forEach((t,i)=>{if(t.id===e.id)return this.deviceList.splice(i,1),void this.msgSvc.success("remove device "," Name: "+t.name)})})}),this.associatedCmdDeviceName=void 0,this.associatedAutoEventsDeviceName=void 0,$("#deleteConfirmDialog").modal("hide")}checkAutoEvent(e){this.associatedAutoEventsDeviceName=e.name,this.autoEvents=e.autoEvents,this.associatedCmdDeviceName=""}selectAll(e){if(e.target.checked)return this.selectedDevice=[],this.deviceList.forEach(e=>{this.selectedDevice.push(e),this.isChecked(e.id)}),void(this.isCheckedAll=!0);this.isCheckedAll=!1,this.selectedDevice=[],this.deviceList.forEach(e=>{this.isChecked(e.id)})}isChecked(e){return this.selectedDevice.findIndex(t=>t.id===e)>=0}selectOne(e,t){if(e.target.checked)return this.selectedDevice.push(t),void(this.selectedDevice.length===this.deviceList.length&&(this.isCheckedAll=!0));this.isCheckedAll=!1,this.isChecked(t.id),this.selectedDevice.splice(this.selectedDevice.indexOf(t),1)}checkDeviceCommand(e){this.resetResponse(),this.metaSvc.findProfileByName(e.profileName).subscribe(e=>this.associateDeviceProfile=e.profile),this.cmdSvc.findDeviceAssociatedCommnadsByDeviceName(e.name).subscribe(t=>{this.associatedAutoEventsDeviceName="",this.associatedCmdDeviceName=t.deviceCoreCommand.deviceName,this.associatedCmdDeviceId=e.id,this.deviceCoreCommand=t.deviceCoreCommand.coreCommands,this.selectedCmd=this.deviceCoreCommand[0],this.selectedCmdSetParams=this.selectedCmd.parameters})}selectCmd(e){this.selectedCmd=e,this.selectedCmdSetParams=this.selectedCmd.parameters,this.resetResponse()}resetResponse(){this.cmdGetResponse="",this.cmdGetResponseRaw="",this.cmdSetResponse="",this.cmdSetResponseRaw="",this.cmdBinaryResponse=!0,this.cmdBinaryResponseURL=""}issueGetCmd(){var e;this.cmdSvc.issueGetCmd(this.associatedCmdDeviceName,null===(e=this.selectedCmd)||void 0===e?void 0:e.name).subscribe(e=>{this.cmdGetResponseRaw=JSON.stringify(e.event.readings,null,3);let t=[];e.event.readings.forEach(e=>{t.push(e.value)}),this.cmdGetResponse=t.join(",")})}issueSetCmd(){var e,t;let i={};null===(e=this.selectedCmdSetParams)||void 0===e||e.forEach(function(e){i[e.resourceName]=$("#"+e.resourceName).val().trim()}),this.cmdSvc.issueSetCmd(this.associatedCmdDeviceName,null===(t=this.selectedCmd)||void 0===t?void 0:t.name,i).subscribe(e=>{this.cmdSetResponseRaw=JSON.stringify(e,null,3),this.cmdSetResponse=e.message})}onPageSelected(){this.resetPagination(),this.setPagination(),this.getDeviceList()}prePage(){this.setPagination(-1),this.getDeviceList()}nextPage(){this.setPagination(1),this.getDeviceList()}setPagination(e){1===e?this.pagination+=1:-1===e&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit}resetPagination(){this.pagination=1}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(a.a),o.Ib(L.a),o.Ib(b.a),o.Ib(r.a),o.Ib(r.e))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-device-list"]],decls:95,vars:12,consts:[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","text-danger","mr-2"],[4,"ngIf"],[1,"card-body","p-0","position-relative"],[1,"bg-light","px-2","py-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","mr-1"],["type","button","routerLink","../add-device",1,"btn","btn-info"],[1,"fa","fa-plus","mr-1"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-edit","mr-1"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash","mr-1"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],["type","checkbox","role","button",3,"checked","click"],[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"form-control",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left"],[1,"page-item"],[1,"fa","fa-angle-double-right"],["hasAssociatedCommand",""],["noAssociatedCommand",""],["id","deleteConfirmDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteConfirmDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteConfirmDialogLabel",1,"modal-title","text-danger"],[1,"fa","fa-warning"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"mr-1"],[1,"text-danger","mr-1"],[1,"user-select-all"],[3,"ngSwitch"],["class","badge badge-success",4,"ngSwitchCase"],["class","badge badge-danger",4,"ngSwitchDefault"],[1,"text-center"],["role","button",1,"badge","badge-primary","text-light",3,"click"],[1,"fa","fa-terminal","font-weight-bolder"],[1,"fa","fa-calendar-check-o","font-weight-bolder"],["routerLink","../../device-profile-center",3,"queryParams"],["routerLink","../../device-service-list"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[4,"ngIf","ngIfElse"],["noAutoEvents",""],[1,"card","mt-3"],[1,"card-header"],[1,"badge","badge-danger","text-light"],[1,"text-primary","mx-2","font-weight-bold"],[1,"card-body","p-0"],[4,"ngFor","ngForOf"],[1,"badge","badge-secondary","badge-pill"],[1,""],[1,"card-body","text-center"],[1,"text-warning"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"text-primary","ml-2","font-weight-bold"],[1,"card-body"],[1,"row"],[1,"col-md-2","col-lg-2"],[1,"card","mb-2"],[1,"list-group","list-group-flush"],["role","button","class","list-group-item list-group-item-action",3,"list-group-item-info","click",4,"ngFor","ngForOf"],[1,"col-md-10","col-lg-10"],["class","card",4,"ngIf"],["role","button",1,"list-group-item","list-group-item-action",3,"click"],[1,"text-primary","font-weight-bold","mr-2"],[1,"fa","fa-thumb-tack","text-danger","mr-1"],[1,"card-body","px-2"],[1,"col-md-5","col-lg-5"],["class","btn btn-primary btn-sm float-right",3,"click",4,"ngIf"],[1,"card-body","overflow-auto"],["hasGetMethod",""],["noGetMethod",""],[1,"col-md-7","col-lg-7"],["hasSetMethod",""],["noSetMethod",""],[1,"btn","btn-primary","btn-sm","float-right",3,"click"],[1,"badge","badge-info"],["class","ml-2 text-primary",4,"ngIf"],[1,"mt-3"],["class","mt-2 bg-secondary p-2 text-light rounded",4,"ngIf"],[1,"ml-2","text-primary"],[1,"mt-2","bg-secondary","p-2","text-light","rounded"],["class","card mb-2",4,"ngIf"],["class","d-flex flex-column bd-highlight",4,"ngIf"],[1,"d-flex","flex-column","bd-highlight"],["class","form p-2 bd-highlight",4,"ngFor","ngForOf"],[1,"form","p-2","bd-highlight"],["valueTypeIsNotBool",""],[3,"for"],[1,"form-control","form-control-sm",3,"id","name"],[3,"ngValue"],[1,"form-control","form-control-sm",3,"id","name","placeholder"],[1,"text-primary","mx-1","font-weight-bold"]],template:function(e,t){1&e&&(o.Lb(0,"div",0),o.Lb(1,"div",1),o.Jb(2,"i",2),o.kc(3,K,7,1,"span",3),o.kc(4,S,7,1,"span",3),o.kc(5,x,2,0,"span",3),o.Kb(),o.Lb(6,"div",4),o.Lb(7,"div",5),o.Lb(8,"div",6),o.Lb(9,"button",7),o.Tb("click",function(){return t.refresh()}),o.Lb(10,"span"),o.Jb(11,"i",8),o.mc(12,"Refresh"),o.Kb(),o.Kb(),o.Lb(13,"button",9),o.Lb(14,"span"),o.Jb(15,"i",10),o.mc(16,"Add"),o.Kb(),o.Kb(),o.Lb(17,"button",11),o.Tb("click",function(){return t.edit()}),o.Lb(18,"span"),o.Jb(19,"i",12),o.mc(20,"Edit"),o.Kb(),o.Kb(),o.Lb(21,"button",13),o.Tb("click",function(){return t.deleteConfirm()}),o.Lb(22,"span"),o.Jb(23,"i",14),o.mc(24,"Delete"),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(25,"div",15),o.Lb(26,"table",16),o.Lb(27,"thead",17),o.Lb(28,"tr"),o.Lb(29,"th",18),o.Lb(30,"input",19),o.Tb("click",function(e){return t.selectAll(e)}),o.Kb(),o.Kb(),o.Lb(31,"th",18),o.mc(32,"ID"),o.Kb(),o.Lb(33,"th",18),o.mc(34,"Name"),o.Kb(),o.Lb(35,"th",18),o.mc(36,"Description"),o.Kb(),o.Lb(37,"th",18),o.mc(38,"Labels"),o.Kb(),o.Lb(39,"th",18),o.mc(40,"AdminState"),o.Kb(),o.Lb(41,"th",18),o.mc(42,"OperatingState"),o.Kb(),o.Lb(43,"th",18),o.mc(44,"Command"),o.Kb(),o.Lb(45,"th",18),o.mc(46,"AutoEvents"),o.Kb(),o.Lb(47,"th",18),o.mc(48,"AssociatedProfile"),o.Kb(),o.Lb(49,"th",18),o.mc(50,"AssociatedService"),o.Kb(),o.Kb(),o.Kb(),o.Lb(51,"tbody"),o.kc(52,N,31,20,"tr",20),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(53,"div",21),o.Lb(54,"nav",22),o.Lb(55,"ul",23),o.Lb(56,"li",24),o.Lb(57,"span",25),o.mc(58,"items per page"),o.Kb(),o.Kb(),o.Lb(59,"li",26),o.Lb(60,"select",27),o.Tb("ngModelChange",function(e){return t.pageLimit=e})("ngModelChange",function(){return t.onPageSelected()}),o.Lb(61,"option",28),o.mc(62,"5"),o.Kb(),o.Lb(63,"option",29),o.mc(64,"10"),o.Kb(),o.Lb(65,"option",30),o.mc(66,"20"),o.Kb(),o.Kb(),o.Kb(),o.Lb(67,"li",31),o.Lb(68,"button",32),o.Tb("click",function(){return t.prePage()}),o.Jb(69,"i",33),o.mc(70," Previous"),o.Kb(),o.Kb(),o.Lb(71,"li",34),o.Lb(72,"button",32),o.Tb("click",function(){return t.nextPage()}),o.mc(73,"Next "),o.Jb(74,"i",35),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.kc(75,E,4,2,"div",3),o.kc(76,T,2,3,"div",3),o.kc(77,te,18,3,"ng-template",null,36,o.lc),o.kc(79,ie,11,1,"ng-template",null,37,o.lc),o.Lb(81,"div",38),o.Lb(82,"div",39),o.Lb(83,"div",40),o.Lb(84,"div",41),o.Lb(85,"h5",42),o.Jb(86,"i",43),o.mc(87," Warning "),o.Kb(),o.Kb(),o.Lb(88,"div",44),o.mc(89," The data will be permanently erased!!! Are you sure to execute delete operation\uff1f "),o.Kb(),o.Lb(90,"div",45),o.Lb(91,"button",46),o.mc(92,"Cancel"),o.Kb(),o.Lb(93,"button",47),o.Tb("click",function(){return t.delete()}),o.mc(94,"Confirm"),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb()),2&e&&(o.xb(3),o.Yb("ngIf",""!==t.associatedSvcName),o.xb(1),o.Yb("ngIf",""!==t.associatedProfileName),o.xb(1),o.Yb("ngIf",""===t.associatedProfileName&&""===t.associatedSvcName),o.xb(12),o.Yb("disabled",1!==t.selectedDevice.length),o.xb(4),o.Yb("disabled",0===t.selectedDevice.length),o.xb(9),o.Yb("checked",t.isCheckedAll),o.xb(22),o.Yb("ngForOf",t.deviceList),o.xb(8),o.Yb("ngModel",t.pageLimit),o.xb(8),o.Yb("disabled",1===t.pagination),o.xb(4),o.Yb("disabled",t.pageLimit>t.deviceList.length),o.xb(3),o.Yb("ngIf",t.associatedAutoEventsDeviceName),o.xb(1),o.Yb("ngIf",t.associatedCmdDeviceName))},directives:[n.k,r.f,n.j,c.l,c.d,c.g,c.h,c.m,n.l,n.m,n.n,r.h],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),e})();function ce(e,t){if(1&e){const e=o.Mb();o.Lb(0,"tr"),o.Lb(1,"td"),o.Lb(2,"input",24),o.Tb("click",function(i){o.gc(e);const n=t.$implicit;return o.Vb().selectOneSvc(i,n.name)}),o.Kb(),o.Kb(),o.Lb(3,"td"),o.mc(4),o.Kb(),o.Lb(5,"td"),o.mc(6),o.Kb(),o.Lb(7,"td"),o.mc(8),o.Kb(),o.Lb(9,"td"),o.mc(10),o.Kb(),o.Lb(11,"td"),o.mc(12),o.Kb(),o.Lb(13,"td"),o.mc(14),o.Wb(15,"date"),o.Kb(),o.Lb(16,"td"),o.mc(17),o.Wb(18,"date"),o.Kb(),o.Kb()}if(2&e){const e=t.$implicit,i=o.Vb();o.Ab("table-active",i.isSvcChecked(e.name)),o.xb(2),o.Yb("checked",i.isSvcChecked(e.name)),o.xb(2),o.nc(e.id),o.xb(2),o.nc(e.name),o.xb(2),o.nc(e.description),o.xb(2),o.nc(e.labels),o.xb(2),o.nc(e.adminState),o.xb(2),o.nc(o.Xb(15,10,e.created,"yyyy-MM-dd hh:mm:ss")),o.xb(3),o.nc(o.Xb(18,13,e.modified,"yyyy-MM-dd hh:mm:ss"))}}let re=(()=>{class e{constructor(e){this.metaSvc=e,this.singleDeviceSvcSelectedEvent=new o.n,this.deviceServiceList=[],this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.findAllDeviceSvcPagination()}findAllDeviceSvcPagination(){this.metaSvc.findAllDeviceServicesPagination(this.pageOffset,this.pageLimit).subscribe(e=>{this.deviceServiceList=e.services})}onSingleDeviceSvcSelectedEmitter(){this.singleDeviceSvcSelectedEvent.emit(this.deviceSvcSelected)}isSvcChecked(e){var t;return(null===(t=this.deviceSvcSelected)||void 0===t?void 0:t.name)===e}selectOneSvc(e,t){let i=this;e.target.checked?this.deviceServiceList.forEach(function(e){e.name===t&&(i.deviceSvcSelected=e)}):this.deviceSvcSelected=void 0,this.onSingleDeviceSvcSelectedEmitter()}onPageSelected(){this.resetPagination(),this.setPagination(),this.findAllDeviceSvcPagination()}prePage(){this.setPagination(-1),this.findAllDeviceSvcPagination()}nextPage(){this.setPagination(1),this.findAllDeviceSvcPagination()}setPagination(e){1===e?this.pagination+=1:-1===e&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit}resetPagination(){this.pagination=1}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(a.a))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-device-service-list"]],inputs:{deviceSvcSelected:"deviceSvcSelected"},outputs:{singleDeviceSvcSelectedEvent:"singleDeviceSvcSelectedEvent"},decls:50,vars:4,consts:[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","mr-2","text-danger"],[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"form-control",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left"],[1,"page-item"],[1,"fa","fa-angle-double-right"],["type","checkbox","role","button",3,"checked","click"]],template:function(e,t){1&e&&(o.Lb(0,"div",0),o.Lb(1,"div",1),o.Jb(2,"i",2),o.Lb(3,"span"),o.mc(4,"Device Service List"),o.Kb(),o.Kb(),o.Lb(5,"div",3),o.Lb(6,"div",4),o.Lb(7,"table",5),o.Lb(8,"thead",6),o.Lb(9,"tr"),o.Lb(10,"th",7),o.mc(11,"#"),o.Kb(),o.Lb(12,"th",7),o.mc(13,"ID"),o.Kb(),o.Lb(14,"th",7),o.mc(15,"Name"),o.Kb(),o.Lb(16,"th",7),o.mc(17,"Description"),o.Kb(),o.Lb(18,"th",7),o.mc(19,"Labels"),o.Kb(),o.Lb(20,"th",7),o.mc(21,"AdminState"),o.Kb(),o.Lb(22,"th",7),o.mc(23,"Created"),o.Kb(),o.Lb(24,"th",7),o.mc(25,"Modified"),o.Kb(),o.Kb(),o.Kb(),o.Lb(26,"tbody"),o.kc(27,ce,19,16,"tr",8),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(28,"div",9),o.Lb(29,"nav",10),o.Lb(30,"ul",11),o.Lb(31,"li",12),o.Lb(32,"span",13),o.mc(33,"items per page"),o.Kb(),o.Kb(),o.Lb(34,"li",14),o.Lb(35,"select",15),o.Tb("ngModelChange",function(e){return t.pageLimit=e})("ngModelChange",function(){return t.onPageSelected()}),o.Lb(36,"option",16),o.mc(37,"5"),o.Kb(),o.Lb(38,"option",17),o.mc(39,"10"),o.Kb(),o.Lb(40,"option",18),o.mc(41,"20"),o.Kb(),o.Kb(),o.Kb(),o.Lb(42,"li",19),o.Lb(43,"button",20),o.Tb("click",function(){return t.prePage()}),o.Jb(44,"i",21),o.mc(45," Previous"),o.Kb(),o.Kb(),o.Lb(46,"li",22),o.Lb(47,"button",20),o.Tb("click",function(){return t.nextPage()}),o.mc(48,"Next "),o.Jb(49,"i",23),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb()),2&e&&(o.xb(27),o.Yb("ngForOf",t.deviceServiceList),o.xb(8),o.Yb("ngModel",t.pageLimit),o.xb(8),o.Yb("disabled",1===t.pagination),o.xb(4),o.Yb("disabled",t.pageLimit>t.deviceServiceList.length))},directives:[n.j,c.l,c.d,c.g,c.h,c.m],pipes:[n.d],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),e})();function oe(e,t){if(1&e){const e=o.Mb();o.Lb(0,"div",37),o.Lb(1,"div",38),o.Lb(2,"button",39),o.Tb("click",function(){return o.gc(e),o.Vb().refresh()}),o.Lb(3,"span"),o.Jb(4,"i",40),o.mc(5,"Refresh"),o.Kb(),o.Kb(),o.Lb(6,"button",41),o.Lb(7,"span"),o.Jb(8,"i",42),o.mc(9,"Add"),o.Kb(),o.Kb(),o.Lb(10,"button",43),o.Tb("click",function(){return o.gc(e),o.Vb().edit()}),o.Lb(11,"span"),o.Jb(12,"i",44),o.mc(13,"Edit"),o.Kb(),o.Kb(),o.Lb(14,"button",45),o.Tb("click",function(){return o.gc(e),o.Vb().deleteConfirm()}),o.Lb(15,"span"),o.Jb(16,"i",46),o.mc(17,"Delete"),o.Kb(),o.Kb(),o.Kb(),o.Kb()}if(2&e){const e=o.Vb();o.xb(10),o.Yb("disabled",1!==e.multiProfilesSelected.length),o.xb(4),o.Yb("disabled",0===e.multiProfilesSelected.length)}}function se(e,t){if(1&e){const e=o.Mb();o.Lb(0,"input",47),o.Tb("click",function(t){return o.gc(e),o.Vb().selectAll(t)}),o.Kb()}if(2&e){const e=o.Vb();o.Yb("checked",e.isCheckedAll)}}function ae(e,t){1&e&&(o.Lb(0,"th",8),o.mc(1,"AssociatedDevice"),o.Kb())}const be=function(e){return{profileName:e}};function le(e,t){if(1&e&&(o.Lb(0,"td",51),o.Lb(1,"a",52),o.Jb(2,"i",53),o.Kb(),o.Kb()),2&e){const e=o.Vb().$implicit;o.xb(1),o.Yb("queryParams",o.dc(1,be,e.name))}}function de(e,t){if(1&e){const e=o.Mb();o.Lb(0,"tr"),o.Lb(1,"td"),o.Lb(2,"input",48),o.Tb("click",function(i){o.gc(e);const n=t.$implicit;return o.Vb().selectOne(i,n.name)}),o.Kb(),o.Kb(),o.Lb(3,"td",49),o.mc(4),o.Kb(),o.Lb(5,"td",49),o.mc(6),o.Kb(),o.Lb(7,"td"),o.mc(8),o.Kb(),o.kc(9,le,3,3,"td",50),o.Lb(10,"td"),o.mc(11),o.Kb(),o.Lb(12,"td"),o.mc(13),o.Kb(),o.Lb(14,"td"),o.mc(15),o.Kb(),o.Kb()}if(2&e){const e=t.$implicit,i=o.Vb();o.Ab("table-active",i.isChecked(e.name)),o.xb(2),o.Zb("value",e.name),o.Yb("checked",i.isChecked(e.name)),o.xb(2),o.nc(e.id),o.xb(2),o.nc(e.name),o.xb(2),o.nc(e.description),o.xb(1),o.Yb("ngIf",i.associatedDeviceColumn),o.xb(2),o.nc(e.labels),o.xb(2),o.nc(e.manufacturer),o.xb(2),o.nc(e.model)}}let me=(()=>{class e{constructor(e,t,i,n){this.metaSvc=e,this.msgSvc=t,this.route=i,this.router=n,this.associatedDeviceColumn=!0,this.toolbars=!0,this.enableSelectAll=!0,this.singleProfileSelectedEvent=new o.n,this.profileList=[],this.multiProfilesSelected=[],this.isCheckedAll=!1,this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.route.queryParams.subscribe(e=>{e.profileName?this.metaSvc.findProfileByName(e.profileName).subscribe(e=>{this.profileList=[],this.profileList.push(e.profile)}):this.findAllDeviceProfilesPagination()})}findAllDeviceProfilesPagination(){this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(e=>{this.profileList=e.profiles})}onSingleProfileSelectedEmitter(){this.singleProfileSelectedEvent.emit(this.singleProfileSelected)}refresh(){this.metaSvc.allDeviceProfolesPagination(0,this.pageLimit).subscribe(e=>{this.profileList=e.profiles,this.msgSvc.success("refresh"),this.pagination=1,this.resetCheckbox()})}onPageSelected(){this.resetPagination(),this.setPagination(),this.findAllDeviceProfilesPagination()}prePage(){this.setPagination(-1),this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(e=>{this.profileList=e.profiles})}nextPage(){this.setPagination(1),this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(e=>{this.profileList=e.profiles})}setPageLimit(e){this.pageLimit=e}setPagination(e){1===e?this.pagination+=1:-1===e&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit,this.resetCheckbox()}resetPagination(){this.pagination=1,this.resetCheckbox()}resetCheckbox(){this.isCheckedAll=!1,this.multiProfilesSelected=[]}edit(){this.router.navigate(["../edit-profile"],{relativeTo:this.route,queryParams:{profileName:this.multiProfilesSelected[0]}})}deleteConfirm(){$("#deleteConfirmDialog").modal("show")}delete(){this.multiProfilesSelected.forEach(e=>{this.metaSvc.deleteProfileByName(e).subscribe(()=>{this.multiProfilesSelected=[],this.profileList.forEach((t,i)=>{t.name==e&&(this.profileList.splice(i,1),this.msgSvc.success("delete","  Name: "+t.name))})})}),$("#deleteConfirmDialog").modal("hide")}isSingleProfileChecked(e){var t;return(null===(t=this.singleProfileSelected)||void 0===t?void 0:t.name)===e}selectSingleProfile(e,t){e.target.checked?this.profileList.forEach(e=>{e.name===t&&(this.singleProfileSelected=e)}):this.singleProfileSelected=void 0,this.onSingleProfileSelectedEmitter()}selectAll(e){if(e.target.checked)return this.multiProfilesSelected=[],this.profileList.forEach(e=>{this.multiProfilesSelected.push(e.name),this.isChecked(e.name)}),void(this.isCheckedAll=!0);this.isCheckedAll=!1,this.multiProfilesSelected=[],this.profileList.forEach(e=>{this.isChecked(e.name)})}isChecked(e){return this.enableSelectAll?this.multiProfilesSelected.findIndex(t=>t===e)>=0:this.isSingleProfileChecked(e)}selectOne(e,t){if(this.enableSelectAll)return e.target.checked?(this.multiProfilesSelected.push(t),void(this.multiProfilesSelected.length===this.profileList.length&&(this.isCheckedAll=!0))):(this.isCheckedAll=!1,this.isChecked(t),void this.multiProfilesSelected.splice(this.multiProfilesSelected.indexOf(t),1));this.selectSingleProfile(e,t)}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(a.a),o.Ib(b.a),o.Ib(r.a),o.Ib(r.e))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-device-profile-list"]],inputs:{associatedDeviceColumn:"associatedDeviceColumn",toolbars:"toolbars",enableSelectAll:"enableSelectAll",singleProfileSelected:"singleProfileSelected"},outputs:{singleProfileSelectedEvent:"singleProfileSelectedEvent"},decls:64,vars:7,consts:[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","text-danger","mr-2"],[1,"card-body","p-0"],["class","bg-light px-2 py-2",4,"ngIf"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],["type","checkbox",3,"checked","click",4,"ngIf"],["scope","col",4,"ngIf"],[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"form-control",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left"],[1,"page-item"],[1,"fa","fa-angle-double-right"],["id","deleteConfirmDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteConfirmDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteConfirmDialogLabel",1,"modal-title","text-danger"],[1,"fa","fa-warning"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"bg-light","px-2","py-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","mr-1"],["type","button","routerLink","../add-profile",1,"btn","btn-info"],[1,"fa","fa-plus","mr-1"],["type","button","data-toggle","tooltip","data-placement","top","title","only one should be selected",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-edit","mr-1"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash","mr-1"],["type","checkbox",3,"checked","click"],["type","checkbox",3,"value","checked","click"],[1,"user-select-all"],["class","text-center",4,"ngIf"],[1,"text-center"],["routerLink","../../device-center",1,"badge","badge-pill","badge-primary",3,"queryParams"],[1,"fa","fa-sitemap"]],template:function(e,t){1&e&&(o.Lb(0,"div",0),o.Lb(1,"div",1),o.Jb(2,"i",2),o.Lb(3,"span"),o.mc(4,"Device Profile List"),o.Kb(),o.Kb(),o.Lb(5,"div",3),o.kc(6,oe,18,2,"div",4),o.Lb(7,"div",5),o.Lb(8,"table",6),o.Lb(9,"thead",7),o.Lb(10,"tr"),o.Lb(11,"th",8),o.kc(12,se,1,1,"input",9),o.Kb(),o.Lb(13,"th",8),o.mc(14,"ID"),o.Kb(),o.Lb(15,"th",8),o.mc(16,"Name"),o.Kb(),o.Lb(17,"th",8),o.mc(18,"Description"),o.Kb(),o.kc(19,ae,2,0,"th",10),o.Lb(20,"th",8),o.mc(21,"Labels"),o.Kb(),o.Lb(22,"th",8),o.mc(23,"Manufacturer"),o.Kb(),o.Lb(24,"th",8),o.mc(25,"Model"),o.Kb(),o.Kb(),o.Kb(),o.Lb(26,"tbody"),o.kc(27,de,16,11,"tr",11),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(28,"div",12),o.Lb(29,"nav",13),o.Lb(30,"ul",14),o.Lb(31,"li",15),o.Lb(32,"span",16),o.mc(33,"items per page"),o.Kb(),o.Kb(),o.Lb(34,"li",17),o.Lb(35,"select",18),o.Tb("ngModelChange",function(e){return t.pageLimit=e})("ngModelChange",function(){return t.onPageSelected()}),o.Lb(36,"option",19),o.mc(37,"5"),o.Kb(),o.Lb(38,"option",20),o.mc(39,"10"),o.Kb(),o.Lb(40,"option",21),o.mc(41,"20"),o.Kb(),o.Kb(),o.Kb(),o.Lb(42,"li",22),o.Lb(43,"button",23),o.Tb("click",function(){return t.prePage()}),o.Jb(44,"i",24),o.mc(45," Previous"),o.Kb(),o.Kb(),o.Lb(46,"li",25),o.Lb(47,"button",23),o.Tb("click",function(){return t.nextPage()}),o.mc(48,"Next "),o.Jb(49,"i",26),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(50,"div",27),o.Lb(51,"div",28),o.Lb(52,"div",29),o.Lb(53,"div",30),o.Lb(54,"h5",31),o.Jb(55,"i",32),o.mc(56," Warning "),o.Kb(),o.Kb(),o.Lb(57,"div",33),o.mc(58," The data will be permanently erased!!! Are you sure to execute delete operation\uff1f "),o.Kb(),o.Lb(59,"div",34),o.Lb(60,"button",35),o.mc(61,"Cancel"),o.Kb(),o.Lb(62,"button",36),o.Tb("click",function(){return t.delete()}),o.mc(63,"Confirm"),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb()),2&e&&(o.xb(6),o.Yb("ngIf",t.toolbars),o.xb(6),o.Yb("ngIf",t.enableSelectAll),o.xb(7),o.Yb("ngIf",t.associatedDeviceColumn),o.xb(8),o.Yb("ngForOf",t.profileList),o.xb(8),o.Yb("ngModel",t.pageLimit),o.xb(8),o.Yb("disabled",1===t.pagination),o.xb(4),o.Yb("disabled",t.pageLimit>t.profileList.length))},directives:[n.k,n.j,c.l,c.d,c.g,c.h,c.m,r.f,r.h],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),e})();function ve(e,t){1&e&&o.Jb(0,"i",24)}function pe(e,t){1&e&&o.Jb(0,"i",24)}function he(e,t){1&e&&o.Jb(0,"i",24)}function ue(e,t){1&e&&o.Jb(0,"i",24)}function fe(e,t){1&e&&o.Jb(0,"i",24)}function ge(e,t){if(1&e){const e=o.Mb();o.Lb(0,"button",25),o.Tb("click",function(){return o.gc(e),o.Vb().previous()}),o.Jb(1,"i",26),o.mc(2," Previous"),o.Kb()}}function Le(e,t){if(1&e){const e=o.Mb();o.Lb(0,"button",27),o.Tb("click",function(){return o.gc(e),o.Vb().next()}),o.mc(1,"Next "),o.Jb(2,"i",28),o.Kb()}if(2&e){const e=o.Vb();o.Yb("disabled",e.stepStateLock())}}function Ke(e,t){if(1&e){const e=o.Mb();o.Lb(0,"button",29),o.Tb("click",function(){return o.gc(e),o.Vb().skip()}),o.mc(1,"Skip "),o.Jb(2,"i",30),o.Kb()}}function Se(e,t){if(1&e){const e=o.Mb();o.Lb(0,"button",31),o.Tb("click",function(){return o.gc(e),o.Vb().done()}),o.Jb(1,"i",32),o.mc(2," Submit"),o.Kb()}if(2&e){const e=o.Vb();o.Yb("disabled",!e.protocolName)}}function xe(e,t){if(1&e){const e=o.Mb();o.Lb(0,"div",33),o.Lb(1,"app-device-service-list",34),o.Tb("singleDeviceSvcSelectedEvent",function(t){return o.gc(e),o.Vb().onSingleDeviceSvcSelected(t)}),o.Kb(),o.Kb()}if(2&e){const e=o.Vb();o.xb(1),o.Yb("deviceSvcSelected",e.selectedSvc)}}function ye(e,t){if(1&e){const e=o.Mb();o.Lb(0,"div",33),o.Lb(1,"app-device-profile-list",35),o.Tb("singleProfileSelectedEvent",function(t){return o.gc(e),o.Vb().onSingleProfileSelected(t)}),o.Kb(),o.Kb()}if(2&e){const e=o.Vb();o.xb(1),o.Yb("singleProfileSelected",e.selectedProfile)("enableSelectAll",!1)("toolbars",!1)("associatedDeviceColumn",!1)}}function Pe(e,t){if(1&e){const e=o.Mb();o.Lb(0,"form",36),o.Lb(1,"div",37),o.Lb(2,"label",38),o.mc(3,"Name"),o.Kb(),o.Lb(4,"div",39),o.Lb(5,"input",40),o.Tb("ngModelChange",function(t){return o.gc(e),o.Vb().deviceName=t}),o.Kb(),o.Lb(6,"div",41),o.Lb(7,"small"),o.mc(8,"the device name can't be empty!"),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(9,"div",42),o.Lb(10,"label",43),o.mc(11,"Description"),o.Kb(),o.Lb(12,"div",39),o.Lb(13,"input",44),o.Tb("ngModelChange",function(t){return o.gc(e),o.Vb().deviceDescription=t}),o.Kb(),o.Kb(),o.Kb(),o.Lb(14,"div",42),o.Lb(15,"label",45),o.mc(16,"Labels"),o.Kb(),o.Lb(17,"div",39),o.Lb(18,"input",46),o.Tb("ngModelChange",function(t){return o.gc(e),o.Vb().deviceLabels=t}),o.Kb(),o.Kb(),o.Kb(),o.Lb(19,"div",42),o.Lb(20,"label",47),o.mc(21,"AdminState"),o.Kb(),o.Lb(22,"div",39),o.Lb(23,"select",48),o.Tb("ngModelChange",function(t){return o.gc(e),o.Vb().deviceAdminState=t}),o.Lb(24,"option",49),o.mc(25,"UNLOCKED"),o.Kb(),o.Lb(26,"option",50),o.mc(27,"LOCKED"),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(28,"div",42),o.Lb(29,"label",51),o.mc(30,"OperatingState"),o.Kb(),o.Lb(31,"div",39),o.Lb(32,"select",52),o.Tb("ngModelChange",function(t){return o.gc(e),o.Vb().deviceOperatingState=t}),o.Lb(33,"option",53),o.mc(34,"UP"),o.Kb(),o.Lb(35,"option",54),o.mc(36,"DOWN"),o.Kb(),o.Lb(37,"option",54),o.mc(38,"UNKNOWN"),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb()}if(2&e){const e=o.Vb();o.xb(5),o.Ab("is-invalid",!e.deviceName)("is-valid",e.deviceName),o.Yb("ngModel",e.deviceName),o.xb(8),o.Yb("ngModel",e.deviceDescription),o.xb(5),o.Yb("ngModel",e.deviceLabels),o.xb(5),o.Yb("ngModel",e.deviceAdminState),o.xb(9),o.Yb("ngModel",e.deviceOperatingState)}}function Ce(e,t){if(1&e&&(o.Lb(0,"option",80),o.mc(1),o.Kb()),2&e){const e=t.$implicit;o.Zb("value",e.name),o.xb(1),o.nc(e.name)}}function ke(e,t){if(1&e){const e=o.Mb();o.Lb(0,"div",62),o.Lb(1,"div",57),o.Lb(2,"form"),o.Lb(3,"div",37),o.Lb(4,"label",63),o.mc(5,"Interval"),o.Kb(),o.Lb(6,"div",39),o.Lb(7,"div",64),o.Lb(8,"input",65),o.Tb("ngModelChange",function(e){return t.$implicit.interval=e}),o.Kb(),o.Lb(9,"div",66),o.Lb(10,"select",67),o.Tb("ngModelChange",function(e){return t.$implicit.unit=e}),o.Lb(11,"option",68),o.mc(12,"millisecond"),o.Kb(),o.Lb(13,"option",69),o.mc(14,"second"),o.Kb(),o.Lb(15,"option",70),o.mc(16,"minute"),o.Kb(),o.Lb(17,"option",71),o.mc(18,"hour"),o.Kb(),o.Kb(),o.Kb(),o.Lb(19,"div",72),o.mc(20," can only be a pure integer number "),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(21,"div",42),o.Lb(22,"label",63),o.mc(23,"onchange"),o.Kb(),o.Lb(24,"div",39),o.Lb(25,"select",73),o.Tb("ngModelChange",function(e){return t.$implicit.onChange=e}),o.Lb(26,"option",74),o.mc(27,"true"),o.Kb(),o.Lb(28,"option",75),o.mc(29,"false"),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(30,"div",42),o.Lb(31,"label",63),o.mc(32,"resource"),o.Kb(),o.Lb(33,"div",39),o.Lb(34,"select",76),o.Tb("ngModelChange",function(e){return t.$implicit.resource=e}),o.kc(35,Ce,2,2,"option",77),o.Kb(),o.Lb(36,"div",72),o.mc(37," resource can't be empty "),o.Kb(),o.Kb(),o.Kb(),o.Lb(38,"button",78),o.Tb("click",function(){o.gc(e);const i=t.$implicit;return o.Vb(2).removeAutoEvent(i)}),o.Jb(39,"i",79),o.mc(40," Remove"),o.Kb(),o.Kb(),o.Kb(),o.Kb()}if(2&e){const e=t.$implicit,i=o.Vb(2);o.xb(8),o.Ab("is-invalid",!i.eventIntervalNumType(e.interval))("is-valid",i.eventIntervalNumType(e.interval)),o.Yb("ngModel",e.interval),o.xb(2),o.Yb("ngModel",e.unit),o.xb(15),o.Yb("ngModel",e.onChange),o.xb(9),o.Ab("is-invalid",!e.resource)("is-valid",e.resource),o.Yb("ngModel",e.resource),o.xb(1),o.Yb("ngForOf",null==i.selectedProfile?null:i.selectedProfile.deviceResources)}}function De(e,t){if(1&e){const e=o.Mb();o.Lb(0,"div",55),o.Lb(1,"div",1),o.Lb(2,"span",56),o.mc(3," this step is optional, you can skip it then use scheduler service to create schedule job."),o.Kb(),o.Kb(),o.Lb(4,"div",57),o.Lb(5,"p",58),o.Jb(6,"span",59),o.Lb(7,"span",60),o.Tb("click",function(){return o.gc(e),o.Vb().addAutoEvent()}),o.mc(8,"Add More AutoEvent"),o.Kb(),o.Kb(),o.kc(9,ke,41,13,"div",61),o.Kb(),o.Kb()}if(2&e){const e=o.Vb();o.xb(9),o.Yb("ngForOf",e.autoEventsInternal)}}function Ne(e,t){1&e&&o.Jb(0,"div")}const Ie=function(){return{standalone:!0}};function Me(e,t){if(1&e){const e=o.Mb();o.Lb(0,"div"),o.Lb(1,"form",97),o.Lb(2,"div",98),o.Lb(3,"div",99),o.Lb(4,"span",100),o.mc(5,"PropertyKey"),o.Kb(),o.Kb(),o.Jb(6,"input",101),o.Kb(),o.Lb(7,"div",102),o.Jb(8,"i",28),o.Kb(),o.Lb(9,"div",98),o.Lb(10,"div",99),o.Lb(11,"span",100),o.mc(12,"PropertyVaule"),o.Kb(),o.Kb(),o.Lb(13,"input",103),o.Tb("ngModelChange",function(i){o.gc(e);const n=t.$implicit;return o.Vb(4).selectedAvailTemplate[n]=i}),o.Kb(),o.Kb(),o.Kb(),o.Kb()}if(2&e){const e=t.$implicit,i=o.Vb(4);o.xb(6),o.Yb("value",e),o.xb(7),o.Zb("name",i.selectedAvailTemplate[e]),o.Yb("ngModel",i.selectedAvailTemplate[e])("ngModelOptions",o.cc(4,Ie))}}function Oe(e,t){if(1&e&&(o.Lb(0,"div"),o.kc(1,Me,14,5,"div",96),o.Kb()),2&e){const e=o.Vb(3);o.xb(1),o.Yb("ngForOf",e.selectedAvailTemplateProperties)}}function Ee(e,t){1&e&&(o.Lb(0,"h5",107),o.Jb(1,"i",108),o.mc(2," this device service doesn't need to set protocol properties. "),o.Kb())}function Ae(e,t){if(1&e&&(o.Lb(0,"div"),o.Jb(1,"span",104),o.Lb(2,"span",105),o.mc(3," all avaliable protocol templates refer to the device service released by edgex, such as device-virtual, device-rest, device-mqtt, device-modbus "),o.Kb(),o.Kb(),o.kc(4,Ee,3,0,"h5",106)),2&e){const e=o.Vb(3);o.xb(4),o.Yb("ngIf",e.protocolName)}}function Te(e,t){if(1&e){const e=o.Mb();o.Lb(0,"div",86),o.Lb(1,"div",87),o.Lb(2,"div",88),o.Lb(3,"label"),o.mc(4,"Protocol Name"),o.Kb(),o.Lb(5,"select",89),o.Tb("ngModelChange",function(t){return o.gc(e),o.Vb(2).protocolName=t})("ngModelChange",function(){return o.gc(e),o.Vb(2).onAvailProtocolSelect()}),o.Lb(6,"option",90),o.mc(7,"device-mqtt"),o.Kb(),o.Lb(8,"option",91),o.mc(9,"device-rest"),o.Kb(),o.Lb(10,"option",91),o.mc(11,"device-virtual"),o.Kb(),o.Lb(12,"option",92),o.mc(13,"device-modbus-tcp"),o.Kb(),o.Lb(14,"option",93),o.mc(15,"device-modbus-rtu"),o.Kb(),o.Kb(),o.Lb(16,"div",72),o.Lb(17,"small"),o.mc(18,"the protocol name can't be empty!"),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(19,"div",39),o.kc(20,Oe,2,1,"div",94),o.kc(21,Ae,5,1,"ng-template",null,95,o.lc),o.Kb(),o.Kb()}if(2&e){const e=o.fc(22),t=o.Vb(2);o.xb(5),o.Ab("is-invalid",!t.protocolName)("is-valid",t.protocolName),o.Yb("ngModel",t.protocolName),o.xb(15),o.Yb("ngIf",0!==t.selectedAvailTemplateProperties.length)("ngIfElse",e)}}function we(e,t){if(1&e){const e=o.Mb();o.Lb(0,"div"),o.Lb(1,"form",97),o.Lb(2,"div",98),o.Lb(3,"div",99),o.Lb(4,"span",100),o.mc(5,"PropertyKey"),o.Kb(),o.Kb(),o.Lb(6,"input",113),o.Tb("ngModelChange",function(e){return t.$implicit.key=e}),o.Kb(),o.Kb(),o.Lb(7,"div",102),o.Jb(8,"i",28),o.Kb(),o.Lb(9,"div",98),o.Lb(10,"div",99),o.Lb(11,"span",100),o.mc(12,"PropertyValue"),o.Kb(),o.Kb(),o.Lb(13,"input",114),o.Tb("ngModelChange",function(e){return t.$implicit.value=e}),o.Kb(),o.Kb(),o.Lb(14,"div",115),o.Lb(15,"button",78),o.Tb("click",function(){o.gc(e);const i=t.$implicit;return o.Vb(3).removeProtocolProperty(i)}),o.Jb(16,"i",79),o.Kb(),o.Kb(),o.Kb(),o.Kb()}if(2&e){const e=t.$implicit;o.xb(6),o.Yb("ngModel",e.key),o.xb(7),o.Yb("ngModel",e.value)}}function Ye(e,t){if(1&e){const e=o.Mb();o.Lb(0,"div",86),o.Lb(1,"div",109),o.Lb(2,"div",88),o.Lb(3,"label"),o.mc(4,"Protocol Name"),o.Kb(),o.Lb(5,"input",110),o.Tb("ngModelChange",function(t){return o.gc(e),o.Vb(2).protocolName=t}),o.Kb(),o.Lb(6,"div",72),o.Lb(7,"small"),o.mc(8,"the protocol name can't be empty!"),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(9,"div",111),o.Lb(10,"div",112),o.Lb(11,"div"),o.Lb(12,"p",58),o.Jb(13,"span",59),o.Lb(14,"span",60),o.Tb("click",function(){return o.gc(e),o.Vb(2).addProtocolProperty()}),o.mc(15,"Add Protocol Property"),o.Kb(),o.Kb(),o.Kb(),o.kc(16,we,17,2,"div",96),o.Kb(),o.Kb(),o.Kb()}if(2&e){const e=o.Vb(2);o.xb(5),o.Ab("is-invalid",!e.protocolName)("is-valid",e.protocolName),o.Yb("ngModel",e.protocolName),o.xb(11),o.Yb("ngForOf",e.protocolPropertyList)}}function $e(e,t){if(1&e){const e=o.Mb();o.Lb(0,"div",55),o.Lb(1,"div",57),o.Lb(2,"p",81),o.Jb(3,"span",59),o.Lb(4,"span",60),o.Tb("click",function(){return o.gc(e),o.Vb().setProtocolTemplate("avaliable")}),o.mc(5,"Avaliable Protocol Templates"),o.Kb(),o.Kb(),o.Lb(6,"p",82),o.Jb(7,"span",59),o.Lb(8,"span",60),o.Tb("click",function(){return o.gc(e),o.Vb().setProtocolTemplate("custom")}),o.mc(9,"Custom Protocol Templates"),o.Kb(),o.Kb(),o.kc(10,Ne,1,0,"div",83),o.kc(11,Te,23,7,"ng-template",null,84,o.lc),o.kc(13,Ye,17,6,"ng-template",null,85,o.lc),o.Kb(),o.Kb()}if(2&e){const e=o.fc(12),t=o.fc(14),i=o.Vb();o.xb(2),o.Ab("badge-primary","avaliable"===i.protocolTemplateModel)("badge-secondary","avaliable"!==i.protocolTemplateModel),o.xb(4),o.Ab("badge-primary","custom"===i.protocolTemplateModel)("badge-secondary","custom"!==i.protocolTemplateModel),o.xb(4),o.Yb("ngIf","custom"===i.protocolTemplateModel)("ngIfThen",t)("ngIfElse",e)}}class Ve{constructor(){this.Schema="",this.Host="",this.Port="",this.User="",this.Password="",this.ClientId="",this.Topic=""}}class Ue{constructor(){this.Address="",this.Port="",this.UnitID=""}}class Be{constructor(){this.Address="",this.UnitID="",this.BaudRate="",this.DataBits="",this.StopBits="",this.Parity=""}}let Je=(()=>{class e{constructor(e,t,i,n){this.metaSvc=e,this.msgSvc=t,this.router=i,this.route=n,this.currentStep=0,this.selectedClass="text-white rounded px-2 bg-success  font-weight-bold",this.noSelectedClass="text-white rounded px-2 bg-secondary  font-weight-bold",this.autoEventsInternal=[{interval:"",onChange:!1,resource:"",unit:"ms"}],this.deviceName="",this.deviceDescription="",this.deviceAdminState="UNLOCKED",this.deviceOperatingState="UP",this.protocolTemplateModel="avaliable",this.protocolName="",this.protocolProperty={key:null,value:null},this.protocolPropertyList=[{key:null,value:null}],this.selectedAvailTemplateProperties=[]}ngOnInit(){}onSingleProfileSelected(e){this.selectedProfile=e}onSingleDeviceSvcSelected(e){this.selectedSvc=e}onAvailProtocolSelect(){switch(this.protocolName){case"mqtt":return this.selectedAvailTemplate=new Ve,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));case"modbus-tcp":return this.selectedAvailTemplate=new Ue,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));case"modbus-rtu":return this.selectedAvailTemplate=new Be,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));default:return this.selectedAvailTemplate={},void(this.selectedAvailTemplateProperties=[])}}cleanSelectedAvailTemplateProperties(){this.selectedAvailTemplateProperties=[]}setAutoEventInternal(e){let t;e.forEach(e=>{let i=0;e.interval.indexOf("ms")?i=e.interval.indexOf("ms"):e.interval.indexOf("s")?i=e.interval.indexOf("s"):e.interval.indexOf("m")?i=e.interval.indexOf("m"):e.interval.indexOf("h")&&(i=e.interval.indexOf("h")),t=e.interval.substring(i),this.autoEventsInternal.push({interval:e.interval.slice(0,i),onChange:e.onChange,resource:e.sourceName,unit:t})})}eventIntervalNumType(e){return!isNaN(e)&&parseFloat(e)===parseInt(e)}setProtocolTemplate(e){this.protocolName="",this.cleanSelectedAvailTemplateProperties(),this.cleanCustomProtocolProperty(),this.protocolTemplateModel=e}addProtocolProperty(){this.protocolPropertyList.push({key:"",value:""})}removeProtocolProperty(e){this.protocolPropertyList.splice(this.protocolPropertyList.indexOf(e),1)}cleanCustomProtocolProperty(){this.protocolPropertyList=[],this.protocolPropertyList.push({key:"",value:""})}addAutoEvent(){this.autoEventsInternal.push({interval:"",onChange:!1,resource:"",unit:"ms"})}removeAutoEvent(e){this.autoEventsInternal.splice(this.autoEventsInternal.indexOf(e),1)}stepStateLock(){switch(this.currentStep){case 0:return void 0===this.selectedSvc;case 1:return void 0===this.selectedProfile;case 2:return void 0===this.deviceName||""===this.deviceName;case 3:let e=!1;return this.autoEventsInternal.forEach(t=>{""!==t.resource&&this.eventIntervalNumType(t.interval)||(e=!0)}),e;case 4:default:return!1}}skip(){this.autoEventsInternal=[],this.next()}next(){this.currentStep+=1}previous(){this.currentStep=this.currentStep-1}changeStep(){this.currentStep+=1}done(){var e,t,i;let n={},c={};"custom"===this.protocolTemplateModel?(this.protocolPropertyList.forEach(e=>{c[e.key]=e.value}),n[this.protocolName]=c):n[this.protocolName]=Object.assign({},this.selectedAvailTemplate);let r=[];this.autoEventsInternal.forEach(e=>{r.push({interval:`${parseInt(e.interval)}${e.unit}`,onChange:!!e.onChange,sourceName:e.resource})});let o={name:this.deviceName,description:this.deviceDescription,labels:null===(e=this.deviceLabels)||void 0===e?void 0:e.split(","),adminState:this.deviceAdminState,operatingState:this.deviceOperatingState,serviceName:null===(t=this.selectedSvc)||void 0===t?void 0:t.name,profileName:null===(i=this.selectedProfile)||void 0===i?void 0:i.name,protocols:n,autoEvents:r};this.metaSvc.addDevice(o).subscribe(()=>{this.msgSvc.success("Add device"),this.router.navigate(["../device-list"],{relativeTo:this.route})})}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(a.a),o.Ib(b.a),o.Ib(r.e),o.Ib(r.a))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-add-device"]],decls:47,vars:20,consts:[[1,"card"],[1,"card-header"],[1,"font-weight-bold"],[1,"fa","fa-lightbulb-o","fa-lg","mr-2","text-danger"],[1,"text-secondary"],[1,"card-header","bg-light"],["aria-label","breadcrumb",1,"mb-0","p-0"],[1,"breadcrumb","p-1","mb-0","bg-light"],[1,"breadcrumb-item"],[3,"ngClass"],["class","fa fa-check",4,"ngIf"],[1,"breadcrumb-item","active"],["class","btn btn-info btn-sm",3,"click",4,"ngIf"],["class","btn btn-primary btn-sm float-right",3,"disabled","click",4,"ngIf","ngIfElse"],["class","btn btn-success btn-sm float-right mr-2",3,"click",4,"ngIf"],["stepDone",""],[1,"card-body","p-0"],[3,"ngSwitch"],[3,"ngSwitchCase"],["SelectDeviceService",""],["SelectDeviceProfile",""],["DevicePrimary",""],["CreateAutoEvent",""],["CreateDeviceProtocol",""],[1,"fa","fa-check"],[1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-long-arrow-left"],[1,"btn","btn-primary","btn-sm","float-right",3,"disabled","click"],[1,"fa","fa-long-arrow-right"],[1,"btn","btn-success","btn-sm","float-right","mr-2",3,"click"],[1,"fa","fa-share"],[1,"btn","btn-success","btn-sm","ml-4","float-right",3,"disabled","click"],[1,"fa","fa-save"],[1,"p-2"],[3,"deviceSvcSelected","singleDeviceSvcSelectedEvent"],[3,"singleProfileSelected","enableSelectAll","toolbars","associatedDeviceColumn","singleProfileSelectedEvent"],[1,"px-5","py-4"],[1,"form-group","row","has-validation"],["for","deviceName","required","",1,"col-md-2","col-form-label"],[1,"col-md-10"],["type","text","id","validationDeviceNameFeedback","name","deviceName",1,"form-control",3,"ngModel","ngModelChange"],["id","validationDeviceNameFeedback",1,"invalid-feedback"],[1,"form-group","row"],["for","deviceDesc",1,"col-md-2","col-form-label"],["type","text","name","deviceDescription",1,"form-control",3,"ngModel","ngModelChange"],["for","deviceLabels",1,"col-md-2","col-form-label"],["type","text","name","deviceLabels","placeholder","Multiple Labels are separated by commas: label1,label2,label3",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],["name","deviceAdminState",1,"form-control",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"],["for","operatingState",1,"col-md-2","col-form-label"],["name","deviceOperatingState",1,"form-control",3,"ngModel","ngModelChange"],["value","UP"],["value","DOWN"],[1,"card","border-0"],[1,"fa","fa-info-circle","text-warning","font-weight-bold"],[1,"card-body"],[1,"badge","badge-secondary","font-weight-bold"],[1,"fa","fa-plus-circle","mr-2"],["role","button",1,"user-select-none",3,"click"],["class","card mb-3",4,"ngFor","ngForOf"],[1,"card","mb-3"],[1,"col-md-2","col-form-label"],[1,"input-group","mb-3",2,"width","250px"],["type","text","name","interval","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["name","eventIntervalUnit","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","ms"],["value","s"],["value","m"],["value","h"],[1,"invalid-feedback"],["name","onchange",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],["value","true"],["value","false"],["name","resource","required","",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"],[3,"value"],[1,"badge","font-weight-bold","mr-3"],[1,"badge","font-weight-bold"],[4,"ngIf","ngIfThen","ngIfElse"],["avaliProtocolTemplate",""],["customProtocolTemplate",""],[1,"row","border","border-secondary","p-2","rounded-lg","mx-1"],[1,"col-md-2","border-right","border-info"],[1,"form-group"],["type","text","name","protocolName","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","mqtt"],["value","other"],["value","modbus-tcp"],["value","modbus-rtu"],[4,"ngIf","ngIfElse"],["noAvailProperty",""],[4,"ngFor","ngForOf"],[1,"form-inline","mb-1"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","disabled","",1,"form-control",2,"width","300px",3,"value"],[1,"form-group","mx-2"],["type","text",1,"form-control",2,"width","300px",3,"name","ngModel","ngModelOptions","ngModelChange"],[1,"fa","fa-info-circle","fa-lg","text-success","font-weight-bold","mr-1"],[1,"text-muted"],["class","text-warning",4,"ngIf"],[1,"text-warning"],[1,"fa","fa-warning"],[1,"col-md-2","col-lg-2","border-right","border-info"],["type","text","name","protocolName",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-10","col-lg-10"],[1,""],["type","text","name","propertyKey",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],["type","text","name","PropertyValue",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"input-group","ml-2"]],template:function(e,t){if(1&e&&(o.Lb(0,"div",0),o.Lb(1,"div",1),o.Lb(2,"span",2),o.Jb(3,"span",3),o.Lb(4,"span",4),o.mc(5,"Add Device Wizard"),o.Kb(),o.Kb(),o.Kb(),o.Lb(6,"div",5),o.Lb(7,"nav",6),o.Lb(8,"ol",7),o.Lb(9,"li",8),o.Lb(10,"span",9),o.mc(11,"SelectDeviceService "),o.kc(12,ve,1,0,"i",10),o.Kb(),o.Kb(),o.Lb(13,"li",8),o.Lb(14,"span",9),o.mc(15,"SelectDeviceProfile "),o.kc(16,pe,1,0,"i",10),o.Kb(),o.Kb(),o.Lb(17,"li",8),o.Lb(18,"span",9),o.mc(19,"DevicePrimary "),o.kc(20,he,1,0,"i",10),o.Kb(),o.Kb(),o.Lb(21,"li",8),o.Lb(22,"span",9),o.mc(23,"CreateAutoEvent "),o.kc(24,ue,1,0,"i",10),o.Kb(),o.Kb(),o.Lb(25,"li",11),o.Lb(26,"span",9),o.mc(27,"CreateDeviceProtocol "),o.kc(28,fe,1,0,"i",10),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(29,"div",1),o.kc(30,ge,3,0,"button",12),o.kc(31,Le,3,1,"button",13),o.kc(32,Ke,3,0,"button",14),o.kc(33,Se,3,1,"ng-template",null,15,o.lc),o.Kb(),o.Lb(35,"div",16),o.Lb(36,"div",17),o.kc(37,xe,2,1,"ng-template",18,19,o.lc),o.kc(39,ye,2,4,"ng-template",18,20,o.lc),o.kc(41,Pe,39,9,"ng-template",18,21,o.lc),o.kc(43,De,10,1,"ng-template",18,22,o.lc),o.kc(45,$e,15,11,"ng-template",18,23,o.lc),o.Kb(),o.Kb(),o.Kb()),2&e){const e=o.fc(34);o.xb(10),o.Yb("ngClass",t.currentStep>=0?t.selectedClass:t.noSelectedClass),o.xb(2),o.Yb("ngIf",t.currentStep>=1),o.xb(2),o.Yb("ngClass",t.currentStep>=1?t.selectedClass:t.noSelectedClass),o.xb(2),o.Yb("ngIf",t.currentStep>=2),o.xb(2),o.Yb("ngClass",t.currentStep>=2?t.selectedClass:t.noSelectedClass),o.xb(2),o.Yb("ngIf",t.currentStep>=3),o.xb(2),o.Yb("ngClass",t.currentStep>=3?t.selectedClass:t.noSelectedClass),o.xb(2),o.Yb("ngIf",t.currentStep>=4),o.xb(2),o.Yb("ngClass",t.currentStep>=4?t.selectedClass:t.noSelectedClass),o.xb(2),o.Yb("ngIf",t.currentStep>=5),o.xb(2),o.Yb("ngIf",t.currentStep),o.xb(1),o.Yb("ngIf",4>t.currentStep)("ngIfElse",e),o.xb(1),o.Yb("ngIf",3===t.currentStep),o.xb(4),o.Yb("ngSwitch",t.currentStep),o.xb(1),o.Yb("ngSwitchCase",0),o.xb(2),o.Yb("ngSwitchCase",1),o.xb(2),o.Yb("ngSwitchCase",2),o.xb(2),o.Yb("ngSwitchCase",3),o.xb(2),o.Yb("ngSwitchCase",4)}},directives:[n.i,n.k,n.l,n.m,re,me,c.n,c.e,c.f,c.a,c.d,c.g,c.l,c.h,c.m,n.j,c.k],styles:['.breadcrumb[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]:before{color:inherit;font-weight:inherit;content:">>";padding:0 5px}.btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}']}),e})();function je(e,t){if(1&e){const e=o.Mb();o.Lb(0,"div"),o.Lb(1,"form",40),o.Lb(2,"div",41),o.Lb(3,"div",42),o.Lb(4,"span",43),o.mc(5,"PropertyKey"),o.Kb(),o.Kb(),o.Lb(6,"input",44),o.Tb("ngModelChange",function(e){return t.$implicit.key=e}),o.Kb(),o.Kb(),o.Lb(7,"div",45),o.Jb(8,"i",46),o.Kb(),o.Lb(9,"div",41),o.Lb(10,"div",42),o.Lb(11,"span",43),o.mc(12,"PropertyValue"),o.Kb(),o.Kb(),o.Lb(13,"input",47),o.Tb("ngModelChange",function(e){return t.$implicit.value=e}),o.Kb(),o.Kb(),o.Lb(14,"div",48),o.Lb(15,"button",49),o.Tb("click",function(){o.gc(e);const i=t.$implicit;return o.Vb(2).removeProtocolProperty(i)}),o.Jb(16,"i",50),o.Kb(),o.Kb(),o.Kb(),o.Kb()}if(2&e){const e=t.$implicit;o.xb(6),o.Yb("ngModel",e.key),o.xb(7),o.Yb("ngModel",e.value)}}function Fe(e,t){if(1&e&&(o.Lb(0,"option",65),o.mc(1),o.Kb()),2&e){const e=t.$implicit;o.Zb("value",e.name),o.xb(1),o.nc(e.name)}}function Re(e,t){if(1&e){const e=o.Mb();o.Lb(0,"div",10),o.Lb(1,"div",9),o.Lb(2,"form"),o.Lb(3,"div",51),o.Lb(4,"label",13),o.mc(5,"Interval"),o.Kb(),o.Lb(6,"div",14),o.Lb(7,"div",52),o.Lb(8,"input",53),o.Tb("ngModelChange",function(e){return t.$implicit.interval=e}),o.Kb(),o.Lb(9,"div",54),o.Lb(10,"select",55),o.Tb("ngModelChange",function(e){return t.$implicit.unit=e}),o.Lb(11,"option",56),o.mc(12,"millisecond"),o.Kb(),o.Lb(13,"option",57),o.mc(14,"second"),o.Kb(),o.Lb(15,"option",58),o.mc(16,"minute"),o.Kb(),o.Lb(17,"option",59),o.mc(18,"hour"),o.Kb(),o.Kb(),o.Kb(),o.Lb(19,"div",16),o.mc(20," can only be a pure integer number "),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(21,"div",12),o.Lb(22,"label",13),o.mc(23,"onchange"),o.Kb(),o.Lb(24,"div",14),o.Lb(25,"select",60),o.Tb("ngModelChange",function(e){return t.$implicit.onChange=e}),o.Lb(26,"option",61),o.mc(27,"true"),o.Kb(),o.Lb(28,"option",62),o.mc(29,"false"),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(30,"div",12),o.Lb(31,"label",13),o.mc(32,"resource"),o.Kb(),o.Lb(33,"div",14),o.Lb(34,"select",63),o.Tb("ngModelChange",function(e){return t.$implicit.resource=e}),o.kc(35,Fe,2,2,"option",64),o.Kb(),o.Lb(36,"div",16),o.mc(37," resource can't be empty "),o.Kb(),o.Kb(),o.Kb(),o.Lb(38,"button",49),o.Tb("click",function(){o.gc(e);const i=t.$implicit;return o.Vb(2).removeAutoEvent(i)}),o.Jb(39,"i",50),o.mc(40," Remove"),o.Kb(),o.Kb(),o.Kb(),o.Kb()}if(2&e){const e=t.$implicit,i=o.Vb(2);o.xb(8),o.Ab("is-invalid",!i.eventIntervalNumType(e.interval))("is-valid",i.eventIntervalNumType(e.interval)),o.Yb("ngModel",e.interval),o.xb(2),o.Yb("ngModel",e.unit),o.xb(15),o.Yb("ngModel",e.onChange),o.xb(9),o.Ab("is-invalid",""===e.resource)("is-valid",""!==e.resource),o.Yb("ngModel",e.resource),o.xb(1),o.Yb("ngForOf",null==i.selectedProfile?null:i.selectedProfile.deviceResources)}}function qe(e,t){if(1&e){const e=o.Mb();o.Lb(0,"div",1),o.Lb(1,"div",2),o.Jb(2,"i",3),o.Lb(3,"span",4),o.mc(4,"Edit Device"),o.Kb(),o.Lb(5,"span",5),o.mc(6),o.Kb(),o.Kb(),o.Lb(7,"div",6),o.Lb(8,"button",7),o.Tb("click",function(){return o.gc(e),o.Vb().save()}),o.Lb(9,"span"),o.Jb(10,"i",8),o.mc(11,"Save"),o.Kb(),o.Kb(),o.Kb(),o.Lb(12,"div",9),o.Lb(13,"div",10),o.Lb(14,"div",2),o.Jb(15,"i",11),o.mc(16," Device Primary "),o.Kb(),o.Lb(17,"div",9),o.Lb(18,"form"),o.Lb(19,"div",12),o.Lb(20,"label",13),o.mc(21,"DeviceName"),o.Kb(),o.Lb(22,"div",14),o.Lb(23,"input",15),o.Tb("ngModelChange",function(t){return o.gc(e),o.Vb().device.name=t}),o.Kb(),o.Lb(24,"div",16),o.mc(25," device name can't not be empty! "),o.Kb(),o.Kb(),o.Kb(),o.Lb(26,"div",12),o.Lb(27,"label",13),o.mc(28,"Description"),o.Kb(),o.Lb(29,"div",14),o.Lb(30,"input",17),o.Tb("ngModelChange",function(t){return o.gc(e),o.Vb().device.description=t}),o.Kb(),o.Kb(),o.Kb(),o.Lb(31,"div",12),o.Lb(32,"label",13),o.mc(33,"Labels"),o.Kb(),o.Lb(34,"div",14),o.Lb(35,"input",18),o.Tb("ngModelChange",function(t){return o.gc(e),o.Vb().deviceLabels=t}),o.Kb(),o.Kb(),o.Kb(),o.Lb(36,"div",12),o.Lb(37,"label",19),o.mc(38,"AdminState"),o.Kb(),o.Lb(39,"div",14),o.Lb(40,"select",20),o.Tb("ngModelChange",function(t){return o.gc(e),o.Vb().device.adminState=t}),o.Lb(41,"option",21),o.mc(42,"UNLOCKED"),o.Kb(),o.Lb(43,"option",22),o.mc(44,"LOCKED"),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(45,"div",12),o.Lb(46,"label",23),o.mc(47,"OperatingState"),o.Kb(),o.Lb(48,"div",14),o.Lb(49,"select",24),o.Tb("ngModelChange",function(t){return o.gc(e),o.Vb().device.operatingState=t}),o.Lb(50,"option",25),o.mc(51,"UP"),o.Kb(),o.Lb(52,"option",26),o.mc(53,"DOWN"),o.Kb(),o.Lb(54,"option",26),o.mc(55,"UNKNOWN"),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(56,"div",27),o.Lb(57,"app-device-service-list",28),o.Tb("singleDeviceSvcSelectedEvent",function(t){return o.gc(e),o.Vb().onSingleDeviceSvcSelected(t)}),o.Kb(),o.Kb(),o.Lb(58,"div",27),o.Lb(59,"app-device-profile-list",29),o.Tb("singleProfileSelectedEvent",function(t){return o.gc(e),o.Vb().onSingleProfileSelected(t)}),o.Kb(),o.Kb(),o.Lb(60,"div",10),o.Lb(61,"div",2),o.Jb(62,"i",11),o.mc(63," Device Protocol "),o.Kb(),o.Lb(64,"div",9),o.Lb(65,"div",1),o.Lb(66,"div",9),o.Lb(67,"div",30),o.Lb(68,"div",31),o.Lb(69,"div",32),o.Lb(70,"label"),o.mc(71,"Protocol Name"),o.Kb(),o.Lb(72,"input",33),o.Tb("ngModelChange",function(t){return o.gc(e),o.Vb().protocolName=t}),o.Kb(),o.Lb(73,"div",16),o.Lb(74,"small"),o.mc(75,"the protocol name can't be empty!"),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(76,"div",34),o.Lb(77,"div"),o.Lb(78,"p",35),o.Jb(79,"span",36),o.Lb(80,"span",37),o.Tb("click",function(){return o.gc(e),o.Vb().addProtocolProperty()}),o.mc(81,"Add Protocol Property"),o.Kb(),o.Kb(),o.Kb(),o.kc(82,je,17,2,"div",38),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(83,"div",10),o.Lb(84,"div",2),o.Jb(85,"i",11),o.mc(86," AutoEvents "),o.Kb(),o.Lb(87,"div",9),o.Lb(88,"p",35),o.Jb(89,"span",36),o.Lb(90,"span",37),o.Tb("click",function(){return o.gc(e),o.Vb().addAutoEvent()}),o.mc(91,"Add More AutoEvent"),o.Kb(),o.Kb(),o.kc(92,Re,41,13,"div",39),o.Kb(),o.Kb(),o.Kb(),o.Kb()}if(2&e){const e=o.Vb();o.xb(6),o.nc(e.device.name),o.xb(2),o.Yb("disabled",e.validateBeforeSave()),o.xb(15),o.Ab("is-invalid",""===e.device.name),o.Yb("ngModel",e.device.name),o.xb(7),o.Yb("ngModel",e.device.description),o.xb(5),o.Yb("ngModel",e.deviceLabels),o.xb(5),o.Yb("ngModel",e.device.adminState),o.xb(9),o.Yb("ngModel",e.device.operatingState),o.xb(8),o.Yb("deviceSvcSelected",e.selectedSvc),o.xb(2),o.Yb("enableSelectAll",!1)("toolbars",!1)("singleProfileSelected",e.selectedProfile)("associatedDeviceColumn",!1),o.xb(13),o.Ab("is-invalid",!e.protocolName)("is-valid",e.protocolName),o.Yb("ngModel",e.protocolName),o.xb(10),o.Yb("ngForOf",e.protocolPropertyList),o.xb(10),o.Yb("ngForOf",e.autoEventsInternal)}}let Ge=(()=>{class e{constructor(e,t,i,n){this.router=e,this.route=t,this.metaSvc=i,this.msgSvc=n,this.autoEventsInternal=[],this.protocolProperty={key:"",value:""},this.protocolPropertyList=[]}ngOnInit(){this.route.queryParams.subscribe(e=>{this.metaSvc.findDeviceByName(e.deviceName).subscribe(e=>{var t;this.device=e.device,this.deviceLabels=null===(t=this.device.labels)||void 0===t?void 0:t.join(","),this.setAutoEventInternal(this.device.autoEvents),this.protocolName=Object.keys(this.device.protocols)[0];for(const[i,n]of Object.entries(this.device.protocols[this.protocolName]))this.protocolPropertyList.push({key:i,value:n});this.setDefaultDeviceSvcSelected(this.device.serviceName),this.setDefaultDeviceProfileSelected(this.device.profileName)})})}onSingleProfileSelected(e){this.selectedProfile=e,this.resetAutoEventsInternal()}onSingleDeviceSvcSelected(e){this.selectedSvc=e}setDefaultDeviceSvcSelected(e){this.metaSvc.findDevcieServiceByName(e).subscribe(e=>{this.selectedSvc=e.service})}setDefaultDeviceProfileSelected(e){this.metaSvc.findProfileByName(e).subscribe(e=>{this.selectedProfile=e.profile})}resetAutoEventsInternal(){this.autoEventsInternal=[]}setAutoEventInternal(e){let t;null==e||e.forEach(e=>{let i=0;-1!==e.interval.indexOf("ms")?i=e.interval.indexOf("ms"):-1!==e.interval.indexOf("s")?i=e.interval.indexOf("s"):-1!==e.interval.indexOf("m")?i=e.interval.indexOf("m"):-1!==e.interval.indexOf("h")&&(i=e.interval.indexOf("h")),t=e.interval.substring(i),this.autoEventsInternal.push({interval:e.interval.slice(0,i),onChange:!!e.onChange,resource:e.sourceName,unit:t})})}eventIntervalNumType(e){return!isNaN(e)&&parseFloat(e)===parseInt(e)}addProtocolProperty(){this.protocolPropertyList.push({key:"",value:""})}removeProtocolProperty(e){this.protocolPropertyList.splice(this.protocolPropertyList.indexOf(e),1)}addAutoEvent(){this.autoEventsInternal.push({interval:"",onChange:!1,resource:"",unit:"ms"})}removeAutoEvent(e){this.autoEventsInternal.splice(this.autoEventsInternal.indexOf(e),1)}validateBeforeSave(){var e;if((null===(e=this.device)||void 0===e?void 0:e.name)&&this.protocolName){let e=!1;return this.autoEventsInternal.forEach(t=>{this.eventIntervalNumType(t.interval)&&""!==t.resource||(e=!0)}),e}return!0}save(){var e,t,i;let n=this.device,c={},r={};n.labels=null===(e=this.deviceLabels)||void 0===e?void 0:e.split(","),n.serviceName=null===(t=this.selectedSvc)||void 0===t?void 0:t.name,n.profileName=null===(i=this.selectedProfile)||void 0===i?void 0:i.name,this.protocolPropertyList.forEach(e=>{r[e.key]=e.value}),c[this.protocolName]=r,n.protocols=c,n.autoEvents=[],this.autoEventsInternal.forEach(e=>{n.autoEvents.push({interval:`${parseInt(e.interval)}${e.unit}`,onChange:!!e.onChange,sourceName:e.resource})}),this.metaSvc.updateDevice(n).subscribe(()=>{var e;this.msgSvc.success("update device","name: "+(null===(e=this.device)||void 0===e?void 0:e.name)),this.router.navigate(["../device-list"],{relativeTo:this.route})})}showTips(){$(".a-question-circle-o").tooltip("toggle")}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(r.e),o.Ib(r.a),o.Ib(a.a),o.Ib(b.a))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-edit-device"]],decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-edit","text-danger","fa-lg"],[1,"mx-2"],[1,"text-primary"],[1,"card-header","py-1"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-save","mr-1"],[1,"card-body"],[1,"card","mb-3"],[1,"fa","fa-tags","fa-lg","text-danger"],[1,"form-group","row"],[1,"col-md-2","col-form-label"],[1,"col-md-10"],["type","text","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"invalid-feedback"],["type","text","name","description",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","labels",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],["name","adminState",1,"form-control",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"],["for","operatingState",1,"col-md-2","col-form-label"],["name","operatingState",1,"form-control",3,"ngModel","ngModelChange"],["value","UP"],["value","DOWN"],[1,"mb-3"],[3,"deviceSvcSelected","singleDeviceSvcSelectedEvent"],[3,"enableSelectAll","toolbars","singleProfileSelected","associatedDeviceColumn","singleProfileSelectedEvent"],[1,"row"],[1,"col-md-2","col-lg-2","border-right","border-secondary"],[1,"form-group"],["type","text","name","protocolName",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-10","col-lg-10"],[1,"badge","badge-secondary","font-weight-bold"],[1,"fa","fa-plus-circle","mr-2"],["role","button",1,"user-select-none",3,"click"],[4,"ngFor","ngForOf"],["class","card mb-3",4,"ngFor","ngForOf"],[1,"form-inline","mb-1"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","name","propertyKey",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"form-group","mx-2"],[1,"fa","fa-long-arrow-right"],["type","text","name","PropertyValue",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"input-group","ml-2"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"],[1,"form-group","row","has-validation"],[1,"input-group","mb-3",2,"width","250px"],["type","text","name","interval","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["name","eventIntervalUnit","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","ms"],["value","s"],["value","m"],["value","h"],["name","onchange",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],["value","true"],["value","false"],["name","resource","required","",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&o.kc(0,qe,93,21,"div",0),2&e&&o.Yb("ngIf",t.device)},directives:[n.k,c.n,c.e,c.f,c.a,c.k,c.d,c.g,c.l,c.h,c.m,re,me,n.j],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),e})(),We=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Cb({type:e,selectors:[["app-device-profile-center"]],decls:1,vars:0,template:function(e,t){1&e&&o.Jb(0,"router-outlet")},directives:[r.j],styles:[""]}),e})();var Ze=i("9vc0");let _e=(()=>{class e{constructor(e,t,i,n,c){this.metaSvc=e,this.msgSvc=t,this.errSvc=i,this.router=n,this.route=c}ngOnInit(){this.renderYamlSource()}renderYamlSource(){let e=document.getElementById("editor");this.codeMirrorEditor=CodeMirror.fromTextArea(e,{mode:"yaml",theme:"gruvbox-dark",foldGutter:!0,smartIndent:!0,showCursorWhenSelecting:!0,lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],autofocus:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,cursorHeight:.85,autocorrect:!0}),this.codeMirrorEditor.setSize("auto","600px"),this.codeMirrorEditor.on("drop",(e,t)=>{var i;this.yamlFile=null===(i=t.dataTransfer)||void 0===i?void 0:i.files[0]}),this.codeMirrorEditor.on("paste",(e,t)=>{})}submit(){this.profileYamlSource=this.codeMirrorEditor.getValue(),this.metaSvc.addProfileYamlByNameViaUIBackend(this.profileYamlSource).subscribe(e=>{this.errSvc.handleErrorForV2API(e)||(this.msgSvc.success("Add profile"),this.router.navigate(["../device-profile-list"],{relativeTo:this.route}))})}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(a.a),o.Ib(b.a),o.Ib(Ze.a),o.Ib(r.e),o.Ib(r.a))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-add-profile"]],decls:15,vars:0,consts:[[1,"card"],[1,"card-header"],[1,"text-danger","font-weight-bold","fa","fa-code","mr-2"],[1,"mr-3","font-weight-bold"],[1,"fa","fa-info-circle","text-success","font-weight-bold"],[1,"float-right"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save","mr-1"],[1,"card-body","p-0"],["id","editor","name","editor"]],template:function(e,t){1&e&&(o.Lb(0,"div",0),o.Lb(1,"div",1),o.Lb(2,"span"),o.Jb(3,"span",2),o.Lb(4,"span",3),o.mc(5,"Add Profile"),o.Kb(),o.Lb(6,"span",4),o.mc(7,"\xa0drag-and-drop is enabled"),o.Kb(),o.Kb(),o.Lb(8,"span",5),o.Lb(9,"button",6),o.Tb("click",function(){return t.submit()}),o.Jb(10,"i",7),o.Lb(11,"span"),o.mc(12,"Submit"),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(13,"div",8),o.Jb(14,"textarea",9),o.Kb(),o.Kb())},styles:[""]}),e})(),Xe=(()=>{class e{constructor(e,t,i,n,c){this.metaSvc=e,this.msgSvc=t,this.errSvc=i,this.router=n,this.route=c}ngOnInit(){this.renderYamlSource(),this.route.queryParams.subscribe(e=>{e.profileName&&(this.profileName=e.profileName,this.metaSvc.findProfileYamlByNameViaUIBackend(e.profileName).subscribe(e=>{this.codeMirrorEditor.setValue(e),this.codeMirrorEditor.refresh()}))})}update(){this.codeMirrorEditor.refresh(),this.metaSvc.updateProfileYamlContentViaUIBackend(this.codeMirrorEditor.getValue()).subscribe(e=>{this.errSvc.handleErrorForV2API(e)||(this.msgSvc.success("Update profile","name: "+this.profileName),this.router.navigate(["../device-profile-list"],{relativeTo:this.route}))})}renderYamlSource(){let e=document.getElementById("editor-edit");this.codeMirrorEditor=CodeMirror.fromTextArea(e,{mode:"yaml",theme:"gruvbox-dark",foldGutter:!0,smartIndent:!0,showCursorWhenSelecting:!0,lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],autofocus:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,cursorHeight:.85,autocorrect:!0}),this.codeMirrorEditor.setSize("auto","600px")}ngOnDestroy(){this.codeMirrorEditor=null}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(a.a),o.Ib(b.a),o.Ib(Ze.a),o.Ib(r.e),o.Ib(r.a))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-edit-profile"]],decls:12,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"text-danger","fa","fa-edit","mr-2"],[1,"float-right"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save","mr-1"],[1,"card-body","p-0"],["id","editor-edit","name","editor"]],template:function(e,t){1&e&&(o.Lb(0,"div",0),o.Lb(1,"div",1),o.Lb(2,"span"),o.Jb(3,"span",2),o.mc(4),o.Kb(),o.Lb(5,"span",3),o.Lb(6,"button",4),o.Tb("click",function(){return t.update()}),o.Lb(7,"span"),o.Jb(8,"i",5),o.mc(9,"Save"),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(10,"div",6),o.Jb(11,"textarea",7),o.Kb(),o.Kb()),2&e&&(o.xb(4),o.oc("",t.profileName," "))},styles:[""]}),e})(),ze=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Cb({type:e,selectors:[["app-provision-watcher-center"]],decls:2,vars:0,template:function(e,t){1&e&&(o.Lb(0,"p"),o.mc(1,"provision-watcher-center works!"),o.Kb())},styles:[""]}),e})(),He=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Cb({type:e,selectors:[["app-provision-watcher-list"]],decls:2,vars:0,template:function(e,t){1&e&&(o.Lb(0,"p"),o.mc(1,"provision-watcher-list works!"),o.Kb())},styles:[""]}),e})(),Qe=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Cb({type:e,selectors:[["app-add-provision-watcher"]],decls:2,vars:0,template:function(e,t){1&e&&(o.Lb(0,"p"),o.mc(1,"add-provision-watcher works!"),o.Kb())},styles:[""]}),e})();const et=[{path:"",component:s,children:[{path:"",redirectTo:"device-service-list",pathMatch:"full"},{path:"device-service-list",component:f},{path:"device-center",component:g,children:[{path:"",redirectTo:"device-list",pathMatch:"full"},{path:"device-list",component:ne},{path:"add-device",component:Je},{path:"edit-device",component:Ge}]},{path:"device-profile-center",component:We,children:[{path:"",redirectTo:"device-profile-list",pathMatch:"full"},{path:"device-profile-list",component:me},{path:"edit-profile",component:Xe},{path:"add-profile",component:_e}]},{path:"provision-watcher-center",component:ze,children:[{path:"",redirectTo:"provision-watcher-list",pathMatch:"full"},{path:"provision-watcher-list",component:He},{path:"edit-provision-watcher",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Cb({type:e,selectors:[["app-edit-provision-watcher"]],decls:2,vars:0,template:function(e,t){1&e&&(o.Lb(0,"p"),o.mc(1,"edit-provision-watcher works!"),o.Kb())},styles:[""]}),e})()},{path:"add-provision-watcher",component:Qe}]}]}];let tt=(()=>{class e{}return e.\u0275mod=o.Gb({type:e}),e.\u0275inj=o.Fb({factory:function(t){return new(t||e)},imports:[[r.i.forChild(et)],r.i]}),e})(),it=(()=>{class e{}return e.\u0275mod=o.Gb({type:e}),e.\u0275inj=o.Fb({factory:function(t){return new(t||e)},imports:[[n.b,c.b,tt]]}),e})()}}]);