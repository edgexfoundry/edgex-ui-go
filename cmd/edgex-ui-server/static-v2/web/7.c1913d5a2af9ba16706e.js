(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"7PPe":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i("tk/3"),c=i("JIr8"),o=i("fXoL"),r=i("9vc0");let s=(()=>{class e{constructor(e,t){this.http=e,this.errorSvc=t,this.endpoint="/command",this.version="/api/v2",this.urlPrefix=`${this.endpoint}${this.version}`,this.endpointHealthUrl="/ping",this.versionUrl="/version",this.configUrl="/config",this.deviceCoreCommandListUrl=this.urlPrefix+"/device/all",this.commandsByDeviceIdUrl=this.urlPrefix+"/device/",this.commandsByDeviceNameUrl=this.urlPrefix+"/device/name/",this.issueCmdByDeviceNameAndCmdNameUrl=this.urlPrefix+"/device/name/",this.httpPostOrPutJSONOptions={headers:new n.c({"Content-type":"application/json",Authorization:""})}}getConfig(){return this.http.get(`${this.urlPrefix}${this.configUrl}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findCommnadsByDeviceId(e){return this.http.get(`${this.commandsByDeviceIdUrl}${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}allDeviceCoreCommandsPagination(e,t){return this.http.get(`${this.deviceCoreCommandListUrl}?offset=${e}&limit=${t}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findDeviceAssociatedCommnadsByDeviceName(e){return this.http.get(`${this.commandsByDeviceNameUrl}${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findAllDeviceCommnads(){return this.http.get(this.urlPrefix+"/device").pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}issueGetBinaryCmd(e,t){return this.http.request("GET",`${this.commandsByDeviceIdUrl}${e}/command/${t}`,{responseType:"arraybuffer"}).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}issueGetCmd(e,t){return this.http.get(`${this.issueCmdByDeviceNameAndCmdNameUrl}${e}/${t}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}issueSetCmd(e,t,i){return this.http.put(`${this.issueCmdByDeviceNameAndCmdNameUrl}${e}/${t}`,JSON.stringify(i),this.httpPostOrPutJSONOptions).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}}return e.\u0275fac=function(t){return new(t||e)(o.Qb(n.a),o.Qb(r.a))},e.\u0275prov=o.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"9vc0":function(e,t,i){"use strict";i.d(t,"a",function(){return r});var n=i("HDdC"),c=i("fXoL"),o=i("hsl2");let r=(()=>{class e{constructor(e){this.msgSvc=e}handleErrorForV2API(e){let t=Object.prototype.toString.call(e);if("[object Array]"===t){if(!e[0].statusCode.toString().startsWith("20"))return this.msgSvc.errors(`code: ${e[0].statusCode}, message: ${e[0].message}`),!0}else if("[object Object]"===t&&!e.statusCode.toString().startsWith("20"))return this.msgSvc.errors(`code: ${e.statusCode}, message: ${e.message}`),!0;return!1}handleError(e){return e.error instanceof ErrorEvent?this.msgSvc.errors("'An error occurred:', "+e.error.message):"[object Object]"===Object.prototype.toString.call(e.error)?this.msgSvc.errors(`code: ${e.error.statusCode} , message: ${e.error.message}`):"[object String]"===Object.prototype.toString.call(e.error)?this.msgSvc.errors(`code: ${e.status} , message: ${e.error}`):this.msgSvc.errors(`code: ${e.status} , message: ${e.message}`),function(e,t){return new n.a(t=>t.error(e))}(`Backend returned code ${e.error.statusCode}, body was: `+e.error.message)}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(o.a))},e.\u0275prov=c.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},limL:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i("tk/3"),c=i("JIr8"),o=i("fXoL"),r=i("9vc0");let s=(()=>{class e{constructor(e,t){this.http=e,this.errorSvc=t,this.endpoint="/metadata",this.version="/api/v2",this.urlPrefix=`${this.endpoint}${this.version}`,this.configUrl="/config",this.devicesListUrl=this.urlPrefix+"/device/all",this.addOneDeviceUrl=this.urlPrefix+"/device",this.updateOneDeviceUrl=this.urlPrefix+"/device",this.deleteOneDeviceByIdUrl=this.urlPrefix+"/device/Id",this.deleteOneDeviceByNameUrl=this.urlPrefix+"/device/name",this.findDeviceByNameUrl=this.urlPrefix+"/device/name",this.findDeviceByIdUrl=this.urlPrefix+"/device/id",this.findDevicesByServiceIdUrl=this.urlPrefix+"/device/service/id",this.findDevicesByServiceNameUrl=this.urlPrefix+"/device/service/name",this.findDevicesByProfileIdUrl=this.urlPrefix+"/device/profile/id",this.findDevicesByProfileNameUrl=this.urlPrefix+"/device/profile/name",this.deviceServicesListUrl=this.urlPrefix+"/deviceservice/all",this.updateDeviceServiceUrl=this.urlPrefix+"/deviceservice",this.findDeviceServiceByIdUrl=this.urlPrefix+"/deviceservice/id",this.findDeviceServiceByNameUrl=this.urlPrefix+"/deviceservice/name",this.deviceProfilesListUrl=this.urlPrefix+"/deviceprofile/all",this.findProfilesByIdUrl=this.urlPrefix+"/deviceprofile",this.findProfilesByNameUrl=this.urlPrefix+"/deviceprofile/name",this.updateDeviceProfileUrl=this.urlPrefix+"/deviceprofile",this.uploadProfileYamlFileUrl=this.urlPrefix+"/deviceprofile/uploadfile",this.uploadProfileYamlContentUrl=this.urlPrefix+"/deviceprofile/upload",this.deviceProfileYamlUrl=this.urlPrefix+"/deviceprofile/yaml",this.deleteProfileByIdUrl=this.urlPrefix+"/deviceprofile/id",this.deleteProfileByNamedUrl=this.urlPrefix+"/deviceprofile/name",this.httpPostOrPutJSONOptions={headers:new n.c({"Content-type":"application/json",Authorization:""})}}getConfig(){return this.http.get(`${this.urlPrefix}${this.configUrl}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}allDevices(){return this.http.get(""+this.devicesListUrl).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}allDevicesPagination(e,t){return this.http.get(`${this.devicesListUrl}?offset=${e}&limit=${t}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}addDevice(e){let t=""+this.addOneDeviceUrl;return e.apiVersion="v2",this.http.post(t,JSON.stringify([{apiVersion:"v2",device:e}]),this.httpPostOrPutJSONOptions).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}deleteOneDeviceByName(e){return this.http.delete(`${this.deleteOneDeviceByNameUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}deleteOneDeviceById(e){return this.http.delete(`${this.deleteOneDeviceByIdUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}updateDevice(e){return this.http.patch(""+this.updateOneDeviceUrl,JSON.stringify([{apiVersion:"v2",device:e}]),{headers:new n.c({"Content-type":"application/json"})}).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findDeviceByName(e){return this.http.get(`${this.findDeviceByNameUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findDeviceById(e){return this.http.get(`${this.findDeviceByIdUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findDevicesByServiceId(e){return this.http.get(`${this.findDevicesByServiceIdUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findDevicesByServiceName(e,t,i){return this.http.get(`${this.findDevicesByServiceNameUrl}/${i}?offset=${e}&limit=${t}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findDevicesByProfileId(e){return this.http.get(`${this.findDevicesByProfileIdUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findDevicesByProfileName(e,t,i){return this.http.get(`${this.findDevicesByProfileNameUrl}/${i}?offset=${e}&limit=${t}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}allDeviceServices(){return this.http.get(this.deviceServicesListUrl+"?offset=0&limit=-1").pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findAllDeviceServicesPagination(e,t){return this.http.get(`${this.deviceServicesListUrl}?offset=${e}&limit=${t}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}updateDeviceService(e){return this.http.patch(""+this.updateDeviceServiceUrl,JSON.stringify([{apiVersion:"v2",service:e}]),this.httpPostOrPutJSONOptions).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findDevcieServiceById(e){return this.http.get(`${this.findDeviceServiceByIdUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findDevcieServiceByName(e){return this.http.get(`${this.findDeviceServiceByNameUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}allDeviceProfoles(){return this.http.get(this.deviceProfilesListUrl+"?offset=0&limit=-1").pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}allDeviceProfolesPagination(e,t){return this.http.get(`${this.deviceProfilesListUrl}?offset=${e}&limit=${t}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}addProfileYamlByNameViaUIBackend(e){return this.http.request("POST","/api/v1/profile/yaml",{body:e,responseType:"text"}).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findProfileById(e){return this.http.get(`${this.findProfilesByIdUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findProfileByName(e){return this.http.get(`${this.findProfilesByNameUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findProfileYamlByNameViaUIBackend(e){return this.http.request("GET","/api/v1/profile/yaml/name/"+e,{responseType:"text"}).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}uploadProfileYamlFile(e){return this.http.request("POST",""+this.uploadProfileYamlFileUrl,{body:e,responseType:"text"}).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}updateDeviceProfile(e){return this.http.put(""+this.updateDeviceProfileUrl,e,this.httpPostOrPutJSONOptions).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}updateProfileYamlContentViaUIBackend(e){return this.http.put("/api/v1/profile/yaml",e,{headers:new n.c({"Content-Type":"text/plain; charset=utf-8"})}).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}uploadProfileYamlContent(e){return this.http.request("POST",""+this.uploadProfileYamlContentUrl,{body:e,responseType:"text",headers:new n.c({"Content-Type":"text/plain; charset=utf-8"})}).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}findProfileYamlById(e){return this.http.request("GET",`${this.deviceProfileYamlUrl}/${e}`,{responseType:"text"})}deleteProfileById(e){return this.http.delete(`${this.deleteProfileByIdUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}deleteProfileByName(e){return this.http.delete(`${this.deleteProfileByNamedUrl}/${e}`).pipe(Object(c.a)(e=>this.errorSvc.handleError(e)))}}return e.\u0275fac=function(t){return new(t||e)(o.Qb(n.a),o.Qb(r.a))},e.\u0275prov=o.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},qggS:function(e,t,i){"use strict";i.r(t),i.d(t,"MetadataModule",function(){return nt});var n=i("ofXK"),c=i("3Pt+"),o=i("tyNb"),r=i("fXoL");let s=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Cb({type:e,selectors:[["app-metadata"]],decls:17,vars:0,consts:[[1,"card"],[1,"card-header"],[1,"nav","nav-tabs","card-header-tabs","font-weight-bold"],[1,"nav-item"],["routerLink","./device-service-list","routerLinkActive","active",1,"nav-link"],["routerLink","./device-center","routerLinkActive","active",1,"nav-link"],["routerLink","./device-profile-center","routerLinkActive","active",1,"nav-link"],["routerLink","./provision-watcher-center","routerLinkActive","active",1,"nav-link"],[1,"card-body"]],template:function(e,t){1&e&&(r.Lb(0,"div",0),r.Lb(1,"div",1),r.Lb(2,"ul",2),r.Lb(3,"li",3),r.Lb(4,"a",4),r.mc(5,"Device Service"),r.Kb(),r.Kb(),r.Lb(6,"li",3),r.Lb(7,"a",5),r.mc(8,"Device"),r.Kb(),r.Kb(),r.Lb(9,"li",3),r.Lb(10,"a",6),r.mc(11,"Device Profile"),r.Kb(),r.Kb(),r.Lb(12,"li",3),r.Lb(13,"a",7),r.mc(14,"Provision Watcher"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(15,"div",8),r.Jb(16,"router-outlet"),r.Kb(),r.Kb())},directives:[o.h,o.g,o.j],styles:[".active-link[_ngcontent-%COMP%]{color:#922c48;background-color:rgba(146,44,72,.4)!important}"]}),e})();var a=i("limL"),b=i("hsl2");function l(e,t){if(1&e&&(r.Lb(0,"p"),r.mc(1),r.Kb()),2&e){const e=r.Vb().$implicit;r.xb(1),r.nc(e.description)}}function d(e,t){1&e&&(r.Lb(0,"p",19),r.mc(1,"no description."),r.Kb())}function m(e,t){if(1&e&&(r.Lb(0,"span",20),r.mc(1),r.Kb()),2&e){const e=r.Vb().$implicit;r.xb(1),r.nc(e.adminState)}}function v(e,t){if(1&e&&(r.Lb(0,"span",21),r.mc(1),r.Kb()),2&e){const e=r.Vb().$implicit;r.xb(1),r.nc(e.adminState)}}function p(e,t){if(1&e){const e=r.Mb();r.Lb(0,"a",22),r.Tb("click",function(){r.gc(e);const t=r.Vb().$implicit;return r.Vb().associatedDevicesSkip(t.name)}),r.Jb(1,"i",23),r.mc(2),r.Kb()}if(2&e){const e=r.Vb().$implicit,t=r.Vb();r.xb(2),r.oc(" Associated Devices \xa0 ",t.associatedDevices.get(e.name),"")}}function h(e,t){if(1&e){const e=r.Mb();r.Lb(0,"li",3),r.Lb(1,"div",4),r.Lb(2,"div",5),r.Jb(3,"i",6),r.Kb(),r.Lb(4,"div",7),r.Lb(5,"div",8),r.Lb(6,"h5",9),r.mc(7),r.Kb(),r.Kb(),r.kc(8,l,2,1,"p",10),r.kc(9,d,2,0,"ng-template",null,11,r.lc),r.Lb(11,"div"),r.Lb(12,"span",12),r.mc(13),r.Kb(),r.Lb(14,"span",13),r.kc(15,m,2,1,"span",14),r.kc(16,v,2,1,"span",15),r.Kb(),r.kc(17,p,3,1,"a",16),r.Lb(18,"span",17),r.Tb("click",function(){r.gc(e);const i=t.$implicit;return r.Vb().edit(i)}),r.Jb(19,"i",18),r.mc(20," Setting"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb()}if(2&e){const e=t.$implicit,i=r.fc(10),n=r.Vb();r.xb(7),r.nc(e.name),r.xb(1),r.Yb("ngIf",e.description)("ngIfElse",i),r.xb(5),r.oc("Port ",n.getSvcPort(e.baseAddress),""),r.xb(1),r.Yb("ngSwitch",e.adminState),r.xb(1),r.Yb("ngSwitchCase","UNLOCKED"),r.xb(2),r.Yb("ngIf",n.associatedDevices.size)}}function u(e,t){if(1&e){const e=r.Mb();r.Lb(0,"div",24),r.Lb(1,"div",25),r.Jb(2,"i",26),r.Lb(3,"span"),r.mc(4),r.Kb(),r.Lb(5,"button",27),r.Tb("click",function(){return r.gc(e),r.Vb().updateSvc()}),r.mc(6,"Save"),r.Kb(),r.Kb(),r.Lb(7,"div",28),r.Lb(8,"form"),r.Lb(9,"div",29),r.Lb(10,"label",30),r.mc(11,"Description"),r.Kb(),r.Lb(12,"div",31),r.Lb(13,"input",32),r.Tb("ngModelChange",function(t){return r.gc(e),r.Vb().deviceSvcSelected.description=t}),r.Kb(),r.Kb(),r.Kb(),r.Lb(14,"div",29),r.Lb(15,"label",33),r.mc(16,"AdminState"),r.Kb(),r.Lb(17,"div",31),r.Lb(18,"select",34),r.Tb("ngModelChange",function(t){return r.gc(e),r.Vb().deviceSvcSelected.adminState=t}),r.Lb(19,"option",35),r.mc(20,"UNLOCKED"),r.Kb(),r.Lb(21,"option",36),r.mc(22,"LOCKED"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb()}if(2&e){const e=r.Vb();r.xb(4),r.oc("edit ",e.deviceSvcSelected.name,""),r.xb(9),r.Yb("ngModel",e.deviceSvcSelected.description),r.xb(5),r.Yb("ngModel",e.deviceSvcSelected.adminState)}}let f=(()=>{class e{constructor(e,t,i,n){this.metaSvc=e,this.msgSvc=t,this.router=i,this.route=n,this.deviceServiceList=[],this.associatedDevices=new Map}ngOnInit(){this.metaSvc.allDeviceServices().subscribe(e=>{this.deviceServiceList=e.services,this.deviceServiceList.forEach(e=>{this.metaSvc.findDevicesByServiceName(0,20,e.name).subscribe(t=>{this.associatedDevices.set(e.name,t.devices.length>20?"20+":String(t.devices.length))})})})}getSvcPort(e){return new URL(e).port}edit(e){this.deviceSvcSelected=e}updateSvc(){this.metaSvc.updateDeviceService(this.deviceSvcSelected).subscribe(()=>{var e;this.msgSvc.success("update device service","name: "+(null===(e=this.deviceSvcSelected)||void 0===e?void 0:e.name)),this.deviceSvcSelected=void 0})}associatedDevicesSkip(e){this.router.navigate(["../device-center"],{queryParams:{svcName:e},relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(r.Ib(a.a),r.Ib(b.a),r.Ib(o.e),r.Ib(o.a))},e.\u0275cmp=r.Cb({type:e,selectors:[["app-device-service-media-list"]],decls:3,vars:2,consts:[[1,"list-group","p-0"],["class","list-group-item list-group-item-action list-group-item-light",4,"ngFor","ngForOf"],["class","card mt-3",4,"ngIf"],[1,"list-group-item","list-group-item-action","list-group-item-light"],[1,"media"],[1,"align-self-center","mr-3"],[1,"fa","fa-tags","fa-2x","text-secondary"],[1,"media-body"],[1,"mt-0","mb-1"],[1,"d-inline","mr-3","align-middle","text-dark"],[4,"ngIf","ngIfElse"],["nodesc",""],[1,"badge","badge-info","mr-3"],[3,"ngSwitch"],["class","badge badge-success mr-3",4,"ngSwitchCase"],["class","badge badge-danger mr-3",4,"ngSwitchDefault"],["class","badge badge-primary","role","button",3,"click",4,"ngIf"],["role","button",1,"badge","badge-secondary","float-right",3,"click"],[1,"fa","fa-cog"],[1,"my-1"],[1,"badge","badge-success","mr-3"],[1,"badge","badge-danger","mr-3"],["role","button",1,"badge","badge-primary",3,"click"],[1,"fa","fa-sitemap"],[1,"card","mt-3"],[1,"card-header"],[1,"fa","fa-edit","mr-1","text-danger"],[1,"btn","btn-success","btn-sm","float-right",3,"click"],[1,"card-body"],[1,"form-group","row"],["for","deviceDesc",1,"col-md-2","col-form-label"],[1,"col-md-10"],["type","text","name","deviceSvcDescription",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],["name","deviceSvcAdminState",1,"form-control",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"]],template:function(e,t){1&e&&(r.Lb(0,"ul",0),r.kc(1,h,21,7,"li",1),r.Kb(),r.kc(2,u,23,3,"div",2)),2&e&&(r.xb(1),r.Yb("ngForOf",t.deviceServiceList),r.xb(1),r.Yb("ngIf",t.deviceSvcSelected))},directives:[n.j,n.k,n.l,n.m,n.n,c.n,c.e,c.f,c.a,c.d,c.g,c.l,c.h,c.m],styles:[""]}),e})(),g=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Cb({type:e,selectors:[["app-device-center"]],decls:1,vars:0,template:function(e,t){1&e&&r.Jb(0,"router-outlet")},directives:[o.j],styles:[""]}),e})();var L=i("7PPe");function K(e,t){if(1&e&&(r.Lb(0,"span"),r.Lb(1,"span",48),r.mc(2,"DeviceService"),r.Kb(),r.Lb(3,"span",49),r.mc(4),r.Kb(),r.Lb(5,"span"),r.mc(6,"Associated Device List"),r.Kb(),r.Kb()),2&e){const e=r.Vb();r.xb(4),r.nc(e.associatedSvcName)}}function S(e,t){if(1&e&&(r.Lb(0,"span"),r.Lb(1,"span",48),r.mc(2,"DeviceProfile"),r.Kb(),r.Lb(3,"span",49),r.mc(4),r.Kb(),r.Lb(5,"span"),r.mc(6,"Associated Device List"),r.Kb(),r.Kb()),2&e){const e=r.Vb();r.xb(4),r.nc(e.associatedProfileName)}}function x(e,t){1&e&&(r.Lb(0,"span"),r.mc(1,"Device List"),r.Kb())}function y(e,t){if(1&e&&(r.Lb(0,"span",61),r.mc(1),r.Kb()),2&e){const e=r.Vb().$implicit;r.xb(1),r.nc(e.adminState)}}function P(e,t){if(1&e&&(r.Lb(0,"span",62),r.mc(1),r.Kb()),2&e){const e=r.Vb().$implicit;r.xb(1),r.nc(e.adminState)}}function C(e,t){if(1&e&&(r.Lb(0,"span",61),r.mc(1),r.Kb()),2&e){const e=r.Vb().$implicit;r.xb(1),r.oc(" ",e.operatingState,"")}}function k(e,t){if(1&e&&(r.Lb(0,"span",62),r.mc(1),r.Kb()),2&e){const e=r.Vb().$implicit;r.xb(1),r.oc(" ",e.operatingState,"")}}function D(e,t){if(1&e&&(r.Lb(0,"span",62),r.mc(1),r.Kb()),2&e){const e=r.Vb().$implicit;r.xb(1),r.oc(" ",e.operatingState,"")}}const N=function(e){return{profileName:e}};function I(e,t){if(1&e){const e=r.Mb();r.Lb(0,"tr"),r.Lb(1,"td"),r.Lb(2,"input",19),r.Tb("click",function(i){r.gc(e);const n=t.$implicit;return r.Vb().selectOne(i,n)}),r.Kb(),r.Kb(),r.Lb(3,"td",50),r.mc(4),r.Kb(),r.Lb(5,"td",50),r.mc(6),r.Kb(),r.Lb(7,"td"),r.mc(8),r.Kb(),r.Lb(9,"td"),r.mc(10),r.Kb(),r.Lb(11,"td"),r.Lb(12,"span",51),r.kc(13,y,2,1,"span",52),r.kc(14,P,2,1,"span",53),r.Kb(),r.Kb(),r.Lb(15,"td",54),r.Lb(16,"span",51),r.kc(17,C,2,1,"span",52),r.kc(18,k,2,1,"span",55),r.kc(19,D,2,1,"span",53),r.Kb(),r.Kb(),r.Lb(20,"td",54),r.Lb(21,"span",56),r.Tb("click",function(){r.gc(e);const i=t.$implicit;return r.Vb().checkDeviceCommand(i)}),r.Jb(22,"i",57),r.Kb(),r.Kb(),r.Lb(23,"td",54),r.Lb(24,"span",56),r.Tb("click",function(){r.gc(e);const i=t.$implicit;return r.Vb().checkAutoEvent(i)}),r.Jb(25,"i",58),r.Kb(),r.Kb(),r.Lb(26,"td"),r.Lb(27,"a",59),r.mc(28),r.Kb(),r.Kb(),r.Lb(29,"td"),r.Lb(30,"a",60),r.mc(31),r.Kb(),r.Kb(),r.Kb()}if(2&e){const e=t.$implicit,i=r.Vb();r.Ab("table-active",i.isChecked(e.id)||i.associatedCmdDeviceName===e.name||i.associatedAutoEventsDeviceName===e.name),r.xb(2),r.Yb("checked",i.isChecked(e.id)),r.xb(2),r.nc(e.id),r.xb(2),r.nc(e.name),r.xb(2),r.nc(e.description),r.xb(2),r.nc(e.labels),r.xb(2),r.Yb("ngSwitch",e.adminState),r.xb(1),r.Yb("ngSwitchCase","UNLOCKED"),r.xb(3),r.Yb("ngSwitch",e.operatingState),r.xb(1),r.Yb("ngSwitchCase","UP"),r.xb(1),r.Yb("ngSwitchCase","DOWN"),r.xb(3),r.Ab("badge-danger",i.associatedCmdDeviceName===e.name),r.xb(3),r.Ab("badge-danger",i.associatedAutoEventsDeviceName===e.name),r.xb(3),r.Yb("queryParams",r.dc(19,N,e.profileName)),r.xb(1),r.nc(e.profileName),r.xb(3),r.nc(e.serviceName)}}function M(e,t){if(1&e&&(r.Lb(0,"tr"),r.Lb(1,"td"),r.mc(2),r.Kb(),r.Lb(3,"td"),r.Lb(4,"span",71),r.mc(5),r.Kb(),r.Kb(),r.Lb(6,"td"),r.Lb(7,"span",72),r.mc(8),r.Kb(),r.Kb(),r.Kb()),2&e){const e=t.$implicit;r.xb(2),r.nc(e.sourceName),r.xb(3),r.nc(e.interval),r.xb(3),r.nc(e.onChange)}}function E(e,t){if(1&e&&(r.Lb(0,"div"),r.Lb(1,"div",65),r.Lb(2,"div",66),r.Lb(3,"span",67),r.Jb(4,"i",58),r.Kb(),r.Lb(5,"span",68),r.mc(6),r.Kb(),r.mc(7," Associated AutoEvents "),r.Kb(),r.Lb(8,"div",69),r.Lb(9,"div",15),r.Lb(10,"table",16),r.Lb(11,"thead",17),r.Lb(12,"th",18),r.mc(13,"Resource"),r.Kb(),r.Lb(14,"th",18),r.mc(15,"Interval"),r.Kb(),r.Lb(16,"th",18),r.mc(17,"Onchange"),r.Kb(),r.Kb(),r.Lb(18,"tbody"),r.kc(19,M,9,3,"tr",70),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb()),2&e){const e=r.Vb(2);r.xb(6),r.oc(" ",e.associatedAutoEventsDeviceName,""),r.xb(13),r.Yb("ngForOf",e.autoEvents)}}function O(e,t){if(1&e&&(r.Lb(0,"div",65),r.Lb(1,"div",66),r.Lb(2,"span",67),r.Jb(3,"i",58),r.Kb(),r.Lb(4,"span",68),r.mc(5),r.Kb(),r.mc(6," Associated AutoEvents "),r.Kb(),r.Lb(7,"div",73),r.Lb(8,"h5",74),r.Jb(9,"i",43),r.mc(10," no associated AutoEvents"),r.Kb(),r.Kb(),r.Kb()),2&e){const e=r.Vb(2);r.xb(5),r.oc(" ",e.associatedAutoEventsDeviceName,"")}}function w(e,t){if(1&e&&(r.Lb(0,"div"),r.kc(1,E,20,2,"div",63),r.kc(2,O,11,1,"ng-template",null,64,r.lc),r.Kb()),2&e){const e=r.fc(3),t=r.Vb();r.xb(1),r.Yb("ngIf",t.autoEvents)("ngIfElse",e)}}function A(e,t){1&e&&r.Jb(0,"div")}function T(e,t){if(1&e&&(r.Lb(0,"div"),r.kc(1,A,1,0,"div",75),r.Kb()),2&e){const e=r.Vb(),t=r.fc(78),i=r.fc(80);r.xb(1),r.Yb("ngIf",e.deviceCoreCommand)("ngIfThen",t)("ngIfElse",i)}}function Y(e,t){if(1&e){const e=r.Mb();r.Lb(0,"li",85),r.Tb("click",function(){r.gc(e);const i=t.$implicit;return r.Vb(2).selectCmd(i)}),r.mc(1),r.Kb()}if(2&e){const e=t.$implicit,i=r.Vb(2);r.Ab("list-group-item-info",(null==i.selectedCmd?null:i.selectedCmd.name)===e.name),r.xb(1),r.nc(e.name)}}function V(e,t){if(1&e){const e=r.Mb();r.Lb(0,"button",97),r.Tb("click",function(){return r.gc(e),r.Vb(3).issueGetCmd()}),r.mc(1,"try"),r.Kb()}}function U(e,t){1&e&&r.Jb(0,"div")}function B(e,t){if(1&e&&(r.Lb(0,"span",102),r.mc(1),r.Kb()),2&e){const e=r.Vb(4);r.xb(1),r.oc(" ",e.cmdGetResponse,"")}}function J(e,t){if(1&e&&(r.Lb(0,"pre",103),r.mc(1),r.Kb()),2&e){const e=r.Vb(4);r.xb(1),r.nc(e.cmdGetResponseRaw)}}function j(e,t){if(1&e&&(r.Lb(0,"div"),r.Lb(1,"span",98),r.mc(2,"Response:"),r.Kb(),r.kc(3,B,2,1,"span",99),r.Kb(),r.Lb(4,"div",100),r.Lb(5,"span",98),r.mc(6,"ResponseRaw:"),r.Kb(),r.kc(7,J,2,1,"pre",101),r.Kb()),2&e){const e=r.Vb(3);r.xb(3),r.Yb("ngIf",e.cmdGetResponse),r.xb(4),r.Yb("ngIf",e.cmdGetResponseRaw)}}function R(e,t){1&e&&(r.Lb(0,"h6",74),r.Jb(1,"i",43),r.mc(2," no Get method"),r.Kb())}function F(e,t){if(1&e){const e=r.Mb();r.Lb(0,"button",97),r.Tb("click",function(){return r.gc(e),r.Vb(3).issueSetCmd()}),r.mc(1,"try"),r.Kb()}}function q(e,t){1&e&&r.Jb(0,"div")}function G(e,t){if(1&e&&(r.Lb(0,"div"),r.Lb(1,"label",110),r.mc(2),r.Kb(),r.Lb(3,"select",111),r.Lb(4,"option",112),r.mc(5,"false"),r.Kb(),r.Lb(6,"option",112),r.mc(7,"true"),r.Kb(),r.Kb(),r.Kb()),2&e){const e=r.Vb().$implicit;r.xb(1),r.Zb("for",e.resourceName),r.xb(1),r.oc(" ",e.resourceName," "),r.xb(1),r.Zb("id",e.resourceName),r.Zb("name",e.resourceName),r.xb(1),r.Yb("ngValue",!1),r.xb(2),r.Yb("ngValue",!0)}}function W(e,t){if(1&e&&(r.Lb(0,"label",110),r.mc(1),r.Kb(),r.Jb(2,"input",113)),2&e){const e=r.Vb().$implicit;r.Zb("for",e.resourceName),r.xb(1),r.nc(e.resourceName),r.xb(1),r.Zb("id",e.resourceName),r.Zb("name",e.resourceName),r.ac("placeholder","valueType: ",e.valueType,"")}}function Z(e,t){if(1&e&&(r.Lb(0,"div",108),r.kc(1,G,8,6,"div",63),r.kc(2,W,3,5,"ng-template",null,109,r.lc),r.Kb()),2&e){const e=t.$implicit,i=r.fc(3);r.xb(1),r.Yb("ngIf","Bool"==e.valueType)("ngIfElse",i)}}function _(e,t){if(1&e&&(r.Lb(0,"div",106),r.kc(1,Z,4,2,"div",107),r.Kb()),2&e){const e=r.Vb(5);r.xb(1),r.Yb("ngForOf",e.selectedCmdSetParams)}}function X(e,t){if(1&e&&(r.Lb(0,"div",80),r.Lb(1,"div",66),r.mc(2,"Set Parameters"),r.Kb(),r.Lb(3,"div",77),r.kc(4,_,2,1,"div",105),r.Kb(),r.Kb()),2&e){const e=r.Vb(4);r.xb(4),r.Yb("ngIf",e.selectedCmd)}}function z(e,t){if(1&e&&(r.Lb(0,"span",102),r.mc(1),r.Kb()),2&e){const e=r.Vb(4);r.xb(1),r.nc(e.cmdSetResponse)}}function H(e,t){if(1&e&&(r.Lb(0,"pre",103),r.mc(1),r.Kb()),2&e){const e=r.Vb(4);r.xb(1),r.nc(e.cmdSetResponseRaw)}}function Q(e,t){if(1&e&&(r.kc(0,X,5,1,"div",104),r.Lb(1,"div"),r.Lb(2,"div"),r.Lb(3,"span",98),r.mc(4," Response:"),r.Kb(),r.kc(5,z,2,1,"span",99),r.Kb(),r.Lb(6,"div",100),r.Lb(7,"span",98),r.mc(8," ResponseRaw:"),r.Kb(),r.kc(9,H,2,1,"pre",101),r.Kb(),r.Kb()),2&e){const e=r.Vb(3);r.Yb("ngIf",e.selectedCmdSetParams),r.xb(5),r.Yb("ngIf",e.cmdSetResponse),r.xb(4),r.Yb("ngIf",e.cmdSetResponseRaw)}}function ee(e,t){1&e&&(r.Lb(0,"h6",74),r.Jb(1,"i",43),r.mc(2," no Set method"),r.Kb())}function te(e,t){if(1&e&&(r.Lb(0,"div",0),r.Lb(1,"div",66),r.Lb(2,"span",86),r.Jb(3,"i",87),r.mc(4),r.Kb(),r.Lb(5,"span"),r.mc(6,"Get and Set"),r.Kb(),r.Kb(),r.Lb(7,"div",88),r.Lb(8,"div",78),r.Lb(9,"div",89),r.Lb(10,"div",80),r.Lb(11,"div",66),r.mc(12," Get "),r.kc(13,V,2,0,"button",90),r.Kb(),r.Lb(14,"div",91),r.kc(15,U,1,0,"div",75),r.kc(16,j,8,2,"ng-template",null,92,r.lc),r.kc(18,R,3,0,"ng-template",null,93,r.lc),r.Kb(),r.Kb(),r.Kb(),r.Lb(20,"div",94),r.Lb(21,"div",0),r.Lb(22,"div",66),r.mc(23," Set "),r.kc(24,F,2,0,"button",90),r.Kb(),r.Lb(25,"div",77),r.kc(26,q,1,0,"div",75),r.kc(27,Q,10,3,"ng-template",null,95,r.lc),r.kc(29,ee,3,0,"ng-template",null,96,r.lc),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb()),2&e){const e=r.fc(17),t=r.fc(19),i=r.fc(28),n=r.fc(30),c=r.Vb(2);r.xb(4),r.oc(" ",c.selectedCmd.name," method:"),r.xb(9),r.Yb("ngIf",c.selectedCmd.get),r.xb(2),r.Yb("ngIf",c.selectedCmd.get)("ngIfThen",e)("ngIfElse",t),r.xb(9),r.Yb("ngIf",c.selectedCmd.set),r.xb(2),r.Yb("ngIf",c.selectedCmd.set)("ngIfThen",i)("ngIfElse",n)}}function ie(e,t){if(1&e&&(r.Lb(0,"div",65),r.Lb(1,"div",66),r.Lb(2,"span",67),r.Jb(3,"i",57),r.Kb(),r.Lb(4,"span",76),r.mc(5),r.Kb(),r.mc(6," Associated Commands "),r.Kb(),r.Lb(7,"div",77),r.Lb(8,"div",78),r.Lb(9,"div",79),r.Lb(10,"div",80),r.Lb(11,"div",1),r.mc(12," Command Name List "),r.Kb(),r.Lb(13,"div",69),r.Lb(14,"ul",81),r.kc(15,Y,2,3,"li",82),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(16,"div",83),r.kc(17,te,31,9,"div",84),r.Kb(),r.Kb(),r.Kb(),r.Kb()),2&e){const e=r.Vb();r.xb(5),r.nc(e.associatedCmdDeviceName),r.xb(10),r.Yb("ngForOf",e.deviceCoreCommand),r.xb(2),r.Yb("ngIf",e.selectedCmd)}}function ne(e,t){if(1&e&&(r.Lb(0,"div",65),r.Lb(1,"div",66),r.Lb(2,"span",67),r.Jb(3,"i",57),r.Kb(),r.Lb(4,"span",114),r.mc(5),r.Kb(),r.mc(6," Associated Commands "),r.Kb(),r.Lb(7,"div",73),r.Lb(8,"h5",74),r.Jb(9,"i",43),r.mc(10," no associated commands"),r.Kb(),r.Kb(),r.Kb()),2&e){const e=r.Vb();r.xb(5),r.nc(e.associatedCmdDeviceName)}}let ce=(()=>{class e{constructor(e,t,i,n,c){this.metaSvc=e,this.cmdSvc=t,this.msgSvc=i,this.route=n,this.router=c,this.deviceList=[],this.associatedSvcName="",this.associatedProfileName="",this.selectedDevice=[],this.isCheckedAll=!1,this.selectedCmd={},this.selectedCmdSetParams=[],this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.route.queryParams.subscribe(e=>e.svcName?(this.associatedSvcName=e.svcName,void this.getDeviceListByAssociatedSvc(this.associatedSvcName)):e.profileName?(this.associatedProfileName=e.profileName,void this.getDeviceListByAssociatedProfile(this.associatedProfileName)):(this.associatedSvcName="",this.associatedProfileName="",void this.getDeviceListPagination()))}renderPopoverComponent(){setTimeout(()=>{$('[data-toggle="popover"]').popover({trigger:"hover"})},250)}getDeviceList(){""===this.associatedSvcName?""===this.associatedProfileName?this.getDeviceListPagination():this.getDeviceListByAssociatedProfile(this.associatedSvcName):this.getDeviceListByAssociatedSvc(this.associatedSvcName)}getDeviceListByAssociatedSvc(e){this.metaSvc.findDevicesByServiceName(this.pageOffset,this.pageLimit,e).subscribe(e=>this.deviceList=e.devices)}getDeviceListByAssociatedProfile(e){this.metaSvc.findDevicesByProfileName(this.pageOffset,this.pageLimit,e).subscribe(e=>this.deviceList=e.devices)}getDeviceListPagination(){this.metaSvc.allDevicesPagination(this.pageOffset,this.pageLimit).subscribe(e=>{this.deviceList=e.devices})}refresh(){this.associatedProfileName="",this.associatedSvcName="",this.metaSvc.allDevicesPagination(0,this.pageLimit).subscribe(e=>{this.deviceList=e.devices,this.msgSvc.success("refresh"),this.resetPagination()})}edit(){this.router.navigate(["../edit-device"],{relativeTo:this.route,queryParams:{deviceName:this.selectedDevice[0].name}})}deleteConfirm(){$("#deleteConfirmDialog").modal("show")}delete(){this.selectedDevice.forEach((e,t)=>{this.metaSvc.deleteOneDeviceByName(e.name).subscribe(()=>{this.selectedDevice.splice(t,1),this.deviceList.forEach((t,i)=>{if(t.id===e.id)return this.deviceList.splice(i,1),void this.msgSvc.success("remove device "," Name: "+t.name)})})}),this.associatedCmdDeviceName=void 0,this.associatedAutoEventsDeviceName=void 0,$("#deleteConfirmDialog").modal("hide")}checkAutoEvent(e){this.associatedAutoEventsDeviceName=e.name,this.autoEvents=e.autoEvents,this.associatedCmdDeviceName=""}selectAll(e){if(e.target.checked)return this.selectedDevice=[],this.deviceList.forEach(e=>{this.selectedDevice.push(e),this.isChecked(e.id)}),void(this.isCheckedAll=!0);this.isCheckedAll=!1,this.selectedDevice=[],this.deviceList.forEach(e=>{this.isChecked(e.id)})}isChecked(e){return this.selectedDevice.findIndex(t=>t.id===e)>=0}selectOne(e,t){if(e.target.checked)return this.selectedDevice.push(t),void(this.selectedDevice.length===this.deviceList.length&&(this.isCheckedAll=!0));this.isCheckedAll=!1,this.isChecked(t.id),this.selectedDevice.splice(this.selectedDevice.indexOf(t),1)}checkDeviceCommand(e){this.resetResponse(),this.metaSvc.findProfileByName(e.profileName).subscribe(e=>this.associateDeviceProfile=e.profile),this.cmdSvc.findDeviceAssociatedCommnadsByDeviceName(e.name).subscribe(t=>{this.associatedAutoEventsDeviceName="",this.associatedCmdDeviceName=t.deviceCoreCommand.deviceName,this.associatedCmdDeviceId=e.id,this.deviceCoreCommand=t.deviceCoreCommand.coreCommands,this.selectedCmd=this.deviceCoreCommand[0],this.selectedCmdSetParams=this.selectedCmd.parameters})}selectCmd(e){this.selectedCmd=e,this.selectedCmdSetParams=this.selectedCmd.parameters,this.resetResponse()}resetResponse(){this.cmdGetResponse="",this.cmdGetResponseRaw="",this.cmdSetResponse="",this.cmdSetResponseRaw="",this.cmdBinaryResponse=!0,this.cmdBinaryResponseURL=""}issueGetCmd(){var e;this.cmdSvc.issueGetCmd(this.associatedCmdDeviceName,null===(e=this.selectedCmd)||void 0===e?void 0:e.name).subscribe(e=>{this.cmdGetResponseRaw=JSON.stringify(e.event.readings,null,3);let t=[];e.event.readings.forEach(e=>{t.push(e.value)}),this.cmdGetResponse=t.join(",")})}issueSetCmd(){var e,t;let i={};null===(e=this.selectedCmdSetParams)||void 0===e||e.forEach(function(e){i[e.resourceName]=$("#"+e.resourceName).val().trim()}),this.cmdSvc.issueSetCmd(this.associatedCmdDeviceName,null===(t=this.selectedCmd)||void 0===t?void 0:t.name,i).subscribe(e=>{this.cmdSetResponseRaw=JSON.stringify(e,null,3),this.cmdSetResponse=e.message})}onPageSelected(){this.resetPagination(),this.setPagination(),this.getDeviceList()}prePage(){this.setPagination(-1),this.getDeviceList()}nextPage(){this.setPagination(1),this.getDeviceList()}setPagination(e){1===e?this.pagination+=1:-1===e&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit}resetPagination(){this.pagination=1}}return e.\u0275fac=function(t){return new(t||e)(r.Ib(a.a),r.Ib(L.a),r.Ib(b.a),r.Ib(o.a),r.Ib(o.e))},e.\u0275cmp=r.Cb({type:e,selectors:[["app-device-list"]],decls:95,vars:12,consts:[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","text-danger","mr-2"],[4,"ngIf"],[1,"card-body","p-0","position-relative"],[1,"bg-light","px-2","py-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","mr-1"],["type","button","routerLink","../add-device",1,"btn","btn-info"],[1,"fa","fa-plus","mr-1"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-edit","mr-1"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash","mr-1"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],["type","checkbox","role","button",3,"checked","click"],[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"form-control",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left"],[1,"page-item"],[1,"fa","fa-angle-double-right"],["hasAssociatedCommand",""],["noAssociatedCommand",""],["id","deleteConfirmDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteConfirmDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteConfirmDialogLabel",1,"modal-title","text-danger"],[1,"fa","fa-warning"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"mr-1"],[1,"text-danger","mr-1"],[1,"user-select-all"],[3,"ngSwitch"],["class","badge badge-success",4,"ngSwitchCase"],["class","badge badge-danger",4,"ngSwitchDefault"],[1,"text-center"],["class","badge badge-danger",4,"ngSwitchCase"],["role","button",1,"badge","badge-primary","text-light",3,"click"],[1,"fa","fa-terminal","font-weight-bolder"],[1,"fa","fa-calendar-check-o","font-weight-bolder"],["routerLink","../../device-profile-center",3,"queryParams"],["routerLink","../../device-service-list"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[4,"ngIf","ngIfElse"],["noAutoEvents",""],[1,"card","mt-3"],[1,"card-header"],[1,"badge","badge-danger","text-light"],[1,"text-primary","mx-2","font-weight-bold"],[1,"card-body","p-0"],[4,"ngFor","ngForOf"],[1,"badge","badge-secondary","badge-pill"],[1,""],[1,"card-body","text-center"],[1,"text-warning"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"text-primary","ml-2","font-weight-bold"],[1,"card-body"],[1,"row"],[1,"col-md-2","col-lg-2"],[1,"card","mb-2"],[1,"list-group","list-group-flush"],["role","button","class","list-group-item list-group-item-action",3,"list-group-item-info","click",4,"ngFor","ngForOf"],[1,"col-md-10","col-lg-10"],["class","card",4,"ngIf"],["role","button",1,"list-group-item","list-group-item-action",3,"click"],[1,"text-primary","font-weight-bold","mr-2"],[1,"fa","fa-thumb-tack","text-danger","mr-1"],[1,"card-body","px-2"],[1,"col-md-5","col-lg-5"],["class","btn btn-primary btn-sm float-right",3,"click",4,"ngIf"],[1,"card-body","overflow-auto"],["hasGetMethod",""],["noGetMethod",""],[1,"col-md-7","col-lg-7"],["hasSetMethod",""],["noSetMethod",""],[1,"btn","btn-primary","btn-sm","float-right",3,"click"],[1,"badge","badge-info"],["class","ml-2 text-primary",4,"ngIf"],[1,"mt-3"],["class","mt-2 bg-secondary p-2 text-light rounded",4,"ngIf"],[1,"ml-2","text-primary"],[1,"mt-2","bg-secondary","p-2","text-light","rounded"],["class","card mb-2",4,"ngIf"],["class","d-flex flex-column bd-highlight",4,"ngIf"],[1,"d-flex","flex-column","bd-highlight"],["class","form p-2 bd-highlight",4,"ngFor","ngForOf"],[1,"form","p-2","bd-highlight"],["valueTypeIsNotBool",""],[3,"for"],[1,"form-control","form-control-sm",3,"id","name"],[3,"ngValue"],[1,"form-control","form-control-sm",3,"id","name","placeholder"],[1,"text-primary","mx-1","font-weight-bold"]],template:function(e,t){1&e&&(r.Lb(0,"div",0),r.Lb(1,"div",1),r.Jb(2,"i",2),r.kc(3,K,7,1,"span",3),r.kc(4,S,7,1,"span",3),r.kc(5,x,2,0,"span",3),r.Kb(),r.Lb(6,"div",4),r.Lb(7,"div",5),r.Lb(8,"div",6),r.Lb(9,"button",7),r.Tb("click",function(){return t.refresh()}),r.Lb(10,"span"),r.Jb(11,"i",8),r.mc(12,"Refresh"),r.Kb(),r.Kb(),r.Lb(13,"button",9),r.Lb(14,"span"),r.Jb(15,"i",10),r.mc(16,"Add"),r.Kb(),r.Kb(),r.Lb(17,"button",11),r.Tb("click",function(){return t.edit()}),r.Lb(18,"span"),r.Jb(19,"i",12),r.mc(20,"Edit"),r.Kb(),r.Kb(),r.Lb(21,"button",13),r.Tb("click",function(){return t.deleteConfirm()}),r.Lb(22,"span"),r.Jb(23,"i",14),r.mc(24,"Delete"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(25,"div",15),r.Lb(26,"table",16),r.Lb(27,"thead",17),r.Lb(28,"tr"),r.Lb(29,"th",18),r.Lb(30,"input",19),r.Tb("click",function(e){return t.selectAll(e)}),r.Kb(),r.Kb(),r.Lb(31,"th",18),r.mc(32,"ID"),r.Kb(),r.Lb(33,"th",18),r.mc(34,"Name"),r.Kb(),r.Lb(35,"th",18),r.mc(36,"Description"),r.Kb(),r.Lb(37,"th",18),r.mc(38,"Labels"),r.Kb(),r.Lb(39,"th",18),r.mc(40,"AdminState"),r.Kb(),r.Lb(41,"th",18),r.mc(42,"OperatingState"),r.Kb(),r.Lb(43,"th",18),r.mc(44,"Command"),r.Kb(),r.Lb(45,"th",18),r.mc(46,"AutoEvents"),r.Kb(),r.Lb(47,"th",18),r.mc(48,"AssociatedProfile"),r.Kb(),r.Lb(49,"th",18),r.mc(50,"AssociatedService"),r.Kb(),r.Kb(),r.Kb(),r.Lb(51,"tbody"),r.kc(52,I,32,21,"tr",20),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(53,"div",21),r.Lb(54,"nav",22),r.Lb(55,"ul",23),r.Lb(56,"li",24),r.Lb(57,"span",25),r.mc(58,"items per page"),r.Kb(),r.Kb(),r.Lb(59,"li",26),r.Lb(60,"select",27),r.Tb("ngModelChange",function(e){return t.pageLimit=e})("ngModelChange",function(){return t.onPageSelected()}),r.Lb(61,"option",28),r.mc(62,"5"),r.Kb(),r.Lb(63,"option",29),r.mc(64,"10"),r.Kb(),r.Lb(65,"option",30),r.mc(66,"20"),r.Kb(),r.Kb(),r.Kb(),r.Lb(67,"li",31),r.Lb(68,"button",32),r.Tb("click",function(){return t.prePage()}),r.Jb(69,"i",33),r.mc(70," Previous"),r.Kb(),r.Kb(),r.Lb(71,"li",34),r.Lb(72,"button",32),r.Tb("click",function(){return t.nextPage()}),r.mc(73,"Next "),r.Jb(74,"i",35),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.kc(75,w,4,2,"div",3),r.kc(76,T,2,3,"div",3),r.kc(77,ie,18,3,"ng-template",null,36,r.lc),r.kc(79,ne,11,1,"ng-template",null,37,r.lc),r.Lb(81,"div",38),r.Lb(82,"div",39),r.Lb(83,"div",40),r.Lb(84,"div",41),r.Lb(85,"h5",42),r.Jb(86,"i",43),r.mc(87," Warning "),r.Kb(),r.Kb(),r.Lb(88,"div",44),r.mc(89," The data will be permanently erased!!! Are you sure to execute delete operation\uff1f "),r.Kb(),r.Lb(90,"div",45),r.Lb(91,"button",46),r.mc(92,"Cancel"),r.Kb(),r.Lb(93,"button",47),r.Tb("click",function(){return t.delete()}),r.mc(94,"Confirm"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb()),2&e&&(r.xb(3),r.Yb("ngIf",""!==t.associatedSvcName),r.xb(1),r.Yb("ngIf",""!==t.associatedProfileName),r.xb(1),r.Yb("ngIf",""===t.associatedProfileName&&""===t.associatedSvcName),r.xb(12),r.Yb("disabled",1!==t.selectedDevice.length),r.xb(4),r.Yb("disabled",0===t.selectedDevice.length),r.xb(9),r.Yb("checked",t.isCheckedAll),r.xb(22),r.Yb("ngForOf",t.deviceList),r.xb(8),r.Yb("ngModel",t.pageLimit),r.xb(8),r.Yb("disabled",1===t.pagination),r.xb(4),r.Yb("disabled",t.pageLimit>t.deviceList.length),r.xb(3),r.Yb("ngIf",t.associatedAutoEventsDeviceName),r.xb(1),r.Yb("ngIf",t.associatedCmdDeviceName))},directives:[n.k,o.f,n.j,c.l,c.d,c.g,c.h,c.m,n.l,n.m,n.n,o.h],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),e})();function oe(e,t){if(1&e){const e=r.Mb();r.Lb(0,"tr"),r.Lb(1,"td"),r.Lb(2,"input",24),r.Tb("click",function(i){r.gc(e);const n=t.$implicit;return r.Vb().selectOneSvc(i,n.name)}),r.Kb(),r.Kb(),r.Lb(3,"td"),r.mc(4),r.Kb(),r.Lb(5,"td"),r.mc(6),r.Kb(),r.Lb(7,"td"),r.mc(8),r.Kb(),r.Lb(9,"td"),r.mc(10),r.Kb(),r.Lb(11,"td"),r.mc(12),r.Kb(),r.Lb(13,"td"),r.mc(14),r.Wb(15,"date"),r.Kb(),r.Lb(16,"td"),r.mc(17),r.Wb(18,"date"),r.Kb(),r.Kb()}if(2&e){const e=t.$implicit,i=r.Vb();r.Ab("table-active",i.isSvcChecked(e.name)),r.xb(2),r.Yb("checked",i.isSvcChecked(e.name)),r.xb(2),r.nc(e.id),r.xb(2),r.nc(e.name),r.xb(2),r.nc(e.description),r.xb(2),r.nc(e.labels),r.xb(2),r.nc(e.adminState),r.xb(2),r.nc(r.Xb(15,10,e.created,"yyyy-MM-dd hh:mm:ss")),r.xb(3),r.nc(r.Xb(18,13,e.modified,"yyyy-MM-dd hh:mm:ss"))}}let re=(()=>{class e{constructor(e){this.metaSvc=e,this.singleDeviceSvcSelectedEvent=new r.n,this.deviceServiceList=[],this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.findAllDeviceSvcPagination()}findAllDeviceSvcPagination(){this.metaSvc.findAllDeviceServicesPagination(this.pageOffset,this.pageLimit).subscribe(e=>{this.deviceServiceList=e.services})}onSingleDeviceSvcSelectedEmitter(){this.singleDeviceSvcSelectedEvent.emit(this.deviceSvcSelected)}isSvcChecked(e){var t;return(null===(t=this.deviceSvcSelected)||void 0===t?void 0:t.name)===e}selectOneSvc(e,t){let i=this;e.target.checked?this.deviceServiceList.forEach(function(e){e.name===t&&(i.deviceSvcSelected=e)}):this.deviceSvcSelected=void 0,this.onSingleDeviceSvcSelectedEmitter()}onPageSelected(){this.resetPagination(),this.setPagination(),this.findAllDeviceSvcPagination()}prePage(){this.setPagination(-1),this.findAllDeviceSvcPagination()}nextPage(){this.setPagination(1),this.findAllDeviceSvcPagination()}setPagination(e){1===e?this.pagination+=1:-1===e&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit}resetPagination(){this.pagination=1}}return e.\u0275fac=function(t){return new(t||e)(r.Ib(a.a))},e.\u0275cmp=r.Cb({type:e,selectors:[["app-device-service-list"]],inputs:{deviceSvcSelected:"deviceSvcSelected"},outputs:{singleDeviceSvcSelectedEvent:"singleDeviceSvcSelectedEvent"},decls:50,vars:4,consts:[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","mr-2","text-danger"],[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"form-control",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left"],[1,"page-item"],[1,"fa","fa-angle-double-right"],["type","checkbox","role","button",3,"checked","click"]],template:function(e,t){1&e&&(r.Lb(0,"div",0),r.Lb(1,"div",1),r.Jb(2,"i",2),r.Lb(3,"span"),r.mc(4,"Device Service List"),r.Kb(),r.Kb(),r.Lb(5,"div",3),r.Lb(6,"div",4),r.Lb(7,"table",5),r.Lb(8,"thead",6),r.Lb(9,"tr"),r.Lb(10,"th",7),r.mc(11,"#"),r.Kb(),r.Lb(12,"th",7),r.mc(13,"ID"),r.Kb(),r.Lb(14,"th",7),r.mc(15,"Name"),r.Kb(),r.Lb(16,"th",7),r.mc(17,"Description"),r.Kb(),r.Lb(18,"th",7),r.mc(19,"Labels"),r.Kb(),r.Lb(20,"th",7),r.mc(21,"AdminState"),r.Kb(),r.Lb(22,"th",7),r.mc(23,"Created"),r.Kb(),r.Lb(24,"th",7),r.mc(25,"Modified"),r.Kb(),r.Kb(),r.Kb(),r.Lb(26,"tbody"),r.kc(27,oe,19,16,"tr",8),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(28,"div",9),r.Lb(29,"nav",10),r.Lb(30,"ul",11),r.Lb(31,"li",12),r.Lb(32,"span",13),r.mc(33,"items per page"),r.Kb(),r.Kb(),r.Lb(34,"li",14),r.Lb(35,"select",15),r.Tb("ngModelChange",function(e){return t.pageLimit=e})("ngModelChange",function(){return t.onPageSelected()}),r.Lb(36,"option",16),r.mc(37,"5"),r.Kb(),r.Lb(38,"option",17),r.mc(39,"10"),r.Kb(),r.Lb(40,"option",18),r.mc(41,"20"),r.Kb(),r.Kb(),r.Kb(),r.Lb(42,"li",19),r.Lb(43,"button",20),r.Tb("click",function(){return t.prePage()}),r.Jb(44,"i",21),r.mc(45," Previous"),r.Kb(),r.Kb(),r.Lb(46,"li",22),r.Lb(47,"button",20),r.Tb("click",function(){return t.nextPage()}),r.mc(48,"Next "),r.Jb(49,"i",23),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb()),2&e&&(r.xb(27),r.Yb("ngForOf",t.deviceServiceList),r.xb(8),r.Yb("ngModel",t.pageLimit),r.xb(8),r.Yb("disabled",1===t.pagination),r.xb(4),r.Yb("disabled",t.pageLimit>t.deviceServiceList.length))},directives:[n.j,c.l,c.d,c.g,c.h,c.m],pipes:[n.d],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),e})();function se(e,t){if(1&e){const e=r.Mb();r.Lb(0,"div",37),r.Lb(1,"div",38),r.Lb(2,"button",39),r.Tb("click",function(){return r.gc(e),r.Vb().refresh()}),r.Lb(3,"span"),r.Jb(4,"i",40),r.mc(5,"Refresh"),r.Kb(),r.Kb(),r.Lb(6,"button",41),r.Lb(7,"span"),r.Jb(8,"i",42),r.mc(9,"Add"),r.Kb(),r.Kb(),r.Lb(10,"button",43),r.Tb("click",function(){return r.gc(e),r.Vb().edit()}),r.Lb(11,"span"),r.Jb(12,"i",44),r.mc(13,"Edit"),r.Kb(),r.Kb(),r.Lb(14,"button",45),r.Tb("click",function(){return r.gc(e),r.Vb().deleteConfirm()}),r.Lb(15,"span"),r.Jb(16,"i",46),r.mc(17,"Delete"),r.Kb(),r.Kb(),r.Kb(),r.Kb()}if(2&e){const e=r.Vb();r.xb(10),r.Yb("disabled",1!==e.multiProfilesSelected.length),r.xb(4),r.Yb("disabled",0===e.multiProfilesSelected.length)}}function ae(e,t){if(1&e){const e=r.Mb();r.Lb(0,"input",47),r.Tb("click",function(t){return r.gc(e),r.Vb().selectAll(t)}),r.Kb()}if(2&e){const e=r.Vb();r.Yb("checked",e.isCheckedAll)}}function be(e,t){1&e&&(r.Lb(0,"th",8),r.mc(1,"AssociatedDevice"),r.Kb())}const le=function(e){return{profileName:e}};function de(e,t){if(1&e&&(r.Lb(0,"td",51),r.Lb(1,"a",52),r.Jb(2,"i",53),r.Kb(),r.Kb()),2&e){const e=r.Vb().$implicit;r.xb(1),r.Yb("queryParams",r.dc(1,le,e.name))}}function me(e,t){if(1&e){const e=r.Mb();r.Lb(0,"tr"),r.Lb(1,"td"),r.Lb(2,"input",48),r.Tb("click",function(i){r.gc(e);const n=t.$implicit;return r.Vb().selectOne(i,n.name)}),r.Kb(),r.Kb(),r.Lb(3,"td",49),r.mc(4),r.Kb(),r.Lb(5,"td",49),r.mc(6),r.Kb(),r.Lb(7,"td"),r.mc(8),r.Kb(),r.kc(9,de,3,3,"td",50),r.Lb(10,"td"),r.mc(11),r.Kb(),r.Lb(12,"td"),r.mc(13),r.Kb(),r.Lb(14,"td"),r.mc(15),r.Kb(),r.Kb()}if(2&e){const e=t.$implicit,i=r.Vb();r.Ab("table-active",i.isChecked(e.name)),r.xb(2),r.Zb("value",e.name),r.Yb("checked",i.isChecked(e.name)),r.xb(2),r.nc(e.id),r.xb(2),r.nc(e.name),r.xb(2),r.nc(e.description),r.xb(1),r.Yb("ngIf",i.associatedDeviceColumn),r.xb(2),r.nc(e.labels),r.xb(2),r.nc(e.manufacturer),r.xb(2),r.nc(e.model)}}let ve=(()=>{class e{constructor(e,t,i,n){this.metaSvc=e,this.msgSvc=t,this.route=i,this.router=n,this.associatedDeviceColumn=!0,this.toolbars=!0,this.enableSelectAll=!0,this.singleProfileSelectedEvent=new r.n,this.profileList=[],this.multiProfilesSelected=[],this.isCheckedAll=!1,this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.route.queryParams.subscribe(e=>{e.profileName?this.metaSvc.findProfileByName(e.profileName).subscribe(e=>{this.profileList=[],this.profileList.push(e.profile)}):this.findAllDeviceProfilesPagination()})}findAllDeviceProfilesPagination(){this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(e=>{this.profileList=e.profiles})}onSingleProfileSelectedEmitter(){this.singleProfileSelectedEvent.emit(this.singleProfileSelected)}refresh(){this.metaSvc.allDeviceProfolesPagination(0,this.pageLimit).subscribe(e=>{this.profileList=e.profiles,this.msgSvc.success("refresh"),this.pagination=1,this.resetCheckbox()})}onPageSelected(){this.resetPagination(),this.setPagination(),this.findAllDeviceProfilesPagination()}prePage(){this.setPagination(-1),this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(e=>{this.profileList=e.profiles})}nextPage(){this.setPagination(1),this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(e=>{this.profileList=e.profiles})}setPageLimit(e){this.pageLimit=e}setPagination(e){1===e?this.pagination+=1:-1===e&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit,this.resetCheckbox()}resetPagination(){this.pagination=1,this.resetCheckbox()}resetCheckbox(){this.isCheckedAll=!1,this.multiProfilesSelected=[]}edit(){this.router.navigate(["../edit-profile"],{relativeTo:this.route,queryParams:{profileName:this.multiProfilesSelected[0]}})}deleteConfirm(){$("#deleteConfirmDialog").modal("show")}delete(){this.multiProfilesSelected.forEach(e=>{this.metaSvc.deleteProfileByName(e).subscribe(()=>{this.multiProfilesSelected=[],this.profileList.forEach((t,i)=>{t.name==e&&(this.profileList.splice(i,1),this.msgSvc.success("delete","  Name: "+t.name))})})}),$("#deleteConfirmDialog").modal("hide")}isSingleProfileChecked(e){var t;return(null===(t=this.singleProfileSelected)||void 0===t?void 0:t.name)===e}selectSingleProfile(e,t){e.target.checked?this.profileList.forEach(e=>{e.name===t&&(this.singleProfileSelected=e)}):this.singleProfileSelected=void 0,this.onSingleProfileSelectedEmitter()}selectAll(e){if(e.target.checked)return this.multiProfilesSelected=[],this.profileList.forEach(e=>{this.multiProfilesSelected.push(e.name),this.isChecked(e.name)}),void(this.isCheckedAll=!0);this.isCheckedAll=!1,this.multiProfilesSelected=[],this.profileList.forEach(e=>{this.isChecked(e.name)})}isChecked(e){return this.enableSelectAll?this.multiProfilesSelected.findIndex(t=>t===e)>=0:this.isSingleProfileChecked(e)}selectOne(e,t){if(this.enableSelectAll)return e.target.checked?(this.multiProfilesSelected.push(t),void(this.multiProfilesSelected.length===this.profileList.length&&(this.isCheckedAll=!0))):(this.isCheckedAll=!1,this.isChecked(t),void this.multiProfilesSelected.splice(this.multiProfilesSelected.indexOf(t),1));this.selectSingleProfile(e,t)}}return e.\u0275fac=function(t){return new(t||e)(r.Ib(a.a),r.Ib(b.a),r.Ib(o.a),r.Ib(o.e))},e.\u0275cmp=r.Cb({type:e,selectors:[["app-device-profile-list"]],inputs:{associatedDeviceColumn:"associatedDeviceColumn",toolbars:"toolbars",enableSelectAll:"enableSelectAll",singleProfileSelected:"singleProfileSelected"},outputs:{singleProfileSelectedEvent:"singleProfileSelectedEvent"},decls:64,vars:7,consts:[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","text-danger","mr-2"],[1,"card-body","p-0"],["class","bg-light px-2 py-2",4,"ngIf"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],["type","checkbox",3,"checked","click",4,"ngIf"],["scope","col",4,"ngIf"],[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"form-control",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left"],[1,"page-item"],[1,"fa","fa-angle-double-right"],["id","deleteConfirmDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteConfirmDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteConfirmDialogLabel",1,"modal-title","text-danger"],[1,"fa","fa-warning"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"bg-light","px-2","py-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","mr-1"],["type","button","routerLink","../add-profile",1,"btn","btn-info"],[1,"fa","fa-plus","mr-1"],["type","button","data-toggle","tooltip","data-placement","top","title","only one should be selected",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-edit","mr-1"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash","mr-1"],["type","checkbox",3,"checked","click"],["type","checkbox",3,"value","checked","click"],[1,"user-select-all"],["class","text-center",4,"ngIf"],[1,"text-center"],["routerLink","../../device-center",1,"badge","badge-pill","badge-primary",3,"queryParams"],[1,"fa","fa-sitemap"]],template:function(e,t){1&e&&(r.Lb(0,"div",0),r.Lb(1,"div",1),r.Jb(2,"i",2),r.Lb(3,"span"),r.mc(4,"Device Profile List"),r.Kb(),r.Kb(),r.Lb(5,"div",3),r.kc(6,se,18,2,"div",4),r.Lb(7,"div",5),r.Lb(8,"table",6),r.Lb(9,"thead",7),r.Lb(10,"tr"),r.Lb(11,"th",8),r.kc(12,ae,1,1,"input",9),r.Kb(),r.Lb(13,"th",8),r.mc(14,"ID"),r.Kb(),r.Lb(15,"th",8),r.mc(16,"Name"),r.Kb(),r.Lb(17,"th",8),r.mc(18,"Description"),r.Kb(),r.kc(19,be,2,0,"th",10),r.Lb(20,"th",8),r.mc(21,"Labels"),r.Kb(),r.Lb(22,"th",8),r.mc(23,"Manufacturer"),r.Kb(),r.Lb(24,"th",8),r.mc(25,"Model"),r.Kb(),r.Kb(),r.Kb(),r.Lb(26,"tbody"),r.kc(27,me,16,11,"tr",11),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(28,"div",12),r.Lb(29,"nav",13),r.Lb(30,"ul",14),r.Lb(31,"li",15),r.Lb(32,"span",16),r.mc(33,"items per page"),r.Kb(),r.Kb(),r.Lb(34,"li",17),r.Lb(35,"select",18),r.Tb("ngModelChange",function(e){return t.pageLimit=e})("ngModelChange",function(){return t.onPageSelected()}),r.Lb(36,"option",19),r.mc(37,"5"),r.Kb(),r.Lb(38,"option",20),r.mc(39,"10"),r.Kb(),r.Lb(40,"option",21),r.mc(41,"20"),r.Kb(),r.Kb(),r.Kb(),r.Lb(42,"li",22),r.Lb(43,"button",23),r.Tb("click",function(){return t.prePage()}),r.Jb(44,"i",24),r.mc(45," Previous"),r.Kb(),r.Kb(),r.Lb(46,"li",25),r.Lb(47,"button",23),r.Tb("click",function(){return t.nextPage()}),r.mc(48,"Next "),r.Jb(49,"i",26),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(50,"div",27),r.Lb(51,"div",28),r.Lb(52,"div",29),r.Lb(53,"div",30),r.Lb(54,"h5",31),r.Jb(55,"i",32),r.mc(56," Warning "),r.Kb(),r.Kb(),r.Lb(57,"div",33),r.mc(58," The data will be permanently erased!!! Are you sure to execute delete operation\uff1f "),r.Kb(),r.Lb(59,"div",34),r.Lb(60,"button",35),r.mc(61,"Cancel"),r.Kb(),r.Lb(62,"button",36),r.Tb("click",function(){return t.delete()}),r.mc(63,"Confirm"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb()),2&e&&(r.xb(6),r.Yb("ngIf",t.toolbars),r.xb(6),r.Yb("ngIf",t.enableSelectAll),r.xb(7),r.Yb("ngIf",t.associatedDeviceColumn),r.xb(8),r.Yb("ngForOf",t.profileList),r.xb(8),r.Yb("ngModel",t.pageLimit),r.xb(8),r.Yb("disabled",1===t.pagination),r.xb(4),r.Yb("disabled",t.pageLimit>t.profileList.length))},directives:[n.k,n.j,c.l,c.d,c.g,c.h,c.m,o.f,o.h],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),e})();function pe(e,t){1&e&&r.Jb(0,"i",24)}function he(e,t){1&e&&r.Jb(0,"i",24)}function ue(e,t){1&e&&r.Jb(0,"i",24)}function fe(e,t){1&e&&r.Jb(0,"i",24)}function ge(e,t){1&e&&r.Jb(0,"i",24)}function Le(e,t){if(1&e){const e=r.Mb();r.Lb(0,"button",25),r.Tb("click",function(){return r.gc(e),r.Vb().previous()}),r.Jb(1,"i",26),r.mc(2," Previous"),r.Kb()}}function Ke(e,t){if(1&e){const e=r.Mb();r.Lb(0,"button",27),r.Tb("click",function(){return r.gc(e),r.Vb().next()}),r.mc(1,"Next "),r.Jb(2,"i",28),r.Kb()}if(2&e){const e=r.Vb();r.Yb("disabled",e.stepStateLock())}}function Se(e,t){if(1&e){const e=r.Mb();r.Lb(0,"button",29),r.Tb("click",function(){return r.gc(e),r.Vb().skip()}),r.mc(1,"Skip "),r.Jb(2,"i",30),r.Kb()}}function xe(e,t){if(1&e){const e=r.Mb();r.Lb(0,"button",31),r.Tb("click",function(){return r.gc(e),r.Vb().submit()}),r.Jb(1,"i",32),r.mc(2," Submit"),r.Kb()}if(2&e){const e=r.Vb();r.Yb("disabled",!e.protocolName)}}function ye(e,t){if(1&e){const e=r.Mb();r.Lb(0,"div",33),r.Lb(1,"app-device-service-list",34),r.Tb("singleDeviceSvcSelectedEvent",function(t){return r.gc(e),r.Vb().onSingleDeviceSvcSelected(t)}),r.Kb(),r.Kb()}if(2&e){const e=r.Vb();r.xb(1),r.Yb("deviceSvcSelected",e.selectedSvc)}}function Pe(e,t){if(1&e){const e=r.Mb();r.Lb(0,"div",33),r.Lb(1,"app-device-profile-list",35),r.Tb("singleProfileSelectedEvent",function(t){return r.gc(e),r.Vb().onSingleProfileSelected(t)}),r.Kb(),r.Kb()}if(2&e){const e=r.Vb();r.xb(1),r.Yb("singleProfileSelected",e.selectedProfile)("enableSelectAll",!1)("toolbars",!1)("associatedDeviceColumn",!1)}}function Ce(e,t){if(1&e){const e=r.Mb();r.Lb(0,"form",36),r.Lb(1,"div",37),r.Lb(2,"label",38),r.mc(3,"Name"),r.Kb(),r.Lb(4,"div",39),r.Lb(5,"input",40),r.Tb("ngModelChange",function(t){return r.gc(e),r.Vb().newDevice.name=t}),r.Kb(),r.Lb(6,"div",41),r.Lb(7,"small"),r.mc(8,"the device name can't be empty!"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(9,"div",42),r.Lb(10,"label",43),r.mc(11,"Description"),r.Kb(),r.Lb(12,"div",39),r.Lb(13,"input",44),r.Tb("ngModelChange",function(t){return r.gc(e),r.Vb().newDevice.description=t}),r.Kb(),r.Kb(),r.Kb(),r.Lb(14,"div",42),r.Lb(15,"label",45),r.mc(16,"Labels"),r.Kb(),r.Lb(17,"div",39),r.Lb(18,"input",46),r.Tb("ngModelChange",function(t){return r.gc(e),r.Vb().deviceLabels=t}),r.Kb(),r.Kb(),r.Kb(),r.Lb(19,"div",42),r.Lb(20,"label",47),r.mc(21,"AdminState"),r.Kb(),r.Lb(22,"div",39),r.Lb(23,"select",48),r.Tb("ngModelChange",function(t){return r.gc(e),r.Vb().newDevice.adminState=t}),r.Lb(24,"option",49),r.mc(25,"UNLOCKED"),r.Kb(),r.Lb(26,"option",50),r.mc(27,"LOCKED"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(28,"div",42),r.Lb(29,"label",51),r.mc(30,"OperatingState"),r.Kb(),r.Lb(31,"div",39),r.Lb(32,"select",52),r.Tb("ngModelChange",function(t){return r.gc(e),r.Vb().newDevice.operatingState=t}),r.Lb(33,"option",53),r.mc(34,"UP"),r.Kb(),r.Lb(35,"option",54),r.mc(36,"DOWN"),r.Kb(),r.Lb(37,"option",54),r.mc(38,"UNKNOWN"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb()}if(2&e){const e=r.Vb();r.xb(5),r.Ab("is-invalid",!e.newDevice.name)("is-valid",e.newDevice.name),r.Yb("ngModel",e.newDevice.name),r.xb(8),r.Yb("ngModel",e.newDevice.description),r.xb(5),r.Yb("ngModel",e.deviceLabels),r.xb(5),r.Yb("ngModel",e.newDevice.adminState),r.xb(9),r.Yb("ngModel",e.newDevice.operatingState)}}function ke(e,t){if(1&e&&(r.Lb(0,"option",80),r.mc(1),r.Kb()),2&e){const e=t.$implicit;r.Zb("value",e),r.xb(1),r.nc(e)}}function De(e,t){if(1&e){const e=r.Mb();r.Lb(0,"div",62),r.Lb(1,"div",57),r.Lb(2,"form"),r.Lb(3,"div",37),r.Lb(4,"label",63),r.mc(5,"Interval"),r.Kb(),r.Lb(6,"div",39),r.Lb(7,"div",64),r.Lb(8,"input",65),r.Tb("ngModelChange",function(e){return t.$implicit.interval=e}),r.Kb(),r.Lb(9,"div",66),r.Lb(10,"select",67),r.Tb("ngModelChange",function(e){return t.$implicit.unit=e}),r.Lb(11,"option",68),r.mc(12,"millisecond"),r.Kb(),r.Lb(13,"option",69),r.mc(14,"second"),r.Kb(),r.Lb(15,"option",70),r.mc(16,"minute"),r.Kb(),r.Lb(17,"option",71),r.mc(18,"hour"),r.Kb(),r.Kb(),r.Kb(),r.Lb(19,"div",72),r.mc(20," can only be a pure integer number "),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(21,"div",42),r.Lb(22,"label",63),r.mc(23,"onchange"),r.Kb(),r.Lb(24,"div",39),r.Lb(25,"select",73),r.Tb("ngModelChange",function(e){return t.$implicit.onChange=e}),r.Lb(26,"option",74),r.mc(27,"true"),r.Kb(),r.Lb(28,"option",75),r.mc(29,"false"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(30,"div",42),r.Lb(31,"label",63),r.mc(32,"resource"),r.Kb(),r.Lb(33,"div",39),r.Lb(34,"select",76),r.Tb("ngModelChange",function(e){return t.$implicit.resource=e}),r.kc(35,ke,2,2,"option",77),r.Kb(),r.Lb(36,"div",72),r.mc(37," resource can't be empty "),r.Kb(),r.Kb(),r.Kb(),r.Lb(38,"button",78),r.Tb("click",function(){r.gc(e);const i=t.$implicit;return r.Vb(2).removeAutoEvent(i)}),r.Jb(39,"i",79),r.mc(40," Remove"),r.Kb(),r.Kb(),r.Kb(),r.Kb()}if(2&e){const e=t.$implicit,i=r.Vb(2);r.xb(8),r.Ab("is-invalid",!i.eventIntervalNumType(e.interval))("is-valid",i.eventIntervalNumType(e.interval)),r.Yb("ngModel",e.interval),r.xb(2),r.Yb("ngModel",e.unit),r.xb(15),r.Yb("ngModel",e.onChange),r.xb(9),r.Ab("is-invalid",!e.resource)("is-valid",e.resource),r.Yb("ngModel",e.resource),r.xb(1),r.Yb("ngForOf",i.autoEventResourceNameSet)}}function Ne(e,t){if(1&e){const e=r.Mb();r.Lb(0,"div",55),r.Lb(1,"div",1),r.Lb(2,"span",56),r.mc(3," this step is optional, you can skip it then use scheduler service to create schedule job."),r.Kb(),r.Kb(),r.Lb(4,"div",57),r.Lb(5,"p",58),r.Jb(6,"span",59),r.Lb(7,"span",60),r.Tb("click",function(){return r.gc(e),r.Vb().addAutoEvent()}),r.mc(8,"Add More AutoEvent"),r.Kb(),r.Kb(),r.kc(9,De,41,13,"div",61),r.Kb(),r.Kb()}if(2&e){const e=r.Vb();r.xb(9),r.Yb("ngForOf",e.autoEventsInternal)}}function Ie(e,t){1&e&&r.Jb(0,"div")}const Me=function(){return{standalone:!0}};function Ee(e,t){if(1&e){const e=r.Mb();r.Lb(0,"div"),r.Lb(1,"form",97),r.Lb(2,"div",98),r.Lb(3,"div",99),r.Lb(4,"span",100),r.mc(5,"PropertyKey"),r.Kb(),r.Kb(),r.Jb(6,"input",101),r.Kb(),r.Lb(7,"div",102),r.Jb(8,"i",28),r.Kb(),r.Lb(9,"div",98),r.Lb(10,"div",99),r.Lb(11,"span",100),r.mc(12,"PropertyVaule"),r.Kb(),r.Kb(),r.Lb(13,"input",103),r.Tb("ngModelChange",function(i){r.gc(e);const n=t.$implicit;return r.Vb(4).selectedAvailTemplate[n]=i}),r.Kb(),r.Kb(),r.Kb(),r.Kb()}if(2&e){const e=t.$implicit,i=r.Vb(4);r.xb(6),r.Yb("value",e),r.xb(7),r.Zb("name",i.selectedAvailTemplate[e]),r.Yb("ngModel",i.selectedAvailTemplate[e])("ngModelOptions",r.cc(4,Me))}}function Oe(e,t){if(1&e&&(r.Lb(0,"div"),r.kc(1,Ee,14,5,"div",96),r.Kb()),2&e){const e=r.Vb(3);r.xb(1),r.Yb("ngForOf",e.selectedAvailTemplateProperties)}}function we(e,t){1&e&&(r.Lb(0,"h5",107),r.Jb(1,"i",108),r.mc(2," this device service doesn't need to set protocol properties. "),r.Kb())}function Ae(e,t){if(1&e&&(r.Lb(0,"div"),r.Jb(1,"span",104),r.Lb(2,"span",105),r.mc(3," all avaliable protocol templates refer to the device service released by edgex, such as device-virtual, device-rest, device-mqtt, device-modbus "),r.Kb(),r.Kb(),r.kc(4,we,3,0,"h5",106)),2&e){const e=r.Vb(3);r.xb(4),r.Yb("ngIf",e.protocolName)}}function Te(e,t){if(1&e){const e=r.Mb();r.Lb(0,"div",86),r.Lb(1,"div",87),r.Lb(2,"div",88),r.Lb(3,"label"),r.mc(4,"Protocol Name"),r.Kb(),r.Lb(5,"select",89),r.Tb("ngModelChange",function(t){return r.gc(e),r.Vb(2).protocolName=t})("ngModelChange",function(){return r.gc(e),r.Vb(2).onAvailProtocolSelect()}),r.Lb(6,"option",90),r.mc(7,"device-mqtt"),r.Kb(),r.Lb(8,"option",91),r.mc(9,"device-rest"),r.Kb(),r.Lb(10,"option",91),r.mc(11,"device-virtual"),r.Kb(),r.Lb(12,"option",92),r.mc(13,"device-modbus-tcp"),r.Kb(),r.Lb(14,"option",93),r.mc(15,"device-modbus-rtu"),r.Kb(),r.Kb(),r.Lb(16,"div",72),r.Lb(17,"small"),r.mc(18,"the protocol name can't be empty!"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(19,"div",39),r.kc(20,Oe,2,1,"div",94),r.kc(21,Ae,5,1,"ng-template",null,95,r.lc),r.Kb(),r.Kb()}if(2&e){const e=r.fc(22),t=r.Vb(2);r.xb(5),r.Ab("is-invalid",!t.protocolName)("is-valid",t.protocolName),r.Yb("ngModel",t.protocolName),r.xb(15),r.Yb("ngIf",0!==t.selectedAvailTemplateProperties.length)("ngIfElse",e)}}function Ye(e,t){if(1&e){const e=r.Mb();r.Lb(0,"div"),r.Lb(1,"form",97),r.Lb(2,"div",98),r.Lb(3,"div",99),r.Lb(4,"span",100),r.mc(5,"PropertyKey"),r.Kb(),r.Kb(),r.Lb(6,"input",113),r.Tb("ngModelChange",function(e){return t.$implicit.key=e}),r.Kb(),r.Kb(),r.Lb(7,"div",102),r.Jb(8,"i",28),r.Kb(),r.Lb(9,"div",98),r.Lb(10,"div",99),r.Lb(11,"span",100),r.mc(12,"PropertyValue"),r.Kb(),r.Kb(),r.Lb(13,"input",114),r.Tb("ngModelChange",function(e){return t.$implicit.value=e}),r.Kb(),r.Kb(),r.Lb(14,"div",115),r.Lb(15,"button",78),r.Tb("click",function(){r.gc(e);const i=t.$implicit;return r.Vb(3).removeProtocolProperty(i)}),r.Jb(16,"i",79),r.Kb(),r.Kb(),r.Kb(),r.Kb()}if(2&e){const e=t.$implicit;r.xb(6),r.Yb("ngModel",e.key),r.xb(7),r.Yb("ngModel",e.value)}}function $e(e,t){if(1&e){const e=r.Mb();r.Lb(0,"div",86),r.Lb(1,"div",109),r.Lb(2,"div",88),r.Lb(3,"label"),r.mc(4,"Protocol Name"),r.Kb(),r.Lb(5,"input",110),r.Tb("ngModelChange",function(t){return r.gc(e),r.Vb(2).protocolName=t}),r.Kb(),r.Lb(6,"div",72),r.Lb(7,"small"),r.mc(8,"the protocol name can't be empty!"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(9,"div",111),r.Lb(10,"div",112),r.Lb(11,"div"),r.Lb(12,"p",58),r.Jb(13,"span",59),r.Lb(14,"span",60),r.Tb("click",function(){return r.gc(e),r.Vb(2).addProtocolProperty()}),r.mc(15,"Add Protocol Property"),r.Kb(),r.Kb(),r.Kb(),r.kc(16,Ye,17,2,"div",96),r.Kb(),r.Kb(),r.Kb()}if(2&e){const e=r.Vb(2);r.xb(5),r.Ab("is-invalid",!e.protocolName)("is-valid",e.protocolName),r.Yb("ngModel",e.protocolName),r.xb(11),r.Yb("ngForOf",e.protocolPropertyList)}}function Ve(e,t){if(1&e){const e=r.Mb();r.Lb(0,"div",55),r.Lb(1,"div",57),r.Lb(2,"p",81),r.Jb(3,"span",59),r.Lb(4,"span",60),r.Tb("click",function(){return r.gc(e),r.Vb().setProtocolTemplate("avaliable")}),r.mc(5,"Avaliable Protocol Templates"),r.Kb(),r.Kb(),r.Lb(6,"p",82),r.Jb(7,"span",59),r.Lb(8,"span",60),r.Tb("click",function(){return r.gc(e),r.Vb().setProtocolTemplate("custom")}),r.mc(9,"Custom Protocol Templates"),r.Kb(),r.Kb(),r.kc(10,Ie,1,0,"div",83),r.kc(11,Te,23,7,"ng-template",null,84,r.lc),r.kc(13,$e,17,6,"ng-template",null,85,r.lc),r.Kb(),r.Kb()}if(2&e){const e=r.fc(12),t=r.fc(14),i=r.Vb();r.xb(2),r.Ab("badge-primary","avaliable"===i.protocolTemplateModel)("badge-secondary","avaliable"!==i.protocolTemplateModel),r.xb(4),r.Ab("badge-primary","custom"===i.protocolTemplateModel)("badge-secondary","custom"!==i.protocolTemplateModel),r.xb(4),r.Yb("ngIf","custom"===i.protocolTemplateModel)("ngIfThen",t)("ngIfElse",e)}}class Ue{constructor(){this.Schema="",this.Host="",this.Port="",this.User="",this.Password="",this.ClientId="",this.Topic=""}}class Be{constructor(){this.Address="",this.Port="",this.UnitID=""}}class Je{constructor(){this.Address="",this.UnitID="",this.BaudRate="",this.DataBits="",this.StopBits="",this.Parity=""}}let je=(()=>{class e{constructor(e,t,i,n){this.metaSvc=e,this.msgSvc=t,this.router=i,this.route=n,this.deviceLabels="",this.currentStep=0,this.selectedClass="text-white rounded px-2 bg-success  font-weight-bold",this.noSelectedClass="text-white rounded px-2 bg-secondary  font-weight-bold",this.autoEventResourceNameSet=[],this.autoEventsInternal=[{interval:"",onChange:!1,resource:"",unit:"ms"}],this.protocolTemplateModel="avaliable",this.protocolName="",this.protocolProperty={key:null,value:null},this.protocolPropertyList=[{key:null,value:null}],this.selectedAvailTemplateProperties=[],this.newDevice={adminState:"UNLOCKED",operatingState:"UP"}}ngOnInit(){}onSingleProfileSelected(e){this.selectedProfile=e,this.setupAutoEventResourceNameSet(this.selectedProfile)}setupAutoEventResourceNameSet(e){e.deviceResources.forEach((e,t)=>{this.autoEventResourceNameSet.push(e.name)}),e.deviceCommands.forEach((e,t)=>{this.autoEventResourceNameSet.push(e.name)})}onSingleDeviceSvcSelected(e){this.selectedSvc=e}onAvailProtocolSelect(){switch(this.protocolName){case"mqtt":return this.selectedAvailTemplate=new Ue,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));case"modbus-tcp":return this.selectedAvailTemplate=new Be,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));case"modbus-rtu":return this.selectedAvailTemplate=new Je,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));default:return this.selectedAvailTemplate={},void(this.selectedAvailTemplateProperties=[])}}cleanSelectedAvailTemplateProperties(){this.selectedAvailTemplateProperties=[]}setAutoEventInternal(e){let t;e.forEach(e=>{let i=0;e.interval.indexOf("ms")?i=e.interval.indexOf("ms"):e.interval.indexOf("s")?i=e.interval.indexOf("s"):e.interval.indexOf("m")?i=e.interval.indexOf("m"):e.interval.indexOf("h")&&(i=e.interval.indexOf("h")),t=e.interval.substring(i),this.autoEventsInternal.push({interval:e.interval.slice(0,i),onChange:e.onChange,resource:e.sourceName,unit:t})})}eventIntervalNumType(e){return!isNaN(e)&&parseFloat(e)===parseInt(e)}setProtocolTemplate(e){this.protocolName="",this.cleanSelectedAvailTemplateProperties(),this.cleanCustomProtocolProperty(),this.protocolTemplateModel=e}addProtocolProperty(){this.protocolPropertyList.push({key:"",value:""})}removeProtocolProperty(e){this.protocolPropertyList.splice(this.protocolPropertyList.indexOf(e),1)}cleanCustomProtocolProperty(){this.protocolPropertyList=[],this.protocolPropertyList.push({key:"",value:""})}addAutoEvent(){this.autoEventsInternal.push({interval:"",onChange:!1,resource:"",unit:"ms"})}removeAutoEvent(e){this.autoEventsInternal.splice(this.autoEventsInternal.indexOf(e),1)}stepStateLock(){switch(this.currentStep){case 0:return void 0===this.selectedSvc;case 1:return void 0===this.selectedProfile;case 2:return""===this.newDevice.name;case 3:let e=!1;return this.autoEventsInternal.forEach(t=>{""!==t.resource&&this.eventIntervalNumType(t.interval)||(e=!0)}),e;case 4:default:return!1}}skip(){this.autoEventsInternal=[],this.next()}next(){this.currentStep+=1}previous(){this.currentStep=this.currentStep-1}changeStep(){this.currentStep+=1}submit(){var e,t,i;let n={},c={};"custom"===this.protocolTemplateModel?(this.protocolPropertyList.forEach(e=>{c[e.key]=e.value}),n[this.protocolName]=c):n[this.protocolName]=Object.assign({},this.selectedAvailTemplate);let o=[];this.autoEventsInternal.forEach(e=>{o.push({interval:`${parseInt(e.interval)}${e.unit}`,onChange:!!e.onChange,sourceName:e.resource})}),this.newDevice.labels=null===(e=this.deviceLabels)||void 0===e?void 0:e.split(","),this.newDevice.serviceName=null===(t=this.selectedSvc)||void 0===t?void 0:t.name,this.newDevice.profileName=null===(i=this.selectedProfile)||void 0===i?void 0:i.name,this.newDevice.protocols=n,this.newDevice.autoEvents=o,this.metaSvc.addDevice(this.newDevice).subscribe(()=>{this.msgSvc.success("Add device","name: "+this.newDevice.name),this.router.navigate(["../device-list"],{relativeTo:this.route})})}}return e.\u0275fac=function(t){return new(t||e)(r.Ib(a.a),r.Ib(b.a),r.Ib(o.e),r.Ib(o.a))},e.\u0275cmp=r.Cb({type:e,selectors:[["app-add-device"]],decls:47,vars:20,consts:[[1,"card"],[1,"card-header"],[1,"font-weight-bold"],[1,"fa","fa-lightbulb-o","fa-lg","mr-2","text-danger"],[1,"text-secondary"],[1,"card-header","bg-light"],["aria-label","breadcrumb",1,"mb-0","p-0"],[1,"breadcrumb","p-1","mb-0","bg-light"],[1,"breadcrumb-item"],[3,"ngClass"],["class","fa fa-check",4,"ngIf"],[1,"breadcrumb-item","active"],["class","btn btn-info btn-sm",3,"click",4,"ngIf"],["class","btn btn-primary btn-sm float-right",3,"disabled","click",4,"ngIf","ngIfElse"],["class","btn btn-success btn-sm float-right mr-2",3,"click",4,"ngIf"],["stepDone",""],[1,"card-body","p-0"],[3,"ngSwitch"],[3,"ngSwitchCase"],["SelectDeviceService",""],["SelectDeviceProfile",""],["DevicePrimary",""],["CreateAutoEvent",""],["CreateDeviceProtocol",""],[1,"fa","fa-check"],[1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-long-arrow-left"],[1,"btn","btn-primary","btn-sm","float-right",3,"disabled","click"],[1,"fa","fa-long-arrow-right"],[1,"btn","btn-success","btn-sm","float-right","mr-2",3,"click"],[1,"fa","fa-share"],[1,"btn","btn-success","btn-sm","ml-4","float-right",3,"disabled","click"],[1,"fa","fa-save"],[1,"p-2"],[3,"deviceSvcSelected","singleDeviceSvcSelectedEvent"],[3,"singleProfileSelected","enableSelectAll","toolbars","associatedDeviceColumn","singleProfileSelectedEvent"],[1,"px-5","py-4"],[1,"form-group","row","has-validation"],["for","deviceName","required","",1,"col-md-2","col-form-label"],[1,"col-md-10"],["type","text","id","validationDeviceNameFeedback","name","deviceName",1,"form-control",3,"ngModel","ngModelChange"],["id","validationDeviceNameFeedback",1,"invalid-feedback"],[1,"form-group","row"],["for","deviceDesc",1,"col-md-2","col-form-label"],["type","text","name","deviceDescription",1,"form-control",3,"ngModel","ngModelChange"],["for","deviceLabels",1,"col-md-2","col-form-label"],["type","text","name","deviceLabels","placeholder","Multiple Labels are separated by commas: label1,label2,label3",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],["name","deviceAdminState",1,"form-control",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"],["for","operatingState",1,"col-md-2","col-form-label"],["name","deviceOperatingState",1,"form-control",3,"ngModel","ngModelChange"],["value","UP"],["value","DOWN"],[1,"card","border-0"],[1,"fa","fa-info-circle","text-warning","font-weight-bold"],[1,"card-body"],[1,"badge","badge-secondary","font-weight-bold"],[1,"fa","fa-plus-circle","mr-2"],["role","button",1,"user-select-none",3,"click"],["class","card mb-3",4,"ngFor","ngForOf"],[1,"card","mb-3"],[1,"col-md-2","col-form-label"],[1,"input-group","mb-3",2,"width","250px"],["type","text","name","interval","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["name","eventIntervalUnit","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","ms"],["value","s"],["value","m"],["value","h"],[1,"invalid-feedback"],["name","onchange",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],["value","true"],["value","false"],["name","resource","required","",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"],[3,"value"],[1,"badge","font-weight-bold","mr-3"],[1,"badge","font-weight-bold"],[4,"ngIf","ngIfThen","ngIfElse"],["avaliProtocolTemplate",""],["customProtocolTemplate",""],[1,"row","border","border-secondary","p-2","rounded-lg","mx-1"],[1,"col-md-2","border-right","border-info"],[1,"form-group"],["type","text","name","protocolName","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","mqtt"],["value","other"],["value","modbus-tcp"],["value","modbus-rtu"],[4,"ngIf","ngIfElse"],["noAvailProperty",""],[4,"ngFor","ngForOf"],[1,"form-inline","mb-1"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","disabled","",1,"form-control",2,"width","300px",3,"value"],[1,"form-group","mx-2"],["type","text",1,"form-control",2,"width","300px",3,"name","ngModel","ngModelOptions","ngModelChange"],[1,"fa","fa-info-circle","fa-lg","text-success","font-weight-bold","mr-1"],[1,"text-muted"],["class","text-warning",4,"ngIf"],[1,"text-warning"],[1,"fa","fa-warning"],[1,"col-md-2","col-lg-2","border-right","border-info"],["type","text","name","protocolName",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-10","col-lg-10"],[1,""],["type","text","name","propertyKey",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],["type","text","name","PropertyValue",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"input-group","ml-2"]],template:function(e,t){if(1&e&&(r.Lb(0,"div",0),r.Lb(1,"div",1),r.Lb(2,"span",2),r.Jb(3,"span",3),r.Lb(4,"span",4),r.mc(5,"Add Device Wizard"),r.Kb(),r.Kb(),r.Kb(),r.Lb(6,"div",5),r.Lb(7,"nav",6),r.Lb(8,"ol",7),r.Lb(9,"li",8),r.Lb(10,"span",9),r.mc(11,"SelectDeviceService "),r.kc(12,pe,1,0,"i",10),r.Kb(),r.Kb(),r.Lb(13,"li",8),r.Lb(14,"span",9),r.mc(15,"SelectDeviceProfile "),r.kc(16,he,1,0,"i",10),r.Kb(),r.Kb(),r.Lb(17,"li",8),r.Lb(18,"span",9),r.mc(19,"DevicePrimary "),r.kc(20,ue,1,0,"i",10),r.Kb(),r.Kb(),r.Lb(21,"li",8),r.Lb(22,"span",9),r.mc(23,"CreateAutoEvent "),r.kc(24,fe,1,0,"i",10),r.Kb(),r.Kb(),r.Lb(25,"li",11),r.Lb(26,"span",9),r.mc(27,"CreateDeviceProtocol "),r.kc(28,ge,1,0,"i",10),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(29,"div",1),r.kc(30,Le,3,0,"button",12),r.kc(31,Ke,3,1,"button",13),r.kc(32,Se,3,0,"button",14),r.kc(33,xe,3,1,"ng-template",null,15,r.lc),r.Kb(),r.Lb(35,"div",16),r.Lb(36,"div",17),r.kc(37,ye,2,1,"ng-template",18,19,r.lc),r.kc(39,Pe,2,4,"ng-template",18,20,r.lc),r.kc(41,Ce,39,9,"ng-template",18,21,r.lc),r.kc(43,Ne,10,1,"ng-template",18,22,r.lc),r.kc(45,Ve,15,11,"ng-template",18,23,r.lc),r.Kb(),r.Kb(),r.Kb()),2&e){const e=r.fc(34);r.xb(10),r.Yb("ngClass",t.currentStep>=0?t.selectedClass:t.noSelectedClass),r.xb(2),r.Yb("ngIf",t.currentStep>=1),r.xb(2),r.Yb("ngClass",t.currentStep>=1?t.selectedClass:t.noSelectedClass),r.xb(2),r.Yb("ngIf",t.currentStep>=2),r.xb(2),r.Yb("ngClass",t.currentStep>=2?t.selectedClass:t.noSelectedClass),r.xb(2),r.Yb("ngIf",t.currentStep>=3),r.xb(2),r.Yb("ngClass",t.currentStep>=3?t.selectedClass:t.noSelectedClass),r.xb(2),r.Yb("ngIf",t.currentStep>=4),r.xb(2),r.Yb("ngClass",t.currentStep>=4?t.selectedClass:t.noSelectedClass),r.xb(2),r.Yb("ngIf",t.currentStep>=5),r.xb(2),r.Yb("ngIf",t.currentStep),r.xb(1),r.Yb("ngIf",4>t.currentStep)("ngIfElse",e),r.xb(1),r.Yb("ngIf",3===t.currentStep),r.xb(4),r.Yb("ngSwitch",t.currentStep),r.xb(1),r.Yb("ngSwitchCase",0),r.xb(2),r.Yb("ngSwitchCase",1),r.xb(2),r.Yb("ngSwitchCase",2),r.xb(2),r.Yb("ngSwitchCase",3),r.xb(2),r.Yb("ngSwitchCase",4)}},directives:[n.i,n.k,n.l,n.m,re,ve,c.n,c.e,c.f,c.a,c.d,c.g,c.l,c.h,c.m,n.j,c.k],styles:['.breadcrumb[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]:before{color:inherit;font-weight:inherit;content:">>";padding:0 5px}.btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}']}),e})();function Re(e,t){if(1&e){const e=r.Mb();r.Lb(0,"div"),r.Lb(1,"form",40),r.Lb(2,"div",41),r.Lb(3,"div",42),r.Lb(4,"span",43),r.mc(5,"PropertyKey"),r.Kb(),r.Kb(),r.Lb(6,"input",44),r.Tb("ngModelChange",function(e){return t.$implicit.key=e}),r.Kb(),r.Kb(),r.Lb(7,"div",45),r.Jb(8,"i",46),r.Kb(),r.Lb(9,"div",41),r.Lb(10,"div",42),r.Lb(11,"span",43),r.mc(12,"PropertyValue"),r.Kb(),r.Kb(),r.Lb(13,"input",47),r.Tb("ngModelChange",function(e){return t.$implicit.value=e}),r.Kb(),r.Kb(),r.Lb(14,"div",48),r.Lb(15,"button",49),r.Tb("click",function(){r.gc(e);const i=t.$implicit;return r.Vb(2).removeProtocolProperty(i)}),r.Jb(16,"i",50),r.Kb(),r.Kb(),r.Kb(),r.Kb()}if(2&e){const e=t.$implicit;r.xb(6),r.Yb("ngModel",e.key),r.xb(7),r.Yb("ngModel",e.value)}}function Fe(e,t){if(1&e&&(r.Lb(0,"option",65),r.mc(1),r.Kb()),2&e){const e=t.$implicit;r.Zb("value",e),r.xb(1),r.nc(e)}}function qe(e,t){if(1&e){const e=r.Mb();r.Lb(0,"div",10),r.Lb(1,"div",9),r.Lb(2,"form"),r.Lb(3,"div",51),r.Lb(4,"label",13),r.mc(5,"Interval"),r.Kb(),r.Lb(6,"div",14),r.Lb(7,"div",52),r.Lb(8,"input",53),r.Tb("ngModelChange",function(e){return t.$implicit.interval=e}),r.Kb(),r.Lb(9,"div",54),r.Lb(10,"select",55),r.Tb("ngModelChange",function(e){return t.$implicit.unit=e}),r.Lb(11,"option",56),r.mc(12,"millisecond"),r.Kb(),r.Lb(13,"option",57),r.mc(14,"second"),r.Kb(),r.Lb(15,"option",58),r.mc(16,"minute"),r.Kb(),r.Lb(17,"option",59),r.mc(18,"hour"),r.Kb(),r.Kb(),r.Kb(),r.Lb(19,"div",16),r.mc(20," can only be a pure integer number "),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(21,"div",12),r.Lb(22,"label",13),r.mc(23,"onchange"),r.Kb(),r.Lb(24,"div",14),r.Lb(25,"select",60),r.Tb("ngModelChange",function(e){return t.$implicit.onChange=e}),r.Lb(26,"option",61),r.mc(27,"true"),r.Kb(),r.Lb(28,"option",62),r.mc(29,"false"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(30,"div",12),r.Lb(31,"label",13),r.mc(32,"resource"),r.Kb(),r.Lb(33,"div",14),r.Lb(34,"select",63),r.Tb("ngModelChange",function(e){return t.$implicit.resource=e}),r.kc(35,Fe,2,2,"option",64),r.Kb(),r.Lb(36,"div",16),r.mc(37," resource can't be empty "),r.Kb(),r.Kb(),r.Kb(),r.Lb(38,"button",49),r.Tb("click",function(){r.gc(e);const i=t.$implicit;return r.Vb(2).removeAutoEvent(i)}),r.Jb(39,"i",50),r.mc(40," Remove"),r.Kb(),r.Kb(),r.Kb(),r.Kb()}if(2&e){const e=t.$implicit,i=r.Vb(2);r.xb(8),r.Ab("is-invalid",!i.eventIntervalNumType(e.interval))("is-valid",i.eventIntervalNumType(e.interval)),r.Yb("ngModel",e.interval),r.xb(2),r.Yb("ngModel",e.unit),r.xb(15),r.Yb("ngModel",e.onChange),r.xb(9),r.Ab("is-invalid",""===e.resource)("is-valid",""!==e.resource),r.Yb("ngModel",e.resource),r.xb(1),r.Yb("ngForOf",i.autoEventResourceNameSet)}}function Ge(e,t){if(1&e){const e=r.Mb();r.Lb(0,"div",1),r.Lb(1,"div",2),r.Jb(2,"i",3),r.Lb(3,"span",4),r.mc(4,"Edit Device"),r.Kb(),r.Lb(5,"span",5),r.mc(6),r.Kb(),r.Kb(),r.Lb(7,"div",6),r.Lb(8,"button",7),r.Tb("click",function(){return r.gc(e),r.Vb().save()}),r.Lb(9,"span"),r.Jb(10,"i",8),r.mc(11,"Save"),r.Kb(),r.Kb(),r.Kb(),r.Lb(12,"div",9),r.Lb(13,"div",10),r.Lb(14,"div",2),r.Jb(15,"i",11),r.mc(16," Device Primary "),r.Kb(),r.Lb(17,"div",9),r.Lb(18,"form"),r.Lb(19,"div",12),r.Lb(20,"label",13),r.mc(21,"DeviceName"),r.Kb(),r.Lb(22,"div",14),r.Lb(23,"input",15),r.Tb("ngModelChange",function(t){return r.gc(e),r.Vb().device.name=t}),r.Kb(),r.Lb(24,"div",16),r.mc(25," device name can't not be empty! "),r.Kb(),r.Kb(),r.Kb(),r.Lb(26,"div",12),r.Lb(27,"label",13),r.mc(28,"Description"),r.Kb(),r.Lb(29,"div",14),r.Lb(30,"input",17),r.Tb("ngModelChange",function(t){return r.gc(e),r.Vb().device.description=t}),r.Kb(),r.Kb(),r.Kb(),r.Lb(31,"div",12),r.Lb(32,"label",13),r.mc(33,"Labels"),r.Kb(),r.Lb(34,"div",14),r.Lb(35,"input",18),r.Tb("ngModelChange",function(t){return r.gc(e),r.Vb().deviceLabels=t}),r.Kb(),r.Kb(),r.Kb(),r.Lb(36,"div",12),r.Lb(37,"label",19),r.mc(38,"AdminState"),r.Kb(),r.Lb(39,"div",14),r.Lb(40,"select",20),r.Tb("ngModelChange",function(t){return r.gc(e),r.Vb().device.adminState=t}),r.Lb(41,"option",21),r.mc(42,"UNLOCKED"),r.Kb(),r.Lb(43,"option",22),r.mc(44,"LOCKED"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(45,"div",12),r.Lb(46,"label",23),r.mc(47,"OperatingState"),r.Kb(),r.Lb(48,"div",14),r.Lb(49,"select",24),r.Tb("ngModelChange",function(t){return r.gc(e),r.Vb().device.operatingState=t}),r.Lb(50,"option",25),r.mc(51,"UP"),r.Kb(),r.Lb(52,"option",26),r.mc(53,"DOWN"),r.Kb(),r.Lb(54,"option",26),r.mc(55,"UNKNOWN"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(56,"div",27),r.Lb(57,"app-device-service-list",28),r.Tb("singleDeviceSvcSelectedEvent",function(t){return r.gc(e),r.Vb().onSingleDeviceSvcSelected(t)}),r.Kb(),r.Kb(),r.Lb(58,"div",27),r.Lb(59,"app-device-profile-list",29),r.Tb("singleProfileSelectedEvent",function(t){return r.gc(e),r.Vb().onSingleProfileSelected(t)}),r.Kb(),r.Kb(),r.Lb(60,"div",10),r.Lb(61,"div",2),r.Jb(62,"i",11),r.mc(63," Device Protocol "),r.Kb(),r.Lb(64,"div",9),r.Lb(65,"div",1),r.Lb(66,"div",9),r.Lb(67,"div",30),r.Lb(68,"div",31),r.Lb(69,"div",32),r.Lb(70,"label"),r.mc(71,"Protocol Name"),r.Kb(),r.Lb(72,"input",33),r.Tb("ngModelChange",function(t){return r.gc(e),r.Vb().protocolName=t}),r.Kb(),r.Lb(73,"div",16),r.Lb(74,"small"),r.mc(75,"the protocol name can't be empty!"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(76,"div",34),r.Lb(77,"div"),r.Lb(78,"p",35),r.Jb(79,"span",36),r.Lb(80,"span",37),r.Tb("click",function(){return r.gc(e),r.Vb().addProtocolProperty()}),r.mc(81,"Add Protocol Property"),r.Kb(),r.Kb(),r.Kb(),r.kc(82,Re,17,2,"div",38),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(83,"div",10),r.Lb(84,"div",2),r.Jb(85,"i",11),r.mc(86," AutoEvents "),r.Kb(),r.Lb(87,"div",9),r.Lb(88,"p",35),r.Jb(89,"span",36),r.Lb(90,"span",37),r.Tb("click",function(){return r.gc(e),r.Vb().addAutoEvent()}),r.mc(91,"Add More AutoEvent"),r.Kb(),r.Kb(),r.kc(92,qe,41,13,"div",39),r.Kb(),r.Kb(),r.Kb(),r.Kb()}if(2&e){const e=r.Vb();r.xb(6),r.nc(e.device.name),r.xb(2),r.Yb("disabled",e.validateBeforeSave()),r.xb(15),r.Ab("is-invalid",""===e.device.name),r.Yb("ngModel",e.device.name),r.xb(7),r.Yb("ngModel",e.device.description),r.xb(5),r.Yb("ngModel",e.deviceLabels),r.xb(5),r.Yb("ngModel",e.device.adminState),r.xb(9),r.Yb("ngModel",e.device.operatingState),r.xb(8),r.Yb("deviceSvcSelected",e.selectedSvc),r.xb(2),r.Yb("enableSelectAll",!1)("toolbars",!1)("singleProfileSelected",e.selectedProfile)("associatedDeviceColumn",!1),r.xb(13),r.Ab("is-invalid",!e.protocolName)("is-valid",e.protocolName),r.Yb("ngModel",e.protocolName),r.xb(10),r.Yb("ngForOf",e.protocolPropertyList),r.xb(10),r.Yb("ngForOf",e.autoEventsInternal)}}let We=(()=>{class e{constructor(e,t,i,n){this.router=e,this.route=t,this.metaSvc=i,this.msgSvc=n,this.autoEventsInternal=[],this.autoEventResourceNameSet=[],this.protocolProperty={key:"",value:""},this.protocolPropertyList=[]}ngOnInit(){this.route.queryParams.subscribe(e=>{this.metaSvc.findDeviceByName(e.deviceName).subscribe(e=>{var t;this.device=e.device,this.deviceLabels=null===(t=this.device.labels)||void 0===t?void 0:t.join(","),this.setAutoEventInternal(this.device.autoEvents),this.protocolName=Object.keys(this.device.protocols)[0];for(const[i,n]of Object.entries(this.device.protocols[this.protocolName]))this.protocolPropertyList.push({key:i,value:n});this.setDefaultDeviceSvcSelected(this.device.serviceName),this.setDefaultDeviceProfileSelected(this.device.profileName)})})}onSingleProfileSelected(e){this.selectedProfile=e,this.resetAutoEventsInternal(),this.setupAutoEventResourceNameSet(this.selectedProfile)}onSingleDeviceSvcSelected(e){this.selectedSvc=e}setDefaultDeviceSvcSelected(e){this.metaSvc.findDevcieServiceByName(e).subscribe(e=>{this.selectedSvc=e.service})}setDefaultDeviceProfileSelected(e){this.metaSvc.findProfileByName(e).subscribe(e=>{this.selectedProfile=e.profile,this.setupAutoEventResourceNameSet(this.selectedProfile)})}resetAutoEventsInternal(){this.autoEventsInternal=[]}setupAutoEventResourceNameSet(e){e.deviceResources.forEach((e,t)=>{this.autoEventResourceNameSet.push(e.name)}),e.deviceCommands.forEach((e,t)=>{this.autoEventResourceNameSet.push(e.name)})}setAutoEventInternal(e){let t;null==e||e.forEach(e=>{let i=0;-1!==e.interval.indexOf("ms")?i=e.interval.indexOf("ms"):-1!==e.interval.indexOf("s")?i=e.interval.indexOf("s"):-1!==e.interval.indexOf("m")?i=e.interval.indexOf("m"):-1!==e.interval.indexOf("h")&&(i=e.interval.indexOf("h")),t=e.interval.substring(i),this.autoEventsInternal.push({interval:e.interval.slice(0,i),onChange:!!e.onChange,resource:e.sourceName,unit:t})})}eventIntervalNumType(e){return!isNaN(e)&&parseFloat(e)===parseInt(e)}addProtocolProperty(){this.protocolPropertyList.push({key:"",value:""})}removeProtocolProperty(e){this.protocolPropertyList.splice(this.protocolPropertyList.indexOf(e),1)}addAutoEvent(){this.autoEventsInternal.push({interval:"",onChange:!1,resource:"",unit:"ms"})}removeAutoEvent(e){this.autoEventsInternal.splice(this.autoEventsInternal.indexOf(e),1)}validateBeforeSave(){var e;if((null===(e=this.device)||void 0===e?void 0:e.name)&&this.protocolName){let e=!1;return this.autoEventsInternal.forEach(t=>{this.eventIntervalNumType(t.interval)&&""!==t.resource||(e=!0)}),e}return!0}save(){var e,t,i;let n=this.device,c={},o={};n.labels=null===(e=this.deviceLabels)||void 0===e?void 0:e.split(","),n.serviceName=null===(t=this.selectedSvc)||void 0===t?void 0:t.name,n.profileName=null===(i=this.selectedProfile)||void 0===i?void 0:i.name,this.protocolPropertyList.forEach(e=>{o[e.key]=e.value}),c[this.protocolName]=o,n.protocols=c,n.autoEvents=[],this.autoEventsInternal.forEach(e=>{n.autoEvents.push({interval:`${parseInt(e.interval)}${e.unit}`,onChange:!!e.onChange,sourceName:e.resource})}),this.metaSvc.updateDevice(n).subscribe(()=>{var e;this.msgSvc.success("update device","name: "+(null===(e=this.device)||void 0===e?void 0:e.name)),this.router.navigate(["../device-list"],{relativeTo:this.route})})}showTips(){$(".a-question-circle-o").tooltip("toggle")}}return e.\u0275fac=function(t){return new(t||e)(r.Ib(o.e),r.Ib(o.a),r.Ib(a.a),r.Ib(b.a))},e.\u0275cmp=r.Cb({type:e,selectors:[["app-edit-device"]],decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-edit","text-danger","fa-lg"],[1,"mx-2"],[1,"text-primary"],[1,"card-header","py-1"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-save","mr-1"],[1,"card-body"],[1,"card","mb-3"],[1,"fa","fa-tags","fa-lg","text-danger"],[1,"form-group","row"],[1,"col-md-2","col-form-label"],[1,"col-md-10"],["type","text","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"invalid-feedback"],["type","text","name","description",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","labels",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],["name","adminState",1,"form-control",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"],["for","operatingState",1,"col-md-2","col-form-label"],["name","operatingState",1,"form-control",3,"ngModel","ngModelChange"],["value","UP"],["value","DOWN"],[1,"mb-3"],[3,"deviceSvcSelected","singleDeviceSvcSelectedEvent"],[3,"enableSelectAll","toolbars","singleProfileSelected","associatedDeviceColumn","singleProfileSelectedEvent"],[1,"row"],[1,"col-md-2","col-lg-2","border-right","border-secondary"],[1,"form-group"],["type","text","name","protocolName",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-10","col-lg-10"],[1,"badge","badge-secondary","font-weight-bold"],[1,"fa","fa-plus-circle","mr-2"],["role","button",1,"user-select-none",3,"click"],[4,"ngFor","ngForOf"],["class","card mb-3",4,"ngFor","ngForOf"],[1,"form-inline","mb-1"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","name","propertyKey",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"form-group","mx-2"],[1,"fa","fa-long-arrow-right"],["type","text","name","PropertyValue",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"input-group","ml-2"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"],[1,"form-group","row","has-validation"],[1,"input-group","mb-3",2,"width","250px"],["type","text","name","interval","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["name","eventIntervalUnit","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","ms"],["value","s"],["value","m"],["value","h"],["name","onchange",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],["value","true"],["value","false"],["name","resource","required","",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&r.kc(0,Ge,93,21,"div",0),2&e&&r.Yb("ngIf",t.device)},directives:[n.k,c.n,c.e,c.f,c.a,c.k,c.d,c.g,c.l,c.h,c.m,re,ve,n.j],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),e})(),Ze=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Cb({type:e,selectors:[["app-device-profile-center"]],decls:1,vars:0,template:function(e,t){1&e&&r.Jb(0,"router-outlet")},directives:[o.j],styles:[""]}),e})();var _e=i("9vc0");let Xe=(()=>{class e{constructor(e,t,i,n,c){this.metaSvc=e,this.msgSvc=t,this.errSvc=i,this.router=n,this.route=c}ngOnInit(){this.renderYamlSource()}renderYamlSource(){let e=document.getElementById("editor");this.codeMirrorEditor=CodeMirror.fromTextArea(e,{mode:"yaml",theme:"gruvbox-dark",foldGutter:!0,smartIndent:!0,showCursorWhenSelecting:!0,lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],autofocus:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,cursorHeight:.85,autocorrect:!0}),this.codeMirrorEditor.setSize("auto","600px"),this.codeMirrorEditor.on("drop",(e,t)=>{var i;this.yamlFile=null===(i=t.dataTransfer)||void 0===i?void 0:i.files[0]}),this.codeMirrorEditor.on("paste",(e,t)=>{})}submit(){this.profileYamlSource=this.codeMirrorEditor.getValue(),this.metaSvc.addProfileYamlByNameViaUIBackend(this.profileYamlSource).subscribe(e=>{this.errSvc.handleErrorForV2API(e)||(this.msgSvc.success("Add profile"),this.router.navigate(["../device-profile-list"],{relativeTo:this.route}))})}}return e.\u0275fac=function(t){return new(t||e)(r.Ib(a.a),r.Ib(b.a),r.Ib(_e.a),r.Ib(o.e),r.Ib(o.a))},e.\u0275cmp=r.Cb({type:e,selectors:[["app-add-profile"]],decls:15,vars:0,consts:[[1,"card"],[1,"card-header"],[1,"text-danger","font-weight-bold","fa","fa-code","mr-2"],[1,"mr-3","font-weight-bold"],[1,"fa","fa-info-circle","text-success","font-weight-bold"],[1,"float-right"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save","mr-1"],[1,"card-body","p-0"],["id","editor","name","editor"]],template:function(e,t){1&e&&(r.Lb(0,"div",0),r.Lb(1,"div",1),r.Lb(2,"span"),r.Jb(3,"span",2),r.Lb(4,"span",3),r.mc(5,"Add Profile"),r.Kb(),r.Lb(6,"span",4),r.mc(7,"\xa0drag-and-drop is enabled"),r.Kb(),r.Kb(),r.Lb(8,"span",5),r.Lb(9,"button",6),r.Tb("click",function(){return t.submit()}),r.Jb(10,"i",7),r.Lb(11,"span"),r.mc(12,"Submit"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(13,"div",8),r.Jb(14,"textarea",9),r.Kb(),r.Kb())},styles:[""]}),e})(),ze=(()=>{class e{constructor(e,t,i,n,c){this.metaSvc=e,this.msgSvc=t,this.errSvc=i,this.router=n,this.route=c}ngOnInit(){this.renderYamlSource(),this.route.queryParams.subscribe(e=>{e.profileName&&(this.profileName=e.profileName,this.metaSvc.findProfileYamlByNameViaUIBackend(e.profileName).subscribe(e=>{this.codeMirrorEditor.setValue(e),this.codeMirrorEditor.refresh()}))})}update(){this.codeMirrorEditor.refresh(),this.metaSvc.updateProfileYamlContentViaUIBackend(this.codeMirrorEditor.getValue()).subscribe(e=>{this.errSvc.handleErrorForV2API(e)||(this.msgSvc.success("Update profile","name: "+this.profileName),this.router.navigate(["../device-profile-list"],{relativeTo:this.route}))})}renderYamlSource(){let e=document.getElementById("editor-edit");this.codeMirrorEditor=CodeMirror.fromTextArea(e,{mode:"yaml",theme:"gruvbox-dark",foldGutter:!0,smartIndent:!0,showCursorWhenSelecting:!0,lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],autofocus:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,cursorHeight:.85,autocorrect:!0}),this.codeMirrorEditor.setSize("auto","600px")}ngOnDestroy(){this.codeMirrorEditor=null}}return e.\u0275fac=function(t){return new(t||e)(r.Ib(a.a),r.Ib(b.a),r.Ib(_e.a),r.Ib(o.e),r.Ib(o.a))},e.\u0275cmp=r.Cb({type:e,selectors:[["app-edit-profile"]],decls:12,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"text-danger","fa","fa-edit","mr-2"],[1,"float-right"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save","mr-1"],[1,"card-body","p-0"],["id","editor-edit","name","editor"]],template:function(e,t){1&e&&(r.Lb(0,"div",0),r.Lb(1,"div",1),r.Lb(2,"span"),r.Jb(3,"span",2),r.mc(4),r.Kb(),r.Lb(5,"span",3),r.Lb(6,"button",4),r.Tb("click",function(){return t.update()}),r.Lb(7,"span"),r.Jb(8,"i",5),r.mc(9,"Save"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(10,"div",6),r.Jb(11,"textarea",7),r.Kb(),r.Kb()),2&e&&(r.xb(4),r.oc("",t.profileName," "))},styles:[""]}),e})(),He=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Cb({type:e,selectors:[["app-provision-watcher-center"]],decls:2,vars:0,template:function(e,t){1&e&&(r.Lb(0,"p"),r.mc(1,"provision-watcher-center works!"),r.Kb())},styles:[""]}),e})(),Qe=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Cb({type:e,selectors:[["app-provision-watcher-list"]],decls:2,vars:0,template:function(e,t){1&e&&(r.Lb(0,"p"),r.mc(1,"provision-watcher-list works!"),r.Kb())},styles:[""]}),e})(),et=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Cb({type:e,selectors:[["app-add-provision-watcher"]],decls:2,vars:0,template:function(e,t){1&e&&(r.Lb(0,"p"),r.mc(1,"add-provision-watcher works!"),r.Kb())},styles:[""]}),e})();const tt=[{path:"",component:s,children:[{path:"",redirectTo:"device-service-list",pathMatch:"full"},{path:"device-service-list",component:f},{path:"device-center",component:g,children:[{path:"",redirectTo:"device-list",pathMatch:"full"},{path:"device-list",component:ce},{path:"add-device",component:je},{path:"edit-device",component:We}]},{path:"device-profile-center",component:Ze,children:[{path:"",redirectTo:"device-profile-list",pathMatch:"full"},{path:"device-profile-list",component:ve},{path:"edit-profile",component:ze},{path:"add-profile",component:Xe}]},{path:"provision-watcher-center",component:He,children:[{path:"",redirectTo:"provision-watcher-list",pathMatch:"full"},{path:"provision-watcher-list",component:Qe},{path:"edit-provision-watcher",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Cb({type:e,selectors:[["app-edit-provision-watcher"]],decls:2,vars:0,template:function(e,t){1&e&&(r.Lb(0,"p"),r.mc(1,"edit-provision-watcher works!"),r.Kb())},styles:[""]}),e})()},{path:"add-provision-watcher",component:et}]}]}];let it=(()=>{class e{}return e.\u0275mod=r.Gb({type:e}),e.\u0275inj=r.Fb({factory:function(t){return new(t||e)},imports:[[o.i.forChild(tt)],o.i]}),e})(),nt=(()=>{class e{}return e.\u0275mod=r.Gb({type:e}),e.\u0275inj=r.Fb({factory:function(t){return new(t||e)},imports:[[n.b,c.b,it]]}),e})()}}]);