{"version":3,"sources":["./src/app/dashboard/dashboard-routing.module.ts","./src/app/dashboard/dashboard.component.ts","./src/app/dashboard/dashboard.component.html","./src/app/dashboard/dashboard.module.ts"],"names":[],"mappings":"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","file":"dashboard-dashboard-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { DashboardComponent } from './dashboard.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DashboardComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class DashboardRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { DataService } from '../services/data.service'\nimport { MetadataService } from '../services/metadata.service';\nimport { SchedulerService } from '../services/scheduler.service';\nimport { NotificationsService } from '../services/notifications.service';\nimport { SystemAgentService } from '../services/system-agent.service';\n\nimport { MultiDeviceServiceResponse } from '../contracts/v2/responses/device-service-response';\nimport { MultiDeviceResponse } from '../contracts/v2/responses/device-response';\nimport { MultiDeviceProfileResponse } from '../contracts/v2/responses/device-profile-response';\nimport { MultiNotificationResponse } from '../contracts/v2/responses/notification-response';\nimport { MultiIntervalResponse } from '../contracts/v2/responses/interval-response';\n\n@Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.css']\n})\nexport class DashboardComponent implements OnInit {\n\n  eventCount: number = 0;\n  readingCount: number = 0;\n  deviceSvcCount: number = 0;\n  deviceCount: number = 0;\n  deviceProfileCount: number = 0;\n  schedulerCount: number = 0;\n  notiCount: number = 0;\n\n  sysSvcStatusDown: number = 0;\n  deviceStatusLocked: number = 0;\n  deviceSvcStatusLocked: number = 0;\n\n  constructor(private dataService: DataService,\n    private metadataSvc:MetadataService,\n    private schedulerSvc: SchedulerService,\n    private notiSvc :NotificationsService,\n    private sysSvc: SystemAgentService) { }\n\n  ngOnInit(): void {\n    this.dataService.eventCount().subscribe((resp: any) => this.eventCount = resp.Count);\n    this.dataService.readingCount().subscribe((resp: any) => this.readingCount = resp.Count);\n    this.metadataSvc.allDeviceServices().subscribe((resp: MultiDeviceServiceResponse) => {\n      this.deviceSvcCount = resp.services.length;\n      resp.services.forEach((svc,i) => {\n        if (svc.adminState === 'LOCKED') {\n          this.deviceSvcStatusLocked++;\n        }\n      });\n    });\n    this.metadataSvc.allDevices().subscribe((resp: MultiDeviceResponse) => {\n      this.deviceCount = resp.devices.length;\n      resp.devices.forEach((device,i) => {\n        if (device.adminState === 'LOCKED') {\n          this.deviceStatusLocked++;\n        }\n      })\n    });\n    this.metadataSvc.allDeviceProfolesPagination(0,-1).subscribe((resp: MultiDeviceProfileResponse)=>{\n      this.deviceProfileCount = resp.profiles.length;\n    });\n\n    this.schedulerSvc.findAllIntervalsPagination(0,-1).subscribe((resp: MultiIntervalResponse) => {\n      this.schedulerCount = resp.intervals.length;\n    });\n\n    this.notiSvc.findNotificationsByStatusPagination(0,-1,'NEW').subscribe((resp: MultiNotificationResponse) => {\n      this.notiCount = resp.notifications.length;\n    });\n\n\n    // this.sysSvc.getHealth()\n\n  }\n\n}\n","<div class=\"row\">\n  <div class=\"col-lg-4\">\n    <div class=\"card\" role=\"button\" routerLink=\"/metadata\">\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">\n          Device Services\n          <!-- <span class=\"float-right badge badge-danger\">Enabled 5</span>\n          <span class=\"float-right badge badge-success mr-2\">Disabled 5</span> -->\n        </h5>\n        <h5 class=\"d-inline\">\n          <span class=\"badge badge-info\"> {{deviceSvcCount > 20 ? '20+' : deviceSvcCount}} </span>\n          <span class=\"float-right badge badge-danger\">Locked {{deviceSvcStatusLocked}}</span>\n          <span class=\"float-right badge badge-success mr-2\">Unlocked {{deviceSvcCount - deviceSvcStatusLocked}}</span>\n        </h5>\n      </div>\n    </div>\n  </div>\n  <div class=\"col-lg-4\">\n    <div class=\"card\" role=\"button\" routerLink=\"/metadata/device-center\">\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">Devices</h5>\n        <h5 class=\"d-inline\">\n          <span class=\"badge badge-info\"> {{deviceCount > 20 ? '20+' : deviceCount}} </span>\n          <span class=\"float-right badge badge-danger\">Locked {{deviceStatusLocked}}</span>\n          <span class=\"float-right badge badge-success mr-2\">Unlocked {{deviceCount - deviceStatusLocked}}</span>\n        </h5>\n      </div>\n    </div>\n  </div>\n  <div class=\"col-lg-4\">\n    <div class=\"card\" role=\"button\" routerLink=\"/metadata/device-profile-center\">\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">Device Profiles</h5>\n        <h5 class=\"d-inline\"><span class=\"badge badge-info\">{{deviceProfileCount > 20 ? '20+' : deviceProfileCount}}</span></h5>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"row mt-3\">\n  <div class=\"col-lg-6\">\n    <div class=\"card\" role=\"button\" routerLink=\"/scheduler\">\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">Schedulers</h5>\n        <h5><a href=\"#\" class=\"card-link font-weight-bolder badge badge-info\">{{schedulerCount > 20 ? '20+' : schedulerCount}}</a></h5>\n      </div>\n    </div>\n  </div>\n  <div class=\"col-lg-6\">\n    <div class=\"card\" role=\"button\" routerLink=\"/notifications\">\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">Notifications</h5>\n        <h5><a href=\"#\" class=\"card-link font-weight-bolder badge badge-info\">{{notiCount > 20 ? '20+' : notiCount}}</a></h5>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"row mt-3\">\n  <div class=\"col-lg-6\">\n    <div class=\"card\" role=\"button\" routerLink=\"/core-data\">\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">Events</h5>\n        <h5><a href=\"#\" class=\"card-link font-weight-bolder badge badge-info\">{{eventCount}}</a></h5>\n      </div>\n    </div>\n  </div>\n  <div class=\"col-lg-6\">\n    <div class=\"card\" role=\"button\" routerLink=\"/core-data\">\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">Readings</h5>\n        <h5><a href=\"#\" class=\"card-link font-weight-bolder badge badge-info\">{{readingCount}}</a></h5>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"row mt-3\">\n  <div class=\"col-md-12\">\n    <div class=\"card\" role=\"button\" routerLink=\"/system-agent\">\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">System Services Monitor</h5>\n        <h5>\n          <span class=\"badge badge-info\">7</span>\n          <!-- <span class=\"badge badge-danger float-right\">Down 0</span>\n          <span class=\"badge badge-success float-right mr-2\">Up 10</span> -->\n        </h5>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { DashboardRoutingModule } from './dashboard-routing.module';\nimport { DashboardComponent } from './dashboard.component';\n\n\n@NgModule({\n  declarations: [DashboardComponent],\n  imports: [\n    CommonModule,\n    DashboardRoutingModule\n  ]\n})\nexport class DashboardModule { }\n"],"sourceRoot":"webpack:///"}