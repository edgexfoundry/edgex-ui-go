"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[216],{8216:(D,p,s)=>{s.r(p),s.d(p,{CoreDataModule:()=>c});var l=s(8583),d=s(9502),_=s(476);let g=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-core-data"]],decls:21,vars:0,consts:function(){let n,e,a;return n="\u4E00\u4E2A\u4E8B\u4EF6\u8868\u793A\u4E00\u4E2A\u6216\u591A\u4E2A\u4F20\u611F\u5668\u8BFB\u503C\u7684\u96C6\u5408\uFF0C\u4E00\u4E9B\u4F20\u611F\u5668\u8BBE\u5907\u4E00\u6B21\u4E00\u4E2A\u8BFB\u503C\uFF0C\u800C\u6709\u7684\u53EF\u80FD\u4E00\u6B21\u63D0\u4F9B\u591A\u4E2A\u8BFB\u503C\uFF0C\u4F46\u662F\u4E00\u4E2A\u4E8B\u4EF6\u81F3\u5C11\u5E94\u8BE5\u6709\u4E00\u4E2A\u8BFB\u503C\uFF0C\u5728GUI\u4E0A\u64CD\u4F5C\u6570\u636E\u4E2D\u5FC3\u662F\u4E0D\u5408\u7406\u7684\u884C\u4E3A\uFF0C\u6570\u636E\u4E2D\u5FC3\u7684API\u53EA\u80FD\u662F\u5185\u90E8\u6216\u8005\u5916\u90E8\u670D\u52A1\u901A\u4FE1\u4F7F\u7528\uFF0C\u56E0\u6B64\u8FD9\u91CC\u4EC5\u4EC5\u662F\u8BA9\u7528\u6237\u9884\u89C8\u6570\u636E\u6D41",n=_.Zx4(n),e="\u4E8B\u4EF6",a="\u8BFB\u503C",[[1,"card","mb-2"],[1,"card-header"],[1,"fa","fa-info-circle","mr-2","text-info"],[1,"card-body"],n,[1,"card"],[1,"nav","nav-tabs","card-header-tabs","font-weight-bold"],[1,"nav-item"],["routerLink","./event","routerLinkActive","active",1,"nav-link"],e,["routerLink","./reading","routerLinkActive","active",1,"nav-link"],a]},template:function(e,a){1&e&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_._UZ(2,"i",2),_.TgZ(3,"span"),_._uU(4,"Tips"),_.qZA(),_.qZA(),_.TgZ(5,"div",3),_.tHW(6,4),_._UZ(7,"br"),_._UZ(8,"br"),_._UZ(9,"br"),_.N_p(),_.qZA(),_.qZA(),_.TgZ(10,"div",5),_.TgZ(11,"div",1),_.TgZ(12,"ul",6),_.TgZ(13,"li",7),_.TgZ(14,"a",8),_.SDv(15,9),_.qZA(),_.qZA(),_.TgZ(16,"li",7),_.TgZ(17,"a",10),_.SDv(18,11),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(19,"div",3),_._UZ(20,"router-outlet"),_.qZA(),_.qZA())},directives:[d.yS,d.Od,d.lC],styles:[""]}),t})();var A=s(2468);let u=(()=>{class t{constructor(e){this.dataSvc=e,this.pauseOperate=!0}ngOnInit(){}feedEvents(){this.feedInterval=setInterval(()=>{this.dataSvc.allEventsPagination(0,5).subscribe(e=>{0!==e.events.length?e.events.forEach((a,i)=>{$("#data-event-stream").prepend('<p class="user-select-all">'+JSON.stringify(a)+"</p>")}):$("#data-event-stream").prepend('<p class="user-select-all">no data stream available, please confirm whether there is at least one device to collect data</p>')})},3e3)}start(){this.pauseOperate=!1,this.feedEvents()}pause(){this.pauseOperate=!0,window.clearInterval(this.feedInterval)}operateToggle(){this.pauseOperate=!this.pauseOperate}ngOnDestroy(){window.clearInterval(this.feedInterval)}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(A.D))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-event"]],decls:20,vars:2,consts:function(){let n,e,a;return n="\u4E8B\u4EF6\u6570\u636E\u6D41",e="\u5F00\u59CB",a="\u6682\u505C",[[1,"card"],[1,"card-header"],[1,"font-weight-bold"],[1,"fa","fa-area-chart","mr-2","text-danger"],[1,"text-secondary"],n,[1,"card-header","p-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-play","mr-1"],e,["type","button",1,"btn","btn-info",3,"disabled","click"],[1,"fa","fa-pause","mr-1"],a,[1,"card-body"],["id","data-event-stream",1,"w-100","overflow-auto",2,"height","350px"]]},template:function(e,a){1&e&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"span",2),_._UZ(3,"span",3),_.TgZ(4,"span",4),_.SDv(5,5),_.qZA(),_.qZA(),_.qZA(),_.TgZ(6,"div",6),_.TgZ(7,"div",7),_.TgZ(8,"button",8),_.NdJ("click",function(){return a.start()}),_.TgZ(9,"span"),_._UZ(10,"i",9),_.TgZ(11,"span"),_.SDv(12,10),_.qZA(),_.qZA(),_.qZA(),_.TgZ(13,"button",11),_.NdJ("click",function(){return a.pause()}),_.TgZ(14,"span"),_._UZ(15,"i",12),_.TgZ(16,"span"),_.SDv(17,13),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(18,"div",14),_._UZ(19,"pre",15),_.qZA(),_.qZA()),2&e&&(_.xp6(8),_.Q6J("disabled",!a.pauseOperate),_.xp6(5),_.Q6J("disabled",a.pauseOperate))},styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),t})(),O=(()=>{class t{constructor(e){this.dataSvc=e,this.pauseOperate=!0}ngOnInit(){}feedEvents(){this.feedInterval=setInterval(()=>{this.dataSvc.allReadingsPagination(0,5).subscribe(e=>{0!==e.readings.length?e.readings.forEach((a,i)=>{$("#data-reading-stream").prepend('<p class="user-select-all">'+JSON.stringify(a)+"</p>")}):$("#data-event-stream").prepend('<p class="user-select-all">no data stream available, please confirm whether there is at least one device to collect data</p>')})},3e3)}start(){this.pauseOperate=!1,this.feedEvents()}pause(){this.pauseOperate=!0,window.clearInterval(this.feedInterval)}operateToggle(){this.pauseOperate=!this.pauseOperate}ngOnDestroy(){window.clearInterval(this.feedInterval)}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(A.D))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-reading"]],decls:20,vars:2,consts:function(){let n,e,a;return n="\u8BFB\u503C\u6570\u636E\u6D41",e="\u5F00\u59CB",a="\u6682\u505C",[[1,"card"],[1,"card-header"],[1,"font-weight-bold"],[1,"fa","fa-area-chart","mr-2","text-danger"],[1,"text-secondary"],n,[1,"card-header","p-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-play","mr-1"],e,["type","button",1,"btn","btn-info",3,"disabled","click"],[1,"fa","fa-pause","mr-1"],a,[1,"card-body"],["id","data-reading-stream",1,"w-100","overflow-auto",2,"height","350px"]]},template:function(e,a){1&e&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"span",2),_._UZ(3,"span",3),_.TgZ(4,"span",4),_.SDv(5,5),_.qZA(),_.qZA(),_.qZA(),_.TgZ(6,"div",6),_.TgZ(7,"div",7),_.TgZ(8,"button",8),_.NdJ("click",function(){return a.start()}),_.TgZ(9,"span"),_._UZ(10,"i",9),_.TgZ(11,"span"),_.SDv(12,10),_.qZA(),_.qZA(),_.qZA(),_.TgZ(13,"button",11),_.NdJ("click",function(){return a.pause()}),_.TgZ(14,"span"),_._UZ(15,"i",12),_.TgZ(16,"span"),_.SDv(17,13),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(18,"div",14),_._UZ(19,"pre",15),_.qZA(),_.qZA()),2&e&&(_.xp6(8),_.Q6J("disabled",!a.pauseOperate),_.xp6(5),_.Q6J("disabled",a.pauseOperate))},styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),t})();const o=[{path:"",canActivate:[s(5473).a],component:g,children:[{path:"",redirectTo:"event",pathMatch:"full"},{path:"event",component:u},{path:"reading",component:O}]}];let E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({imports:[[d.Bz.forChild(o)],d.Bz]}),t})(),c=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({imports:[[l.ez,E]]}),t})()},2468:(D,p,s)=>{s.d(p,{D:()=>A});var l=s(5894),d=s(476),_=s(1841),g=s(4889);let A=(()=>{class u{constructor(r,o){this.http=r,this.errorSvc=o,this.endpoint="/core-data",this.version="/api/v2",this.urlPrefix=`${this.endpoint}${this.version}`,this.configUrl="/config",this.endpointHealthUrl=`${this.urlPrefix}/ping`,this.eventCountUrl=`${this.urlPrefix}/event/count`,this.readingCountUrl=`${this.urlPrefix}/reading/count`,this.allEventsUrl=`${this.urlPrefix}/event/all`,this.allReadingsUrl=`${this.urlPrefix}/reading/all`,this.associatedEventsByDeviceNameUrl=`${this.urlPrefix}/event/device/name/`,this.associatedReadinsByDeviceNameUrl=`${this.urlPrefix}/reading/device/name/`}getConfig(){return this.http.get(`${this.urlPrefix}${this.configUrl}`).pipe((0,l.K)(o=>this.errorSvc.handleError(o)))}endpointHealth(){return this.http.get(`${this.endpointHealthUrl}`).pipe((0,l.K)(o=>this.errorSvc.handleError(o)))}eventCount(){return this.http.get(`${this.eventCountUrl}`).pipe((0,l.K)(o=>this.errorSvc.handleError(o)))}readingCount(){return this.http.get(`${this.readingCountUrl}`).pipe((0,l.K)(o=>this.errorSvc.handleError(o)))}allEventsPagination(r,o){return this.http.get(`${this.allEventsUrl}?offset=${r}&limit=${o}`).pipe((0,l.K)(c=>this.errorSvc.handleError(c)))}allReadingsPagination(r,o){return this.http.get(`${this.allReadingsUrl}?offset=${r}&limit=${o}`).pipe((0,l.K)(c=>this.errorSvc.handleError(c)))}allAssocaitedReadingsByDeviceNamePagination(r,o){return this.http.get(`${this.associatedEventsByDeviceNameUrl}?offset=${r}&limit=${o}`).pipe((0,l.K)(c=>this.errorSvc.handleError(c)))}allAssocaitedEventsByDeviceNamePagination(r,o){return this.http.get(`${this.associatedReadinsByDeviceNameUrl}?offset=${r}&limit=${o}`).pipe((0,l.K)(c=>this.errorSvc.handleError(c)))}}return u.\u0275fac=function(r){return new(r||u)(d.LFG(_.eN),d.LFG(g.T))},u.\u0275prov=d.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);