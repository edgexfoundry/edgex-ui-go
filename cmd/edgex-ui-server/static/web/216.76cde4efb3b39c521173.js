"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[216],{8216:(m,h,s)=>{s.r(h),s.d(h,{CoreDataModule:()=>i});var c=s(8583),u=s(9502),e=s(476);let v=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(a){return new(a||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-core-data"]],decls:23,vars:0,consts:[[1,"card","mb-2"],[1,"card-header"],[1,"fa","fa-info-circle","mr-2","text-info"],[1,"card-body"],[1,"card"],[1,"nav","nav-tabs","card-header-tabs","font-weight-bold"],[1,"nav-item"],["routerLink","./event","routerLinkActive","active",1,"nav-link"],["routerLink","./reading","routerLinkActive","active",1,"nav-link"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"i",2),e.TgZ(3,"span"),e._uU(4,"Tips"),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e._uU(6," An event represents a collection of one or more sensor readings. Some sensors or devices are only providing a single value \u2013 a single reading - at a time. Other sensors spew multiple values whenever they are read. An event must have at least one reading. Events are associated to a sensor or device. "),e._UZ(7,"br"),e._UZ(8,"br"),e._uU(9," The following data is only for the convenience of the user to view the data format of the data center, which does not make any sense to manipulate! "),e._UZ(10,"br"),e._uU(11," The dynamic display effect of the data is that only the API of the Core Data service is called periodically, with intervals of 3 seconds. "),e.qZA(),e.qZA(),e.TgZ(12,"div",4),e.TgZ(13,"div",1),e.TgZ(14,"ul",5),e.TgZ(15,"li",6),e.TgZ(16,"a",7),e._uU(17,"Event"),e.qZA(),e.qZA(),e.TgZ(18,"li",6),e.TgZ(19,"a",8),e._uU(20,"Reading"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",3),e._UZ(22,"router-outlet"),e.qZA(),e.qZA())},directives:[u.yS,u.Od,u.lC],styles:[""]}),r})();var g=s(2468);const n=[{path:"",component:v,children:[{path:"",redirectTo:"event",pathMatch:"full"},{path:"event",component:(()=>{class r{constructor(a){this.dataSvc=a,this.pauseOperate=!0}ngOnInit(){}feedEvents(){this.feedInterval=setInterval(()=>{this.dataSvc.allEventsPagination(0,5).subscribe(a=>{0!==a.events.length?a.events.forEach((o,f)=>{$("#data-event-stream").prepend('<p class="user-select-all">'+JSON.stringify(o)+"</p>")}):$("#data-event-stream").prepend('<p class="user-select-all">no data stream available, please confirm whether there is at least one device to collect data</p>')})},3e3)}start(){this.pauseOperate=!1,this.feedEvents()}pause(){this.pauseOperate=!0,window.clearInterval(this.feedInterval)}operateToggle(){this.pauseOperate=!this.pauseOperate}ngOnDestroy(){window.clearInterval(this.feedInterval)}}return r.\u0275fac=function(a){return new(a||r)(e.Y36(g.D))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-event"]],decls:18,vars:2,consts:[[1,"card"],[1,"card-header"],[1,"font-weight-bold"],[1,"fa","fa-area-chart","mr-2","text-danger"],[1,"text-secondary"],[1,"card-header","p-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-play","mr-1"],["type","button",1,"btn","btn-info",3,"disabled","click"],[1,"fa","fa-pause","mr-1"],[1,"card-body"],["id","data-event-stream",1,"w-100","overflow-auto",2,"height","350px"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"span",2),e._UZ(3,"span",3),e.TgZ(4,"span",4),e._uU(5,"Event Data Stream"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"button",7),e.NdJ("click",function(){return o.start()}),e.TgZ(9,"span"),e._UZ(10,"i",8),e._uU(11,"Start"),e.qZA(),e.qZA(),e.TgZ(12,"button",9),e.NdJ("click",function(){return o.pause()}),e.TgZ(13,"span"),e._UZ(14,"i",10),e._uU(15,"Pause"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",11),e._UZ(17,"pre",12),e.qZA(),e.qZA()),2&a&&(e.xp6(8),e.Q6J("disabled",!o.pauseOperate),e.xp6(4),e.Q6J("disabled",o.pauseOperate))},styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),r})()},{path:"reading",component:(()=>{class r{constructor(a){this.dataSvc=a,this.pauseOperate=!0}ngOnInit(){}feedEvents(){this.feedInterval=setInterval(()=>{this.dataSvc.allReadingsPagination(0,5).subscribe(a=>{0!==a.readings.length?a.readings.forEach((o,f)=>{$("#data-reading-stream").prepend('<p class="user-select-all">'+JSON.stringify(o)+"</p>")}):$("#data-event-stream").prepend('<p class="user-select-all">no data stream available, please confirm whether there is at least one device to collect data</p>')})},3e3)}start(){this.pauseOperate=!1,this.feedEvents()}pause(){this.pauseOperate=!0,window.clearInterval(this.feedInterval)}operateToggle(){this.pauseOperate=!this.pauseOperate}ngOnDestroy(){window.clearInterval(this.feedInterval)}}return r.\u0275fac=function(a){return new(a||r)(e.Y36(g.D))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-reading"]],decls:18,vars:2,consts:[[1,"card"],[1,"card-header"],[1,"font-weight-bold"],[1,"fa","fa-area-chart","mr-2","text-danger"],[1,"text-secondary"],[1,"card-header","p-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-play","mr-1"],["type","button",1,"btn","btn-info",3,"disabled","click"],[1,"fa","fa-pause","mr-1"],[1,"card-body"],["id","data-reading-stream",1,"w-100","overflow-auto",2,"height","350px"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"span",2),e._UZ(3,"span",3),e.TgZ(4,"span",4),e._uU(5,"Reading Data Stream"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"button",7),e.NdJ("click",function(){return o.start()}),e.TgZ(9,"span"),e._UZ(10,"i",8),e._uU(11,"Start"),e.qZA(),e.qZA(),e.TgZ(12,"button",9),e.NdJ("click",function(){return o.pause()}),e.TgZ(13,"span"),e._UZ(14,"i",10),e._uU(15,"Pause"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",11),e._UZ(17,"pre",12),e.qZA(),e.qZA()),2&a&&(e.xp6(8),e.Q6J("disabled",!o.pauseOperate),e.xp6(4),e.Q6J("disabled",o.pauseOperate))},styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),r})()}]}];let t=(()=>{class r{}return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[u.Bz.forChild(n)],u.Bz]}),r})(),i=(()=>{class r{}return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[c.ez,t]]}),r})()},2468:(m,h,s)=>{s.d(h,{D:()=>g});var c=s(5894),u=s(476),e=s(1841),v=s(1177);let g=(()=>{class p{constructor(n,t){this.http=n,this.errorSvc=t,this.endpoint="/coredata",this.version="/api/v2",this.urlPrefix=`${this.endpoint}${this.version}`,this.configUrl="/config",this.endpointHealthUrl=`${this.urlPrefix}/ping`,this.eventCountUrl=`${this.urlPrefix}/event/count`,this.readingCountUrl=`${this.urlPrefix}/reading/count`,this.allEventsUrl=`${this.urlPrefix}/event/all`,this.allReadingsUrl=`${this.urlPrefix}/reading/all`,this.associatedEventsByDeviceNameUrl=`${this.urlPrefix}/event/device/name/`,this.associatedReadinsByDeviceNameUrl=`${this.urlPrefix}/reading/device/name/`}getConfig(){return this.http.get(`${this.urlPrefix}${this.configUrl}`).pipe((0,c.K)(t=>this.errorSvc.handleError(t)))}endpointHealth(){return this.http.get(`${this.endpointHealthUrl}`).pipe((0,c.K)(t=>this.errorSvc.handleError(t)))}eventCount(){return this.http.get(`${this.eventCountUrl}`).pipe((0,c.K)(t=>this.errorSvc.handleError(t)))}readingCount(){return this.http.get(`${this.readingCountUrl}`).pipe((0,c.K)(t=>this.errorSvc.handleError(t)))}allEventsPagination(n,t){return this.http.get(`${this.allEventsUrl}?offset=${n}&limit=${t}`).pipe((0,c.K)(r=>this.errorSvc.handleError(r)))}allReadingsPagination(n,t){return this.http.get(`${this.allReadingsUrl}?offset=${n}&limit=${t}`).pipe((0,c.K)(r=>this.errorSvc.handleError(r)))}allAssocaitedReadingsByDeviceNamePagination(n,t){return this.http.get(`${this.associatedEventsByDeviceNameUrl}?offset=${n}&limit=${t}`).pipe((0,c.K)(r=>this.errorSvc.handleError(r)))}allAssocaitedEventsByDeviceNamePagination(n,t){return this.http.get(`${this.associatedReadinsByDeviceNameUrl}?offset=${n}&limit=${t}`).pipe((0,c.K)(r=>this.errorSvc.handleError(r)))}}return p.\u0275fac=function(n){return new(n||p)(u.LFG(e.eN),u.LFG(v.T))},p.\u0275prov=u.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},1177:(m,h,s)=>{s.d(h,{T:()=>p});var c=s(1776),u=s(8853),v=s(476),g=s(7822);let p=(()=>{class l{constructor(t){this.msgSvc=t}handleErrorForV2API(t){let i=Object.prototype.toString.call(t);if("[object Array]"===i){if(!t[0].statusCode.toString().startsWith("20"))return this.msgSvc.errors(`code: ${t[0].statusCode}, message: ${t[0].message}`),!0}else if("[object Object]"===i&&!t.statusCode.toString().startsWith("20"))return this.msgSvc.errors(`code: ${t.statusCode}, message: ${t.message}`),!0;return!1}handleError(t){return t.error instanceof ErrorEvent?this.msgSvc.errors(`'An error occurred:', ${t.error.message}`):"[object Object]"===Object.prototype.toString.call(t.error)?this.msgSvc.errors(`code: ${t.error.statusCode} , message: ${t.error.message}`):"[object String]"===Object.prototype.toString.call(t.error)?this.msgSvc.errors(`code: ${t.status} , message: ${t.error}`):this.msgSvc.errors(`code: ${t.status} , message: ${t.message}`),function(l,n){var t=(0,u.m)(l)?l:function(){return l},i=function(r){return r.error(t())};return new c.y(i)}(`Backend returned code ${t.error.statusCode}, body was: ${t.error.message}`)}}return l.\u0275fac=function(t){return new(t||l)(v.LFG(g.e))},l.\u0275prov=v.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()}}]);