!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"9vc0":function(t,r,a){"use strict";a.d(r,"a",function(){return l});var n,o=a("HDdC"),s=a("fXoL"),c=a("hsl2"),l=((n=function(){function t(i){e(this,t),this.msgSvc=i}return i(t,[{key:"handleErrorForV2API",value:function(e){var t=Object.prototype.toString.call(e);if("[object Array]"===t){if(!e[0].statusCode.toString().startsWith("20"))return this.msgSvc.errors("code: ".concat(e[0].statusCode,", message: ").concat(e[0].message)),!0}else if("[object Object]"===t&&!e.statusCode.toString().startsWith("20"))return this.msgSvc.errors("code: ".concat(e.statusCode,", message: ").concat(e.message)),!0;return!1}},{key:"handleError",value:function(e){return e.error instanceof ErrorEvent?this.msgSvc.errors("'An error occurred:', "+e.error.message):"[object Object]"===Object.prototype.toString.call(e.error)?this.msgSvc.errors("code: ".concat(e.error.statusCode," , message: ").concat(e.error.message)):"[object String]"===Object.prototype.toString.call(e.error)?this.msgSvc.errors("code: ".concat(e.status," , message: ").concat(e.error)):this.msgSvc.errors("code: ".concat(e.status," , message: ").concat(e.message)),function(e,t){return new o.a(function(t){return t.error(e)})}("Backend returned code ".concat(e.error.statusCode,", body was: ")+e.error.message)}}]),t}()).\u0275fac=function(e){return new(e||n)(s.Pb(c.a))},n.\u0275prov=s.Db({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},VE1N:function(t,r,a){"use strict";a.r(r),a.d(r,"AppServiceModule",function(){return A});var n,o,s=a("ofXK"),c=a("tyNb"),l=a("fXoL"),p=((n=function(){function t(){e(this,t)}return i(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Bb({type:n,selectors:[["app-app-service"]],decls:11,vars:0,consts:[[1,"card"],[1,"card-header"],[1,"nav","nav-tabs","card-header-tabs","font-weight-bold"],[1,"nav-item"],["routerLink","./app-service-list","routerLinkActive","active",1,"nav-link"],["routerLink","./app-service-configurable","routerLinkActive","active",1,"nav-link"],[1,"card-body"]],template:function(e,t){1&e&&(l.Kb(0,"div",0),l.Kb(1,"div",1),l.Kb(2,"ul",2),l.Kb(3,"li",3),l.Kb(4,"a",4),l.vc(5,"App Service List"),l.Jb(),l.Jb(),l.Kb(6,"li",3),l.Kb(7,"a",5),l.vc(8,"App Service Configurable"),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Kb(9,"div",6),l.Ib(10,"router-outlet"),l.Jb(),l.Jb())},directives:[c.h,c.g,c.j],styles:[""]}),n),u=a("tk/3"),d=a("JIr8"),b=a("9vc0"),f=((o=function(){function t(i,r){e(this,t),this.http=i,this.errorSvc=r,this.endpoint="/app-service",this.version="/api/v2",this.appServiceUrl="".concat(this.endpoint).concat(this.version),this.httpPostOrPutJSONOptions={headers:new u.c({"Content-type":"application/json",Authorization:""})}}return i(t,[{key:"getAppServiceConfig",value:function(){var e=this;return this.http.get(this.appServiceUrl+"/config").pipe(Object(d.a)(function(t){return e.errorSvc.handleError(t)}))}},{key:"downloadAppServiceConfig",value:function(e){var t=this;return this.http.get(this.version+"/appservice/download/servicekey/"+e,{responseType:"blob",observe:"response",headers:(new u.c).append("Content-Type","application/json")}).pipe(Object(d.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"deployToConsul",value:function(e,t){var i=this;return this.http.post(this.version+"/appservice/deploy/servicekey/"+t,JSON.stringify(e),this.httpPostOrPutJSONOptions).pipe(Object(d.a)(function(e){return i.errorSvc.handleError(e)}))}}]),t}()).\u0275fac=function(e){return new(e||o)(l.Pb(u.a),l.Pb(b.a))},o.\u0275prov=l.Db({token:o,factory:o.\u0275fac,providedIn:"root"}),o),v=a("hsl2");function m(e,t){if(1&e){var i=l.Lb();l.Kb(0,"li",11),l.Kb(1,"div",12),l.Kb(2,"div",13),l.Ib(3,"i",14),l.Jb(),l.Kb(4,"div",15),l.Kb(5,"div",16),l.Kb(6,"h5",17),l.vc(7),l.Jb(),l.Jb(),l.Kb(8,"div"),l.Kb(9,"span",18),l.Sb("click",function(){return l.oc(i),l.Vb().appServiceDetail()}),l.vc(10),l.Jb(),l.Kb(11,"span",19),l.Ib(12,"i",20),l.vc(13," Setting"),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb()}if(2&e){var r=t.$implicit;l.wb(7),l.wc(r),l.wb(3),l.xc("",r," Details")}}var g,h=((g=function(){function t(i,r){e(this,t),this.appSvc=i,this.msgSvc=r,this.appServiceList=["app-rules-engine"],this.appServiceTempStr=""}return i(t,[{key:"ngOnInit",value:function(){}},{key:"appServiceDetail",value:function(){var e=this;this.appSvc.getAppServiceConfig().subscribe(function(t){e.appServiceTempStr=JSON.stringify(t,null,3),$("#appServiceDetailDialog").modal("show")})}},{key:"toEditAppService",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||g)(l.Hb(f),l.Hb(v.a))},g.\u0275cmp=l.Bb({type:g,selectors:[["app-app-service-list"]],decls:14,vars:2,consts:[[1,"list-group","p-0"],["class","list-group-item list-group-item-action list-group-item-light",4,"ngFor","ngForOf"],["id","appServiceDetailDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","ruleDetailDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","ruleDetailDialogLabel",1,"modal-title","text-primary"],[1,"modal-body"],[1,"mt-2","bg-secondary","p-2","text-light","rounded"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],[1,"list-group-item","list-group-item-action","list-group-item-light"],[1,"media"],[1,"align-self-center","mr-3"],[1,"fa","fa-tags","fa-2x","text-secondary"],[1,"media-body"],[1,"mt-0","mb-1"],[1,"d-inline","mr-3","align-middle","text-dark"],["role","button",1,"badge","badge-info","mr-3",3,"click"],["role","button","routerLink","../app-service-configurable","routerLinkActive","active",1,"badge","badge-secondary","float-right"],[1,"fa","fa-cog"]],template:function(e,t){1&e&&(l.Kb(0,"ul",0),l.tc(1,m,14,2,"li",1),l.Jb(),l.Kb(2,"div",2),l.Kb(3,"div",3),l.Kb(4,"div",4),l.Kb(5,"div",5),l.Kb(6,"h5",6),l.vc(7," App Service Details "),l.Jb(),l.Jb(),l.Kb(8,"div",7),l.Kb(9,"pre",8),l.vc(10),l.Jb(),l.Jb(),l.Kb(11,"div",9),l.Kb(12,"button",10),l.vc(13,"Close"),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb()),2&e&&(l.wb(1),l.bc("ngForOf",t.appServiceList),l.wb(9),l.wc(t.appServiceTempStr))},directives:[s.k,c.f,c.g],styles:[""]}),g),y=a("limL"),D=a("DIQL"),N=a("e/mZ"),P=a("3Pt+"),S=["appservice_Transforms_Btn"];function O(e,t){if(1&e){var i=l.Lb();l.Kb(0,"ul",40),l.Sb("stopped",function(e){return l.oc(i),l.Vb(2).onDragLeftToRightEnd(e)}),l.Kb(1,"li",41),l.Kb(2,"div",42),l.Kb(3,"div",43),l.Ib(4,"i",44),l.Jb(),l.Kb(5,"div",45),l.Kb(6,"div",46),l.Kb(7,"h5",47),l.vc(8),l.Jb(),l.Jb(),l.Kb(9,"div"),l.Kb(10,"span",48),l.vc(11),l.Jb(),l.Kb(12,"span",49),l.Sb("click",function(e){return l.oc(i),l.Vb(2).setParams(e.target)}),l.Ib(13,"i",50),l.vc(14),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb()}if(2&e){var r=t.$implicit,a=l.Vb().$implicit;l.ec("id","",a.key,"_",r.Name,""),l.wb(8),l.wc(r.Name),l.wb(3),l.wc(r.Description),l.wb(1),l.ec("id","",a.key,"_",r.Name,"_setbtn"),l.ec("title","",a.key,"_",r.Name,""),l.wb(2),l.xc(" ",r.IsNeedParam,"")}}function T(e,t){if(1&e&&(l.Kb(0,"div"),l.tc(1,O,15,9,"ul",39),l.Jb()),2&e){var i=t.$implicit;l.wb(1),l.bc("ngForOf",i.value)}}function J(e,t){if(1&e){var i=l.Lb();l.Kb(0,"div",55),l.Sb("stopped",function(e){return l.oc(i),l.Vb(2).onDragRightToLeftEnd(e)}),l.Kb(1,"div",53),l.Kb(2,"h6",56),l.vc(3),l.Jb(),l.Jb(),l.Jb()}if(2&e){var r=t.$implicit,a=l.Vb().$implicit;l.ec("id","",a.key,"_",r.Name,""),l.cc("title",r.Name),l.wb(3),l.xc(" ",r.Name," ")}}function w(e,t){if(1&e&&(l.Kb(0,"div",5),l.Kb(1,"div",6),l.Kb(2,"a",51),l.vc(3),l.Jb(),l.Jb(),l.Kb(4,"div",52),l.Kb(5,"div",53),l.tc(6,J,4,4,"div",54),l.Jb(),l.Jb(),l.Jb()),2&e){var i=t.$implicit;l.wb(2),l.dc("href","#",i.key,"",l.pc),l.wb(1),l.xc(" ",i.key," "),l.wb(1),l.cc("id",i.key),l.wb(2),l.bc("ngForOf",i.value)}}function k(e,t){if(1&e){var i=l.Lb();l.Kb(0,"div",55),l.Sb("stopped",function(e){return l.oc(i),l.Vb(2).onDragRightToLeftEnd(e)}),l.Kb(1,"div",53),l.Kb(2,"h6",56),l.vc(3),l.Jb(),l.Jb(),l.Jb()}if(2&e){var r=t.$implicit,a=l.Vb().$implicit;l.ec("id","",a.key,"_",r.Name,""),l.cc("title",r.Name),l.wb(3),l.xc(" ",r.Name," ")}}function H(e,t){if(1&e&&(l.Kb(0,"div",5),l.Kb(1,"div",6),l.Kb(2,"a",51),l.vc(3),l.Jb(),l.Jb(),l.Kb(4,"div",52),l.Kb(5,"div",53),l.tc(6,k,4,4,"div",54),l.Jb(),l.Jb(),l.Jb()),2&e){var i=t.$implicit;l.wb(2),l.dc("href","#",i.key,"",l.pc),l.wb(1),l.xc(" ",i.key," "),l.wb(1),l.cc("id",i.key),l.wb(2),l.bc("ngForOf",i.value)}}function K(e,t){if(1&e){var i=l.Lb();l.Kb(0,"div",59),l.Kb(1,"label",60),l.vc(2,"DeviceNames : "),l.Jb(),l.Kb(3,"angular2-multiselect",61),l.Sb("ngModelChange",function(e){return l.oc(i),l.Vb(5).selectedDeviceItems=e}),l.Jb(),l.Jb()}if(2&e){var r=l.Vb(5);l.wb(3),l.bc("data",r.dropdownDeviceList)("ngModel",r.selectedDeviceItems)("settings",r.dropdownSettings)}}function x(e,t){if(1&e){var i=l.Lb();l.Kb(0,"div",59),l.Kb(1,"label",60),l.vc(2,"ValueDescriptors : "),l.Jb(),l.Kb(3,"angular2-multiselect",62),l.Sb("ngModelChange",function(e){return l.oc(i),l.Vb(5).selectedValueDescriptorsItems=e}),l.Jb(),l.Jb()}if(2&e){var r=l.Vb(5);l.wb(3),l.bc("data",r.dropdownValueDescriptorsList)("ngModel",r.selectedValueDescriptorsItems)("settings",r.dropdownSettings)}}function C(e,t){if(1&e){var i=l.Lb();l.Kb(0,"div",67),l.Kb(1,"input",68),l.Sb("ngModelChange",function(e){return l.oc(i),l.Vb().$implicit.Default=e}),l.Jb(),l.Jb()}if(2&e){var r=l.Vb().$implicit,a=l.Vb(3).$implicit,n=l.Vb(2).$implicit;l.wb(1),l.fc("id","",n.key,"_",a.Name,"_",r.Name,""),l.fc("name","",n.key,"_",a.Name,"_",r.Name,""),l.cc("placeholder",r.Hint),l.bc("ngModel",r.Default)}}function M(e,t){if(1&e){var i=l.Lb();l.Kb(0,"div",67),l.Kb(1,"select",69),l.Sb("ngModelChange",function(e){return l.oc(i),l.Vb().$implicit.Default=e}),l.Kb(2,"option",70),l.vc(3,"true"),l.Jb(),l.Kb(4,"option",71),l.vc(5,"false"),l.Jb(),l.Jb(),l.Jb()}if(2&e){var r=l.Vb().$implicit,a=l.Vb(3).$implicit,n=l.Vb(2).$implicit;l.wb(1),l.fc("id","",n.key,"_",a.Name,"_",r.Name,""),l.fc("name","",n.key,"_",a.Name,"_",r.Name,""),l.bc("ngModel",r.Default)}}function I(e,t){if(1&e&&(l.Kb(0,"div",65),l.Kb(1,"label",60),l.vc(2),l.Jb(),l.tc(3,C,2,8,"div",66),l.tc(4,M,6,7,"div",66),l.Jb()),2&e){var i=t.$implicit;l.wb(2),l.xc("",i.Name," : "),l.wb(1),l.bc("ngIf","string"==i.type),l.wb(1),l.bc("ngIf","boolean"==i.type)}}function _(e,t){if(1&e&&(l.Kb(0,"div"),l.Kb(1,"form",63),l.tc(2,I,5,3,"div",64),l.Jb(),l.Jb()),2&e){var i=l.Vb(2).$implicit;l.wb(2),l.bc("ngForOf",i.Parameters)}}function E(e,t){if(1&e&&(l.Kb(0,"div"),l.tc(1,K,4,3,"div",58),l.tc(2,x,4,3,"div",58),l.tc(3,_,3,1,"div",57),l.Jb()),2&e){var i=l.Vb().$implicit;l.wb(1),l.bc("ngIf","FilterByDeviceName"==i.Name),l.wb(1),l.bc("ngIf","FilterByValueDescriptor"==i.Name),l.wb(1),l.bc("ngIf","FilterByDeviceName"!=i.Name&&"FilterByValueDescriptor"!=i.Name)}}function F(e,t){if(1&e&&(l.Kb(0,"div"),l.tc(1,E,4,3,"div",57),l.Jb()),2&e){var i=t.$implicit,r=l.Vb(3);l.wb(1),l.bc("ngIf",i.Name==r.settingFunctionName)}}function B(e,t){if(1&e&&(l.Kb(0,"div"),l.tc(1,F,2,1,"div",14),l.Jb()),2&e){var i=l.Vb().$implicit;l.wb(1),l.bc("ngForOf",i.value)}}function R(e,t){if(1&e&&(l.Kb(0,"div"),l.tc(1,B,2,1,"div",57),l.Jb()),2&e){var i=t.$implicit,r=l.Vb();l.wb(1),l.bc("ngIf",i.key==r.settingFunctionType)}}var L,U,q,j=[{path:"",component:p,children:[{path:"",redirectTo:"app-service-list",pathMatch:"full"},{path:"app-service-list",component:h},{path:"app-service-configurable",component:(L=function(){function t(i,r,a,n,o){e(this,t),this.http=i,this.appSvc=r,this.msgSvc=a,this.metaSvc=n,this.el=o,this.appServiceList=["app-rules-engine"],this.serviceKey="app-rules-engine",this.deployData={Trigger:{},Writable:{LogLevel:"INFO",Pipeline:{ExecutionOrder:"SetResponseData",UseTargetTypeOfByteArray:!1,Functions:{}}}},this.pipelineFunctionList={Triggers:[{Name:"EdgexMessageBus",Description:"Trigger by Edgex MessageBus.",IsNeedParam:"Set Parameters",Parameters:[{Name:"PublishHost.Host",Default:"edgex-redis",Hint:"edgex-redis",Required:!0,type:"string"},{Name:"PublishHost.Port",Default:"6379",Hint:"6379",Required:!0,type:"string"},{Name:"PublishHost.Protocol",Default:"redis",Hint:"redis",Required:!0,type:"string"},{Name:"PublishHost.PublishTopic",Default:"rules-events",Hint:"rules-events",Required:!0,type:"string"},{Name:"SubscribeHost.Host",Default:"edgex-redis",Hint:"edgex-redis",Required:!0,type:"string"},{Name:"SubscribeHost.Port",Default:"6379",Hint:"6379",Required:!0,type:"string"},{Name:"SubscribeHost.Protocol",Default:"redis",Hint:"redis",Required:!0,type:"string"},{Name:"SubscribeHost.SubscribeTopics",Default:"edgex/events/#",Hint:"edgex/events/#",Required:!0,type:"string"},{Name:"Type",Default:"redis",Hint:"redis",Required:!0,type:"string"},{Name:"AutoReconnect",Default:!0,Hint:!0,Required:!0,type:"boolean"},{Name:"ClientId",Default:"core-data",Hint:"core-data",Required:!0,type:"string"},{Name:"ConnectTimeout",Default:"5",Hint:"5",Required:!0,type:"string"},{Name:"KeepAlive",Default:"10",Hint:"10",Required:!0,type:"string"},{Name:"Password",Default:"",Hint:"",Required:!0,type:"string"},{Name:"Qos",Default:"0",Hint:"0",Required:!0,type:"string"},{Name:"Retained",Default:!1,Hint:!1,Required:!0,type:"boolean"},{Name:"SkipCertVerify",Default:!1,Hint:!1,Required:!0,type:"boolean"},{Name:"Username",Default:"redis5",Hint:"redis5",Required:!0,type:"string"},{Name:"authmode",Default:"usernamepassword",Hint:"usernamepassword",Required:!0,type:"string"},{Name:"secretname",Default:"redisdb",Hint:"redisdb",Required:!0,type:"string"}]},{Name:"ExternalMqtt",Description:"Trigger by Edgex MessageBus.",IsNeedParam:"Set Parameters",Parameters:[{Name:"Url",Default:"",Hint:"",Required:!0,type:"string"},{Name:"ClientId",Default:"",Hint:"",Required:!0,type:"string"},{Name:"ConnectTimeout",Default:"",Hint:"",Required:!0,type:"string"},{Name:"AutoReconnect",Default:!1,Hint:!1,Required:!0,type:"boolean"},{Name:"KeepAlive",Default:"0",Hint:"0",Required:!0,type:"string"},{Name:"QoS",Default:"0",Hint:"0",Required:!0,type:"string"},{Name:"Retain",Default:!1,Hint:!1,Required:!0,type:"boolean"},{Name:"SkipCertVerify",Default:!1,Hint:!1,Required:!0,type:"boolean"},{Name:"SecretPath",Default:"",Hint:"",Required:!0,type:"string"},{Name:"AuthMode",Default:"",Hint:"",Required:!0,type:"string"}]}],Filtering:[{Name:"FilterByDeviceName",Description:"To filter events for a specific device.",IsNeedParam:"Set Parameters",Parameters:[{Name:"DeviceNames",Default:"",Hint:"",Required:!0,type:"string"}],Addressable:null},{Name:"FilterByValueDescriptor",Description:"To filter events by value descriptor.",IsNeedParam:"Set Parameters",Parameters:[{Name:"ValueDescriptors",Default:"",Hint:"",Required:!0,type:"string"}],Addressable:null}],Encryption:[{Name:"EncryptWithAES",Description:"Encrypt with AES",IsNeedParam:"Set Parameters",Parameters:[{Name:"Key",Default:"",Hint:"",Required:!0,type:"string"},{Name:"InitVector",Default:"",Hint:"1234567890",Required:!0,type:"string"}],Addressable:null}],Conversion:[{Name:"TransformToXML",Description:"To transform the data to XML.",IsNeedParam:"No need to set Parameters",Parameters:null,Addressable:null},{Name:"TransformToJSON",Description:"To transform the data to JSON.",IsNeedParam:"No need to set Parameters",Parameters:null,Addressable:null}],Compression:[{Name:"CompressWithGZIP",Description:"Compress with GZIP",IsNeedParam:"No need to set Parameters",Parameters:null,Addressable:null},{Name:"CompressWithZLIB",Description:"Compress with ZLIB",IsNeedParam:"No need to set Parameters",Parameters:null,Addressable:null}],CoreData:[{Name:"MarkAsPushed",Description:"To call Core Data API to mark the event as having been pushed.",IsNeedParam:"No need to set Parameters",Parameters:null,Addressable:null},{Name:"PushToCore",Description:"Push Data To Core Database.",IsNeedParam:"Set Parameters",Parameters:[{Name:"DeviceName",Default:"",Hint:"",Required:!0,type:"string"},{Name:"ReadingName",Default:"",Hint:"",Required:!0,type:"string"}],Addressable:null}],Export:[{Name:"HTTPPost",Description:"To send the data to an HTTP endpoint that takes our data.",IsNeedParam:"Set Parameters",Parameters:[{Name:"url",Default:"",Hint:"http://localhost:4000/api/v1/appservice/receiveDataPostJSON",Required:!0,type:"string"},{Name:"mimeType",Default:"application/json",Hint:"application/json",Required:!0,type:"string"},{Name:"persistOnError",Default:!1,Hint:!1,Required:!0,type:"boolean"}],Addressable:null},{Name:"HTTPPostJSON",Description:"To send the data to an HTTP endpoint that takes our JSON data.",IsNeedParam:"Set Parameters",Parameters:[{Name:"url",Default:"",Hint:"http://localhost:4000/api/v1/appservice/receiveDataPostJSON",Required:!0,type:"string"},{Name:"persistOnError",Default:!1,Hint:!1,Required:!0,type:"boolean"}],Addressable:null},{Name:"HTTPPostXML",Description:"To send the data to an HTTP endpoint that takes our XML data.",IsNeedParam:"Set Parameters",Parameters:[{Name:"url",Default:"",Hint:"http://localhost:4000/api/v1/appservice/receiveDataPostXML",Required:!0,type:"string"},{Name:"persistOnError",Default:!1,Hint:!1,Required:!0,type:"boolean"}],Addressable:null},{Name:"SetResponseData",Description:"",IsNeedParam:"Set Parameters",Parameters:[{Name:"responsecontenttype",Default:"",Hint:"",Required:!0,type:"string"}],Addressable:null},{Name:"MQTTSend",Description:"To send the data to an MQTT endpoint.",IsNeedParam:"Set Parameters",Parameters:[{Name:"qos",Default:"0",Hint:"0",Required:!0,type:"string"},{Name:"key",Default:"",Hint:"",Required:!0,type:"string"},{Name:"autoreconnect",Default:!1,Hint:!1,Required:!0,type:"boolean"},{Name:"retain",Default:!1,Hint:!1,Required:!0,type:"boolean"},{Name:"cert",Default:"",Hint:"",Required:!0,type:"string"},{Name:"persistOnError",Default:!1,Hint:!1,Required:!0,type:"boolean"},{Name:"Address",Default:"localhost",Hint:"localhost",Required:!0,type:"string"},{Name:"Port",Default:"1883",Hint:"1883",Required:!0,type:"string"},{Name:"Protocol",Default:"http",Hint:"http",Required:!0,type:"string"},{Name:"Publisher",Default:"",Hint:"MyApp",Required:!0,type:"string"},{Name:"User",Default:"",Hint:"",Required:!0,type:"string"},{Name:"Password",Default:"",Hint:"",Required:!0,type:"string"},{Name:"Topic",Default:"",Hint:"sampleTopic",Required:!0,type:"string"}],Addressable:null}]},this.pipelineFunctionMap=new Map,this.triggerFunctionMap=new Map,this.appConfigurableMap=new Map,this.settingFunctionType="",this.settingFunctionName="",this.dropdownDeviceList=[],this.dropdownValueDescriptorsList=[],this.selectedDeviceItems=[],this.selectedValueDescriptorsItems=[],this.dropdownSettings={singleSelection:!1,text:"Select Items",selectAllText:"Select All",unSelectAllText:"UnSelect All",enableSearchFilter:!0,classes:"myclass custom-class"}}return i(t,[{key:"ngOnInit",value:function(){var e=this;setTimeout(function(){e.appservice_Transforms_Btn.nativeElement.click()},10),Object.keys(this.pipelineFunctionList).forEach(function(t){"Triggers"===t?e.triggerFunctionMap.set(t,e.pipelineFunctionList[t]):e.pipelineFunctionMap.set(t,e.pipelineFunctionList[t])}),this.getDeviceList(),this.getValueDescriptorList()}},{key:"getDeviceList",value:function(){var e=this;this.metaSvc.allDevices().subscribe(function(t){t.devices.forEach(function(t){e.dropdownDeviceList.push({id:t.name,itemName:t.name})})})}},{key:"getValueDescriptorList",value:function(){var e=this;this.metaSvc.allDeviceProfoles().subscribe(function(t){t.profiles.forEach(function(t){t.deviceResources.forEach(function(i){"R"!=i.properties.readWrite&&"RW"!=i.properties.readWrite||e.metaSvc.findDevicesByProfileName(0,9999,t.name).subscribe(function(t){t.devices.forEach(function(t){e.dropdownValueDescriptorsList.push({id:i.name,itemName:t.name+"------"+i.name,valueDescriptor:i.name})})})})})})}},{key:"refreshConsul",value:function(){var e=this;this.appConfigurableMap.forEach(function(t,i){"Filtering"===i&&t.forEach(function(t){if("FilterByDeviceName"===t.Name){var i="";e.selectedDeviceItems.forEach(function(e){i+=e.itemName+","}),t.Parameters[0].Default=i.substring(0,i.length-1)}else if("FilterByValueDescriptor"===t.Name){var r="";e.selectedValueDescriptorsItems.forEach(function(e){r+=e.valueDescriptor+","}),t.Parameters[0].Default=r.substring(0,r.length-1)}})});var t=this.deployData.Writable.Pipeline.ExecutionOrder.split(",");if(this.appConfigurableMap.forEach(function(i,r){i.forEach(function(i){"EdgexMessageBus"==i.Name?(e.deployData.Trigger[i.Name]={},i.Parameters.forEach(function(t){"true"!=t.Default&&"false"!=t.Default||(t.Default=JSON.parse(t.Default)),"PublishHost.Host"==t.Name?(null==e.deployData.Trigger[i.Name].PublishHost&&(e.deployData.Trigger[i.Name].PublishHost={}),e.deployData.Trigger[i.Name].PublishHost.Host=t.Default):"PublishHost.Port"==t.Name?(null==e.deployData.Trigger[i.Name].PublishHost&&(e.deployData.Trigger[i.Name].PublishHost={}),e.deployData.Trigger[i.Name].PublishHost.Port=t.Default):"PublishHost.Protocol"==t.Name?(null==e.deployData.Trigger[i.Name].PublishHost&&(e.deployData.Trigger[i.Name].PublishHost={}),e.deployData.Trigger[i.Name].PublishHost.Protocol=t.Default):"PublishHost.PublishTopic"==t.Name?(null==e.deployData.Trigger[i.Name].PublishHost&&(e.deployData.Trigger[i.Name].PublishHost={}),e.deployData.Trigger[i.Name].PublishHost.PublishTopic=t.Default):"SubscribeHost.Host"==t.Name?(null==e.deployData.Trigger[i.Name].SubscribeHost&&(e.deployData.Trigger[i.Name].SubscribeHost={}),e.deployData.Trigger[i.Name].SubscribeHost.Host=t.Default):"SubscribeHost.Port"==t.Name?(null==e.deployData.Trigger[i.Name].SubscribeHost&&(e.deployData.Trigger[i.Name].SubscribeHost={}),e.deployData.Trigger[i.Name].SubscribeHost.Port=t.Default):"SubscribeHost.Protocol"==t.Name?(null==e.deployData.Trigger[i.Name].SubscribeHost&&(e.deployData.Trigger[i.Name].SubscribeHost={}),e.deployData.Trigger[i.Name].SubscribeHost.Protocol=t.Default):"SubscribeHost.SubscribeTopics"==t.Name?(null==e.deployData.Trigger[i.Name].SubscribeHost&&(e.deployData.Trigger[i.Name].SubscribeHost={}),e.deployData.Trigger[i.Name].SubscribeHost.SubscribeTopics=t.Default):"AutoReconnect"==t.Name?(null==e.deployData.Trigger[i.Name].Optional&&(e.deployData.Trigger[i.Name].Optional={}),e.deployData.Trigger[i.Name].Optional.AutoReconnect=t.Default):"ClientId"==t.Name?(null==e.deployData.Trigger[i.Name].Optional&&(e.deployData.Trigger[i.Name].Optional={}),e.deployData.Trigger[i.Name].Optional.ClientId=t.Default):"ConnectTimeout"==t.Name?(null==e.deployData.Trigger[i.Name].Optional&&(e.deployData.Trigger[i.Name].Optional={}),e.deployData.Trigger[i.Name].Optional.ConnectTimeout=t.Default):"KeepAlive"==t.Name?(null==e.deployData.Trigger[i.Name].Optional&&(e.deployData.Trigger[i.Name].Optional={}),e.deployData.Trigger[i.Name].Optional.KeepAlive=t.Default):"Password"==t.Name?(null==e.deployData.Trigger[i.Name].Optional&&(e.deployData.Trigger[i.Name].Optional={}),e.deployData.Trigger[i.Name].Optional.Password=t.Default):"Qos"==t.Name?(null==e.deployData.Trigger[i.Name].Optional&&(e.deployData.Trigger[i.Name].Optional={}),e.deployData.Trigger[i.Name].Optional.Qos=t.Default):"Retained"==t.Name?(null==e.deployData.Trigger[i.Name].Optional&&(e.deployData.Trigger[i.Name].Optional={}),e.deployData.Trigger[i.Name].Optional.Retained=t.Default):"SkipCertVerify"==t.Name?(null==e.deployData.Trigger[i.Name].Optional&&(e.deployData.Trigger[i.Name].Optional={}),e.deployData.Trigger[i.Name].Optional.SkipCertVerify=t.Default):"Username"==t.Name?(null==e.deployData.Trigger[i.Name].Optional&&(e.deployData.Trigger[i.Name].Optional={}),e.deployData.Trigger[i.Name].Optional.Username=t.Default):"authmode"==t.Name?(null==e.deployData.Trigger[i.Name].Optional&&(e.deployData.Trigger[i.Name].Optional={}),e.deployData.Trigger[i.Name].Optional.authmode=t.Default):"secretname"==t.Name&&(null==e.deployData.Trigger[i.Name].Optional&&(e.deployData.Trigger[i.Name].Optional={}),e.deployData.Trigger[i.Name].Optional.secretname=t.Default)})):"ExternalMqtt"==i.Name&&(e.deployData.Trigger[i.Name]={},i.Parameters.forEach(function(t){"true"!=t.Default&&"false"!=t.Default||(t.Default=JSON.parse(t.Default)),e.deployData.Trigger[i.Name][t.Name]=t.Default})),t.push(i.Name),e.deployData.Writable.Pipeline.Functions[i.Name]={},e.deployData.Writable.Pipeline.Functions[i.Name].Parameters={},null!=i.Parameters?i.Parameters.forEach(function(t){"true"!=t.Default&&"false"!=t.Default||(t.Default=JSON.parse(t.Default)),e.deployData.Writable.Pipeline.Functions[i.Name].Parameters[t.Name]=t.Default}):e.deployData.Writable.Pipeline.Functions[i.Name].Parameters={p:""}})}),this.deployData.Writable.Pipeline.ExecutionOrder=t.join(","),$.isEmptyObject(this.deployData.Writable.Pipeline.Functions))this.msgSvc.errors("The deploy must contain functions.");else{var i=[];t.forEach(function(e,r){"FilterByDeviceName"!=e&&"FilterByValueDescriptor"!=e&&"HTTPPost"!=e&&"HTTPPostJSON"!=e&&"HTTPPostXML"!=e&&"MQTTSend"!=e&&i.push(t[r])}),t.forEach(function(e,r){"FilterByDeviceName"==e||"FilterByValueDescriptor"==e?i.unshift(t[r]):"HTTPPost"!=e&&"HTTPPostJSON"!=e&&"HTTPPostXML"!=e&&"MQTTSend"!=e||i.push(t[r])}),this.deployData.Writable.Pipeline.ExecutionOrder=i.join(","),this.appSvc.deployToConsul(this.deployData,this.serviceKey).subscribe(function(t){e.msgSvc.success("deploy to consul ")})}}},{key:"downloadConfiguration",value:function(){var e=this;this.appSvc.downloadAppServiceConfig(this.serviceKey).subscribe(function(t){e.downloadFile(t)})}},{key:"downloadFile",value:function(e){var t=new Blob([e.body],{type:"application/octet-stream"}),i=window.URL.createObjectURL(t),r=document.createElement("a"),a=e.headers.get("content-disposition").split(";")[1].split("=")[1].split('"')[1];r.href=i,r.download=a,r.click(),window.URL.revokeObjectURL(i)}},{key:"onDragRightToLeftEnd",value:function(e){var t=e.id.split("_")[0],i=e.id.split("_")[1],r="",a="";"Triggers"===t?(r=this.triggerFunctionMap.get(t).findIndex(function(e){return e.Name==i}),a=this.triggerFunctionMap.get(t).find(function(e){return e.Name==i})):(r=this.pipelineFunctionMap.get(t).findIndex(function(e){return e.Name==i}),a=this.pipelineFunctionMap.get(t).find(function(e){return e.Name==i}));var n=[];null==this.appConfigurableMap.get(t)?(n.push(a),this.appConfigurableMap.set(t,n)):((n=this.appConfigurableMap.get(t)).push(a),this.appConfigurableMap.set(t,n)),"Triggers"===t?this.triggerFunctionMap.get(t).splice(r,1):this.pipelineFunctionMap.get(t).splice(r,1)}},{key:"onDragLeftToRightEnd",value:function(e){var t=e.id.split("_")[0],i=e.id.split("_")[1],r=this.appConfigurableMap.get(t).findIndex(function(e){return e.Name==i}),a=this.appConfigurableMap.get(t).find(function(e){return e.Name==i}),n=[];"Triggers"===t?null==this.triggerFunctionMap.get(t)?(n.push(a),this.triggerFunctionMap.set(t,n)):((n=this.triggerFunctionMap.get(t)).push(a),this.triggerFunctionMap.set(t,n)):null==this.pipelineFunctionMap.get(t)?(n.push(a),this.pipelineFunctionMap.set(t,n)):((n=this.pipelineFunctionMap.get(t)).push(a),this.pipelineFunctionMap.set(t,n)),this.appConfigurableMap.get(t).splice(r,1)}},{key:"IsHaveParams",value:function(e,t){return null!=this.appConfigurableMap.get(e).find(function(e){return e.Name==t}).Parameters}},{key:"setParams",value:function(e){var t=e.title.split("_",2)[0],i=e.title.split("_",2)[1];this.IsHaveParams(t,i)&&(this.settingFunctionType=t,this.settingFunctionName=i,$("#appservice_model").modal("show"))}}]),t}(),L.\u0275fac=function(e){return new(e||L)(l.Hb(u.a),l.Hb(f),l.Hb(v.a),l.Hb(y.a),l.Hb(l.l))},L.\u0275cmp=l.Bb({type:L,selectors:[["app-app-service-configurable"]],viewQuery:function(e,t){var i;1&e&&l.yc(S,!0),2&e&&l.kc(i=l.Tb())&&(t.appservice_Transforms_Btn=i.first)},decls:58,vars:13,consts:[["id","edgex-foundry-support-appService"],[1,"panel","panel-success"],[1,"panel-heading"],[1,"appservice_wrap"],["id","appservice_left"],[1,"card"],[1,"card-header"],[1,"text-info"],["id","appservice_button_group",1,"appservice_button_group"],["role","button",1,"badge","mr-2","badge-success",3,"click"],["aria-hidden","true",1,"fa","fa-refresh","mr-1"],["role","button",1,"badge","mr-2","badge-primary",3,"click"],["aria-hidden","true",1,"fa","fa-download"],[1,"card-body","app_left_body"],[4,"ngFor","ngForOf"],["id","appservice_right"],["align","center",1,"text-success"],[1,"card-body",2,"min-height","800px"],[1,"nav","nav-tabs"],[1,"nav-item"],["href","#appservice_Transforms","data-toggle","tab",1,"nav-link"],["appservice_Transforms_Btn",""],["href","#appservice_Triggers","data-toggle","tab",1,"nav-link","active"],[1,"tab-content"],["id","appservice_Transforms",1,"tab-pane","fade"],["id","accordion"],["class","card",4,"ngFor","ngForOf"],["id","appservice_Triggers",1,"tab-pane","fade","in","active"],["id","accordion_triggers"],["id","appservice_model","tabindex","-1","role","dialog","aria-labelledby","myModalLabel",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["id","appservice_paramsBox",1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-default"],["aria-hidden","true"],["type","button","data-dismiss","modal",1,"btn","btn-success"],["ngDraggable","","class","list-group p-0",3,"id","stopped",4,"ngFor","ngForOf"],["ngDraggable","",1,"list-group","p-0",3,"id","stopped"],[1,"list-group-item","list-group-item-action","list-group-item-light",2,"margin-top","2%"],[1,"media"],[1,"align-self-center","mr-3"],[1,"fa","fa-tags","fa-2x","text-secondary"],[1,"media-body"],[1,"mt-0","mb-1"],[1,"d-inline","mr-3","align-middle","text-dark"],["role","button",1,"badge","badge-info","mr-3"],["role","button","onmouseup","event.cancelBubble = true","onmousedown","event.cancelBubble = true","routerLinkActive","active",1,"badge","badge-primary","float-right",3,"id","title","click"],[1,"fa","fa-cog"],["data-toggle","collapse",1,"card-link",3,"href"],["data-parent","#accordion",1,"collapse",3,"id"],[1,"card-body"],["ngDraggable","","class","helper-dialog-wrapper appservice_drop_card card","role","button",3,"id","title","stopped",4,"ngFor","ngForOf"],["ngDraggable","","role","button",1,"helper-dialog-wrapper","appservice_drop_card","card",3,"id","title","stopped"],[1,"card-title"],[4,"ngIf"],["class","col-md-12",4,"ngIf"],[1,"col-md-12"],[1,"col-md-3","control-label",2,"margin-top","1%"],[1,"col-md-8",3,"data","ngModel","settings","ngModelChange"],[3,"data","ngModel","settings","ngModelChange"],[1,"form-horizontal"],["class","form-group row","style","width: 95%; margin-left: 5%;margin-top: 2%;",4,"ngFor","ngForOf"],[1,"form-group","row",2,"width","95%","margin-left","5%","margin-top","2%"],["class","col-md-8",4,"ngIf"],[1,"col-md-8"],["type","text",1,"form-control",3,"id","name","placeholder","ngModel","ngModelChange"],[1,"form-control",3,"id","name","ngModel","ngModelChange"],["value","true"],["value","false"]],template:function(e,t){1&e&&(l.Kb(0,"div",0),l.Kb(1,"div",1),l.Ib(2,"div",2),l.Kb(3,"div",3),l.Kb(4,"aside",4),l.Kb(5,"div",5),l.Kb(6,"div",6),l.Kb(7,"h5",7),l.vc(8,"app-rules-engine"),l.Jb(),l.Kb(9,"div",8),l.Kb(10,"span",9),l.Sb("click",function(){return t.refreshConsul()}),l.Ib(11,"i",10),l.vc(12,"\xa0Refresh Consul"),l.Jb(),l.Kb(13,"span",11),l.Sb("click",function(){return t.downloadConfiguration()}),l.Ib(14,"i",12),l.vc(15,"\xa0Download Configuration"),l.Jb(),l.Jb(),l.Jb(),l.Kb(16,"div",13),l.tc(17,T,2,1,"div",14),l.Wb(18,"keyvalue"),l.Jb(),l.Jb(),l.Jb(),l.Kb(19,"section",15),l.Kb(20,"div",5),l.Kb(21,"div",6),l.Kb(22,"h5",16),l.vc(23,"Available Transforms"),l.Jb(),l.Jb(),l.Kb(24,"div",17),l.Kb(25,"ul",18),l.Kb(26,"li",19),l.Kb(27,"a",20,21),l.vc(29,"Transforms"),l.Jb(),l.Jb(),l.Kb(30,"li",19),l.Kb(31,"a",22),l.vc(32,"Triggers"),l.Jb(),l.Jb(),l.Jb(),l.Kb(33,"div",23),l.Kb(34,"div",24),l.Kb(35,"div",25),l.tc(36,w,7,4,"div",26),l.Wb(37,"keyvalue"),l.Jb(),l.Jb(),l.Kb(38,"div",27),l.Kb(39,"div",28),l.tc(40,H,7,4,"div",26),l.Wb(41,"keyvalue"),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Kb(42,"div",29),l.Kb(43,"div",30),l.Kb(44,"div",31),l.Kb(45,"div",32),l.Kb(46,"h4",33),l.vc(47),l.Jb(),l.Jb(),l.Kb(48,"div",34),l.tc(49,R,2,1,"div",14),l.Wb(50,"keyvalue"),l.Jb(),l.Kb(51,"div",35),l.Kb(52,"button",36),l.Ib(53,"span",37),l.vc(54,"Close"),l.Jb(),l.Kb(55,"button",38),l.Ib(56,"span",37),l.vc(57,"Save"),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb()),2&e&&(l.wb(17),l.bc("ngForOf",l.Xb(18,5,t.appConfigurableMap)),l.wb(19),l.bc("ngForOf",l.Xb(37,7,t.pipelineFunctionMap)),l.wb(4),l.bc("ngForOf",l.Xb(41,9,t.triggerFunctionMap)),l.wb(7),l.xc("",t.settingFunctionName," -Parameters"),l.wb(2),l.bc("ngForOf",l.Xb(50,11,t.appConfigurableMap)))},directives:[s.k,D.a,c.g,s.l,N.a,P.f,P.i,P.p,P.g,P.h,P.a,P.n,P.j,P.o],pipes:[s.f],styles:[".appservice_wrap[_ngcontent-%COMP%]{width:100%;margin:0 auto;overflow:hidden}#appservice_left[_ngcontent-%COMP%]{width:70%;min-height:800px;float:left}#appservice_service_select[_ngcontent-%COMP%]{margin-top:1%;width:40%}#appservice_right[_ngcontent-%COMP%]{width:30%;min-height:800px;border-left:1px solid #d6e9c6;float:right}.app_left_body[_ngcontent-%COMP%]{min-height:800px}.appservice_drop_card[_ngcontent-%COMP%]{margin-top:3%;margin-bottom:3%;height:80px;width:100%;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19);text-align:center}.appservice_transform[_ngcontent-%COMP%]{font-weight:700;font-size:.5rem}.appservice_description[_ngcontent-%COMP%]{position:relative;top:25%;left:20%;font-size:smaller;float:left;text-align:center}.appservice_paramButton[_ngcontent-%COMP%]{width:30%;outline-style:none;border:1px solid #ccc;border-radius:3px;margin-top:25px;margin-right:100px;float:right}.appservice_button_group[_ngcontent-%COMP%]{float:right;margin-top:-25px}.appservice_triggers_group[_ngcontent-%COMP%]{padding:10px}.appservice_select_lable[_ngcontent-%COMP%]{text-align:right;padding-top:1%}#appservice_model[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{position:fixed;top:20%;right:0;left:0;bottom:20%;margin:auto}#appservice_model[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;width:100%}#appservice_model[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{max-height:79%;overflow-y:auto;position:absolute;top:55px;bottom:65px;width:100%}#appservice_model[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{margin-right:15px}#appservice_model[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{position:absolute;width:100%;bottom:0}.modal-backdrop[_ngcontent-%COMP%]{z-index:-1!important;opacity:0!important;filter:alpha(opacity=0)!important}"]}),L)}]}],V=((q=function t(){e(this,t)}).\u0275mod=l.Fb({type:q}),q.\u0275inj=l.Eb({factory:function(e){return new(e||q)},imports:[[c.i.forChild(j)],c.i]}),q),A=((U=function t(){e(this,t)}).\u0275mod=l.Fb({type:U}),U.\u0275inj=l.Eb({factory:function(e){return new(e||U)},imports:[[s.b,P.b,V,D.b,N.b]]}),U)},limL:function(t,r,a){"use strict";a.d(r,"a",function(){return l});var n=a("tk/3"),o=a("JIr8"),s=a("fXoL"),c=a("9vc0"),l=function(){var t=function(){function t(i,r){e(this,t),this.http=i,this.errorSvc=r,this.endpoint="/metadata",this.version="/api/v2",this.urlPrefix="".concat(this.endpoint).concat(this.version),this.configUrl="/config",this.devicesListUrl=this.urlPrefix+"/device/all",this.addOneDeviceUrl=this.urlPrefix+"/device",this.updateOneDeviceUrl=this.urlPrefix+"/device",this.deleteOneDeviceByIdUrl=this.urlPrefix+"/device/Id",this.deleteOneDeviceByNameUrl=this.urlPrefix+"/device/name",this.findDeviceByNameUrl=this.urlPrefix+"/device/name",this.findDeviceByIdUrl=this.urlPrefix+"/device/id",this.findDevicesByServiceIdUrl=this.urlPrefix+"/device/service/id",this.findDevicesByServiceNameUrl=this.urlPrefix+"/device/service/name",this.findDevicesByProfileIdUrl=this.urlPrefix+"/device/profile/id",this.findDevicesByProfileNameUrl=this.urlPrefix+"/device/profile/name",this.deviceServicesListUrl=this.urlPrefix+"/deviceservice/all",this.updateDeviceServiceUrl=this.urlPrefix+"/deviceservice",this.findDeviceServiceByIdUrl=this.urlPrefix+"/deviceservice/id",this.findDeviceServiceByNameUrl=this.urlPrefix+"/deviceservice/name",this.deviceProfilesListUrl=this.urlPrefix+"/deviceprofile/all",this.findProfilesByIdUrl=this.urlPrefix+"/deviceprofile",this.findProfilesByNameUrl=this.urlPrefix+"/deviceprofile/name",this.updateDeviceProfileUrl=this.urlPrefix+"/deviceprofile",this.uploadProfileYamlFileUrl=this.urlPrefix+"/deviceprofile/uploadfile",this.uploadProfileYamlContentUrl=this.urlPrefix+"/deviceprofile/upload",this.deviceProfileYamlUrl=this.urlPrefix+"/deviceprofile/yaml",this.deleteProfileByIdUrl=this.urlPrefix+"/deviceprofile/id",this.deleteProfileByNamedUrl=this.urlPrefix+"/deviceprofile/name",this.httpPostOrPutJSONOptions={headers:new n.c({"Content-type":"application/json",Authorization:""})}}return i(t,[{key:"getConfig",value:function(){var e=this;return this.http.get("".concat(this.urlPrefix).concat(this.configUrl)).pipe(Object(o.a)(function(t){return e.errorSvc.handleError(t)}))}},{key:"allDevices",value:function(){var e=this;return this.http.get(""+this.devicesListUrl).pipe(Object(o.a)(function(t){return e.errorSvc.handleError(t)}))}},{key:"allDevicesPagination",value:function(e,t){var i=this;return this.http.get("".concat(this.devicesListUrl,"?offset=").concat(e,"&limit=").concat(t)).pipe(Object(o.a)(function(e){return i.errorSvc.handleError(e)}))}},{key:"addDevice",value:function(e){var t=this,i=""+this.addOneDeviceUrl;return e.apiVersion="v2",this.http.post(i,JSON.stringify([{apiVersion:"v2",device:e}]),this.httpPostOrPutJSONOptions).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"deleteOneDeviceByName",value:function(e){var t=this;return this.http.delete("".concat(this.deleteOneDeviceByNameUrl,"/").concat(e)).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"deleteOneDeviceById",value:function(e){var t=this;return this.http.delete("".concat(this.deleteOneDeviceByIdUrl,"/").concat(e)).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"updateDevice",value:function(e){var t=this;return this.http.patch(""+this.updateOneDeviceUrl,JSON.stringify([{apiVersion:"v2",device:e}]),{headers:new n.c({"Content-type":"application/json"})}).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findDeviceByName",value:function(e){var t=this;return this.http.get("".concat(this.findDeviceByNameUrl,"/").concat(e)).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findDeviceById",value:function(e){var t=this;return this.http.get("".concat(this.findDeviceByIdUrl,"/").concat(e)).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findDevicesByServiceId",value:function(e){var t=this;return this.http.get("".concat(this.findDevicesByServiceIdUrl,"/").concat(e)).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findDevicesByServiceName",value:function(e,t,i){var r=this;return this.http.get("".concat(this.findDevicesByServiceNameUrl,"/").concat(i,"?offset=").concat(e,"&limit=").concat(t)).pipe(Object(o.a)(function(e){return r.errorSvc.handleError(e)}))}},{key:"findDevicesByProfileId",value:function(e){var t=this;return this.http.get("".concat(this.findDevicesByProfileIdUrl,"/").concat(e)).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findDevicesByProfileName",value:function(e,t,i){var r=this;return this.http.get("".concat(this.findDevicesByProfileNameUrl,"/").concat(i,"?offset=").concat(e,"&limit=").concat(t)).pipe(Object(o.a)(function(e){return r.errorSvc.handleError(e)}))}},{key:"allDeviceServices",value:function(){var e=this;return this.http.get(this.deviceServicesListUrl+"?offset=0&limit=-1").pipe(Object(o.a)(function(t){return e.errorSvc.handleError(t)}))}},{key:"findAllDeviceServicesPagination",value:function(e,t){var i=this;return this.http.get("".concat(this.deviceServicesListUrl,"?offset=").concat(e,"&limit=").concat(t)).pipe(Object(o.a)(function(e){return i.errorSvc.handleError(e)}))}},{key:"updateDeviceService",value:function(e){var t=this;return this.http.patch(""+this.updateDeviceServiceUrl,JSON.stringify([{apiVersion:"v2",service:e}]),this.httpPostOrPutJSONOptions).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findDevcieServiceById",value:function(e){var t=this;return this.http.get("".concat(this.findDeviceServiceByIdUrl,"/").concat(e)).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findDevcieServiceByName",value:function(e){var t=this;return this.http.get("".concat(this.findDeviceServiceByNameUrl,"/").concat(e)).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"allDeviceProfoles",value:function(){var e=this;return this.http.get(this.deviceProfilesListUrl+"?offset=0&limit=-1").pipe(Object(o.a)(function(t){return e.errorSvc.handleError(t)}))}},{key:"allDeviceProfolesPagination",value:function(e,t){var i=this;return this.http.get("".concat(this.deviceProfilesListUrl,"?offset=").concat(e,"&limit=").concat(t)).pipe(Object(o.a)(function(e){return i.errorSvc.handleError(e)}))}},{key:"addProfileYamlByNameViaUIBackend",value:function(e){var t=this;return this.http.request("POST","/api/v2/profile/yaml",{body:e,responseType:"text"}).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findProfileById",value:function(e){var t=this;return this.http.get("".concat(this.findProfilesByIdUrl,"/").concat(e)).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findProfileByName",value:function(e){var t=this;return this.http.get("".concat(this.findProfilesByNameUrl,"/").concat(e)).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findProfileYamlByNameViaUIBackend",value:function(e){var t=this;return this.http.request("GET","/api/v2/profile/yaml/name/"+e,{responseType:"text"}).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"uploadProfileYamlFile",value:function(e){var t=this;return this.http.request("POST",""+this.uploadProfileYamlFileUrl,{body:e,responseType:"text"}).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"updateDeviceProfile",value:function(e){var t=this;return this.http.put(""+this.updateDeviceProfileUrl,e,this.httpPostOrPutJSONOptions).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"updateProfileYamlContentViaUIBackend",value:function(e){var t=this;return this.http.put("/api/v2/profile/yaml",e,{headers:new n.c({"Content-Type":"text/plain; charset=utf-8"})}).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"uploadProfileYamlContent",value:function(e){var t=this;return this.http.request("POST",""+this.uploadProfileYamlContentUrl,{body:e,responseType:"text",headers:new n.c({"Content-Type":"text/plain; charset=utf-8"})}).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findProfileYamlById",value:function(e){return this.http.request("GET","".concat(this.deviceProfileYamlUrl,"/").concat(e),{responseType:"text"})}},{key:"deleteProfileById",value:function(e){var t=this;return this.http.delete("".concat(this.deleteProfileByIdUrl,"/").concat(e)).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"deleteProfileByName",value:function(e){var t=this;return this.http.delete("".concat(this.deleteProfileByNamedUrl,"/").concat(e)).pipe(Object(o.a)(function(e){return t.errorSvc.handleError(e)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.Pb(n.a),s.Pb(c.a))},t.\u0275prov=s.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();