(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"7PPe":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var c=i("tk/3"),n=i("JIr8"),o=i("fXoL"),r=i("9vc0");let s=(()=>{class e{constructor(e,t){this.http=e,this.errorSvc=t,this.endpoint="/command",this.version="/api/v2",this.urlPrefix=`${this.endpoint}${this.version}`,this.endpointHealthUrl="/ping",this.versionUrl="/version",this.configUrl="/config",this.deviceCoreCommandListUrl=this.urlPrefix+"/device/all",this.commandsByDeviceIdUrl=this.urlPrefix+"/device/",this.commandsByDeviceNameUrl=this.urlPrefix+"/device/name/",this.issueCmdByDeviceNameAndCmdNameUrl=this.urlPrefix+"/device/name/",this.httpPostOrPutJSONOptions={headers:new c.c({"Content-type":"application/json",Authorization:""})}}getConfig(){return this.http.get(`${this.urlPrefix}${this.configUrl}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}findCommnadsByDeviceId(e){return this.http.get(`${this.commandsByDeviceIdUrl}${e}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}allDeviceCoreCommandsPagination(e,t){return this.http.get(`${this.deviceCoreCommandListUrl}?offset=${e}&limit=${t}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}findDeviceAssociatedCommnadsByDeviceName(e){return this.http.get(`${this.commandsByDeviceNameUrl}${e}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}findAllDeviceCommnads(){return this.http.get(this.urlPrefix+"/device").pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}issueGetBinaryCmd(e,t){return this.http.request("GET",`${this.commandsByDeviceIdUrl}${e}/command/${t}`,{responseType:"arraybuffer"}).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}issueGetCmd(e,t){return this.http.get(`${this.issueCmdByDeviceNameAndCmdNameUrl}${e}/${t}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}issueSetCmd(e,t,i){return this.http.put(`${this.issueCmdByDeviceNameAndCmdNameUrl}${e}/${t}`,JSON.stringify(i),this.httpPostOrPutJSONOptions).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(c.a),o.Pb(r.a))},e.\u0275prov=o.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"9vc0":function(e,t,i){"use strict";i.d(t,"a",function(){return r});var c=i("HDdC"),n=i("fXoL"),o=i("hsl2");let r=(()=>{class e{constructor(e){this.msgSvc=e}handleErrorForV2API(e){let t=Object.prototype.toString.call(e);if("[object Array]"===t){if(!e[0].statusCode.toString().startsWith("20"))return this.msgSvc.errors(`code: ${e[0].statusCode}, message: ${e[0].message}`),!0}else if("[object Object]"===t&&!e.statusCode.toString().startsWith("20"))return this.msgSvc.errors(`code: ${e.statusCode}, message: ${e.message}`),!0;return!1}handleError(e){return e.error instanceof ErrorEvent?this.msgSvc.errors("'An error occurred:', "+e.error.message):"[object Object]"===Object.prototype.toString.call(e.error)?this.msgSvc.errors(`code: ${e.error.statusCode} , message: ${e.error.message}`):"[object String]"===Object.prototype.toString.call(e.error)?this.msgSvc.errors(`code: ${e.status} , message: ${e.error}`):this.msgSvc.errors(`code: ${e.status} , message: ${e.message}`),function(e,t){return new c.a(t=>t.error(e))}(`Backend returned code ${e.error.statusCode}, body was: `+e.error.message)}}return e.\u0275fac=function(t){return new(t||e)(n.Pb(o.a))},e.\u0275prov=n.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},limL:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var c=i("tk/3"),n=i("JIr8"),o=i("fXoL"),r=i("9vc0");let s=(()=>{class e{constructor(e,t){this.http=e,this.errorSvc=t,this.endpoint="/metadata",this.version="/api/v2",this.urlPrefix=`${this.endpoint}${this.version}`,this.configUrl="/config",this.devicesListUrl=this.urlPrefix+"/device/all",this.addOneDeviceUrl=this.urlPrefix+"/device",this.updateOneDeviceUrl=this.urlPrefix+"/device",this.deleteOneDeviceByIdUrl=this.urlPrefix+"/device/Id",this.deleteOneDeviceByNameUrl=this.urlPrefix+"/device/name",this.findDeviceByNameUrl=this.urlPrefix+"/device/name",this.findDeviceByIdUrl=this.urlPrefix+"/device/id",this.findDevicesByServiceIdUrl=this.urlPrefix+"/device/service/id",this.findDevicesByServiceNameUrl=this.urlPrefix+"/device/service/name",this.findDevicesByProfileIdUrl=this.urlPrefix+"/device/profile/id",this.findDevicesByProfileNameUrl=this.urlPrefix+"/device/profile/name",this.deviceServicesListUrl=this.urlPrefix+"/deviceservice/all",this.updateDeviceServiceUrl=this.urlPrefix+"/deviceservice",this.findDeviceServiceByIdUrl=this.urlPrefix+"/deviceservice/id",this.findDeviceServiceByNameUrl=this.urlPrefix+"/deviceservice/name",this.deviceProfilesListUrl=this.urlPrefix+"/deviceprofile/all",this.findProfilesByIdUrl=this.urlPrefix+"/deviceprofile",this.findProfilesByNameUrl=this.urlPrefix+"/deviceprofile/name",this.updateDeviceProfileUrl=this.urlPrefix+"/deviceprofile",this.uploadProfileYamlFileUrl=this.urlPrefix+"/deviceprofile/uploadfile",this.uploadProfileYamlContentUrl=this.urlPrefix+"/deviceprofile/upload",this.deviceProfileYamlUrl=this.urlPrefix+"/deviceprofile/yaml",this.deleteProfileByIdUrl=this.urlPrefix+"/deviceprofile/id",this.deleteProfileByNamedUrl=this.urlPrefix+"/deviceprofile/name",this.httpPostOrPutJSONOptions={headers:new c.c({"Content-type":"application/json",Authorization:""})}}getConfig(){return this.http.get(`${this.urlPrefix}${this.configUrl}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}allDevices(){return this.http.get(""+this.devicesListUrl).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}allDevicesPagination(e,t){return this.http.get(`${this.devicesListUrl}?offset=${e}&limit=${t}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}addDevice(e){let t=""+this.addOneDeviceUrl;return e.apiVersion="v2",this.http.post(t,JSON.stringify([{apiVersion:"v2",device:e}]),this.httpPostOrPutJSONOptions).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}deleteOneDeviceByName(e){return this.http.delete(`${this.deleteOneDeviceByNameUrl}/${e}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}deleteOneDeviceById(e){return this.http.delete(`${this.deleteOneDeviceByIdUrl}/${e}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}updateDevice(e){return this.http.patch(""+this.updateOneDeviceUrl,JSON.stringify([{apiVersion:"v2",device:e}]),{headers:new c.c({"Content-type":"application/json"})}).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}findDeviceByName(e){return this.http.get(`${this.findDeviceByNameUrl}/${e}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}findDeviceById(e){return this.http.get(`${this.findDeviceByIdUrl}/${e}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}findDevicesByServiceId(e){return this.http.get(`${this.findDevicesByServiceIdUrl}/${e}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}findDevicesByServiceName(e,t,i){return this.http.get(`${this.findDevicesByServiceNameUrl}/${i}?offset=${e}&limit=${t}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}findDevicesByProfileId(e){return this.http.get(`${this.findDevicesByProfileIdUrl}/${e}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}findDevicesByProfileName(e,t,i){return this.http.get(`${this.findDevicesByProfileNameUrl}/${i}?offset=${e}&limit=${t}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}allDeviceServices(){return this.http.get(this.deviceServicesListUrl+"?offset=0&limit=-1").pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}findAllDeviceServicesPagination(e,t){return this.http.get(`${this.deviceServicesListUrl}?offset=${e}&limit=${t}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}updateDeviceService(e){return this.http.patch(""+this.updateDeviceServiceUrl,JSON.stringify([{apiVersion:"v2",service:e}]),this.httpPostOrPutJSONOptions).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}findDevcieServiceById(e){return this.http.get(`${this.findDeviceServiceByIdUrl}/${e}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}findDevcieServiceByName(e){return this.http.get(`${this.findDeviceServiceByNameUrl}/${e}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}allDeviceProfoles(){return this.http.get(this.deviceProfilesListUrl+"?offset=0&limit=-1").pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}allDeviceProfolesPagination(e,t){return this.http.get(`${this.deviceProfilesListUrl}?offset=${e}&limit=${t}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}addProfileYamlByNameViaUIBackend(e){return this.http.request("POST","/api/v2/profile/yaml",{body:e,responseType:"text"}).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}findProfileById(e){return this.http.get(`${this.findProfilesByIdUrl}/${e}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}findProfileByName(e){return this.http.get(`${this.findProfilesByNameUrl}/${e}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}findProfileYamlByNameViaUIBackend(e){return this.http.request("GET","/api/v2/profile/yaml/name/"+e,{responseType:"text"}).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}uploadProfileYamlFile(e){return this.http.request("POST",""+this.uploadProfileYamlFileUrl,{body:e,responseType:"text"}).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}updateDeviceProfile(e){return this.http.put(""+this.updateDeviceProfileUrl,e,this.httpPostOrPutJSONOptions).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}updateProfileYamlContentViaUIBackend(e){return this.http.put("/api/v2/profile/yaml",e,{headers:new c.c({"Content-Type":"text/plain; charset=utf-8"})}).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}uploadProfileYamlContent(e){return this.http.request("POST",""+this.uploadProfileYamlContentUrl,{body:e,responseType:"text",headers:new c.c({"Content-Type":"text/plain; charset=utf-8"})}).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}findProfileYamlById(e){return this.http.request("GET",`${this.deviceProfileYamlUrl}/${e}`,{responseType:"text"})}deleteProfileById(e){return this.http.delete(`${this.deleteProfileByIdUrl}/${e}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}deleteProfileByName(e){return this.http.delete(`${this.deleteProfileByNamedUrl}/${e}`).pipe(Object(n.a)(e=>this.errorSvc.handleError(e)))}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(c.a),o.Pb(r.a))},e.\u0275prov=o.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},qggS:function(e,t,i){"use strict";i.r(t),i.d(t,"MetadataModule",function(){return ct});var c=i("ofXK"),n=i("3Pt+"),o=i("tyNb"),r=i("fXoL");let s=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Bb({type:e,selectors:[["app-metadata"]],decls:14,vars:0,consts:[[1,"card"],[1,"card-header"],[1,"nav","nav-tabs","card-header-tabs","font-weight-bold"],[1,"nav-item"],["routerLink","./device-service-list","routerLinkActive","active",1,"nav-link"],["routerLink","./device-center","routerLinkActive","active",1,"nav-link"],["routerLink","./device-profile-center","routerLinkActive","active",1,"nav-link"],[1,"card-body"]],template:function(e,t){1&e&&(r.Kb(0,"div",0),r.Kb(1,"div",1),r.Kb(2,"ul",2),r.Kb(3,"li",3),r.Kb(4,"a",4),r.vc(5,"Device Service"),r.Jb(),r.Jb(),r.Kb(6,"li",3),r.Kb(7,"a",5),r.vc(8,"Device"),r.Jb(),r.Jb(),r.Kb(9,"li",3),r.Kb(10,"a",6),r.vc(11,"Device Profile"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(12,"div",7),r.Ib(13,"router-outlet"),r.Jb(),r.Jb())},directives:[o.h,o.g,o.j],styles:[".active-link[_ngcontent-%COMP%]{color:#922c48;background-color:rgba(146,44,72,.4)!important}"]}),e})();var a=i("limL"),b=i("hsl2");function l(e,t){if(1&e&&(r.Kb(0,"p"),r.vc(1),r.Jb()),2&e){const e=r.Vb().$implicit;r.wb(1),r.wc(e.description)}}function d(e,t){1&e&&(r.Kb(0,"p",19),r.vc(1,"no description."),r.Jb())}function v(e,t){if(1&e&&(r.Kb(0,"span",20),r.vc(1),r.Jb()),2&e){const e=r.Vb().$implicit;r.wb(1),r.wc(e.adminState)}}function p(e,t){if(1&e&&(r.Kb(0,"span",21),r.vc(1),r.Jb()),2&e){const e=r.Vb().$implicit;r.wb(1),r.wc(e.adminState)}}function u(e,t){if(1&e){const e=r.Lb();r.Kb(0,"a",22),r.Sb("click",function(){r.oc(e);const t=r.Vb().$implicit;return r.Vb().associatedDevicesSkip(t.name)}),r.Ib(1,"i",23),r.vc(2),r.Jb()}if(2&e){const e=r.Vb().$implicit,t=r.Vb();r.wb(2),r.xc(" Associated Devices \xa0 ",t.associatedDevices.get(e.name),"")}}function h(e,t){if(1&e){const e=r.Lb();r.Kb(0,"li",3),r.Kb(1,"div",4),r.Kb(2,"div",5),r.Ib(3,"i",6),r.Jb(),r.Kb(4,"div",7),r.Kb(5,"div",8),r.Kb(6,"h5",9),r.vc(7),r.Jb(),r.Jb(),r.tc(8,l,2,1,"p",10),r.tc(9,d,2,0,"ng-template",null,11,r.uc),r.Kb(11,"div"),r.Kb(12,"span",12),r.vc(13),r.Jb(),r.Kb(14,"span",13),r.tc(15,v,2,1,"span",14),r.tc(16,p,2,1,"span",15),r.Jb(),r.tc(17,u,3,1,"a",16),r.Kb(18,"span",17),r.Sb("click",function(){r.oc(e);const i=t.$implicit;return r.Vb().edit(i)}),r.Ib(19,"i",18),r.vc(20," Setting"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb()}if(2&e){const e=t.$implicit,i=r.lc(10),c=r.Vb();r.wb(7),r.wc(e.name),r.wb(1),r.bc("ngIf",e.description)("ngIfElse",i),r.wb(5),r.xc("Port ",c.getSvcPort(e.baseAddress),""),r.wb(1),r.bc("ngSwitch",e.adminState),r.wb(1),r.bc("ngSwitchCase","UNLOCKED"),r.wb(2),r.bc("ngIf",c.associatedDevices.size)}}function m(e,t){if(1&e){const e=r.Lb();r.Kb(0,"div",24),r.Kb(1,"div",25),r.Ib(2,"i",26),r.Kb(3,"span"),r.vc(4),r.Jb(),r.Kb(5,"button",27),r.Sb("click",function(){return r.oc(e),r.Vb().updateSvc()}),r.vc(6,"Save"),r.Jb(),r.Jb(),r.Kb(7,"div",28),r.Kb(8,"form"),r.Kb(9,"div",29),r.Kb(10,"label",30),r.vc(11,"Description"),r.Jb(),r.Kb(12,"div",31),r.Kb(13,"input",32),r.Sb("ngModelChange",function(t){return r.oc(e),r.Vb().deviceSvcSelected.description=t}),r.Jb(),r.Jb(),r.Jb(),r.Kb(14,"div",29),r.Kb(15,"label",33),r.vc(16,"AdminState"),r.Jb(),r.Kb(17,"div",31),r.Kb(18,"select",34),r.Sb("ngModelChange",function(t){return r.oc(e),r.Vb().deviceSvcSelected.adminState=t}),r.Kb(19,"option",35),r.vc(20,"UNLOCKED"),r.Jb(),r.Kb(21,"option",36),r.vc(22,"LOCKED"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb()}if(2&e){const e=r.Vb();r.wb(4),r.xc("edit ",e.deviceSvcSelected.name,""),r.wb(9),r.bc("ngModel",e.deviceSvcSelected.description),r.wb(5),r.bc("ngModel",e.deviceSvcSelected.adminState)}}let f=(()=>{class e{constructor(e,t,i,c){this.metaSvc=e,this.msgSvc=t,this.router=i,this.route=c,this.deviceServiceList=[],this.associatedDevices=new Map}ngOnInit(){this.metaSvc.allDeviceServices().subscribe(e=>{this.deviceServiceList=e.services,this.deviceServiceList.forEach(e=>{this.metaSvc.findDevicesByServiceName(0,20,e.name).subscribe(t=>{this.associatedDevices.set(e.name,t.devices.length>20?"20+":String(t.devices.length))})})})}getSvcPort(e){return new URL(e).port}edit(e){this.deviceSvcSelected=e}updateSvc(){this.metaSvc.updateDeviceService(this.deviceSvcSelected).subscribe(()=>{var e;this.msgSvc.success("update device service","name: "+(null===(e=this.deviceSvcSelected)||void 0===e?void 0:e.name)),this.deviceSvcSelected=void 0})}associatedDevicesSkip(e){this.router.navigate(["../device-center"],{queryParams:{svcName:e},relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(r.Hb(a.a),r.Hb(b.a),r.Hb(o.e),r.Hb(o.a))},e.\u0275cmp=r.Bb({type:e,selectors:[["app-device-service-media-list"]],decls:3,vars:2,consts:[[1,"list-group","p-0"],["class","list-group-item list-group-item-action list-group-item-light",4,"ngFor","ngForOf"],["class","card mt-3",4,"ngIf"],[1,"list-group-item","list-group-item-action","list-group-item-light"],[1,"media"],[1,"align-self-center","mr-3"],[1,"fa","fa-tags","fa-2x","text-secondary"],[1,"media-body"],[1,"mt-0","mb-1"],[1,"d-inline","mr-3","align-middle","text-dark"],[4,"ngIf","ngIfElse"],["nodesc",""],[1,"badge","badge-info","mr-3"],[3,"ngSwitch"],["class","badge badge-success mr-3",4,"ngSwitchCase"],["class","badge badge-danger mr-3",4,"ngSwitchDefault"],["class","badge badge-primary","role","button",3,"click",4,"ngIf"],["role","button",1,"badge","badge-secondary","float-right",3,"click"],[1,"fa","fa-cog"],[1,"my-1"],[1,"badge","badge-success","mr-3"],[1,"badge","badge-danger","mr-3"],["role","button",1,"badge","badge-primary",3,"click"],[1,"fa","fa-sitemap"],[1,"card","mt-3"],[1,"card-header"],[1,"fa","fa-edit","mr-1","text-danger"],[1,"btn","btn-success","btn-sm","float-right",3,"click"],[1,"card-body"],[1,"form-group","row"],["for","deviceDesc",1,"col-md-2","col-form-label"],[1,"col-md-10"],["type","text","name","deviceSvcDescription",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],["name","deviceSvcAdminState",1,"form-control",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"]],template:function(e,t){1&e&&(r.Kb(0,"ul",0),r.tc(1,h,21,7,"li",1),r.Jb(),r.tc(2,m,23,3,"div",2)),2&e&&(r.wb(1),r.bc("ngForOf",t.deviceServiceList),r.wb(1),r.bc("ngIf",t.deviceSvcSelected))},directives:[c.k,c.l,c.n,c.o,c.p,n.p,n.g,n.h,n.a,n.f,n.i,n.n,n.j,n.o],styles:[""]}),e})(),g=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Bb({type:e,selectors:[["app-device-center"]],decls:1,vars:0,template:function(e,t){1&e&&r.Ib(0,"router-outlet")},directives:[o.j],styles:[""]}),e})();var K=i("7PPe");function J(e,t){if(1&e&&(r.Kb(0,"span"),r.Kb(1,"span",48),r.vc(2,"DeviceService"),r.Jb(),r.Kb(3,"span",49),r.vc(4),r.Jb(),r.Kb(5,"span"),r.vc(6,"Associated Device List"),r.Jb(),r.Jb()),2&e){const e=r.Vb();r.wb(4),r.wc(e.associatedSvcName)}}function S(e,t){if(1&e&&(r.Kb(0,"span"),r.Kb(1,"span",48),r.vc(2,"DeviceProfile"),r.Jb(),r.Kb(3,"span",49),r.vc(4),r.Jb(),r.Kb(5,"span"),r.vc(6,"Associated Device List"),r.Jb(),r.Jb()),2&e){const e=r.Vb();r.wb(4),r.wc(e.associatedProfileName)}}function w(e,t){1&e&&(r.Kb(0,"span"),r.vc(1,"Device List"),r.Jb())}function y(e,t){if(1&e&&(r.Kb(0,"span",61),r.vc(1),r.Jb()),2&e){const e=r.Vb().$implicit;r.wb(1),r.wc(e.adminState)}}function P(e,t){if(1&e&&(r.Kb(0,"span",62),r.vc(1),r.Jb()),2&e){const e=r.Vb().$implicit;r.wb(1),r.wc(e.adminState)}}function C(e,t){if(1&e&&(r.Kb(0,"span",61),r.vc(1),r.Jb()),2&e){const e=r.Vb().$implicit;r.wb(1),r.xc(" ",e.operatingState,"")}}function D(e,t){if(1&e&&(r.Kb(0,"span",62),r.vc(1),r.Jb()),2&e){const e=r.Vb().$implicit;r.wb(1),r.xc(" ",e.operatingState,"")}}function I(e,t){if(1&e&&(r.Kb(0,"span",62),r.vc(1),r.Jb()),2&e){const e=r.Vb().$implicit;r.wb(1),r.xc(" ",e.operatingState,"")}}const N=function(e){return{profileName:e}};function k(e,t){if(1&e){const e=r.Lb();r.Kb(0,"tr"),r.Kb(1,"td"),r.Kb(2,"input",19),r.Sb("click",function(i){r.oc(e);const c=t.$implicit;return r.Vb().selectOne(i,c)}),r.Jb(),r.Jb(),r.Kb(3,"td",50),r.vc(4),r.Jb(),r.Kb(5,"td",50),r.vc(6),r.Jb(),r.Kb(7,"td"),r.vc(8),r.Jb(),r.Kb(9,"td"),r.vc(10),r.Jb(),r.Kb(11,"td"),r.Kb(12,"span",51),r.tc(13,y,2,1,"span",52),r.tc(14,P,2,1,"span",53),r.Jb(),r.Jb(),r.Kb(15,"td",54),r.Kb(16,"span",51),r.tc(17,C,2,1,"span",52),r.tc(18,D,2,1,"span",55),r.tc(19,I,2,1,"span",53),r.Jb(),r.Jb(),r.Kb(20,"td",54),r.Kb(21,"span",56),r.Sb("click",function(){r.oc(e);const i=t.$implicit;return r.Vb().checkDeviceCommand(i)}),r.Ib(22,"i",57),r.Jb(),r.Jb(),r.Kb(23,"td",54),r.Kb(24,"span",56),r.Sb("click",function(){r.oc(e);const i=t.$implicit;return r.Vb().checkAutoEvent(i)}),r.Ib(25,"i",58),r.Jb(),r.Jb(),r.Kb(26,"td"),r.Kb(27,"a",59),r.vc(28),r.Jb(),r.Jb(),r.Kb(29,"td"),r.Kb(30,"a",60),r.vc(31),r.Jb(),r.Jb(),r.Jb()}if(2&e){const e=t.$implicit,i=r.Vb();r.zb("table-active",i.isChecked(e.id)||i.associatedCmdDeviceName===e.name||i.associatedAutoEventsDeviceName===e.name),r.wb(2),r.bc("checked",i.isChecked(e.id)),r.wb(2),r.wc(e.id),r.wb(2),r.wc(e.name),r.wb(2),r.wc(e.description),r.wb(2),r.wc(e.labels),r.wb(2),r.bc("ngSwitch",e.adminState),r.wb(1),r.bc("ngSwitchCase","UNLOCKED"),r.wb(3),r.bc("ngSwitch",e.operatingState),r.wb(1),r.bc("ngSwitchCase","UP"),r.wb(1),r.bc("ngSwitchCase","DOWN"),r.wb(3),r.zb("badge-danger",i.associatedCmdDeviceName===e.name),r.wb(3),r.zb("badge-danger",i.associatedAutoEventsDeviceName===e.name),r.wb(3),r.bc("queryParams",r.hc(19,N,e.profileName)),r.wb(1),r.wc(e.profileName),r.wb(3),r.wc(e.serviceName)}}function E(e,t){if(1&e&&(r.Kb(0,"tr"),r.Kb(1,"td"),r.vc(2),r.Jb(),r.Kb(3,"td"),r.Kb(4,"span",71),r.vc(5),r.Jb(),r.Jb(),r.Kb(6,"td"),r.Kb(7,"span",72),r.vc(8),r.Jb(),r.Jb(),r.Jb()),2&e){const e=t.$implicit;r.wb(2),r.wc(e.sourceName),r.wb(3),r.wc(e.interval),r.wb(3),r.wc(e.onChange)}}function O(e,t){if(1&e&&(r.Kb(0,"div"),r.Kb(1,"div",65),r.Kb(2,"div",66),r.Kb(3,"span",67),r.Ib(4,"i",58),r.Jb(),r.Kb(5,"span",68),r.vc(6),r.Jb(),r.vc(7," Associated AutoEvents "),r.Jb(),r.Kb(8,"div",69),r.Kb(9,"div",15),r.Kb(10,"table",16),r.Kb(11,"thead",17),r.Kb(12,"th",18),r.vc(13,"Resource"),r.Jb(),r.Kb(14,"th",18),r.vc(15,"Interval"),r.Jb(),r.Kb(16,"th",18),r.vc(17,"Onchange"),r.Jb(),r.Jb(),r.Kb(18,"tbody"),r.tc(19,E,9,3,"tr",70),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb()),2&e){const e=r.Vb(2);r.wb(6),r.xc(" ",e.associatedAutoEventsDeviceName,""),r.wb(13),r.bc("ngForOf",e.autoEvents)}}function x(e,t){if(1&e&&(r.Kb(0,"div",65),r.Kb(1,"div",66),r.Kb(2,"span",67),r.Ib(3,"i",58),r.Jb(),r.Kb(4,"span",68),r.vc(5),r.Jb(),r.vc(6," Associated AutoEvents "),r.Jb(),r.Kb(7,"div",73),r.Kb(8,"h5",74),r.Ib(9,"i",43),r.vc(10," no associated AutoEvents"),r.Jb(),r.Jb(),r.Jb()),2&e){const e=r.Vb(2);r.wb(5),r.xc(" ",e.associatedAutoEventsDeviceName,"")}}function L(e,t){if(1&e&&(r.Kb(0,"div"),r.tc(1,O,20,2,"div",63),r.tc(2,x,11,1,"ng-template",null,64,r.uc),r.Jb()),2&e){const e=r.lc(3),t=r.Vb();r.wb(1),r.bc("ngIf",t.autoEvents)("ngIfElse",e)}}function M(e,t){1&e&&r.Ib(0,"div")}function A(e,t){if(1&e&&(r.Kb(0,"div"),r.tc(1,M,1,0,"div",75),r.Jb()),2&e){const e=r.Vb(),t=r.lc(78),i=r.lc(80);r.wb(1),r.bc("ngIf",e.deviceCoreCommand)("ngIfThen",t)("ngIfElse",i)}}function V(e,t){if(1&e){const e=r.Lb();r.Kb(0,"li",85),r.Sb("click",function(){r.oc(e);const i=t.$implicit;return r.Vb(2).selectCmd(i)}),r.vc(1),r.Jb()}if(2&e){const e=t.$implicit,i=r.Vb(2);r.zb("list-group-item-info",(null==i.selectedCmd?null:i.selectedCmd.name)===e.name),r.wb(1),r.wc(e.name)}}function B(e,t){if(1&e){const e=r.Lb();r.Kb(0,"button",97),r.Sb("click",function(){return r.oc(e),r.Vb(3).issueGetCmd()}),r.vc(1,"try"),r.Jb()}}function U(e,t){1&e&&r.Ib(0,"div")}function T(e,t){if(1&e&&(r.Kb(0,"span",102),r.vc(1),r.Jb()),2&e){const e=r.Vb(4);r.wb(1),r.xc(" ",e.cmdGetResponse,"")}}function j(e,t){if(1&e&&(r.Kb(0,"pre",103),r.vc(1),r.Jb()),2&e){const e=r.Vb(4);r.wb(1),r.wc(e.cmdGetResponseRaw)}}function R(e,t){if(1&e&&(r.Kb(0,"div"),r.Kb(1,"span",98),r.vc(2,"Response:"),r.Jb(),r.tc(3,T,2,1,"span",99),r.Jb(),r.Kb(4,"div",100),r.Kb(5,"span",98),r.vc(6,"ResponseRaw:"),r.Jb(),r.tc(7,j,2,1,"pre",101),r.Jb()),2&e){const e=r.Vb(3);r.wb(3),r.bc("ngIf",e.cmdGetResponse),r.wb(4),r.bc("ngIf",e.cmdGetResponseRaw)}}function F(e,t){1&e&&(r.Kb(0,"h6",74),r.Ib(1,"i",43),r.vc(2," no Get method"),r.Jb())}function H(e,t){if(1&e){const e=r.Lb();r.Kb(0,"button",97),r.Sb("click",function(){return r.oc(e),r.Vb(3).issueSetCmd()}),r.vc(1,"try"),r.Jb()}}function q(e,t){1&e&&r.Ib(0,"div")}function z(e,t){if(1&e&&(r.Kb(0,"div"),r.Kb(1,"label",110),r.vc(2),r.Jb(),r.Kb(3,"select",111),r.Kb(4,"option",112),r.vc(5,"false"),r.Jb(),r.Kb(6,"option",112),r.vc(7,"true"),r.Jb(),r.Jb(),r.Jb()),2&e){const e=r.Vb().$implicit;r.wb(1),r.cc("for",e.resourceName),r.wb(1),r.xc(" ",e.resourceName," "),r.wb(1),r.cc("id",e.resourceName),r.cc("name",e.resourceName),r.wb(1),r.bc("ngValue",!1),r.wb(2),r.bc("ngValue",!0)}}function G(e,t){if(1&e&&(r.Kb(0,"label",110),r.vc(1),r.Jb(),r.Ib(2,"input",113)),2&e){const e=r.Vb().$implicit;r.cc("for",e.resourceName),r.wb(1),r.wc(e.resourceName),r.wb(1),r.cc("id",e.resourceName),r.cc("name",e.resourceName),r.dc("placeholder","valueType: ",e.valueType,"")}}function Y(e,t){if(1&e&&(r.Kb(0,"div",108),r.tc(1,z,8,6,"div",63),r.tc(2,G,3,5,"ng-template",null,109,r.uc),r.Jb()),2&e){const e=t.$implicit,i=r.lc(3);r.wb(1),r.bc("ngIf","Bool"==e.valueType)("ngIfElse",i)}}function W(e,t){if(1&e&&(r.Kb(0,"div",106),r.tc(1,Y,4,2,"div",107),r.Jb()),2&e){const e=r.Vb(5);r.wb(1),r.bc("ngForOf",e.selectedCmdSetParams)}}function _(e,t){if(1&e&&(r.Kb(0,"div",80),r.Kb(1,"div",66),r.vc(2,"Set Parameters"),r.Jb(),r.Kb(3,"div",77),r.tc(4,W,2,1,"div",105),r.Jb(),r.Jb()),2&e){const e=r.Vb(4);r.wb(4),r.bc("ngIf",e.selectedCmd)}}function X(e,t){if(1&e&&(r.Kb(0,"span",102),r.vc(1),r.Jb()),2&e){const e=r.Vb(4);r.wb(1),r.wc(e.cmdSetResponse)}}function Q(e,t){if(1&e&&(r.Kb(0,"pre",103),r.vc(1),r.Jb()),2&e){const e=r.Vb(4);r.wb(1),r.wc(e.cmdSetResponseRaw)}}function Z(e,t){if(1&e&&(r.tc(0,_,5,1,"div",104),r.Kb(1,"div"),r.Kb(2,"div"),r.Kb(3,"span",98),r.vc(4," Response:"),r.Jb(),r.tc(5,X,2,1,"span",99),r.Jb(),r.Kb(6,"div",100),r.Kb(7,"span",98),r.vc(8," ResponseRaw:"),r.Jb(),r.tc(9,Q,2,1,"pre",101),r.Jb(),r.Jb()),2&e){const e=r.Vb(3);r.bc("ngIf",e.selectedCmdSetParams),r.wb(5),r.bc("ngIf",e.cmdSetResponse),r.wb(4),r.bc("ngIf",e.cmdSetResponseRaw)}}function ee(e,t){1&e&&(r.Kb(0,"h6",74),r.Ib(1,"i",43),r.vc(2," no Set method"),r.Jb())}function te(e,t){if(1&e&&(r.Kb(0,"div",0),r.Kb(1,"div",66),r.Kb(2,"span",86),r.Ib(3,"i",87),r.vc(4),r.Jb(),r.Kb(5,"span"),r.vc(6,"Get and Set"),r.Jb(),r.Jb(),r.Kb(7,"div",88),r.Kb(8,"div",78),r.Kb(9,"div",89),r.Kb(10,"div",80),r.Kb(11,"div",66),r.vc(12," Get "),r.tc(13,B,2,0,"button",90),r.Jb(),r.Kb(14,"div",91),r.tc(15,U,1,0,"div",75),r.tc(16,R,8,2,"ng-template",null,92,r.uc),r.tc(18,F,3,0,"ng-template",null,93,r.uc),r.Jb(),r.Jb(),r.Jb(),r.Kb(20,"div",94),r.Kb(21,"div",0),r.Kb(22,"div",66),r.vc(23," Set "),r.tc(24,H,2,0,"button",90),r.Jb(),r.Kb(25,"div",77),r.tc(26,q,1,0,"div",75),r.tc(27,Z,10,3,"ng-template",null,95,r.uc),r.tc(29,ee,3,0,"ng-template",null,96,r.uc),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb()),2&e){const e=r.lc(17),t=r.lc(19),i=r.lc(28),c=r.lc(30),n=r.Vb(2);r.wb(4),r.xc(" ",n.selectedCmd.name," method:"),r.wb(9),r.bc("ngIf",n.selectedCmd.get),r.wb(2),r.bc("ngIf",n.selectedCmd.get)("ngIfThen",e)("ngIfElse",t),r.wb(9),r.bc("ngIf",n.selectedCmd.set),r.wb(2),r.bc("ngIf",n.selectedCmd.set)("ngIfThen",i)("ngIfElse",c)}}function ie(e,t){if(1&e&&(r.Kb(0,"div",65),r.Kb(1,"div",66),r.Kb(2,"span",67),r.Ib(3,"i",57),r.Jb(),r.Kb(4,"span",76),r.vc(5),r.Jb(),r.vc(6," Associated Commands "),r.Jb(),r.Kb(7,"div",77),r.Kb(8,"div",78),r.Kb(9,"div",79),r.Kb(10,"div",80),r.Kb(11,"div",1),r.vc(12," Command Name List "),r.Jb(),r.Kb(13,"div",69),r.Kb(14,"ul",81),r.tc(15,V,2,3,"li",82),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(16,"div",83),r.tc(17,te,31,9,"div",84),r.Jb(),r.Jb(),r.Jb(),r.Jb()),2&e){const e=r.Vb();r.wb(5),r.wc(e.associatedCmdDeviceName),r.wb(10),r.bc("ngForOf",e.deviceCoreCommand),r.wb(2),r.bc("ngIf",e.selectedCmd)}}function ce(e,t){if(1&e&&(r.Kb(0,"div",65),r.Kb(1,"div",66),r.Kb(2,"span",67),r.Ib(3,"i",57),r.Jb(),r.Kb(4,"span",114),r.vc(5),r.Jb(),r.vc(6," Associated Commands "),r.Jb(),r.Kb(7,"div",73),r.Kb(8,"h5",74),r.Ib(9,"i",43),r.vc(10," no associated commands"),r.Jb(),r.Jb(),r.Jb()),2&e){const e=r.Vb();r.wb(5),r.wc(e.associatedCmdDeviceName)}}let ne=(()=>{class e{constructor(e,t,i,c,n){this.metaSvc=e,this.cmdSvc=t,this.msgSvc=i,this.route=c,this.router=n,this.deviceList=[],this.associatedSvcName="",this.associatedProfileName="",this.selectedDevice=[],this.isCheckedAll=!1,this.selectedCmd={},this.selectedCmdSetParams=[],this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.route.queryParams.subscribe(e=>e.svcName?(this.associatedSvcName=e.svcName,void this.getDeviceListByAssociatedSvc(this.associatedSvcName)):e.profileName?(this.associatedProfileName=e.profileName,void this.getDeviceListByAssociatedProfile(this.associatedProfileName)):(this.associatedSvcName="",this.associatedProfileName="",void this.getDeviceListPagination()))}renderPopoverComponent(){setTimeout(()=>{$('[data-toggle="popover"]').popover({trigger:"hover"})},250)}getDeviceList(){""===this.associatedSvcName?""===this.associatedProfileName?this.getDeviceListPagination():this.getDeviceListByAssociatedProfile(this.associatedSvcName):this.getDeviceListByAssociatedSvc(this.associatedSvcName)}getDeviceListByAssociatedSvc(e){this.metaSvc.findDevicesByServiceName(this.pageOffset,this.pageLimit,e).subscribe(e=>this.deviceList=e.devices)}getDeviceListByAssociatedProfile(e){this.metaSvc.findDevicesByProfileName(this.pageOffset,this.pageLimit,e).subscribe(e=>this.deviceList=e.devices)}getDeviceListPagination(){this.metaSvc.allDevicesPagination(this.pageOffset,this.pageLimit).subscribe(e=>{this.deviceList=e.devices})}refresh(){this.associatedProfileName="",this.associatedSvcName="",this.metaSvc.allDevicesPagination(0,this.pageLimit).subscribe(e=>{this.deviceList=e.devices,this.msgSvc.success("refresh"),this.resetPagination()})}edit(){this.router.navigate(["../edit-device"],{relativeTo:this.route,queryParams:{deviceName:this.selectedDevice[0].name}})}deleteConfirm(){$("#deleteConfirmDialog").modal("show")}delete(){this.selectedDevice.forEach((e,t)=>{this.metaSvc.deleteOneDeviceByName(e.name).subscribe(()=>{this.selectedDevice.splice(t,1),this.deviceList.forEach((t,i)=>{if(t.id===e.id)return this.deviceList.splice(i,1),void this.msgSvc.success("remove device "," Name: "+t.name)})})}),this.associatedCmdDeviceName=void 0,this.associatedAutoEventsDeviceName=void 0,$("#deleteConfirmDialog").modal("hide")}checkAutoEvent(e){this.associatedAutoEventsDeviceName=e.name,this.autoEvents=e.autoEvents,this.associatedCmdDeviceName=""}selectAll(e){if(e.target.checked)return this.selectedDevice=[],this.deviceList.forEach(e=>{this.selectedDevice.push(e),this.isChecked(e.id)}),void(this.isCheckedAll=!0);this.isCheckedAll=!1,this.selectedDevice=[],this.deviceList.forEach(e=>{this.isChecked(e.id)})}isChecked(e){return this.selectedDevice.findIndex(t=>t.id===e)>=0}selectOne(e,t){if(e.target.checked)return this.selectedDevice.push(t),void(this.selectedDevice.length===this.deviceList.length&&(this.isCheckedAll=!0));this.isCheckedAll=!1,this.isChecked(t.id),this.selectedDevice.splice(this.selectedDevice.indexOf(t),1)}checkDeviceCommand(e){this.resetResponse(),this.metaSvc.findProfileByName(e.profileName).subscribe(e=>this.associateDeviceProfile=e.profile),this.cmdSvc.findDeviceAssociatedCommnadsByDeviceName(e.name).subscribe(t=>{this.associatedAutoEventsDeviceName="",this.associatedCmdDeviceName=t.deviceCoreCommand.deviceName,this.associatedCmdDeviceId=e.id,this.deviceCoreCommand=t.deviceCoreCommand.coreCommands,this.selectedCmd=this.deviceCoreCommand[0],this.selectedCmdSetParams=this.selectedCmd.parameters})}selectCmd(e){this.selectedCmd=e,this.selectedCmdSetParams=this.selectedCmd.parameters,this.resetResponse()}resetResponse(){this.cmdGetResponse="",this.cmdGetResponseRaw="",this.cmdSetResponse="",this.cmdSetResponseRaw="",this.cmdBinaryResponse=!0,this.cmdBinaryResponseURL=""}issueGetCmd(){var e;this.cmdSvc.issueGetCmd(this.associatedCmdDeviceName,null===(e=this.selectedCmd)||void 0===e?void 0:e.name).subscribe(e=>{this.cmdGetResponseRaw=JSON.stringify(e.event.readings,null,3);let t=[];e.event.readings.forEach(e=>{t.push(e.value)}),this.cmdGetResponse=t.join(",")})}issueSetCmd(){var e,t;let i={};null===(e=this.selectedCmdSetParams)||void 0===e||e.forEach(function(e){i[e.resourceName]=$("#"+e.resourceName).val().trim()}),this.cmdSvc.issueSetCmd(this.associatedCmdDeviceName,null===(t=this.selectedCmd)||void 0===t?void 0:t.name,i).subscribe(e=>{this.cmdSetResponseRaw=JSON.stringify(e,null,3),this.cmdSetResponse=e.message})}onPageSelected(){this.resetPagination(),this.setPagination(),this.getDeviceList()}prePage(){this.setPagination(-1),this.getDeviceList()}nextPage(){this.setPagination(1),this.getDeviceList()}setPagination(e){1===e?this.pagination+=1:-1===e&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit}resetPagination(){this.pagination=1}}return e.\u0275fac=function(t){return new(t||e)(r.Hb(a.a),r.Hb(K.a),r.Hb(b.a),r.Hb(o.a),r.Hb(o.e))},e.\u0275cmp=r.Bb({type:e,selectors:[["app-device-list"]],decls:95,vars:12,consts:[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","text-danger","mr-2"],[4,"ngIf"],[1,"card-body","p-0","position-relative"],[1,"bg-light","px-2","py-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","mr-1"],["type","button","routerLink","../add-device",1,"btn","btn-info"],[1,"fa","fa-plus","mr-1"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-edit","mr-1"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash","mr-1"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],["type","checkbox","role","button",3,"checked","click"],[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"form-control",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left"],[1,"page-item"],[1,"fa","fa-angle-double-right"],["hasAssociatedCommand",""],["noAssociatedCommand",""],["id","deleteConfirmDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteConfirmDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteConfirmDialogLabel",1,"modal-title","text-danger"],[1,"fa","fa-warning"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"mr-1"],[1,"text-danger","mr-1"],[1,"user-select-all"],[3,"ngSwitch"],["class","badge badge-success",4,"ngSwitchCase"],["class","badge badge-danger",4,"ngSwitchDefault"],[1,"text-center"],["class","badge badge-danger",4,"ngSwitchCase"],["role","button",1,"badge","badge-primary","text-light",3,"click"],[1,"fa","fa-terminal","font-weight-bolder"],[1,"fa","fa-calendar-check-o","font-weight-bolder"],["routerLink","../../device-profile-center",3,"queryParams"],["routerLink","../../device-service-list"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[4,"ngIf","ngIfElse"],["noAutoEvents",""],[1,"card","mt-3"],[1,"card-header"],[1,"badge","badge-danger","text-light"],[1,"text-primary","mx-2","font-weight-bold"],[1,"card-body","p-0"],[4,"ngFor","ngForOf"],[1,"badge","badge-secondary","badge-pill"],[1,""],[1,"card-body","text-center"],[1,"text-warning"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"text-primary","ml-2","font-weight-bold"],[1,"card-body"],[1,"row"],[1,"col-md-2","col-lg-2"],[1,"card","mb-2"],[1,"list-group","list-group-flush"],["role","button","class","list-group-item list-group-item-action",3,"list-group-item-info","click",4,"ngFor","ngForOf"],[1,"col-md-10","col-lg-10"],["class","card",4,"ngIf"],["role","button",1,"list-group-item","list-group-item-action",3,"click"],[1,"text-primary","font-weight-bold","mr-2"],[1,"fa","fa-thumb-tack","text-danger","mr-1"],[1,"card-body","px-2"],[1,"col-md-5","col-lg-5"],["class","btn btn-primary btn-sm float-right",3,"click",4,"ngIf"],[1,"card-body","overflow-auto"],["hasGetMethod",""],["noGetMethod",""],[1,"col-md-7","col-lg-7"],["hasSetMethod",""],["noSetMethod",""],[1,"btn","btn-primary","btn-sm","float-right",3,"click"],[1,"badge","badge-info"],["class","ml-2 text-primary",4,"ngIf"],[1,"mt-3"],["class","mt-2 bg-secondary p-2 text-light rounded",4,"ngIf"],[1,"ml-2","text-primary"],[1,"mt-2","bg-secondary","p-2","text-light","rounded"],["class","card mb-2",4,"ngIf"],["class","d-flex flex-column bd-highlight",4,"ngIf"],[1,"d-flex","flex-column","bd-highlight"],["class","form p-2 bd-highlight",4,"ngFor","ngForOf"],[1,"form","p-2","bd-highlight"],["valueTypeIsNotBool",""],[3,"for"],[1,"form-control","form-control-sm",3,"id","name"],[3,"ngValue"],[1,"form-control","form-control-sm",3,"id","name","placeholder"],[1,"text-primary","mx-1","font-weight-bold"]],template:function(e,t){1&e&&(r.Kb(0,"div",0),r.Kb(1,"div",1),r.Ib(2,"i",2),r.tc(3,J,7,1,"span",3),r.tc(4,S,7,1,"span",3),r.tc(5,w,2,0,"span",3),r.Jb(),r.Kb(6,"div",4),r.Kb(7,"div",5),r.Kb(8,"div",6),r.Kb(9,"button",7),r.Sb("click",function(){return t.refresh()}),r.Kb(10,"span"),r.Ib(11,"i",8),r.vc(12,"Refresh"),r.Jb(),r.Jb(),r.Kb(13,"button",9),r.Kb(14,"span"),r.Ib(15,"i",10),r.vc(16,"Add"),r.Jb(),r.Jb(),r.Kb(17,"button",11),r.Sb("click",function(){return t.edit()}),r.Kb(18,"span"),r.Ib(19,"i",12),r.vc(20,"Edit"),r.Jb(),r.Jb(),r.Kb(21,"button",13),r.Sb("click",function(){return t.deleteConfirm()}),r.Kb(22,"span"),r.Ib(23,"i",14),r.vc(24,"Delete"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(25,"div",15),r.Kb(26,"table",16),r.Kb(27,"thead",17),r.Kb(28,"tr"),r.Kb(29,"th",18),r.Kb(30,"input",19),r.Sb("click",function(e){return t.selectAll(e)}),r.Jb(),r.Jb(),r.Kb(31,"th",18),r.vc(32,"ID"),r.Jb(),r.Kb(33,"th",18),r.vc(34,"Name"),r.Jb(),r.Kb(35,"th",18),r.vc(36,"Description"),r.Jb(),r.Kb(37,"th",18),r.vc(38,"Labels"),r.Jb(),r.Kb(39,"th",18),r.vc(40,"AdminState"),r.Jb(),r.Kb(41,"th",18),r.vc(42,"OperatingState"),r.Jb(),r.Kb(43,"th",18),r.vc(44,"Command"),r.Jb(),r.Kb(45,"th",18),r.vc(46,"AutoEvents"),r.Jb(),r.Kb(47,"th",18),r.vc(48,"AssociatedProfile"),r.Jb(),r.Kb(49,"th",18),r.vc(50,"AssociatedService"),r.Jb(),r.Jb(),r.Jb(),r.Kb(51,"tbody"),r.tc(52,k,32,21,"tr",20),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(53,"div",21),r.Kb(54,"nav",22),r.Kb(55,"ul",23),r.Kb(56,"li",24),r.Kb(57,"span",25),r.vc(58,"items per page"),r.Jb(),r.Jb(),r.Kb(59,"li",26),r.Kb(60,"select",27),r.Sb("ngModelChange",function(e){return t.pageLimit=e})("ngModelChange",function(){return t.onPageSelected()}),r.Kb(61,"option",28),r.vc(62,"5"),r.Jb(),r.Kb(63,"option",29),r.vc(64,"10"),r.Jb(),r.Kb(65,"option",30),r.vc(66,"20"),r.Jb(),r.Jb(),r.Jb(),r.Kb(67,"li",31),r.Kb(68,"button",32),r.Sb("click",function(){return t.prePage()}),r.Ib(69,"i",33),r.vc(70," Previous"),r.Jb(),r.Jb(),r.Kb(71,"li",34),r.Kb(72,"button",32),r.Sb("click",function(){return t.nextPage()}),r.vc(73,"Next "),r.Ib(74,"i",35),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.tc(75,L,4,2,"div",3),r.tc(76,A,2,3,"div",3),r.tc(77,ie,18,3,"ng-template",null,36,r.uc),r.tc(79,ce,11,1,"ng-template",null,37,r.uc),r.Kb(81,"div",38),r.Kb(82,"div",39),r.Kb(83,"div",40),r.Kb(84,"div",41),r.Kb(85,"h5",42),r.Ib(86,"i",43),r.vc(87," Warning "),r.Jb(),r.Jb(),r.Kb(88,"div",44),r.vc(89," The data will be permanently erased!!! Are you sure to execute delete operation\uff1f "),r.Jb(),r.Kb(90,"div",45),r.Kb(91,"button",46),r.vc(92,"Cancel"),r.Jb(),r.Kb(93,"button",47),r.Sb("click",function(){return t.delete()}),r.vc(94,"Confirm"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb()),2&e&&(r.wb(3),r.bc("ngIf",""!==t.associatedSvcName),r.wb(1),r.bc("ngIf",""!==t.associatedProfileName),r.wb(1),r.bc("ngIf",""===t.associatedProfileName&&""===t.associatedSvcName),r.wb(12),r.bc("disabled",1!==t.selectedDevice.length),r.wb(4),r.bc("disabled",0===t.selectedDevice.length),r.wb(9),r.bc("checked",t.isCheckedAll),r.wb(22),r.bc("ngForOf",t.deviceList),r.wb(8),r.bc("ngModel",t.pageLimit),r.wb(8),r.bc("disabled",1===t.pagination),r.wb(4),r.bc("disabled",t.pageLimit>t.deviceList.length),r.wb(3),r.bc("ngIf",t.associatedAutoEventsDeviceName),r.wb(1),r.bc("ngIf",t.associatedCmdDeviceName))},directives:[c.l,o.f,c.k,n.n,n.f,n.i,n.j,n.o,c.n,c.o,c.p,o.h],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),e})();function oe(e,t){if(1&e){const e=r.Lb();r.Kb(0,"tr"),r.Kb(1,"td"),r.Kb(2,"input",24),r.Sb("click",function(i){r.oc(e);const c=t.$implicit;return r.Vb().selectOneSvc(i,c.name)}),r.Jb(),r.Jb(),r.Kb(3,"td"),r.vc(4),r.Jb(),r.Kb(5,"td"),r.vc(6),r.Jb(),r.Kb(7,"td"),r.vc(8),r.Jb(),r.Kb(9,"td"),r.vc(10),r.Jb(),r.Kb(11,"td"),r.vc(12),r.Jb(),r.Kb(13,"td"),r.vc(14),r.Wb(15,"date"),r.Jb(),r.Kb(16,"td"),r.vc(17),r.Wb(18,"date"),r.Jb(),r.Jb()}if(2&e){const e=t.$implicit,i=r.Vb();r.zb("table-active",i.isSvcChecked(e.name)),r.wb(2),r.bc("checked",i.isSvcChecked(e.name)),r.wb(2),r.wc(e.id),r.wb(2),r.wc(e.name),r.wb(2),r.wc(e.description),r.wb(2),r.wc(e.labels),r.wb(2),r.wc(e.adminState),r.wb(2),r.wc(r.Yb(15,10,e.created,"yyyy-MM-dd hh:mm:ss")),r.wb(3),r.wc(r.Yb(18,13,e.modified,"yyyy-MM-dd hh:mm:ss"))}}let re=(()=>{class e{constructor(e){this.metaSvc=e,this.singleDeviceSvcSelectedEvent=new r.n,this.deviceServiceList=[],this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.findAllDeviceSvcPagination()}findAllDeviceSvcPagination(){this.metaSvc.findAllDeviceServicesPagination(this.pageOffset,this.pageLimit).subscribe(e=>{this.deviceServiceList=e.services})}onSingleDeviceSvcSelectedEmitter(){this.singleDeviceSvcSelectedEvent.emit(this.deviceSvcSelected)}isSvcChecked(e){var t;return(null===(t=this.deviceSvcSelected)||void 0===t?void 0:t.name)===e}selectOneSvc(e,t){let i=this;e.target.checked?this.deviceServiceList.forEach(function(e){e.name===t&&(i.deviceSvcSelected=e)}):this.deviceSvcSelected=void 0,this.onSingleDeviceSvcSelectedEmitter()}onPageSelected(){this.resetPagination(),this.setPagination(),this.findAllDeviceSvcPagination()}prePage(){this.setPagination(-1),this.findAllDeviceSvcPagination()}nextPage(){this.setPagination(1),this.findAllDeviceSvcPagination()}setPagination(e){1===e?this.pagination+=1:-1===e&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit}resetPagination(){this.pagination=1}}return e.\u0275fac=function(t){return new(t||e)(r.Hb(a.a))},e.\u0275cmp=r.Bb({type:e,selectors:[["app-device-service-list"]],inputs:{deviceSvcSelected:"deviceSvcSelected"},outputs:{singleDeviceSvcSelectedEvent:"singleDeviceSvcSelectedEvent"},decls:50,vars:4,consts:[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","mr-2","text-danger"],[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"form-control",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left"],[1,"page-item"],[1,"fa","fa-angle-double-right"],["type","checkbox","role","button",3,"checked","click"]],template:function(e,t){1&e&&(r.Kb(0,"div",0),r.Kb(1,"div",1),r.Ib(2,"i",2),r.Kb(3,"span"),r.vc(4,"Device Service List"),r.Jb(),r.Jb(),r.Kb(5,"div",3),r.Kb(6,"div",4),r.Kb(7,"table",5),r.Kb(8,"thead",6),r.Kb(9,"tr"),r.Kb(10,"th",7),r.vc(11,"#"),r.Jb(),r.Kb(12,"th",7),r.vc(13,"ID"),r.Jb(),r.Kb(14,"th",7),r.vc(15,"Name"),r.Jb(),r.Kb(16,"th",7),r.vc(17,"Description"),r.Jb(),r.Kb(18,"th",7),r.vc(19,"Labels"),r.Jb(),r.Kb(20,"th",7),r.vc(21,"AdminState"),r.Jb(),r.Kb(22,"th",7),r.vc(23,"Created"),r.Jb(),r.Kb(24,"th",7),r.vc(25,"Modified"),r.Jb(),r.Jb(),r.Jb(),r.Kb(26,"tbody"),r.tc(27,oe,19,16,"tr",8),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(28,"div",9),r.Kb(29,"nav",10),r.Kb(30,"ul",11),r.Kb(31,"li",12),r.Kb(32,"span",13),r.vc(33,"items per page"),r.Jb(),r.Jb(),r.Kb(34,"li",14),r.Kb(35,"select",15),r.Sb("ngModelChange",function(e){return t.pageLimit=e})("ngModelChange",function(){return t.onPageSelected()}),r.Kb(36,"option",16),r.vc(37,"5"),r.Jb(),r.Kb(38,"option",17),r.vc(39,"10"),r.Jb(),r.Kb(40,"option",18),r.vc(41,"20"),r.Jb(),r.Jb(),r.Jb(),r.Kb(42,"li",19),r.Kb(43,"button",20),r.Sb("click",function(){return t.prePage()}),r.Ib(44,"i",21),r.vc(45," Previous"),r.Jb(),r.Jb(),r.Kb(46,"li",22),r.Kb(47,"button",20),r.Sb("click",function(){return t.nextPage()}),r.vc(48,"Next "),r.Ib(49,"i",23),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb()),2&e&&(r.wb(27),r.bc("ngForOf",t.deviceServiceList),r.wb(8),r.bc("ngModel",t.pageLimit),r.wb(8),r.bc("disabled",1===t.pagination),r.wb(4),r.bc("disabled",t.pageLimit>t.deviceServiceList.length))},directives:[c.k,n.n,n.f,n.i,n.j,n.o],pipes:[c.d],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),e})();function se(e,t){if(1&e){const e=r.Lb();r.Kb(0,"div",37),r.Kb(1,"div",38),r.Kb(2,"button",39),r.Sb("click",function(){return r.oc(e),r.Vb().refresh()}),r.Kb(3,"span"),r.Ib(4,"i",40),r.vc(5,"Refresh"),r.Jb(),r.Jb(),r.Kb(6,"button",41),r.Kb(7,"span"),r.Ib(8,"i",42),r.vc(9,"Add"),r.Jb(),r.Jb(),r.Kb(10,"button",43),r.Sb("click",function(){return r.oc(e),r.Vb().edit()}),r.Kb(11,"span"),r.Ib(12,"i",44),r.vc(13,"Edit"),r.Jb(),r.Jb(),r.Kb(14,"button",45),r.Sb("click",function(){return r.oc(e),r.Vb().deleteConfirm()}),r.Kb(15,"span"),r.Ib(16,"i",46),r.vc(17,"Delete"),r.Jb(),r.Jb(),r.Jb(),r.Jb()}if(2&e){const e=r.Vb();r.wb(10),r.bc("disabled",1!==e.multiProfilesSelected.length),r.wb(4),r.bc("disabled",0===e.multiProfilesSelected.length)}}function ae(e,t){if(1&e){const e=r.Lb();r.Kb(0,"input",47),r.Sb("click",function(t){return r.oc(e),r.Vb().selectAll(t)}),r.Jb()}if(2&e){const e=r.Vb();r.bc("checked",e.isCheckedAll)}}function be(e,t){1&e&&(r.Kb(0,"th",8),r.vc(1,"AssociatedDevice"),r.Jb())}const le=function(e){return{profileName:e}};function de(e,t){if(1&e&&(r.Kb(0,"td",51),r.Kb(1,"a",52),r.Ib(2,"i",53),r.Jb(),r.Jb()),2&e){const e=r.Vb().$implicit;r.wb(1),r.bc("queryParams",r.hc(1,le,e.name))}}function ve(e,t){if(1&e){const e=r.Lb();r.Kb(0,"tr"),r.Kb(1,"td"),r.Kb(2,"input",48),r.Sb("click",function(i){r.oc(e);const c=t.$implicit;return r.Vb().selectOne(i,c.name)}),r.Jb(),r.Jb(),r.Kb(3,"td",49),r.vc(4),r.Jb(),r.Kb(5,"td",49),r.vc(6),r.Jb(),r.Kb(7,"td"),r.vc(8),r.Jb(),r.tc(9,de,3,3,"td",50),r.Kb(10,"td"),r.vc(11),r.Jb(),r.Kb(12,"td"),r.vc(13),r.Jb(),r.Kb(14,"td"),r.vc(15),r.Jb(),r.Jb()}if(2&e){const e=t.$implicit,i=r.Vb();r.zb("table-active",i.isChecked(e.name)),r.wb(2),r.cc("value",e.name),r.bc("checked",i.isChecked(e.name)),r.wb(2),r.wc(e.id),r.wb(2),r.wc(e.name),r.wb(2),r.wc(e.description),r.wb(1),r.bc("ngIf",i.associatedDeviceColumn),r.wb(2),r.wc(e.labels),r.wb(2),r.wc(e.manufacturer),r.wb(2),r.wc(e.model)}}let pe=(()=>{class e{constructor(e,t,i,c){this.metaSvc=e,this.msgSvc=t,this.route=i,this.router=c,this.associatedDeviceColumn=!0,this.toolbars=!0,this.enableSelectAll=!0,this.singleProfileSelectedEvent=new r.n,this.profileList=[],this.multiProfilesSelected=[],this.isCheckedAll=!1,this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.route.queryParams.subscribe(e=>{e.profileName?this.metaSvc.findProfileByName(e.profileName).subscribe(e=>{this.profileList=[],this.profileList.push(e.profile)}):this.findAllDeviceProfilesPagination()})}findAllDeviceProfilesPagination(){this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(e=>{this.profileList=e.profiles})}onSingleProfileSelectedEmitter(){this.singleProfileSelectedEvent.emit(this.singleProfileSelected)}refresh(){this.metaSvc.allDeviceProfolesPagination(0,this.pageLimit).subscribe(e=>{this.profileList=e.profiles,this.msgSvc.success("refresh"),this.pagination=1,this.resetCheckbox()})}onPageSelected(){this.resetPagination(),this.setPagination(),this.findAllDeviceProfilesPagination()}prePage(){this.setPagination(-1),this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(e=>{this.profileList=e.profiles})}nextPage(){this.setPagination(1),this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(e=>{this.profileList=e.profiles})}setPageLimit(e){this.pageLimit=e}setPagination(e){1===e?this.pagination+=1:-1===e&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit,this.resetCheckbox()}resetPagination(){this.pagination=1,this.resetCheckbox()}resetCheckbox(){this.isCheckedAll=!1,this.multiProfilesSelected=[]}edit(){this.router.navigate(["../edit-profile"],{relativeTo:this.route,queryParams:{profileName:this.multiProfilesSelected[0]}})}deleteConfirm(){$("#deleteConfirmDialog").modal("show")}delete(){this.multiProfilesSelected.forEach(e=>{this.metaSvc.deleteProfileByName(e).subscribe(()=>{this.multiProfilesSelected=[],this.profileList.forEach((t,i)=>{t.name==e&&(this.profileList.splice(i,1),this.msgSvc.success("delete","  Name: "+t.name))})})}),$("#deleteConfirmDialog").modal("hide")}isSingleProfileChecked(e){var t;return(null===(t=this.singleProfileSelected)||void 0===t?void 0:t.name)===e}selectSingleProfile(e,t){e.target.checked?this.profileList.forEach(e=>{e.name===t&&(this.singleProfileSelected=e)}):this.singleProfileSelected=void 0,this.onSingleProfileSelectedEmitter()}selectAll(e){if(e.target.checked)return this.multiProfilesSelected=[],this.profileList.forEach(e=>{this.multiProfilesSelected.push(e.name),this.isChecked(e.name)}),void(this.isCheckedAll=!0);this.isCheckedAll=!1,this.multiProfilesSelected=[],this.profileList.forEach(e=>{this.isChecked(e.name)})}isChecked(e){return this.enableSelectAll?this.multiProfilesSelected.findIndex(t=>t===e)>=0:this.isSingleProfileChecked(e)}selectOne(e,t){if(this.enableSelectAll)return e.target.checked?(this.multiProfilesSelected.push(t),void(this.multiProfilesSelected.length===this.profileList.length&&(this.isCheckedAll=!0))):(this.isCheckedAll=!1,this.isChecked(t),void this.multiProfilesSelected.splice(this.multiProfilesSelected.indexOf(t),1));this.selectSingleProfile(e,t)}}return e.\u0275fac=function(t){return new(t||e)(r.Hb(a.a),r.Hb(b.a),r.Hb(o.a),r.Hb(o.e))},e.\u0275cmp=r.Bb({type:e,selectors:[["app-device-profile-list"]],inputs:{associatedDeviceColumn:"associatedDeviceColumn",toolbars:"toolbars",enableSelectAll:"enableSelectAll",singleProfileSelected:"singleProfileSelected"},outputs:{singleProfileSelectedEvent:"singleProfileSelectedEvent"},decls:64,vars:7,consts:[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","text-danger","mr-2"],[1,"card-body","p-0"],["class","bg-light px-2 py-2",4,"ngIf"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],["type","checkbox",3,"checked","click",4,"ngIf"],["scope","col",4,"ngIf"],[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"form-control",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left"],[1,"page-item"],[1,"fa","fa-angle-double-right"],["id","deleteConfirmDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteConfirmDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteConfirmDialogLabel",1,"modal-title","text-danger"],[1,"fa","fa-warning"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"bg-light","px-2","py-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","mr-1"],["type","button","routerLink","../add-profile",1,"btn","btn-info"],[1,"fa","fa-plus","mr-1"],["type","button","data-toggle","tooltip","data-placement","top","title","only one should be selected",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-edit","mr-1"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash","mr-1"],["type","checkbox",3,"checked","click"],["type","checkbox",3,"value","checked","click"],[1,"user-select-all"],["class","text-center",4,"ngIf"],[1,"text-center"],["routerLink","../../device-center",1,"badge","badge-pill","badge-primary",3,"queryParams"],[1,"fa","fa-sitemap"]],template:function(e,t){1&e&&(r.Kb(0,"div",0),r.Kb(1,"div",1),r.Ib(2,"i",2),r.Kb(3,"span"),r.vc(4,"Device Profile List"),r.Jb(),r.Jb(),r.Kb(5,"div",3),r.tc(6,se,18,2,"div",4),r.Kb(7,"div",5),r.Kb(8,"table",6),r.Kb(9,"thead",7),r.Kb(10,"tr"),r.Kb(11,"th",8),r.tc(12,ae,1,1,"input",9),r.Jb(),r.Kb(13,"th",8),r.vc(14,"ID"),r.Jb(),r.Kb(15,"th",8),r.vc(16,"Name"),r.Jb(),r.Kb(17,"th",8),r.vc(18,"Description"),r.Jb(),r.tc(19,be,2,0,"th",10),r.Kb(20,"th",8),r.vc(21,"Labels"),r.Jb(),r.Kb(22,"th",8),r.vc(23,"Manufacturer"),r.Jb(),r.Kb(24,"th",8),r.vc(25,"Model"),r.Jb(),r.Jb(),r.Jb(),r.Kb(26,"tbody"),r.tc(27,ve,16,11,"tr",11),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(28,"div",12),r.Kb(29,"nav",13),r.Kb(30,"ul",14),r.Kb(31,"li",15),r.Kb(32,"span",16),r.vc(33,"items per page"),r.Jb(),r.Jb(),r.Kb(34,"li",17),r.Kb(35,"select",18),r.Sb("ngModelChange",function(e){return t.pageLimit=e})("ngModelChange",function(){return t.onPageSelected()}),r.Kb(36,"option",19),r.vc(37,"5"),r.Jb(),r.Kb(38,"option",20),r.vc(39,"10"),r.Jb(),r.Kb(40,"option",21),r.vc(41,"20"),r.Jb(),r.Jb(),r.Jb(),r.Kb(42,"li",22),r.Kb(43,"button",23),r.Sb("click",function(){return t.prePage()}),r.Ib(44,"i",24),r.vc(45," Previous"),r.Jb(),r.Jb(),r.Kb(46,"li",25),r.Kb(47,"button",23),r.Sb("click",function(){return t.nextPage()}),r.vc(48,"Next "),r.Ib(49,"i",26),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(50,"div",27),r.Kb(51,"div",28),r.Kb(52,"div",29),r.Kb(53,"div",30),r.Kb(54,"h5",31),r.Ib(55,"i",32),r.vc(56," Warning "),r.Jb(),r.Jb(),r.Kb(57,"div",33),r.vc(58," The data will be permanently erased!!! Are you sure to execute delete operation\uff1f "),r.Jb(),r.Kb(59,"div",34),r.Kb(60,"button",35),r.vc(61,"Cancel"),r.Jb(),r.Kb(62,"button",36),r.Sb("click",function(){return t.delete()}),r.vc(63,"Confirm"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb()),2&e&&(r.wb(6),r.bc("ngIf",t.toolbars),r.wb(6),r.bc("ngIf",t.enableSelectAll),r.wb(7),r.bc("ngIf",t.associatedDeviceColumn),r.wb(8),r.bc("ngForOf",t.profileList),r.wb(8),r.bc("ngModel",t.pageLimit),r.wb(8),r.bc("disabled",1===t.pagination),r.wb(4),r.bc("disabled",t.pageLimit>t.profileList.length))},directives:[c.l,c.k,n.n,n.f,n.i,n.j,n.o,o.f,o.h],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),e})();function ue(e,t){1&e&&r.Ib(0,"i",24)}function he(e,t){1&e&&r.Ib(0,"i",24)}function me(e,t){1&e&&r.Ib(0,"i",24)}function fe(e,t){1&e&&r.Ib(0,"i",24)}function ge(e,t){1&e&&r.Ib(0,"i",24)}function Ke(e,t){if(1&e){const e=r.Lb();r.Kb(0,"button",25),r.Sb("click",function(){return r.oc(e),r.Vb().previous()}),r.Ib(1,"i",26),r.vc(2," Previous"),r.Jb()}}function Je(e,t){if(1&e){const e=r.Lb();r.Kb(0,"button",27),r.Sb("click",function(){return r.oc(e),r.Vb().next()}),r.vc(1,"Next "),r.Ib(2,"i",28),r.Jb()}if(2&e){const e=r.Vb();r.bc("disabled",e.stepStateLock())}}function Se(e,t){if(1&e){const e=r.Lb();r.Kb(0,"button",29),r.Sb("click",function(){return r.oc(e),r.Vb().skip()}),r.vc(1,"Skip "),r.Ib(2,"i",30),r.Jb()}}function we(e,t){if(1&e){const e=r.Lb();r.Kb(0,"button",31),r.Sb("click",function(){return r.oc(e),r.Vb().submit()}),r.Ib(1,"i",32),r.vc(2," Submit"),r.Jb()}if(2&e){const e=r.Vb();r.bc("disabled",!e.protocolName)}}function ye(e,t){if(1&e){const e=r.Lb();r.Kb(0,"div",33),r.Kb(1,"app-device-service-list",34),r.Sb("singleDeviceSvcSelectedEvent",function(t){return r.oc(e),r.Vb().onSingleDeviceSvcSelected(t)}),r.Jb(),r.Jb()}if(2&e){const e=r.Vb();r.wb(1),r.bc("deviceSvcSelected",e.selectedSvc)}}function Pe(e,t){if(1&e){const e=r.Lb();r.Kb(0,"div",33),r.Kb(1,"app-device-profile-list",35),r.Sb("singleProfileSelectedEvent",function(t){return r.oc(e),r.Vb().onSingleProfileSelected(t)}),r.Jb(),r.Jb()}if(2&e){const e=r.Vb();r.wb(1),r.bc("singleProfileSelected",e.selectedProfile)("enableSelectAll",!1)("toolbars",!1)("associatedDeviceColumn",!1)}}function Ce(e,t){if(1&e){const e=r.Lb();r.Kb(0,"form",36),r.Kb(1,"div",37),r.Kb(2,"label",38),r.vc(3,"Name"),r.Jb(),r.Kb(4,"div",39),r.Kb(5,"input",40),r.Sb("ngModelChange",function(t){return r.oc(e),r.Vb().newDevice.name=t}),r.Jb(),r.Kb(6,"div",41),r.Kb(7,"small"),r.vc(8,"the device name can't be empty!"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(9,"div",42),r.Kb(10,"label",43),r.vc(11,"Description"),r.Jb(),r.Kb(12,"div",39),r.Kb(13,"input",44),r.Sb("ngModelChange",function(t){return r.oc(e),r.Vb().newDevice.description=t}),r.Jb(),r.Jb(),r.Jb(),r.Kb(14,"div",42),r.Kb(15,"label",45),r.vc(16,"Labels"),r.Jb(),r.Kb(17,"div",39),r.Kb(18,"input",46),r.Sb("ngModelChange",function(t){return r.oc(e),r.Vb().deviceLabels=t}),r.Jb(),r.Jb(),r.Jb(),r.Kb(19,"div",42),r.Kb(20,"label",47),r.vc(21,"AdminState"),r.Jb(),r.Kb(22,"div",39),r.Kb(23,"select",48),r.Sb("ngModelChange",function(t){return r.oc(e),r.Vb().newDevice.adminState=t}),r.Kb(24,"option",49),r.vc(25,"UNLOCKED"),r.Jb(),r.Kb(26,"option",50),r.vc(27,"LOCKED"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(28,"div",42),r.Kb(29,"label",51),r.vc(30,"OperatingState"),r.Jb(),r.Kb(31,"div",39),r.Kb(32,"select",52),r.Sb("ngModelChange",function(t){return r.oc(e),r.Vb().newDevice.operatingState=t}),r.Kb(33,"option",53),r.vc(34,"UP"),r.Jb(),r.Kb(35,"option",54),r.vc(36,"DOWN"),r.Jb(),r.Kb(37,"option",54),r.vc(38,"UNKNOWN"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb()}if(2&e){const e=r.Vb();r.wb(5),r.zb("is-invalid",!e.newDevice.name)("is-valid",e.newDevice.name),r.bc("ngModel",e.newDevice.name),r.wb(8),r.bc("ngModel",e.newDevice.description),r.wb(5),r.bc("ngModel",e.deviceLabels),r.wb(5),r.bc("ngModel",e.newDevice.adminState),r.wb(9),r.bc("ngModel",e.newDevice.operatingState)}}function De(e,t){if(1&e&&(r.Kb(0,"option",80),r.vc(1),r.Jb()),2&e){const e=t.$implicit;r.cc("value",e),r.wb(1),r.wc(e)}}function Ie(e,t){if(1&e){const e=r.Lb();r.Kb(0,"div",62),r.Kb(1,"div",57),r.Kb(2,"form"),r.Kb(3,"div",37),r.Kb(4,"label",63),r.vc(5,"Interval"),r.Jb(),r.Kb(6,"div",39),r.Kb(7,"div",64),r.Kb(8,"input",65),r.Sb("ngModelChange",function(e){return t.$implicit.interval=e}),r.Jb(),r.Kb(9,"div",66),r.Kb(10,"select",67),r.Sb("ngModelChange",function(e){return t.$implicit.unit=e}),r.Kb(11,"option",68),r.vc(12,"millisecond"),r.Jb(),r.Kb(13,"option",69),r.vc(14,"second"),r.Jb(),r.Kb(15,"option",70),r.vc(16,"minute"),r.Jb(),r.Kb(17,"option",71),r.vc(18,"hour"),r.Jb(),r.Jb(),r.Jb(),r.Kb(19,"div",72),r.vc(20," can only be a pure integer number "),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(21,"div",42),r.Kb(22,"label",63),r.vc(23,"onchange"),r.Jb(),r.Kb(24,"div",39),r.Kb(25,"select",73),r.Sb("ngModelChange",function(e){return t.$implicit.onChange=e}),r.Kb(26,"option",74),r.vc(27,"true"),r.Jb(),r.Kb(28,"option",75),r.vc(29,"false"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(30,"div",42),r.Kb(31,"label",63),r.vc(32,"resource"),r.Jb(),r.Kb(33,"div",39),r.Kb(34,"select",76),r.Sb("ngModelChange",function(e){return t.$implicit.resource=e}),r.tc(35,De,2,2,"option",77),r.Jb(),r.Kb(36,"div",72),r.vc(37," resource can't be empty "),r.Jb(),r.Jb(),r.Jb(),r.Kb(38,"button",78),r.Sb("click",function(){r.oc(e);const i=t.$implicit;return r.Vb(2).removeAutoEvent(i)}),r.Ib(39,"i",79),r.vc(40," Remove"),r.Jb(),r.Jb(),r.Jb(),r.Jb()}if(2&e){const e=t.$implicit,i=r.Vb(2);r.wb(8),r.zb("is-invalid",!i.eventIntervalNumType(e.interval))("is-valid",i.eventIntervalNumType(e.interval)),r.bc("ngModel",e.interval),r.wb(2),r.bc("ngModel",e.unit),r.wb(15),r.bc("ngModel",e.onChange),r.wb(9),r.zb("is-invalid",!e.resource)("is-valid",e.resource),r.bc("ngModel",e.resource),r.wb(1),r.bc("ngForOf",i.autoEventResourceNameSet)}}function Ne(e,t){if(1&e){const e=r.Lb();r.Kb(0,"div",55),r.Kb(1,"div",1),r.Kb(2,"span",56),r.vc(3," this step is optional, you can skip it then use scheduler service to create schedule job."),r.Jb(),r.Jb(),r.Kb(4,"div",57),r.Kb(5,"p",58),r.Ib(6,"span",59),r.Kb(7,"span",60),r.Sb("click",function(){return r.oc(e),r.Vb().addAutoEvent()}),r.vc(8,"Add More AutoEvent"),r.Jb(),r.Jb(),r.tc(9,Ie,41,13,"div",61),r.Jb(),r.Jb()}if(2&e){const e=r.Vb();r.wb(9),r.bc("ngForOf",e.autoEventsInternal)}}function ke(e,t){1&e&&r.Ib(0,"div")}const Ee=function(){return{standalone:!0}};function Oe(e,t){if(1&e){const e=r.Lb();r.Kb(0,"div"),r.Kb(1,"form",97),r.Kb(2,"div",98),r.Kb(3,"div",99),r.Kb(4,"span",100),r.vc(5,"PropertyKey"),r.Jb(),r.Jb(),r.Ib(6,"input",101),r.Jb(),r.Kb(7,"div",102),r.Ib(8,"i",28),r.Jb(),r.Kb(9,"div",98),r.Kb(10,"div",99),r.Kb(11,"span",100),r.vc(12,"PropertyVaule"),r.Jb(),r.Jb(),r.Kb(13,"input",103),r.Sb("ngModelChange",function(i){r.oc(e);const c=t.$implicit;return r.Vb(4).selectedAvailTemplate[c]=i}),r.Jb(),r.Jb(),r.Jb(),r.Jb()}if(2&e){const e=t.$implicit,i=r.Vb(4);r.wb(6),r.bc("value",e),r.wb(7),r.cc("name",i.selectedAvailTemplate[e]),r.bc("ngModel",i.selectedAvailTemplate[e])("ngModelOptions",r.gc(4,Ee))}}function xe(e,t){if(1&e&&(r.Kb(0,"div"),r.tc(1,Oe,14,5,"div",96),r.Jb()),2&e){const e=r.Vb(3);r.wb(1),r.bc("ngForOf",e.selectedAvailTemplateProperties)}}function Le(e,t){1&e&&(r.Kb(0,"h5",107),r.Ib(1,"i",108),r.vc(2," this device service doesn't need to set protocol properties. "),r.Jb())}function Me(e,t){if(1&e&&(r.Kb(0,"div"),r.Ib(1,"span",104),r.Kb(2,"span",105),r.vc(3," all avaliable protocol templates refer to the device service released by edgex, such as device-virtual, device-rest, device-mqtt, device-modbus "),r.Jb(),r.Jb(),r.tc(4,Le,3,0,"h5",106)),2&e){const e=r.Vb(3);r.wb(4),r.bc("ngIf",e.protocolName)}}function Ae(e,t){if(1&e){const e=r.Lb();r.Kb(0,"div",86),r.Kb(1,"div",87),r.Kb(2,"div",88),r.Kb(3,"label"),r.vc(4,"Protocol Name"),r.Jb(),r.Kb(5,"select",89),r.Sb("ngModelChange",function(t){return r.oc(e),r.Vb(2).protocolName=t})("ngModelChange",function(){return r.oc(e),r.Vb(2).onAvailProtocolSelect()}),r.Kb(6,"option",90),r.vc(7,"device-mqtt"),r.Jb(),r.Kb(8,"option",91),r.vc(9,"device-rest"),r.Jb(),r.Kb(10,"option",91),r.vc(11,"device-virtual"),r.Jb(),r.Kb(12,"option",92),r.vc(13,"device-modbus-tcp"),r.Jb(),r.Kb(14,"option",93),r.vc(15,"device-modbus-rtu"),r.Jb(),r.Jb(),r.Kb(16,"div",72),r.Kb(17,"small"),r.vc(18,"the protocol name can't be empty!"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(19,"div",39),r.tc(20,xe,2,1,"div",94),r.tc(21,Me,5,1,"ng-template",null,95,r.uc),r.Jb(),r.Jb()}if(2&e){const e=r.lc(22),t=r.Vb(2);r.wb(5),r.zb("is-invalid",!t.protocolName)("is-valid",t.protocolName),r.bc("ngModel",t.protocolName),r.wb(15),r.bc("ngIf",0!==t.selectedAvailTemplateProperties.length)("ngIfElse",e)}}function $e(e,t){if(1&e){const e=r.Lb();r.Kb(0,"div"),r.Kb(1,"form",97),r.Kb(2,"div",98),r.Kb(3,"div",99),r.Kb(4,"span",100),r.vc(5,"PropertyKey"),r.Jb(),r.Jb(),r.Kb(6,"input",113),r.Sb("ngModelChange",function(e){return t.$implicit.key=e}),r.Jb(),r.Jb(),r.Kb(7,"div",102),r.Ib(8,"i",28),r.Jb(),r.Kb(9,"div",98),r.Kb(10,"div",99),r.Kb(11,"span",100),r.vc(12,"PropertyValue"),r.Jb(),r.Jb(),r.Kb(13,"input",114),r.Sb("ngModelChange",function(e){return t.$implicit.value=e}),r.Jb(),r.Jb(),r.Kb(14,"div",115),r.Kb(15,"button",78),r.Sb("click",function(){r.oc(e);const i=t.$implicit;return r.Vb(3).removeProtocolProperty(i)}),r.Ib(16,"i",79),r.Jb(),r.Jb(),r.Jb(),r.Jb()}if(2&e){const e=t.$implicit;r.wb(6),r.bc("ngModel",e.key),r.wb(7),r.bc("ngModel",e.value)}}function Ve(e,t){if(1&e){const e=r.Lb();r.Kb(0,"div",86),r.Kb(1,"div",109),r.Kb(2,"div",88),r.Kb(3,"label"),r.vc(4,"Protocol Name"),r.Jb(),r.Kb(5,"input",110),r.Sb("ngModelChange",function(t){return r.oc(e),r.Vb(2).protocolName=t}),r.Jb(),r.Kb(6,"div",72),r.Kb(7,"small"),r.vc(8,"the protocol name can't be empty!"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(9,"div",111),r.Kb(10,"div",112),r.Kb(11,"div"),r.Kb(12,"p",58),r.Ib(13,"span",59),r.Kb(14,"span",60),r.Sb("click",function(){return r.oc(e),r.Vb(2).addProtocolProperty()}),r.vc(15,"Add Protocol Property"),r.Jb(),r.Jb(),r.Jb(),r.tc(16,$e,17,2,"div",96),r.Jb(),r.Jb(),r.Jb()}if(2&e){const e=r.Vb(2);r.wb(5),r.zb("is-invalid",!e.protocolName)("is-valid",e.protocolName),r.bc("ngModel",e.protocolName),r.wb(11),r.bc("ngForOf",e.protocolPropertyList)}}function Be(e,t){if(1&e){const e=r.Lb();r.Kb(0,"div",55),r.Kb(1,"div",57),r.Kb(2,"p",81),r.Ib(3,"span",59),r.Kb(4,"span",60),r.Sb("click",function(){return r.oc(e),r.Vb().setProtocolTemplate("avaliable")}),r.vc(5,"Avaliable Protocol Templates"),r.Jb(),r.Jb(),r.Kb(6,"p",82),r.Ib(7,"span",59),r.Kb(8,"span",60),r.Sb("click",function(){return r.oc(e),r.Vb().setProtocolTemplate("custom")}),r.vc(9,"Custom Protocol Templates"),r.Jb(),r.Jb(),r.tc(10,ke,1,0,"div",83),r.tc(11,Ae,23,7,"ng-template",null,84,r.uc),r.tc(13,Ve,17,6,"ng-template",null,85,r.uc),r.Jb(),r.Jb()}if(2&e){const e=r.lc(12),t=r.lc(14),i=r.Vb();r.wb(2),r.zb("badge-primary","avaliable"===i.protocolTemplateModel)("badge-secondary","avaliable"!==i.protocolTemplateModel),r.wb(4),r.zb("badge-primary","custom"===i.protocolTemplateModel)("badge-secondary","custom"!==i.protocolTemplateModel),r.wb(4),r.bc("ngIf","custom"===i.protocolTemplateModel)("ngIfThen",t)("ngIfElse",e)}}class Ue{constructor(){this.Schema="",this.Host="",this.Port="",this.User="",this.Password="",this.ClientId="",this.Topic=""}}class Te{constructor(){this.Address="",this.Port="",this.UnitID=""}}class je{constructor(){this.Address="",this.UnitID="",this.BaudRate="",this.DataBits="",this.StopBits="",this.Parity=""}}let Re=(()=>{class e{constructor(e,t,i,c){this.metaSvc=e,this.msgSvc=t,this.router=i,this.route=c,this.deviceLabels="",this.currentStep=0,this.selectedClass="text-white rounded px-2 bg-success  font-weight-bold",this.noSelectedClass="text-white rounded px-2 bg-secondary  font-weight-bold",this.autoEventResourceNameSet=[],this.autoEventsInternal=[{interval:"",onChange:!1,resource:"",unit:"ms"}],this.protocolTemplateModel="avaliable",this.protocolName="",this.protocolProperty={key:null,value:null},this.protocolPropertyList=[{key:null,value:null}],this.selectedAvailTemplateProperties=[],this.newDevice={adminState:"UNLOCKED",operatingState:"UP"}}ngOnInit(){}onSingleProfileSelected(e){this.selectedProfile=e,this.setupAutoEventResourceNameSet(this.selectedProfile)}setupAutoEventResourceNameSet(e){e.deviceResources.forEach((e,t)=>{this.autoEventResourceNameSet.push(e.name)}),e.deviceCommands.forEach((e,t)=>{this.autoEventResourceNameSet.push(e.name)})}onSingleDeviceSvcSelected(e){this.selectedSvc=e}onAvailProtocolSelect(){switch(this.protocolName){case"mqtt":return this.selectedAvailTemplate=new Ue,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));case"modbus-tcp":return this.selectedAvailTemplate=new Te,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));case"modbus-rtu":return this.selectedAvailTemplate=new je,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));default:return this.selectedAvailTemplate={},void(this.selectedAvailTemplateProperties=[])}}cleanSelectedAvailTemplateProperties(){this.selectedAvailTemplateProperties=[]}setAutoEventInternal(e){let t;e.forEach(e=>{let i=0;e.interval.indexOf("ms")?i=e.interval.indexOf("ms"):e.interval.indexOf("s")?i=e.interval.indexOf("s"):e.interval.indexOf("m")?i=e.interval.indexOf("m"):e.interval.indexOf("h")&&(i=e.interval.indexOf("h")),t=e.interval.substring(i),this.autoEventsInternal.push({interval:e.interval.slice(0,i),onChange:e.onChange,resource:e.sourceName,unit:t})})}eventIntervalNumType(e){return!isNaN(e)&&parseFloat(e)===parseInt(e)}setProtocolTemplate(e){this.protocolName="",this.cleanSelectedAvailTemplateProperties(),this.cleanCustomProtocolProperty(),this.protocolTemplateModel=e}addProtocolProperty(){this.protocolPropertyList.push({key:"",value:""})}removeProtocolProperty(e){this.protocolPropertyList.splice(this.protocolPropertyList.indexOf(e),1)}cleanCustomProtocolProperty(){this.protocolPropertyList=[],this.protocolPropertyList.push({key:"",value:""})}addAutoEvent(){this.autoEventsInternal.push({interval:"",onChange:!1,resource:"",unit:"ms"})}removeAutoEvent(e){this.autoEventsInternal.splice(this.autoEventsInternal.indexOf(e),1)}stepStateLock(){switch(this.currentStep){case 0:return void 0===this.selectedSvc;case 1:return void 0===this.selectedProfile;case 2:return""===this.newDevice.name;case 3:let e=!1;return this.autoEventsInternal.forEach(t=>{""!==t.resource&&this.eventIntervalNumType(t.interval)||(e=!0)}),e;case 4:default:return!1}}skip(){this.autoEventsInternal=[],this.next()}next(){this.currentStep+=1}previous(){this.currentStep=this.currentStep-1}changeStep(){this.currentStep+=1}submit(){var e,t,i;let c={},n={};"custom"===this.protocolTemplateModel?(this.protocolPropertyList.forEach(e=>{n[e.key]=e.value}),c[this.protocolName]=n):c[this.protocolName]=Object.assign({},this.selectedAvailTemplate);let o=[];this.autoEventsInternal.forEach(e=>{o.push({interval:`${parseInt(e.interval)}${e.unit}`,onChange:!!e.onChange,sourceName:e.resource})}),this.newDevice.labels=null===(e=this.deviceLabels)||void 0===e?void 0:e.split(","),this.newDevice.serviceName=null===(t=this.selectedSvc)||void 0===t?void 0:t.name,this.newDevice.profileName=null===(i=this.selectedProfile)||void 0===i?void 0:i.name,this.newDevice.protocols=c,this.newDevice.autoEvents=o,this.metaSvc.addDevice(this.newDevice).subscribe(()=>{this.msgSvc.success("Add device","name: "+this.newDevice.name),this.router.navigate(["../device-list"],{relativeTo:this.route})})}}return e.\u0275fac=function(t){return new(t||e)(r.Hb(a.a),r.Hb(b.a),r.Hb(o.e),r.Hb(o.a))},e.\u0275cmp=r.Bb({type:e,selectors:[["app-add-device"]],decls:47,vars:20,consts:[[1,"card"],[1,"card-header"],[1,"font-weight-bold"],[1,"fa","fa-lightbulb-o","fa-lg","mr-2","text-danger"],[1,"text-secondary"],[1,"card-header","bg-light"],["aria-label","breadcrumb",1,"mb-0","p-0"],[1,"breadcrumb","p-1","mb-0","bg-light"],[1,"breadcrumb-item"],[3,"ngClass"],["class","fa fa-check",4,"ngIf"],[1,"breadcrumb-item","active"],["class","btn btn-info btn-sm",3,"click",4,"ngIf"],["class","btn btn-primary btn-sm float-right",3,"disabled","click",4,"ngIf","ngIfElse"],["class","btn btn-success btn-sm float-right mr-2",3,"click",4,"ngIf"],["stepDone",""],[1,"card-body","p-0"],[3,"ngSwitch"],[3,"ngSwitchCase"],["SelectDeviceService",""],["SelectDeviceProfile",""],["DevicePrimary",""],["CreateAutoEvent",""],["CreateDeviceProtocol",""],[1,"fa","fa-check"],[1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-long-arrow-left"],[1,"btn","btn-primary","btn-sm","float-right",3,"disabled","click"],[1,"fa","fa-long-arrow-right"],[1,"btn","btn-success","btn-sm","float-right","mr-2",3,"click"],[1,"fa","fa-share"],[1,"btn","btn-success","btn-sm","ml-4","float-right",3,"disabled","click"],[1,"fa","fa-save"],[1,"p-2"],[3,"deviceSvcSelected","singleDeviceSvcSelectedEvent"],[3,"singleProfileSelected","enableSelectAll","toolbars","associatedDeviceColumn","singleProfileSelectedEvent"],[1,"px-5","py-4"],[1,"form-group","row","has-validation"],["for","deviceName","required","",1,"col-md-2","col-form-label"],[1,"col-md-10"],["type","text","id","validationDeviceNameFeedback","name","deviceName",1,"form-control",3,"ngModel","ngModelChange"],["id","validationDeviceNameFeedback",1,"invalid-feedback"],[1,"form-group","row"],["for","deviceDesc",1,"col-md-2","col-form-label"],["type","text","name","deviceDescription",1,"form-control",3,"ngModel","ngModelChange"],["for","deviceLabels",1,"col-md-2","col-form-label"],["type","text","name","deviceLabels","placeholder","Multiple Labels are separated by commas: label1,label2,label3",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],["name","deviceAdminState",1,"form-control",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"],["for","operatingState",1,"col-md-2","col-form-label"],["name","deviceOperatingState",1,"form-control",3,"ngModel","ngModelChange"],["value","UP"],["value","DOWN"],[1,"card","border-0"],[1,"fa","fa-info-circle","text-warning","font-weight-bold"],[1,"card-body"],[1,"badge","badge-secondary","font-weight-bold"],[1,"fa","fa-plus-circle","mr-2"],["role","button",1,"user-select-none",3,"click"],["class","card mb-3",4,"ngFor","ngForOf"],[1,"card","mb-3"],[1,"col-md-2","col-form-label"],[1,"input-group","mb-3",2,"width","250px"],["type","text","name","interval","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["name","eventIntervalUnit","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","ms"],["value","s"],["value","m"],["value","h"],[1,"invalid-feedback"],["name","onchange",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],["value","true"],["value","false"],["name","resource","required","",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"],[3,"value"],[1,"badge","font-weight-bold","mr-3"],[1,"badge","font-weight-bold"],[4,"ngIf","ngIfThen","ngIfElse"],["avaliProtocolTemplate",""],["customProtocolTemplate",""],[1,"row","border","border-secondary","p-2","rounded-lg","mx-1"],[1,"col-md-2","border-right","border-info"],[1,"form-group"],["type","text","name","protocolName","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","mqtt"],["value","other"],["value","modbus-tcp"],["value","modbus-rtu"],[4,"ngIf","ngIfElse"],["noAvailProperty",""],[4,"ngFor","ngForOf"],[1,"form-inline","mb-1"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","disabled","",1,"form-control",2,"width","300px",3,"value"],[1,"form-group","mx-2"],["type","text",1,"form-control",2,"width","300px",3,"name","ngModel","ngModelOptions","ngModelChange"],[1,"fa","fa-info-circle","fa-lg","text-success","font-weight-bold","mr-1"],[1,"text-muted"],["class","text-warning",4,"ngIf"],[1,"text-warning"],[1,"fa","fa-warning"],[1,"col-md-2","col-lg-2","border-right","border-info"],["type","text","name","protocolName",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-10","col-lg-10"],[1,""],["type","text","name","propertyKey",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],["type","text","name","PropertyValue",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"input-group","ml-2"]],template:function(e,t){if(1&e&&(r.Kb(0,"div",0),r.Kb(1,"div",1),r.Kb(2,"span",2),r.Ib(3,"span",3),r.Kb(4,"span",4),r.vc(5,"Add Device Wizard"),r.Jb(),r.Jb(),r.Jb(),r.Kb(6,"div",5),r.Kb(7,"nav",6),r.Kb(8,"ol",7),r.Kb(9,"li",8),r.Kb(10,"span",9),r.vc(11,"SelectDeviceService "),r.tc(12,ue,1,0,"i",10),r.Jb(),r.Jb(),r.Kb(13,"li",8),r.Kb(14,"span",9),r.vc(15,"SelectDeviceProfile "),r.tc(16,he,1,0,"i",10),r.Jb(),r.Jb(),r.Kb(17,"li",8),r.Kb(18,"span",9),r.vc(19,"DevicePrimary "),r.tc(20,me,1,0,"i",10),r.Jb(),r.Jb(),r.Kb(21,"li",8),r.Kb(22,"span",9),r.vc(23,"CreateAutoEvent "),r.tc(24,fe,1,0,"i",10),r.Jb(),r.Jb(),r.Kb(25,"li",11),r.Kb(26,"span",9),r.vc(27,"CreateDeviceProtocol "),r.tc(28,ge,1,0,"i",10),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(29,"div",1),r.tc(30,Ke,3,0,"button",12),r.tc(31,Je,3,1,"button",13),r.tc(32,Se,3,0,"button",14),r.tc(33,we,3,1,"ng-template",null,15,r.uc),r.Jb(),r.Kb(35,"div",16),r.Kb(36,"div",17),r.tc(37,ye,2,1,"ng-template",18,19,r.uc),r.tc(39,Pe,2,4,"ng-template",18,20,r.uc),r.tc(41,Ce,39,9,"ng-template",18,21,r.uc),r.tc(43,Ne,10,1,"ng-template",18,22,r.uc),r.tc(45,Be,15,11,"ng-template",18,23,r.uc),r.Jb(),r.Jb(),r.Jb()),2&e){const e=r.lc(34);r.wb(10),r.bc("ngClass",t.currentStep>=0?t.selectedClass:t.noSelectedClass),r.wb(2),r.bc("ngIf",t.currentStep>=1),r.wb(2),r.bc("ngClass",t.currentStep>=1?t.selectedClass:t.noSelectedClass),r.wb(2),r.bc("ngIf",t.currentStep>=2),r.wb(2),r.bc("ngClass",t.currentStep>=2?t.selectedClass:t.noSelectedClass),r.wb(2),r.bc("ngIf",t.currentStep>=3),r.wb(2),r.bc("ngClass",t.currentStep>=3?t.selectedClass:t.noSelectedClass),r.wb(2),r.bc("ngIf",t.currentStep>=4),r.wb(2),r.bc("ngClass",t.currentStep>=4?t.selectedClass:t.noSelectedClass),r.wb(2),r.bc("ngIf",t.currentStep>=5),r.wb(2),r.bc("ngIf",t.currentStep),r.wb(1),r.bc("ngIf",4>t.currentStep)("ngIfElse",e),r.wb(1),r.bc("ngIf",3===t.currentStep),r.wb(4),r.bc("ngSwitch",t.currentStep),r.wb(1),r.bc("ngSwitchCase",0),r.wb(2),r.bc("ngSwitchCase",1),r.wb(2),r.bc("ngSwitchCase",2),r.wb(2),r.bc("ngSwitchCase",3),r.wb(2),r.bc("ngSwitchCase",4)}},directives:[c.j,c.l,c.n,c.o,re,pe,n.p,n.g,n.h,n.a,n.f,n.i,n.n,n.j,n.o,c.k,n.m],styles:['.breadcrumb[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]:before{color:inherit;font-weight:inherit;content:">>";padding:0 5px}.btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}']}),e})();function Fe(e,t){if(1&e){const e=r.Lb();r.Kb(0,"div"),r.Kb(1,"form",40),r.Kb(2,"div",41),r.Kb(3,"div",42),r.Kb(4,"span",43),r.vc(5,"PropertyKey"),r.Jb(),r.Jb(),r.Kb(6,"input",44),r.Sb("ngModelChange",function(e){return t.$implicit.key=e}),r.Jb(),r.Jb(),r.Kb(7,"div",45),r.Ib(8,"i",46),r.Jb(),r.Kb(9,"div",41),r.Kb(10,"div",42),r.Kb(11,"span",43),r.vc(12,"PropertyValue"),r.Jb(),r.Jb(),r.Kb(13,"input",47),r.Sb("ngModelChange",function(e){return t.$implicit.value=e}),r.Jb(),r.Jb(),r.Kb(14,"div",48),r.Kb(15,"button",49),r.Sb("click",function(){r.oc(e);const i=t.$implicit;return r.Vb(2).removeProtocolProperty(i)}),r.Ib(16,"i",50),r.Jb(),r.Jb(),r.Jb(),r.Jb()}if(2&e){const e=t.$implicit;r.wb(6),r.bc("ngModel",e.key),r.wb(7),r.bc("ngModel",e.value)}}function He(e,t){if(1&e&&(r.Kb(0,"option",65),r.vc(1),r.Jb()),2&e){const e=t.$implicit;r.cc("value",e),r.wb(1),r.wc(e)}}function qe(e,t){if(1&e){const e=r.Lb();r.Kb(0,"div",10),r.Kb(1,"div",9),r.Kb(2,"form"),r.Kb(3,"div",51),r.Kb(4,"label",13),r.vc(5,"Interval"),r.Jb(),r.Kb(6,"div",14),r.Kb(7,"div",52),r.Kb(8,"input",53),r.Sb("ngModelChange",function(e){return t.$implicit.interval=e}),r.Jb(),r.Kb(9,"div",54),r.Kb(10,"select",55),r.Sb("ngModelChange",function(e){return t.$implicit.unit=e}),r.Kb(11,"option",56),r.vc(12,"millisecond"),r.Jb(),r.Kb(13,"option",57),r.vc(14,"second"),r.Jb(),r.Kb(15,"option",58),r.vc(16,"minute"),r.Jb(),r.Kb(17,"option",59),r.vc(18,"hour"),r.Jb(),r.Jb(),r.Jb(),r.Kb(19,"div",16),r.vc(20," can only be a pure integer number "),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(21,"div",12),r.Kb(22,"label",13),r.vc(23,"onchange"),r.Jb(),r.Kb(24,"div",14),r.Kb(25,"select",60),r.Sb("ngModelChange",function(e){return t.$implicit.onChange=e}),r.Kb(26,"option",61),r.vc(27,"true"),r.Jb(),r.Kb(28,"option",62),r.vc(29,"false"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(30,"div",12),r.Kb(31,"label",13),r.vc(32,"resource"),r.Jb(),r.Kb(33,"div",14),r.Kb(34,"select",63),r.Sb("ngModelChange",function(e){return t.$implicit.resource=e}),r.tc(35,He,2,2,"option",64),r.Jb(),r.Kb(36,"div",16),r.vc(37," resource can't be empty "),r.Jb(),r.Jb(),r.Jb(),r.Kb(38,"button",49),r.Sb("click",function(){r.oc(e);const i=t.$implicit;return r.Vb(2).removeAutoEvent(i)}),r.Ib(39,"i",50),r.vc(40," Remove"),r.Jb(),r.Jb(),r.Jb(),r.Jb()}if(2&e){const e=t.$implicit,i=r.Vb(2);r.wb(8),r.zb("is-invalid",!i.eventIntervalNumType(e.interval))("is-valid",i.eventIntervalNumType(e.interval)),r.bc("ngModel",e.interval),r.wb(2),r.bc("ngModel",e.unit),r.wb(15),r.bc("ngModel",e.onChange),r.wb(9),r.zb("is-invalid",""===e.resource)("is-valid",""!==e.resource),r.bc("ngModel",e.resource),r.wb(1),r.bc("ngForOf",i.autoEventResourceNameSet)}}function ze(e,t){if(1&e){const e=r.Lb();r.Kb(0,"div",1),r.Kb(1,"div",2),r.Ib(2,"i",3),r.Kb(3,"span",4),r.vc(4,"Edit Device"),r.Jb(),r.Kb(5,"span",5),r.vc(6),r.Jb(),r.Jb(),r.Kb(7,"div",6),r.Kb(8,"button",7),r.Sb("click",function(){return r.oc(e),r.Vb().save()}),r.Kb(9,"span"),r.Ib(10,"i",8),r.vc(11,"Save"),r.Jb(),r.Jb(),r.Jb(),r.Kb(12,"div",9),r.Kb(13,"div",10),r.Kb(14,"div",2),r.Ib(15,"i",11),r.vc(16," Device Primary "),r.Jb(),r.Kb(17,"div",9),r.Kb(18,"form"),r.Kb(19,"div",12),r.Kb(20,"label",13),r.vc(21,"DeviceName"),r.Jb(),r.Kb(22,"div",14),r.Kb(23,"input",15),r.Sb("ngModelChange",function(t){return r.oc(e),r.Vb().device.name=t}),r.Jb(),r.Kb(24,"div",16),r.vc(25," device name can't not be empty! "),r.Jb(),r.Jb(),r.Jb(),r.Kb(26,"div",12),r.Kb(27,"label",13),r.vc(28,"Description"),r.Jb(),r.Kb(29,"div",14),r.Kb(30,"input",17),r.Sb("ngModelChange",function(t){return r.oc(e),r.Vb().device.description=t}),r.Jb(),r.Jb(),r.Jb(),r.Kb(31,"div",12),r.Kb(32,"label",13),r.vc(33,"Labels"),r.Jb(),r.Kb(34,"div",14),r.Kb(35,"input",18),r.Sb("ngModelChange",function(t){return r.oc(e),r.Vb().deviceLabels=t}),r.Jb(),r.Jb(),r.Jb(),r.Kb(36,"div",12),r.Kb(37,"label",19),r.vc(38,"AdminState"),r.Jb(),r.Kb(39,"div",14),r.Kb(40,"select",20),r.Sb("ngModelChange",function(t){return r.oc(e),r.Vb().device.adminState=t}),r.Kb(41,"option",21),r.vc(42,"UNLOCKED"),r.Jb(),r.Kb(43,"option",22),r.vc(44,"LOCKED"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(45,"div",12),r.Kb(46,"label",23),r.vc(47,"OperatingState"),r.Jb(),r.Kb(48,"div",14),r.Kb(49,"select",24),r.Sb("ngModelChange",function(t){return r.oc(e),r.Vb().device.operatingState=t}),r.Kb(50,"option",25),r.vc(51,"UP"),r.Jb(),r.Kb(52,"option",26),r.vc(53,"DOWN"),r.Jb(),r.Kb(54,"option",26),r.vc(55,"UNKNOWN"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(56,"div",27),r.Kb(57,"app-device-service-list",28),r.Sb("singleDeviceSvcSelectedEvent",function(t){return r.oc(e),r.Vb().onSingleDeviceSvcSelected(t)}),r.Jb(),r.Jb(),r.Kb(58,"div",27),r.Kb(59,"app-device-profile-list",29),r.Sb("singleProfileSelectedEvent",function(t){return r.oc(e),r.Vb().onSingleProfileSelected(t)}),r.Jb(),r.Jb(),r.Kb(60,"div",10),r.Kb(61,"div",2),r.Ib(62,"i",11),r.vc(63," Device Protocol "),r.Jb(),r.Kb(64,"div",9),r.Kb(65,"div",1),r.Kb(66,"div",9),r.Kb(67,"div",30),r.Kb(68,"div",31),r.Kb(69,"div",32),r.Kb(70,"label"),r.vc(71,"Protocol Name"),r.Jb(),r.Kb(72,"input",33),r.Sb("ngModelChange",function(t){return r.oc(e),r.Vb().protocolName=t}),r.Jb(),r.Kb(73,"div",16),r.Kb(74,"small"),r.vc(75,"the protocol name can't be empty!"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(76,"div",34),r.Kb(77,"div"),r.Kb(78,"p",35),r.Ib(79,"span",36),r.Kb(80,"span",37),r.Sb("click",function(){return r.oc(e),r.Vb().addProtocolProperty()}),r.vc(81,"Add Protocol Property"),r.Jb(),r.Jb(),r.Jb(),r.tc(82,Fe,17,2,"div",38),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(83,"div",10),r.Kb(84,"div",2),r.Ib(85,"i",11),r.vc(86," AutoEvents "),r.Jb(),r.Kb(87,"div",9),r.Kb(88,"p",35),r.Ib(89,"span",36),r.Kb(90,"span",37),r.Sb("click",function(){return r.oc(e),r.Vb().addAutoEvent()}),r.vc(91,"Add More AutoEvent"),r.Jb(),r.Jb(),r.tc(92,qe,41,13,"div",39),r.Jb(),r.Jb(),r.Jb(),r.Jb()}if(2&e){const e=r.Vb();r.wb(6),r.wc(e.device.name),r.wb(2),r.bc("disabled",e.validateBeforeSave()),r.wb(15),r.zb("is-invalid",""===e.device.name),r.bc("ngModel",e.device.name),r.wb(7),r.bc("ngModel",e.device.description),r.wb(5),r.bc("ngModel",e.deviceLabels),r.wb(5),r.bc("ngModel",e.device.adminState),r.wb(9),r.bc("ngModel",e.device.operatingState),r.wb(8),r.bc("deviceSvcSelected",e.selectedSvc),r.wb(2),r.bc("enableSelectAll",!1)("toolbars",!1)("singleProfileSelected",e.selectedProfile)("associatedDeviceColumn",!1),r.wb(13),r.zb("is-invalid",!e.protocolName)("is-valid",e.protocolName),r.bc("ngModel",e.protocolName),r.wb(10),r.bc("ngForOf",e.protocolPropertyList),r.wb(10),r.bc("ngForOf",e.autoEventsInternal)}}let Ge=(()=>{class e{constructor(e,t,i,c){this.router=e,this.route=t,this.metaSvc=i,this.msgSvc=c,this.autoEventsInternal=[],this.autoEventResourceNameSet=[],this.protocolProperty={key:"",value:""},this.protocolPropertyList=[]}ngOnInit(){this.route.queryParams.subscribe(e=>{this.metaSvc.findDeviceByName(e.deviceName).subscribe(e=>{var t;this.device=e.device,this.deviceLabels=null===(t=this.device.labels)||void 0===t?void 0:t.join(","),this.setAutoEventInternal(this.device.autoEvents),this.protocolName=Object.keys(this.device.protocols)[0];for(const[i,c]of Object.entries(this.device.protocols[this.protocolName]))this.protocolPropertyList.push({key:i,value:c});this.setDefaultDeviceSvcSelected(this.device.serviceName),this.setDefaultDeviceProfileSelected(this.device.profileName)})})}onSingleProfileSelected(e){this.selectedProfile=e,this.resetAutoEventsInternal(),this.setupAutoEventResourceNameSet(this.selectedProfile)}onSingleDeviceSvcSelected(e){this.selectedSvc=e}setDefaultDeviceSvcSelected(e){this.metaSvc.findDevcieServiceByName(e).subscribe(e=>{this.selectedSvc=e.service})}setDefaultDeviceProfileSelected(e){this.metaSvc.findProfileByName(e).subscribe(e=>{this.selectedProfile=e.profile,this.setupAutoEventResourceNameSet(this.selectedProfile)})}resetAutoEventsInternal(){this.autoEventsInternal=[]}setupAutoEventResourceNameSet(e){e.deviceResources.forEach((e,t)=>{this.autoEventResourceNameSet.push(e.name)}),e.deviceCommands.forEach((e,t)=>{this.autoEventResourceNameSet.push(e.name)})}setAutoEventInternal(e){let t;null==e||e.forEach(e=>{let i=0;-1!==e.interval.indexOf("ms")?i=e.interval.indexOf("ms"):-1!==e.interval.indexOf("s")?i=e.interval.indexOf("s"):-1!==e.interval.indexOf("m")?i=e.interval.indexOf("m"):-1!==e.interval.indexOf("h")&&(i=e.interval.indexOf("h")),t=e.interval.substring(i),this.autoEventsInternal.push({interval:e.interval.slice(0,i),onChange:!!e.onChange,resource:e.sourceName,unit:t})})}eventIntervalNumType(e){return!isNaN(e)&&parseFloat(e)===parseInt(e)}addProtocolProperty(){this.protocolPropertyList.push({key:"",value:""})}removeProtocolProperty(e){this.protocolPropertyList.splice(this.protocolPropertyList.indexOf(e),1)}addAutoEvent(){this.autoEventsInternal.push({interval:"",onChange:!1,resource:"",unit:"ms"})}removeAutoEvent(e){this.autoEventsInternal.splice(this.autoEventsInternal.indexOf(e),1)}validateBeforeSave(){var e;if((null===(e=this.device)||void 0===e?void 0:e.name)&&this.protocolName){let e=!1;return this.autoEventsInternal.forEach(t=>{this.eventIntervalNumType(t.interval)&&""!==t.resource||(e=!0)}),e}return!0}save(){var e,t,i;let c=this.device,n={},o={};c.labels=null===(e=this.deviceLabels)||void 0===e?void 0:e.split(","),c.serviceName=null===(t=this.selectedSvc)||void 0===t?void 0:t.name,c.profileName=null===(i=this.selectedProfile)||void 0===i?void 0:i.name,this.protocolPropertyList.forEach(e=>{o[e.key]=e.value}),n[this.protocolName]=o,c.protocols=n,c.autoEvents=[],this.autoEventsInternal.forEach(e=>{c.autoEvents.push({interval:`${parseInt(e.interval)}${e.unit}`,onChange:!!e.onChange,sourceName:e.resource})}),this.metaSvc.updateDevice(c).subscribe(()=>{var e;this.msgSvc.success("update device","name: "+(null===(e=this.device)||void 0===e?void 0:e.name)),this.router.navigate(["../device-list"],{relativeTo:this.route})})}showTips(){$(".a-question-circle-o").tooltip("toggle")}}return e.\u0275fac=function(t){return new(t||e)(r.Hb(o.e),r.Hb(o.a),r.Hb(a.a),r.Hb(b.a))},e.\u0275cmp=r.Bb({type:e,selectors:[["app-edit-device"]],decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-edit","text-danger","fa-lg"],[1,"mx-2"],[1,"text-primary"],[1,"card-header","py-1"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-save","mr-1"],[1,"card-body"],[1,"card","mb-3"],[1,"fa","fa-tags","fa-lg","text-danger"],[1,"form-group","row"],[1,"col-md-2","col-form-label"],[1,"col-md-10"],["type","text","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"invalid-feedback"],["type","text","name","description",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","labels",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],["name","adminState",1,"form-control",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"],["for","operatingState",1,"col-md-2","col-form-label"],["name","operatingState",1,"form-control",3,"ngModel","ngModelChange"],["value","UP"],["value","DOWN"],[1,"mb-3"],[3,"deviceSvcSelected","singleDeviceSvcSelectedEvent"],[3,"enableSelectAll","toolbars","singleProfileSelected","associatedDeviceColumn","singleProfileSelectedEvent"],[1,"row"],[1,"col-md-2","col-lg-2","border-right","border-secondary"],[1,"form-group"],["type","text","name","protocolName",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-10","col-lg-10"],[1,"badge","badge-secondary","font-weight-bold"],[1,"fa","fa-plus-circle","mr-2"],["role","button",1,"user-select-none",3,"click"],[4,"ngFor","ngForOf"],["class","card mb-3",4,"ngFor","ngForOf"],[1,"form-inline","mb-1"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","name","propertyKey",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"form-group","mx-2"],[1,"fa","fa-long-arrow-right"],["type","text","name","PropertyValue",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"input-group","ml-2"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"],[1,"form-group","row","has-validation"],[1,"input-group","mb-3",2,"width","250px"],["type","text","name","interval","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["name","eventIntervalUnit","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","ms"],["value","s"],["value","m"],["value","h"],["name","onchange",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],["value","true"],["value","false"],["name","resource","required","",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&r.tc(0,ze,93,21,"div",0),2&e&&r.bc("ngIf",t.device)},directives:[c.l,n.p,n.g,n.h,n.a,n.m,n.f,n.i,n.n,n.j,n.o,re,pe,c.k],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),e})(),Ye=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Bb({type:e,selectors:[["app-device-profile-center"]],decls:1,vars:0,template:function(e,t){1&e&&r.Ib(0,"router-outlet")},directives:[o.j],styles:[""]}),e})();var We=i("9vc0");let _e=(()=>{class e{constructor(e,t,i,c,n){this.metaSvc=e,this.msgSvc=t,this.errSvc=i,this.router=c,this.route=n}ngOnInit(){this.renderYamlSource()}renderYamlSource(){let e=document.getElementById("editor");this.codeMirrorEditor=CodeMirror.fromTextArea(e,{mode:"yaml",theme:"gruvbox-dark",foldGutter:!0,smartIndent:!0,showCursorWhenSelecting:!0,lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],autofocus:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,cursorHeight:.85,autocorrect:!0}),this.codeMirrorEditor.setSize("auto","600px"),this.codeMirrorEditor.on("drop",(e,t)=>{var i;this.yamlFile=null===(i=t.dataTransfer)||void 0===i?void 0:i.files[0]}),this.codeMirrorEditor.on("paste",(e,t)=>{})}submit(){this.profileYamlSource=this.codeMirrorEditor.getValue(),this.metaSvc.addProfileYamlByNameViaUIBackend(this.profileYamlSource).subscribe(e=>{this.errSvc.handleErrorForV2API(e)||(this.msgSvc.success("Add profile"),this.router.navigate(["../device-profile-list"],{relativeTo:this.route}))})}}return e.\u0275fac=function(t){return new(t||e)(r.Hb(a.a),r.Hb(b.a),r.Hb(We.a),r.Hb(o.e),r.Hb(o.a))},e.\u0275cmp=r.Bb({type:e,selectors:[["app-add-profile"]],decls:15,vars:0,consts:[[1,"card"],[1,"card-header"],[1,"text-danger","font-weight-bold","fa","fa-code","mr-2"],[1,"mr-3","font-weight-bold"],[1,"fa","fa-info-circle","text-success","font-weight-bold"],[1,"float-right"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save","mr-1"],[1,"card-body","p-0"],["id","editor","name","editor"]],template:function(e,t){1&e&&(r.Kb(0,"div",0),r.Kb(1,"div",1),r.Kb(2,"span"),r.Ib(3,"span",2),r.Kb(4,"span",3),r.vc(5,"Add Profile"),r.Jb(),r.Kb(6,"span",4),r.vc(7,"\xa0drag-and-drop is enabled"),r.Jb(),r.Jb(),r.Kb(8,"span",5),r.Kb(9,"button",6),r.Sb("click",function(){return t.submit()}),r.Ib(10,"i",7),r.Kb(11,"span"),r.vc(12,"Submit"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(13,"div",8),r.Ib(14,"textarea",9),r.Jb(),r.Jb())},styles:[""]}),e})(),Xe=(()=>{class e{constructor(e,t,i,c,n){this.metaSvc=e,this.msgSvc=t,this.errSvc=i,this.router=c,this.route=n}ngOnInit(){this.renderYamlSource(),this.route.queryParams.subscribe(e=>{e.profileName&&(this.profileName=e.profileName,this.metaSvc.findProfileYamlByNameViaUIBackend(e.profileName).subscribe(e=>{this.codeMirrorEditor.setValue(e),this.codeMirrorEditor.refresh()}))})}update(){this.codeMirrorEditor.refresh(),this.metaSvc.updateProfileYamlContentViaUIBackend(this.codeMirrorEditor.getValue()).subscribe(e=>{this.errSvc.handleErrorForV2API(e)||(this.msgSvc.success("Update profile","name: "+this.profileName),this.router.navigate(["../device-profile-list"],{relativeTo:this.route}))})}renderYamlSource(){let e=document.getElementById("editor-edit");this.codeMirrorEditor=CodeMirror.fromTextArea(e,{mode:"yaml",theme:"gruvbox-dark",foldGutter:!0,smartIndent:!0,showCursorWhenSelecting:!0,lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],autofocus:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,cursorHeight:.85,autocorrect:!0}),this.codeMirrorEditor.setSize("auto","600px")}ngOnDestroy(){this.codeMirrorEditor=null}}return e.\u0275fac=function(t){return new(t||e)(r.Hb(a.a),r.Hb(b.a),r.Hb(We.a),r.Hb(o.e),r.Hb(o.a))},e.\u0275cmp=r.Bb({type:e,selectors:[["app-edit-profile"]],decls:12,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"text-danger","fa","fa-edit","mr-2"],[1,"float-right"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save","mr-1"],[1,"card-body","p-0"],["id","editor-edit","name","editor"]],template:function(e,t){1&e&&(r.Kb(0,"div",0),r.Kb(1,"div",1),r.Kb(2,"span"),r.Ib(3,"span",2),r.vc(4),r.Jb(),r.Kb(5,"span",3),r.Kb(6,"button",4),r.Sb("click",function(){return t.update()}),r.Kb(7,"span"),r.Ib(8,"i",5),r.vc(9,"Save"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(10,"div",6),r.Ib(11,"textarea",7),r.Jb(),r.Jb()),2&e&&(r.wb(4),r.xc("",t.profileName," "))},styles:[""]}),e})(),Qe=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Bb({type:e,selectors:[["app-provision-watcher-center"]],decls:2,vars:0,template:function(e,t){1&e&&(r.Kb(0,"p"),r.vc(1,"provision-watcher-center works!"),r.Jb())},styles:[""]}),e})(),Ze=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Bb({type:e,selectors:[["app-provision-watcher-list"]],decls:2,vars:0,template:function(e,t){1&e&&(r.Kb(0,"p"),r.vc(1,"provision-watcher-list works!"),r.Jb())},styles:[""]}),e})(),et=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Bb({type:e,selectors:[["app-add-provision-watcher"]],decls:2,vars:0,template:function(e,t){1&e&&(r.Kb(0,"p"),r.vc(1,"add-provision-watcher works!"),r.Jb())},styles:[""]}),e})();const tt=[{path:"",component:s,children:[{path:"",redirectTo:"device-service-list",pathMatch:"full"},{path:"device-service-list",component:f},{path:"device-center",component:g,children:[{path:"",redirectTo:"device-list",pathMatch:"full"},{path:"device-list",component:ne},{path:"add-device",component:Re},{path:"edit-device",component:Ge}]},{path:"device-profile-center",component:Ye,children:[{path:"",redirectTo:"device-profile-list",pathMatch:"full"},{path:"device-profile-list",component:pe},{path:"edit-profile",component:Xe},{path:"add-profile",component:_e}]},{path:"provision-watcher-center",component:Qe,children:[{path:"",redirectTo:"provision-watcher-list",pathMatch:"full"},{path:"provision-watcher-list",component:Ze},{path:"edit-provision-watcher",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Bb({type:e,selectors:[["app-edit-provision-watcher"]],decls:2,vars:0,template:function(e,t){1&e&&(r.Kb(0,"p"),r.vc(1,"edit-provision-watcher works!"),r.Jb())},styles:[""]}),e})()},{path:"add-provision-watcher",component:et}]}]}];let it=(()=>{class e{}return e.\u0275mod=r.Fb({type:e}),e.\u0275inj=r.Eb({factory:function(t){return new(t||e)},imports:[[o.i.forChild(tt)],o.i]}),e})(),ct=(()=>{class e{}return e.\u0275mod=r.Fb({type:e}),e.\u0275inj=r.Eb({factory:function(t){return new(t||e)},imports:[[c.b,n.b,it]]}),e})()}}]);