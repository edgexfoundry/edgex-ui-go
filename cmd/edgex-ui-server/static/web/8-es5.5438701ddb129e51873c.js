!function(){function e(e,i){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,c=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(l){c=!0,o=l}finally{try{n||null==a.return||a.return()}finally{if(c)throw o}}return i}(e,i)||function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,i)}(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"7PPe":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n("tk/3"),r=n("JIr8"),a=n("fXoL"),l=n("9vc0"),s=function(){var e=function(){function e(t,n){i(this,e),this.http=t,this.errorSvc=n,this.endpoint="/command",this.version="/api/v2",this.urlPrefix="".concat(this.endpoint).concat(this.version),this.endpointHealthUrl="/ping",this.versionUrl="/version",this.configUrl="/config",this.deviceCoreCommandListUrl=this.urlPrefix+"/device/all",this.commandsByDeviceIdUrl=this.urlPrefix+"/device/",this.commandsByDeviceNameUrl=this.urlPrefix+"/device/name/",this.issueCmdByDeviceNameAndCmdNameUrl=this.urlPrefix+"/device/name/",this.httpPostOrPutJSONOptions={headers:new o.c({"Content-type":"application/json",Authorization:""})}}return c(e,[{key:"getConfig",value:function(){var e=this;return this.http.get("".concat(this.urlPrefix).concat(this.configUrl)).pipe(Object(r.a)(function(t){return e.errorSvc.handleError(t)}))}},{key:"findCommnadsByDeviceId",value:function(e){var t=this;return this.http.get("".concat(this.commandsByDeviceIdUrl).concat(e)).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"allDeviceCoreCommandsPagination",value:function(e,t){var i=this;return this.http.get("".concat(this.deviceCoreCommandListUrl,"?offset=").concat(e,"&limit=").concat(t)).pipe(Object(r.a)(function(e){return i.errorSvc.handleError(e)}))}},{key:"findDeviceAssociatedCommnadsByDeviceName",value:function(e){var t=this;return this.http.get("".concat(this.commandsByDeviceNameUrl).concat(e)).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findAllDeviceCommnads",value:function(){var e=this;return this.http.get(this.urlPrefix+"/device").pipe(Object(r.a)(function(t){return e.errorSvc.handleError(t)}))}},{key:"issueGetBinaryCmd",value:function(e,t){var i=this;return this.http.request("GET","".concat(this.commandsByDeviceIdUrl).concat(e,"/command/").concat(t),{responseType:"arraybuffer"}).pipe(Object(r.a)(function(e){return i.errorSvc.handleError(e)}))}},{key:"issueGetCmd",value:function(e,t){var i=this;return this.http.get("".concat(this.issueCmdByDeviceNameAndCmdNameUrl).concat(e,"/").concat(t)).pipe(Object(r.a)(function(e){return i.errorSvc.handleError(e)}))}},{key:"issueSetCmd",value:function(e,t,i){var n=this;return this.http.put("".concat(this.issueCmdByDeviceNameAndCmdNameUrl).concat(e,"/").concat(t),JSON.stringify(i),this.httpPostOrPutJSONOptions).pipe(Object(r.a)(function(e){return n.errorSvc.handleError(e)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Pb(o.a),a.Pb(l.a))},e.\u0275prov=a.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"9vc0":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o,r=n("HDdC"),a=n("fXoL"),l=n("hsl2"),s=((o=function(){function e(t){i(this,e),this.msgSvc=t}return c(e,[{key:"handleErrorForV2API",value:function(e){var t=Object.prototype.toString.call(e);if("[object Array]"===t){if(!e[0].statusCode.toString().startsWith("20"))return this.msgSvc.errors("code: ".concat(e[0].statusCode,", message: ").concat(e[0].message)),!0}else if("[object Object]"===t&&!e.statusCode.toString().startsWith("20"))return this.msgSvc.errors("code: ".concat(e.statusCode,", message: ").concat(e.message)),!0;return!1}},{key:"handleError",value:function(e){return e.error instanceof ErrorEvent?this.msgSvc.errors("'An error occurred:', "+e.error.message):"[object Object]"===Object.prototype.toString.call(e.error)?this.msgSvc.errors("code: ".concat(e.error.statusCode," , message: ").concat(e.error.message)):"[object String]"===Object.prototype.toString.call(e.error)?this.msgSvc.errors("code: ".concat(e.status," , message: ").concat(e.error)):this.msgSvc.errors("code: ".concat(e.status," , message: ").concat(e.message)),function(e,t){return new r.a(function(t){return t.error(e)})}("Backend returned code ".concat(e.error.statusCode,", body was: ")+e.error.message)}}]),e}()).\u0275fac=function(e){return new(e||o)(a.Pb(l.a))},o.\u0275prov=a.Db({token:o,factory:o.\u0275fac,providedIn:"root"}),o)},limL:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n("tk/3"),r=n("JIr8"),a=n("fXoL"),l=n("9vc0"),s=function(){var e=function(){function e(t,n){i(this,e),this.http=t,this.errorSvc=n,this.endpoint="/metadata",this.version="/api/v2",this.urlPrefix="".concat(this.endpoint).concat(this.version),this.configUrl="/config",this.devicesListUrl=this.urlPrefix+"/device/all",this.addOneDeviceUrl=this.urlPrefix+"/device",this.updateOneDeviceUrl=this.urlPrefix+"/device",this.deleteOneDeviceByIdUrl=this.urlPrefix+"/device/Id",this.deleteOneDeviceByNameUrl=this.urlPrefix+"/device/name",this.findDeviceByNameUrl=this.urlPrefix+"/device/name",this.findDeviceByIdUrl=this.urlPrefix+"/device/id",this.findDevicesByServiceIdUrl=this.urlPrefix+"/device/service/id",this.findDevicesByServiceNameUrl=this.urlPrefix+"/device/service/name",this.findDevicesByProfileIdUrl=this.urlPrefix+"/device/profile/id",this.findDevicesByProfileNameUrl=this.urlPrefix+"/device/profile/name",this.deviceServicesListUrl=this.urlPrefix+"/deviceservice/all",this.updateDeviceServiceUrl=this.urlPrefix+"/deviceservice",this.findDeviceServiceByIdUrl=this.urlPrefix+"/deviceservice/id",this.findDeviceServiceByNameUrl=this.urlPrefix+"/deviceservice/name",this.deviceProfilesListUrl=this.urlPrefix+"/deviceprofile/all",this.findProfilesByIdUrl=this.urlPrefix+"/deviceprofile",this.findProfilesByNameUrl=this.urlPrefix+"/deviceprofile/name",this.updateDeviceProfileUrl=this.urlPrefix+"/deviceprofile",this.uploadProfileYamlFileUrl=this.urlPrefix+"/deviceprofile/uploadfile",this.uploadProfileYamlContentUrl=this.urlPrefix+"/deviceprofile/upload",this.deviceProfileYamlUrl=this.urlPrefix+"/deviceprofile/yaml",this.deleteProfileByIdUrl=this.urlPrefix+"/deviceprofile/id",this.deleteProfileByNamedUrl=this.urlPrefix+"/deviceprofile/name",this.httpPostOrPutJSONOptions={headers:new o.c({"Content-type":"application/json",Authorization:""})}}return c(e,[{key:"getConfig",value:function(){var e=this;return this.http.get("".concat(this.urlPrefix).concat(this.configUrl)).pipe(Object(r.a)(function(t){return e.errorSvc.handleError(t)}))}},{key:"allDevices",value:function(){var e=this;return this.http.get(""+this.devicesListUrl).pipe(Object(r.a)(function(t){return e.errorSvc.handleError(t)}))}},{key:"allDevicesPagination",value:function(e,t){var i=this;return this.http.get("".concat(this.devicesListUrl,"?offset=").concat(e,"&limit=").concat(t)).pipe(Object(r.a)(function(e){return i.errorSvc.handleError(e)}))}},{key:"addDevice",value:function(e){var t=this,i=""+this.addOneDeviceUrl;return e.apiVersion="v2",this.http.post(i,JSON.stringify([{apiVersion:"v2",device:e}]),this.httpPostOrPutJSONOptions).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"deleteOneDeviceByName",value:function(e){var t=this;return this.http.delete("".concat(this.deleteOneDeviceByNameUrl,"/").concat(e)).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"deleteOneDeviceById",value:function(e){var t=this;return this.http.delete("".concat(this.deleteOneDeviceByIdUrl,"/").concat(e)).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"updateDevice",value:function(e){var t=this;return this.http.patch(""+this.updateOneDeviceUrl,JSON.stringify([{apiVersion:"v2",device:e}]),{headers:new o.c({"Content-type":"application/json"})}).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findDeviceByName",value:function(e){var t=this;return this.http.get("".concat(this.findDeviceByNameUrl,"/").concat(e)).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findDeviceById",value:function(e){var t=this;return this.http.get("".concat(this.findDeviceByIdUrl,"/").concat(e)).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findDevicesByServiceId",value:function(e){var t=this;return this.http.get("".concat(this.findDevicesByServiceIdUrl,"/").concat(e)).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findDevicesByServiceName",value:function(e,t,i){var n=this;return this.http.get("".concat(this.findDevicesByServiceNameUrl,"/").concat(i,"?offset=").concat(e,"&limit=").concat(t)).pipe(Object(r.a)(function(e){return n.errorSvc.handleError(e)}))}},{key:"findDevicesByProfileId",value:function(e){var t=this;return this.http.get("".concat(this.findDevicesByProfileIdUrl,"/").concat(e)).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findDevicesByProfileName",value:function(e,t,i){var n=this;return this.http.get("".concat(this.findDevicesByProfileNameUrl,"/").concat(i,"?offset=").concat(e,"&limit=").concat(t)).pipe(Object(r.a)(function(e){return n.errorSvc.handleError(e)}))}},{key:"allDeviceServices",value:function(){var e=this;return this.http.get(this.deviceServicesListUrl+"?offset=0&limit=-1").pipe(Object(r.a)(function(t){return e.errorSvc.handleError(t)}))}},{key:"findAllDeviceServicesPagination",value:function(e,t){var i=this;return this.http.get("".concat(this.deviceServicesListUrl,"?offset=").concat(e,"&limit=").concat(t)).pipe(Object(r.a)(function(e){return i.errorSvc.handleError(e)}))}},{key:"updateDeviceService",value:function(e){var t=this;return this.http.patch(""+this.updateDeviceServiceUrl,JSON.stringify([{apiVersion:"v2",service:e}]),this.httpPostOrPutJSONOptions).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findDevcieServiceById",value:function(e){var t=this;return this.http.get("".concat(this.findDeviceServiceByIdUrl,"/").concat(e)).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findDevcieServiceByName",value:function(e){var t=this;return this.http.get("".concat(this.findDeviceServiceByNameUrl,"/").concat(e)).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"allDeviceProfoles",value:function(){var e=this;return this.http.get(this.deviceProfilesListUrl+"?offset=0&limit=-1").pipe(Object(r.a)(function(t){return e.errorSvc.handleError(t)}))}},{key:"allDeviceProfolesPagination",value:function(e,t){var i=this;return this.http.get("".concat(this.deviceProfilesListUrl,"?offset=").concat(e,"&limit=").concat(t)).pipe(Object(r.a)(function(e){return i.errorSvc.handleError(e)}))}},{key:"addProfileYamlByNameViaUIBackend",value:function(e){var t=this;return this.http.request("POST","/api/v2/profile/yaml",{body:e,responseType:"text"}).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findProfileById",value:function(e){var t=this;return this.http.get("".concat(this.findProfilesByIdUrl,"/").concat(e)).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findProfileByName",value:function(e){var t=this;return this.http.get("".concat(this.findProfilesByNameUrl,"/").concat(e)).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findProfileYamlByNameViaUIBackend",value:function(e){var t=this;return this.http.request("GET","/api/v2/profile/yaml/name/"+e,{responseType:"text"}).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"uploadProfileYamlFile",value:function(e){var t=this;return this.http.request("POST",""+this.uploadProfileYamlFileUrl,{body:e,responseType:"text"}).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"updateDeviceProfile",value:function(e){var t=this;return this.http.put(""+this.updateDeviceProfileUrl,e,this.httpPostOrPutJSONOptions).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"updateProfileYamlContentViaUIBackend",value:function(e){var t=this;return this.http.put("/api/v2/profile/yaml",e,{headers:new o.c({"Content-Type":"text/plain; charset=utf-8"})}).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"uploadProfileYamlContent",value:function(e){var t=this;return this.http.request("POST",""+this.uploadProfileYamlContentUrl,{body:e,responseType:"text",headers:new o.c({"Content-Type":"text/plain; charset=utf-8"})}).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"findProfileYamlById",value:function(e){return this.http.request("GET","".concat(this.deviceProfileYamlUrl,"/").concat(e),{responseType:"text"})}},{key:"deleteProfileById",value:function(e){var t=this;return this.http.delete("".concat(this.deleteProfileByIdUrl,"/").concat(e)).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}},{key:"deleteProfileByName",value:function(e){var t=this;return this.http.delete("".concat(this.deleteProfileByNamedUrl,"/").concat(e)).pipe(Object(r.a)(function(e){return t.errorSvc.handleError(e)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Pb(o.a),a.Pb(l.a))},e.\u0275prov=a.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},qggS:function(t,n,o){"use strict";o.r(n),o.d(n,"MetadataModule",function(){return wt});var r,a=o("ofXK"),l=o("3Pt+"),s=o("tyNb"),b=o("fXoL"),d=((r=function(){function e(){i(this,e)}return c(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||r)},r.\u0275cmp=b.Bb({type:r,selectors:[["app-metadata"]],decls:14,vars:0,consts:[[1,"card"],[1,"card-header"],[1,"nav","nav-tabs","card-header-tabs","font-weight-bold"],[1,"nav-item"],["routerLink","./device-service-list","routerLinkActive","active",1,"nav-link"],["routerLink","./device-center","routerLinkActive","active",1,"nav-link"],["routerLink","./device-profile-center","routerLinkActive","active",1,"nav-link"],[1,"card-body"]],template:function(e,t){1&e&&(b.Kb(0,"div",0),b.Kb(1,"div",1),b.Kb(2,"ul",2),b.Kb(3,"li",3),b.Kb(4,"a",4),b.vc(5,"Device Service"),b.Jb(),b.Jb(),b.Kb(6,"li",3),b.Kb(7,"a",5),b.vc(8,"Device"),b.Jb(),b.Jb(),b.Kb(9,"li",3),b.Kb(10,"a",6),b.vc(11,"Device Profile"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(12,"div",7),b.Ib(13,"router-outlet"),b.Jb(),b.Jb())},directives:[s.h,s.g,s.j],styles:[".active-link[_ngcontent-%COMP%]{color:#922c48;background-color:rgba(146,44,72,.4)!important}"]}),r),v=o("limL"),u=o("hsl2");function f(e,t){if(1&e&&(b.Kb(0,"p"),b.vc(1),b.Jb()),2&e){var i=b.Vb().$implicit;b.wb(1),b.wc(i.description)}}function p(e,t){1&e&&(b.Kb(0,"p",19),b.vc(1,"no description."),b.Jb())}function h(e,t){if(1&e&&(b.Kb(0,"span",20),b.vc(1),b.Jb()),2&e){var i=b.Vb().$implicit;b.wb(1),b.wc(i.adminState)}}function m(e,t){if(1&e&&(b.Kb(0,"span",21),b.vc(1),b.Jb()),2&e){var i=b.Vb().$implicit;b.wb(1),b.wc(i.adminState)}}function g(e,t){if(1&e){var i=b.Lb();b.Kb(0,"a",22),b.Sb("click",function(){b.oc(i);var e=b.Vb().$implicit;return b.Vb().associatedDevicesSkip(e.name)}),b.Ib(1,"i",23),b.vc(2),b.Jb()}if(2&e){var n=b.Vb().$implicit,c=b.Vb();b.wb(2),b.xc(" Associated Devices \xa0 ",c.associatedDevices.get(n.name),"")}}function K(e,t){if(1&e){var i=b.Lb();b.Kb(0,"li",3),b.Kb(1,"div",4),b.Kb(2,"div",5),b.Ib(3,"i",6),b.Jb(),b.Kb(4,"div",7),b.Kb(5,"div",8),b.Kb(6,"h5",9),b.vc(7),b.Jb(),b.Jb(),b.tc(8,f,2,1,"p",10),b.tc(9,p,2,0,"ng-template",null,11,b.uc),b.Kb(11,"div"),b.Kb(12,"span",12),b.vc(13),b.Jb(),b.Kb(14,"span",13),b.tc(15,h,2,1,"span",14),b.tc(16,m,2,1,"span",15),b.Jb(),b.tc(17,g,3,1,"a",16),b.Kb(18,"span",17),b.Sb("click",function(){b.oc(i);var e=t.$implicit;return b.Vb().edit(e)}),b.Ib(19,"i",18),b.vc(20," Setting"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()}if(2&e){var n=t.$implicit,c=b.lc(10),o=b.Vb();b.wb(7),b.wc(n.name),b.wb(1),b.bc("ngIf",n.description)("ngIfElse",c),b.wb(5),b.xc("Port ",o.getSvcPort(n.baseAddress),""),b.wb(1),b.bc("ngSwitch",n.adminState),b.wb(1),b.bc("ngSwitchCase","UNLOCKED"),b.wb(2),b.bc("ngIf",o.associatedDevices.size)}}function J(e,t){if(1&e){var i=b.Lb();b.Kb(0,"div",24),b.Kb(1,"div",25),b.Ib(2,"i",26),b.Kb(3,"span"),b.vc(4),b.Jb(),b.Kb(5,"button",27),b.Sb("click",function(){return b.oc(i),b.Vb().updateSvc()}),b.vc(6,"Save"),b.Jb(),b.Jb(),b.Kb(7,"div",28),b.Kb(8,"form"),b.Kb(9,"div",29),b.Kb(10,"label",30),b.vc(11,"Description"),b.Jb(),b.Kb(12,"div",31),b.Kb(13,"input",32),b.Sb("ngModelChange",function(e){return b.oc(i),b.Vb().deviceSvcSelected.description=e}),b.Jb(),b.Jb(),b.Jb(),b.Kb(14,"div",29),b.Kb(15,"label",33),b.vc(16,"AdminState"),b.Jb(),b.Kb(17,"div",31),b.Kb(18,"select",34),b.Sb("ngModelChange",function(e){return b.oc(i),b.Vb().deviceSvcSelected.adminState=e}),b.Kb(19,"option",35),b.vc(20,"UNLOCKED"),b.Jb(),b.Kb(21,"option",36),b.vc(22,"LOCKED"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()}if(2&e){var n=b.Vb();b.wb(4),b.xc("edit ",n.deviceSvcSelected.name,""),b.wb(9),b.bc("ngModel",n.deviceSvcSelected.description),b.wb(5),b.bc("ngModel",n.deviceSvcSelected.adminState)}}var S,y,w=((y=function(){function e(t,n,c,o){i(this,e),this.metaSvc=t,this.msgSvc=n,this.router=c,this.route=o,this.deviceServiceList=[],this.associatedDevices=new Map}return c(e,[{key:"ngOnInit",value:function(){var e=this;this.metaSvc.allDeviceServices().subscribe(function(t){e.deviceServiceList=t.services,e.deviceServiceList.forEach(function(t){e.metaSvc.findDevicesByServiceName(0,20,t.name).subscribe(function(i){e.associatedDevices.set(t.name,i.devices.length>20?"20+":String(i.devices.length))})})})}},{key:"getSvcPort",value:function(e){return new URL(e).port}},{key:"edit",value:function(e){this.deviceSvcSelected=e}},{key:"updateSvc",value:function(){var e=this;this.metaSvc.updateDeviceService(this.deviceSvcSelected).subscribe(function(){var t;e.msgSvc.success("update device service","name: "+(null===(t=e.deviceSvcSelected)||void 0===t?void 0:t.name)),e.deviceSvcSelected=void 0})}},{key:"associatedDevicesSkip",value:function(e){this.router.navigate(["../device-center"],{queryParams:{svcName:e},relativeTo:this.route})}}]),e}()).\u0275fac=function(e){return new(e||y)(b.Hb(v.a),b.Hb(u.a),b.Hb(s.e),b.Hb(s.a))},y.\u0275cmp=b.Bb({type:y,selectors:[["app-device-service-media-list"]],decls:3,vars:2,consts:[[1,"list-group","p-0"],["class","list-group-item list-group-item-action list-group-item-light",4,"ngFor","ngForOf"],["class","card mt-3",4,"ngIf"],[1,"list-group-item","list-group-item-action","list-group-item-light"],[1,"media"],[1,"align-self-center","mr-3"],[1,"fa","fa-tags","fa-2x","text-secondary"],[1,"media-body"],[1,"mt-0","mb-1"],[1,"d-inline","mr-3","align-middle","text-dark"],[4,"ngIf","ngIfElse"],["nodesc",""],[1,"badge","badge-info","mr-3"],[3,"ngSwitch"],["class","badge badge-success mr-3",4,"ngSwitchCase"],["class","badge badge-danger mr-3",4,"ngSwitchDefault"],["class","badge badge-primary","role","button",3,"click",4,"ngIf"],["role","button",1,"badge","badge-secondary","float-right",3,"click"],[1,"fa","fa-cog"],[1,"my-1"],[1,"badge","badge-success","mr-3"],[1,"badge","badge-danger","mr-3"],["role","button",1,"badge","badge-primary",3,"click"],[1,"fa","fa-sitemap"],[1,"card","mt-3"],[1,"card-header"],[1,"fa","fa-edit","mr-1","text-danger"],[1,"btn","btn-success","btn-sm","float-right",3,"click"],[1,"card-body"],[1,"form-group","row"],["for","deviceDesc",1,"col-md-2","col-form-label"],[1,"col-md-10"],["type","text","name","deviceSvcDescription",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],["name","deviceSvcAdminState",1,"form-control",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"]],template:function(e,t){1&e&&(b.Kb(0,"ul",0),b.tc(1,K,21,7,"li",1),b.Jb(),b.tc(2,J,23,3,"div",2)),2&e&&(b.wb(1),b.bc("ngForOf",t.deviceServiceList),b.wb(1),b.bc("ngIf",t.deviceSvcSelected))},directives:[a.k,a.l,a.n,a.o,a.p,l.p,l.g,l.h,l.a,l.f,l.i,l.n,l.j,l.o],styles:[""]}),y),k=((S=function(){function e(){i(this,e)}return c(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||S)},S.\u0275cmp=b.Bb({type:S,selectors:[["app-device-center"]],decls:1,vars:0,template:function(e,t){1&e&&b.Ib(0,"router-outlet")},directives:[s.j],styles:[""]}),S),P=o("7PPe");function C(e,t){if(1&e&&(b.Kb(0,"span"),b.Kb(1,"span",48),b.vc(2,"DeviceService"),b.Jb(),b.Kb(3,"span",49),b.vc(4),b.Jb(),b.Kb(5,"span"),b.vc(6,"Associated Device List"),b.Jb(),b.Jb()),2&e){var i=b.Vb();b.wb(4),b.wc(i.associatedSvcName)}}function D(e,t){if(1&e&&(b.Kb(0,"span"),b.Kb(1,"span",48),b.vc(2,"DeviceProfile"),b.Jb(),b.Kb(3,"span",49),b.vc(4),b.Jb(),b.Kb(5,"span"),b.vc(6,"Associated Device List"),b.Jb(),b.Jb()),2&e){var i=b.Vb();b.wb(4),b.wc(i.associatedProfileName)}}function I(e,t){1&e&&(b.Kb(0,"span"),b.vc(1,"Device List"),b.Jb())}function N(e,t){if(1&e&&(b.Kb(0,"span",61),b.vc(1),b.Jb()),2&e){var i=b.Vb().$implicit;b.wb(1),b.wc(i.adminState)}}function E(e,t){if(1&e&&(b.Kb(0,"span",62),b.vc(1),b.Jb()),2&e){var i=b.Vb().$implicit;b.wb(1),b.wc(i.adminState)}}function O(e,t){if(1&e&&(b.Kb(0,"span",61),b.vc(1),b.Jb()),2&e){var i=b.Vb().$implicit;b.wb(1),b.xc(" ",i.operatingState,"")}}function x(e,t){if(1&e&&(b.Kb(0,"span",62),b.vc(1),b.Jb()),2&e){var i=b.Vb().$implicit;b.wb(1),b.xc(" ",i.operatingState,"")}}function L(e,t){if(1&e&&(b.Kb(0,"span",62),b.vc(1),b.Jb()),2&e){var i=b.Vb().$implicit;b.wb(1),b.xc(" ",i.operatingState,"")}}var M=function(e){return{profileName:e}};function A(e,t){if(1&e){var i=b.Lb();b.Kb(0,"tr"),b.Kb(1,"td"),b.Kb(2,"input",19),b.Sb("click",function(e){b.oc(i);var n=t.$implicit;return b.Vb().selectOne(e,n)}),b.Jb(),b.Jb(),b.Kb(3,"td",50),b.vc(4),b.Jb(),b.Kb(5,"td",50),b.vc(6),b.Jb(),b.Kb(7,"td"),b.vc(8),b.Jb(),b.Kb(9,"td"),b.vc(10),b.Jb(),b.Kb(11,"td"),b.Kb(12,"span",51),b.tc(13,N,2,1,"span",52),b.tc(14,E,2,1,"span",53),b.Jb(),b.Jb(),b.Kb(15,"td",54),b.Kb(16,"span",51),b.tc(17,O,2,1,"span",52),b.tc(18,x,2,1,"span",55),b.tc(19,L,2,1,"span",53),b.Jb(),b.Jb(),b.Kb(20,"td",54),b.Kb(21,"span",56),b.Sb("click",function(){b.oc(i);var e=t.$implicit;return b.Vb().checkDeviceCommand(e)}),b.Ib(22,"i",57),b.Jb(),b.Jb(),b.Kb(23,"td",54),b.Kb(24,"span",56),b.Sb("click",function(){b.oc(i);var e=t.$implicit;return b.Vb().checkAutoEvent(e)}),b.Ib(25,"i",58),b.Jb(),b.Jb(),b.Kb(26,"td"),b.Kb(27,"a",59),b.vc(28),b.Jb(),b.Jb(),b.Kb(29,"td"),b.Kb(30,"a",60),b.vc(31),b.Jb(),b.Jb(),b.Jb()}if(2&e){var n=t.$implicit,c=b.Vb();b.zb("table-active",c.isChecked(n.id)||c.associatedCmdDeviceName===n.name||c.associatedAutoEventsDeviceName===n.name),b.wb(2),b.bc("checked",c.isChecked(n.id)),b.wb(2),b.wc(n.id),b.wb(2),b.wc(n.name),b.wb(2),b.wc(n.description),b.wb(2),b.wc(n.labels),b.wb(2),b.bc("ngSwitch",n.adminState),b.wb(1),b.bc("ngSwitchCase","UNLOCKED"),b.wb(3),b.bc("ngSwitch",n.operatingState),b.wb(1),b.bc("ngSwitchCase","UP"),b.wb(1),b.bc("ngSwitchCase","DOWN"),b.wb(3),b.zb("badge-danger",c.associatedCmdDeviceName===n.name),b.wb(3),b.zb("badge-danger",c.associatedAutoEventsDeviceName===n.name),b.wb(3),b.bc("queryParams",b.hc(19,M,n.profileName)),b.wb(1),b.wc(n.profileName),b.wb(3),b.wc(n.serviceName)}}function V(e,t){if(1&e&&(b.Kb(0,"tr"),b.Kb(1,"td"),b.vc(2),b.Jb(),b.Kb(3,"td"),b.Kb(4,"span",71),b.vc(5),b.Jb(),b.Jb(),b.Kb(6,"td"),b.Kb(7,"span",72),b.vc(8),b.Jb(),b.Jb(),b.Jb()),2&e){var i=t.$implicit;b.wb(2),b.wc(i.sourceName),b.wb(3),b.wc(i.interval),b.wb(3),b.wc(i.onChange)}}function B(e,t){if(1&e&&(b.Kb(0,"div"),b.Kb(1,"div",65),b.Kb(2,"div",66),b.Kb(3,"span",67),b.Ib(4,"i",58),b.Jb(),b.Kb(5,"span",68),b.vc(6),b.Jb(),b.vc(7," Associated AutoEvents "),b.Jb(),b.Kb(8,"div",69),b.Kb(9,"div",15),b.Kb(10,"table",16),b.Kb(11,"thead",17),b.Kb(12,"th",18),b.vc(13,"Resource"),b.Jb(),b.Kb(14,"th",18),b.vc(15,"Interval"),b.Jb(),b.Kb(16,"th",18),b.vc(17,"Onchange"),b.Jb(),b.Jb(),b.Kb(18,"tbody"),b.tc(19,V,9,3,"tr",70),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()),2&e){var i=b.Vb(2);b.wb(6),b.xc(" ",i.associatedAutoEventsDeviceName,""),b.wb(13),b.bc("ngForOf",i.autoEvents)}}function U(e,t){if(1&e&&(b.Kb(0,"div",65),b.Kb(1,"div",66),b.Kb(2,"span",67),b.Ib(3,"i",58),b.Jb(),b.Kb(4,"span",68),b.vc(5),b.Jb(),b.vc(6," Associated AutoEvents "),b.Jb(),b.Kb(7,"div",73),b.Kb(8,"h5",74),b.Ib(9,"i",43),b.vc(10," no associated AutoEvents"),b.Jb(),b.Jb(),b.Jb()),2&e){var i=b.Vb(2);b.wb(5),b.xc(" ",i.associatedAutoEventsDeviceName,"")}}function T(e,t){if(1&e&&(b.Kb(0,"div"),b.tc(1,B,20,2,"div",63),b.tc(2,U,11,1,"ng-template",null,64,b.uc),b.Jb()),2&e){var i=b.lc(3),n=b.Vb();b.wb(1),b.bc("ngIf",n.autoEvents)("ngIfElse",i)}}function j(e,t){1&e&&b.Ib(0,"div")}function R(e,t){if(1&e&&(b.Kb(0,"div"),b.tc(1,j,1,0,"div",75),b.Jb()),2&e){var i=b.Vb(),n=b.lc(78),c=b.lc(80);b.wb(1),b.bc("ngIf",i.deviceCoreCommand)("ngIfThen",n)("ngIfElse",c)}}function F(e,t){if(1&e){var i=b.Lb();b.Kb(0,"li",85),b.Sb("click",function(){b.oc(i);var e=t.$implicit;return b.Vb(2).selectCmd(e)}),b.vc(1),b.Jb()}if(2&e){var n=t.$implicit,c=b.Vb(2);b.zb("list-group-item-info",(null==c.selectedCmd?null:c.selectedCmd.name)===n.name),b.wb(1),b.wc(n.name)}}function H(e,t){if(1&e){var i=b.Lb();b.Kb(0,"button",97),b.Sb("click",function(){return b.oc(i),b.Vb(3).issueGetCmd()}),b.vc(1,"try"),b.Jb()}}function q(e,t){1&e&&b.Ib(0,"div")}function z(e,t){if(1&e&&(b.Kb(0,"span",102),b.vc(1),b.Jb()),2&e){var i=b.Vb(4);b.wb(1),b.xc(" ",i.cmdGetResponse,"")}}function G(e,t){if(1&e&&(b.Kb(0,"pre",103),b.vc(1),b.Jb()),2&e){var i=b.Vb(4);b.wb(1),b.wc(i.cmdGetResponseRaw)}}function Y(e,t){if(1&e&&(b.Kb(0,"div"),b.Kb(1,"span",98),b.vc(2,"Response:"),b.Jb(),b.tc(3,z,2,1,"span",99),b.Jb(),b.Kb(4,"div",100),b.Kb(5,"span",98),b.vc(6,"ResponseRaw:"),b.Jb(),b.tc(7,G,2,1,"pre",101),b.Jb()),2&e){var i=b.Vb(3);b.wb(3),b.bc("ngIf",i.cmdGetResponse),b.wb(4),b.bc("ngIf",i.cmdGetResponseRaw)}}function W(e,t){1&e&&(b.Kb(0,"h6",74),b.Ib(1,"i",43),b.vc(2," no Get method"),b.Jb())}function _(e,t){if(1&e){var i=b.Lb();b.Kb(0,"button",97),b.Sb("click",function(){return b.oc(i),b.Vb(3).issueSetCmd()}),b.vc(1,"try"),b.Jb()}}function X(e,t){1&e&&b.Ib(0,"div")}function Q(e,t){if(1&e&&(b.Kb(0,"div"),b.Kb(1,"label",110),b.vc(2),b.Jb(),b.Kb(3,"select",111),b.Kb(4,"option",112),b.vc(5,"false"),b.Jb(),b.Kb(6,"option",112),b.vc(7,"true"),b.Jb(),b.Jb(),b.Jb()),2&e){var i=b.Vb().$implicit;b.wb(1),b.cc("for",i.resourceName),b.wb(1),b.xc(" ",i.resourceName," "),b.wb(1),b.cc("id",i.resourceName),b.cc("name",i.resourceName),b.wb(1),b.bc("ngValue",!1),b.wb(2),b.bc("ngValue",!0)}}function Z(e,t){if(1&e&&(b.Kb(0,"label",110),b.vc(1),b.Jb(),b.Ib(2,"input",113)),2&e){var i=b.Vb().$implicit;b.cc("for",i.resourceName),b.wb(1),b.wc(i.resourceName),b.wb(1),b.cc("id",i.resourceName),b.cc("name",i.resourceName),b.dc("placeholder","valueType: ",i.valueType,"")}}function ee(e,t){if(1&e&&(b.Kb(0,"div",108),b.tc(1,Q,8,6,"div",63),b.tc(2,Z,3,5,"ng-template",null,109,b.uc),b.Jb()),2&e){var i=t.$implicit,n=b.lc(3);b.wb(1),b.bc("ngIf","Bool"==i.valueType)("ngIfElse",n)}}function te(e,t){if(1&e&&(b.Kb(0,"div",106),b.tc(1,ee,4,2,"div",107),b.Jb()),2&e){var i=b.Vb(5);b.wb(1),b.bc("ngForOf",i.selectedCmdSetParams)}}function ie(e,t){if(1&e&&(b.Kb(0,"div",80),b.Kb(1,"div",66),b.vc(2,"Set Parameters"),b.Jb(),b.Kb(3,"div",77),b.tc(4,te,2,1,"div",105),b.Jb(),b.Jb()),2&e){var i=b.Vb(4);b.wb(4),b.bc("ngIf",i.selectedCmd)}}function ne(e,t){if(1&e&&(b.Kb(0,"span",102),b.vc(1),b.Jb()),2&e){var i=b.Vb(4);b.wb(1),b.wc(i.cmdSetResponse)}}function ce(e,t){if(1&e&&(b.Kb(0,"pre",103),b.vc(1),b.Jb()),2&e){var i=b.Vb(4);b.wb(1),b.wc(i.cmdSetResponseRaw)}}function oe(e,t){if(1&e&&(b.tc(0,ie,5,1,"div",104),b.Kb(1,"div"),b.Kb(2,"div"),b.Kb(3,"span",98),b.vc(4," Response:"),b.Jb(),b.tc(5,ne,2,1,"span",99),b.Jb(),b.Kb(6,"div",100),b.Kb(7,"span",98),b.vc(8," ResponseRaw:"),b.Jb(),b.tc(9,ce,2,1,"pre",101),b.Jb(),b.Jb()),2&e){var i=b.Vb(3);b.bc("ngIf",i.selectedCmdSetParams),b.wb(5),b.bc("ngIf",i.cmdSetResponse),b.wb(4),b.bc("ngIf",i.cmdSetResponseRaw)}}function re(e,t){1&e&&(b.Kb(0,"h6",74),b.Ib(1,"i",43),b.vc(2," no Set method"),b.Jb())}function ae(e,t){if(1&e&&(b.Kb(0,"div",0),b.Kb(1,"div",66),b.Kb(2,"span",86),b.Ib(3,"i",87),b.vc(4),b.Jb(),b.Kb(5,"span"),b.vc(6,"Get and Set"),b.Jb(),b.Jb(),b.Kb(7,"div",88),b.Kb(8,"div",78),b.Kb(9,"div",89),b.Kb(10,"div",80),b.Kb(11,"div",66),b.vc(12," Get "),b.tc(13,H,2,0,"button",90),b.Jb(),b.Kb(14,"div",91),b.tc(15,q,1,0,"div",75),b.tc(16,Y,8,2,"ng-template",null,92,b.uc),b.tc(18,W,3,0,"ng-template",null,93,b.uc),b.Jb(),b.Jb(),b.Jb(),b.Kb(20,"div",94),b.Kb(21,"div",0),b.Kb(22,"div",66),b.vc(23," Set "),b.tc(24,_,2,0,"button",90),b.Jb(),b.Kb(25,"div",77),b.tc(26,X,1,0,"div",75),b.tc(27,oe,10,3,"ng-template",null,95,b.uc),b.tc(29,re,3,0,"ng-template",null,96,b.uc),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()),2&e){var i=b.lc(17),n=b.lc(19),c=b.lc(28),o=b.lc(30),r=b.Vb(2);b.wb(4),b.xc(" ",r.selectedCmd.name," method:"),b.wb(9),b.bc("ngIf",r.selectedCmd.get),b.wb(2),b.bc("ngIf",r.selectedCmd.get)("ngIfThen",i)("ngIfElse",n),b.wb(9),b.bc("ngIf",r.selectedCmd.set),b.wb(2),b.bc("ngIf",r.selectedCmd.set)("ngIfThen",c)("ngIfElse",o)}}function le(e,t){if(1&e&&(b.Kb(0,"div",65),b.Kb(1,"div",66),b.Kb(2,"span",67),b.Ib(3,"i",57),b.Jb(),b.Kb(4,"span",76),b.vc(5),b.Jb(),b.vc(6," Associated Commands "),b.Jb(),b.Kb(7,"div",77),b.Kb(8,"div",78),b.Kb(9,"div",79),b.Kb(10,"div",80),b.Kb(11,"div",1),b.vc(12," Command Name List "),b.Jb(),b.Kb(13,"div",69),b.Kb(14,"ul",81),b.tc(15,F,2,3,"li",82),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(16,"div",83),b.tc(17,ae,31,9,"div",84),b.Jb(),b.Jb(),b.Jb(),b.Jb()),2&e){var i=b.Vb();b.wb(5),b.wc(i.associatedCmdDeviceName),b.wb(10),b.bc("ngForOf",i.deviceCoreCommand),b.wb(2),b.bc("ngIf",i.selectedCmd)}}function se(e,t){if(1&e&&(b.Kb(0,"div",65),b.Kb(1,"div",66),b.Kb(2,"span",67),b.Ib(3,"i",57),b.Jb(),b.Kb(4,"span",114),b.vc(5),b.Jb(),b.vc(6," Associated Commands "),b.Jb(),b.Kb(7,"div",73),b.Kb(8,"h5",74),b.Ib(9,"i",43),b.vc(10," no associated commands"),b.Jb(),b.Jb(),b.Jb()),2&e){var i=b.Vb();b.wb(5),b.wc(i.associatedCmdDeviceName)}}var be,de=((be=function(){function e(t,n,c,o,r){i(this,e),this.metaSvc=t,this.cmdSvc=n,this.msgSvc=c,this.route=o,this.router=r,this.deviceList=[],this.associatedSvcName="",this.associatedProfileName="",this.selectedDevice=[],this.isCheckedAll=!1,this.selectedCmd={},this.selectedCmdSetParams=[],this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}return c(e,[{key:"ngOnInit",value:function(){var e=this;this.route.queryParams.subscribe(function(t){return t.svcName?(e.associatedSvcName=t.svcName,void e.getDeviceListByAssociatedSvc(e.associatedSvcName)):t.profileName?(e.associatedProfileName=t.profileName,void e.getDeviceListByAssociatedProfile(e.associatedProfileName)):(e.associatedSvcName="",e.associatedProfileName="",void e.getDeviceListPagination())})}},{key:"renderPopoverComponent",value:function(){setTimeout(function(){$('[data-toggle="popover"]').popover({trigger:"hover"})},250)}},{key:"getDeviceList",value:function(){""===this.associatedSvcName?""===this.associatedProfileName?this.getDeviceListPagination():this.getDeviceListByAssociatedProfile(this.associatedSvcName):this.getDeviceListByAssociatedSvc(this.associatedSvcName)}},{key:"getDeviceListByAssociatedSvc",value:function(e){var t=this;this.metaSvc.findDevicesByServiceName(this.pageOffset,this.pageLimit,e).subscribe(function(e){return t.deviceList=e.devices})}},{key:"getDeviceListByAssociatedProfile",value:function(e){var t=this;this.metaSvc.findDevicesByProfileName(this.pageOffset,this.pageLimit,e).subscribe(function(e){return t.deviceList=e.devices})}},{key:"getDeviceListPagination",value:function(){var e=this;this.metaSvc.allDevicesPagination(this.pageOffset,this.pageLimit).subscribe(function(t){e.deviceList=t.devices})}},{key:"refresh",value:function(){var e=this;this.associatedProfileName="",this.associatedSvcName="",this.metaSvc.allDevicesPagination(0,this.pageLimit).subscribe(function(t){e.deviceList=t.devices,e.msgSvc.success("refresh"),e.resetPagination()})}},{key:"edit",value:function(){this.router.navigate(["../edit-device"],{relativeTo:this.route,queryParams:{deviceName:this.selectedDevice[0].name}})}},{key:"deleteConfirm",value:function(){$("#deleteConfirmDialog").modal("show")}},{key:"delete",value:function(){var e=this;this.selectedDevice.forEach(function(t,i){e.metaSvc.deleteOneDeviceByName(t.name).subscribe(function(){e.selectedDevice.splice(i,1),e.deviceList.forEach(function(i,n){if(i.id===t.id)return e.deviceList.splice(n,1),void e.msgSvc.success("remove device "," Name: "+i.name)})})}),this.associatedCmdDeviceName=void 0,this.associatedAutoEventsDeviceName=void 0,$("#deleteConfirmDialog").modal("hide")}},{key:"checkAutoEvent",value:function(e){this.associatedAutoEventsDeviceName=e.name,this.autoEvents=e.autoEvents,this.associatedCmdDeviceName=""}},{key:"selectAll",value:function(e){var t=this;if(e.target.checked)return this.selectedDevice=[],this.deviceList.forEach(function(e){t.selectedDevice.push(e),t.isChecked(e.id)}),void(this.isCheckedAll=!0);this.isCheckedAll=!1,this.selectedDevice=[],this.deviceList.forEach(function(e){t.isChecked(e.id)})}},{key:"isChecked",value:function(e){return this.selectedDevice.findIndex(function(t){return t.id===e})>=0}},{key:"selectOne",value:function(e,t){if(e.target.checked)return this.selectedDevice.push(t),void(this.selectedDevice.length===this.deviceList.length&&(this.isCheckedAll=!0));this.isCheckedAll=!1,this.isChecked(t.id),this.selectedDevice.splice(this.selectedDevice.indexOf(t),1)}},{key:"checkDeviceCommand",value:function(e){var t=this;this.resetResponse(),this.metaSvc.findProfileByName(e.profileName).subscribe(function(e){return t.associateDeviceProfile=e.profile}),this.cmdSvc.findDeviceAssociatedCommnadsByDeviceName(e.name).subscribe(function(i){t.associatedAutoEventsDeviceName="",t.associatedCmdDeviceName=i.deviceCoreCommand.deviceName,t.associatedCmdDeviceId=e.id,t.deviceCoreCommand=i.deviceCoreCommand.coreCommands,t.selectedCmd=t.deviceCoreCommand[0],t.selectedCmdSetParams=t.selectedCmd.parameters})}},{key:"selectCmd",value:function(e){this.selectedCmd=e,this.selectedCmdSetParams=this.selectedCmd.parameters,this.resetResponse()}},{key:"resetResponse",value:function(){this.cmdGetResponse="",this.cmdGetResponseRaw="",this.cmdSetResponse="",this.cmdSetResponseRaw="",this.cmdBinaryResponse=!0,this.cmdBinaryResponseURL=""}},{key:"issueGetCmd",value:function(){var e,t=this;this.cmdSvc.issueGetCmd(this.associatedCmdDeviceName,null===(e=this.selectedCmd)||void 0===e?void 0:e.name).subscribe(function(e){t.cmdGetResponseRaw=JSON.stringify(e.event.readings,null,3);var i=[];e.event.readings.forEach(function(e){i.push(e.value)}),t.cmdGetResponse=i.join(",")})}},{key:"issueSetCmd",value:function(){var e,t,i=this,n={};null===(e=this.selectedCmdSetParams)||void 0===e||e.forEach(function(e){n[e.resourceName]=$("#"+e.resourceName).val().trim()}),this.cmdSvc.issueSetCmd(this.associatedCmdDeviceName,null===(t=this.selectedCmd)||void 0===t?void 0:t.name,n).subscribe(function(e){i.cmdSetResponseRaw=JSON.stringify(e,null,3),i.cmdSetResponse=e.message})}},{key:"onPageSelected",value:function(){this.resetPagination(),this.setPagination(),this.getDeviceList()}},{key:"prePage",value:function(){this.setPagination(-1),this.getDeviceList()}},{key:"nextPage",value:function(){this.setPagination(1),this.getDeviceList()}},{key:"setPagination",value:function(e){1===e?this.pagination+=1:-1===e&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit}},{key:"resetPagination",value:function(){this.pagination=1}}]),e}()).\u0275fac=function(e){return new(e||be)(b.Hb(v.a),b.Hb(P.a),b.Hb(u.a),b.Hb(s.a),b.Hb(s.e))},be.\u0275cmp=b.Bb({type:be,selectors:[["app-device-list"]],decls:95,vars:12,consts:[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","text-danger","mr-2"],[4,"ngIf"],[1,"card-body","p-0","position-relative"],[1,"bg-light","px-2","py-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","mr-1"],["type","button","routerLink","../add-device",1,"btn","btn-info"],[1,"fa","fa-plus","mr-1"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-edit","mr-1"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash","mr-1"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],["type","checkbox","role","button",3,"checked","click"],[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"form-control",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left"],[1,"page-item"],[1,"fa","fa-angle-double-right"],["hasAssociatedCommand",""],["noAssociatedCommand",""],["id","deleteConfirmDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteConfirmDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteConfirmDialogLabel",1,"modal-title","text-danger"],[1,"fa","fa-warning"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"mr-1"],[1,"text-danger","mr-1"],[1,"user-select-all"],[3,"ngSwitch"],["class","badge badge-success",4,"ngSwitchCase"],["class","badge badge-danger",4,"ngSwitchDefault"],[1,"text-center"],["class","badge badge-danger",4,"ngSwitchCase"],["role","button",1,"badge","badge-primary","text-light",3,"click"],[1,"fa","fa-terminal","font-weight-bolder"],[1,"fa","fa-calendar-check-o","font-weight-bolder"],["routerLink","../../device-profile-center",3,"queryParams"],["routerLink","../../device-service-list"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[4,"ngIf","ngIfElse"],["noAutoEvents",""],[1,"card","mt-3"],[1,"card-header"],[1,"badge","badge-danger","text-light"],[1,"text-primary","mx-2","font-weight-bold"],[1,"card-body","p-0"],[4,"ngFor","ngForOf"],[1,"badge","badge-secondary","badge-pill"],[1,""],[1,"card-body","text-center"],[1,"text-warning"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"text-primary","ml-2","font-weight-bold"],[1,"card-body"],[1,"row"],[1,"col-md-2","col-lg-2"],[1,"card","mb-2"],[1,"list-group","list-group-flush"],["role","button","class","list-group-item list-group-item-action",3,"list-group-item-info","click",4,"ngFor","ngForOf"],[1,"col-md-10","col-lg-10"],["class","card",4,"ngIf"],["role","button",1,"list-group-item","list-group-item-action",3,"click"],[1,"text-primary","font-weight-bold","mr-2"],[1,"fa","fa-thumb-tack","text-danger","mr-1"],[1,"card-body","px-2"],[1,"col-md-5","col-lg-5"],["class","btn btn-primary btn-sm float-right",3,"click",4,"ngIf"],[1,"card-body","overflow-auto"],["hasGetMethod",""],["noGetMethod",""],[1,"col-md-7","col-lg-7"],["hasSetMethod",""],["noSetMethod",""],[1,"btn","btn-primary","btn-sm","float-right",3,"click"],[1,"badge","badge-info"],["class","ml-2 text-primary",4,"ngIf"],[1,"mt-3"],["class","mt-2 bg-secondary p-2 text-light rounded",4,"ngIf"],[1,"ml-2","text-primary"],[1,"mt-2","bg-secondary","p-2","text-light","rounded"],["class","card mb-2",4,"ngIf"],["class","d-flex flex-column bd-highlight",4,"ngIf"],[1,"d-flex","flex-column","bd-highlight"],["class","form p-2 bd-highlight",4,"ngFor","ngForOf"],[1,"form","p-2","bd-highlight"],["valueTypeIsNotBool",""],[3,"for"],[1,"form-control","form-control-sm",3,"id","name"],[3,"ngValue"],[1,"form-control","form-control-sm",3,"id","name","placeholder"],[1,"text-primary","mx-1","font-weight-bold"]],template:function(e,t){1&e&&(b.Kb(0,"div",0),b.Kb(1,"div",1),b.Ib(2,"i",2),b.tc(3,C,7,1,"span",3),b.tc(4,D,7,1,"span",3),b.tc(5,I,2,0,"span",3),b.Jb(),b.Kb(6,"div",4),b.Kb(7,"div",5),b.Kb(8,"div",6),b.Kb(9,"button",7),b.Sb("click",function(){return t.refresh()}),b.Kb(10,"span"),b.Ib(11,"i",8),b.vc(12,"Refresh"),b.Jb(),b.Jb(),b.Kb(13,"button",9),b.Kb(14,"span"),b.Ib(15,"i",10),b.vc(16,"Add"),b.Jb(),b.Jb(),b.Kb(17,"button",11),b.Sb("click",function(){return t.edit()}),b.Kb(18,"span"),b.Ib(19,"i",12),b.vc(20,"Edit"),b.Jb(),b.Jb(),b.Kb(21,"button",13),b.Sb("click",function(){return t.deleteConfirm()}),b.Kb(22,"span"),b.Ib(23,"i",14),b.vc(24,"Delete"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(25,"div",15),b.Kb(26,"table",16),b.Kb(27,"thead",17),b.Kb(28,"tr"),b.Kb(29,"th",18),b.Kb(30,"input",19),b.Sb("click",function(e){return t.selectAll(e)}),b.Jb(),b.Jb(),b.Kb(31,"th",18),b.vc(32,"ID"),b.Jb(),b.Kb(33,"th",18),b.vc(34,"Name"),b.Jb(),b.Kb(35,"th",18),b.vc(36,"Description"),b.Jb(),b.Kb(37,"th",18),b.vc(38,"Labels"),b.Jb(),b.Kb(39,"th",18),b.vc(40,"AdminState"),b.Jb(),b.Kb(41,"th",18),b.vc(42,"OperatingState"),b.Jb(),b.Kb(43,"th",18),b.vc(44,"Command"),b.Jb(),b.Kb(45,"th",18),b.vc(46,"AutoEvents"),b.Jb(),b.Kb(47,"th",18),b.vc(48,"AssociatedProfile"),b.Jb(),b.Kb(49,"th",18),b.vc(50,"AssociatedService"),b.Jb(),b.Jb(),b.Jb(),b.Kb(51,"tbody"),b.tc(52,A,32,21,"tr",20),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(53,"div",21),b.Kb(54,"nav",22),b.Kb(55,"ul",23),b.Kb(56,"li",24),b.Kb(57,"span",25),b.vc(58,"items per page"),b.Jb(),b.Jb(),b.Kb(59,"li",26),b.Kb(60,"select",27),b.Sb("ngModelChange",function(e){return t.pageLimit=e})("ngModelChange",function(){return t.onPageSelected()}),b.Kb(61,"option",28),b.vc(62,"5"),b.Jb(),b.Kb(63,"option",29),b.vc(64,"10"),b.Jb(),b.Kb(65,"option",30),b.vc(66,"20"),b.Jb(),b.Jb(),b.Jb(),b.Kb(67,"li",31),b.Kb(68,"button",32),b.Sb("click",function(){return t.prePage()}),b.Ib(69,"i",33),b.vc(70," Previous"),b.Jb(),b.Jb(),b.Kb(71,"li",34),b.Kb(72,"button",32),b.Sb("click",function(){return t.nextPage()}),b.vc(73,"Next "),b.Ib(74,"i",35),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.tc(75,T,4,2,"div",3),b.tc(76,R,2,3,"div",3),b.tc(77,le,18,3,"ng-template",null,36,b.uc),b.tc(79,se,11,1,"ng-template",null,37,b.uc),b.Kb(81,"div",38),b.Kb(82,"div",39),b.Kb(83,"div",40),b.Kb(84,"div",41),b.Kb(85,"h5",42),b.Ib(86,"i",43),b.vc(87," Warning "),b.Jb(),b.Jb(),b.Kb(88,"div",44),b.vc(89," The data will be permanently erased!!! Are you sure to execute delete operation\uff1f "),b.Jb(),b.Kb(90,"div",45),b.Kb(91,"button",46),b.vc(92,"Cancel"),b.Jb(),b.Kb(93,"button",47),b.Sb("click",function(){return t.delete()}),b.vc(94,"Confirm"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()),2&e&&(b.wb(3),b.bc("ngIf",""!==t.associatedSvcName),b.wb(1),b.bc("ngIf",""!==t.associatedProfileName),b.wb(1),b.bc("ngIf",""===t.associatedProfileName&&""===t.associatedSvcName),b.wb(12),b.bc("disabled",1!==t.selectedDevice.length),b.wb(4),b.bc("disabled",0===t.selectedDevice.length),b.wb(9),b.bc("checked",t.isCheckedAll),b.wb(22),b.bc("ngForOf",t.deviceList),b.wb(8),b.bc("ngModel",t.pageLimit),b.wb(8),b.bc("disabled",1===t.pagination),b.wb(4),b.bc("disabled",t.pageLimit>t.deviceList.length),b.wb(3),b.bc("ngIf",t.associatedAutoEventsDeviceName),b.wb(1),b.bc("ngIf",t.associatedCmdDeviceName))},directives:[a.l,s.f,a.k,l.n,l.f,l.i,l.j,l.o,a.n,a.o,a.p,s.h],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),be);function ve(e,t){if(1&e){var i=b.Lb();b.Kb(0,"tr"),b.Kb(1,"td"),b.Kb(2,"input",24),b.Sb("click",function(e){b.oc(i);var n=t.$implicit;return b.Vb().selectOneSvc(e,n.name)}),b.Jb(),b.Jb(),b.Kb(3,"td"),b.vc(4),b.Jb(),b.Kb(5,"td"),b.vc(6),b.Jb(),b.Kb(7,"td"),b.vc(8),b.Jb(),b.Kb(9,"td"),b.vc(10),b.Jb(),b.Kb(11,"td"),b.vc(12),b.Jb(),b.Kb(13,"td"),b.vc(14),b.Wb(15,"date"),b.Jb(),b.Kb(16,"td"),b.vc(17),b.Wb(18,"date"),b.Jb(),b.Jb()}if(2&e){var n=t.$implicit,c=b.Vb();b.zb("table-active",c.isSvcChecked(n.name)),b.wb(2),b.bc("checked",c.isSvcChecked(n.name)),b.wb(2),b.wc(n.id),b.wb(2),b.wc(n.name),b.wb(2),b.wc(n.description),b.wb(2),b.wc(n.labels),b.wb(2),b.wc(n.adminState),b.wb(2),b.wc(b.Yb(15,10,n.created,"yyyy-MM-dd hh:mm:ss")),b.wb(3),b.wc(b.Yb(18,13,n.modified,"yyyy-MM-dd hh:mm:ss"))}}var ue,fe=((ue=function(){function e(t){i(this,e),this.metaSvc=t,this.singleDeviceSvcSelectedEvent=new b.n,this.deviceServiceList=[],this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}return c(e,[{key:"ngOnInit",value:function(){this.findAllDeviceSvcPagination()}},{key:"findAllDeviceSvcPagination",value:function(){var e=this;this.metaSvc.findAllDeviceServicesPagination(this.pageOffset,this.pageLimit).subscribe(function(t){e.deviceServiceList=t.services})}},{key:"onSingleDeviceSvcSelectedEmitter",value:function(){this.singleDeviceSvcSelectedEvent.emit(this.deviceSvcSelected)}},{key:"isSvcChecked",value:function(e){var t;return(null===(t=this.deviceSvcSelected)||void 0===t?void 0:t.name)===e}},{key:"selectOneSvc",value:function(e,t){var i=this;e.target.checked?this.deviceServiceList.forEach(function(e){e.name===t&&(i.deviceSvcSelected=e)}):this.deviceSvcSelected=void 0,this.onSingleDeviceSvcSelectedEmitter()}},{key:"onPageSelected",value:function(){this.resetPagination(),this.setPagination(),this.findAllDeviceSvcPagination()}},{key:"prePage",value:function(){this.setPagination(-1),this.findAllDeviceSvcPagination()}},{key:"nextPage",value:function(){this.setPagination(1),this.findAllDeviceSvcPagination()}},{key:"setPagination",value:function(e){1===e?this.pagination+=1:-1===e&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit}},{key:"resetPagination",value:function(){this.pagination=1}}]),e}()).\u0275fac=function(e){return new(e||ue)(b.Hb(v.a))},ue.\u0275cmp=b.Bb({type:ue,selectors:[["app-device-service-list"]],inputs:{deviceSvcSelected:"deviceSvcSelected"},outputs:{singleDeviceSvcSelectedEvent:"singleDeviceSvcSelectedEvent"},decls:50,vars:4,consts:[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","mr-2","text-danger"],[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"form-control",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left"],[1,"page-item"],[1,"fa","fa-angle-double-right"],["type","checkbox","role","button",3,"checked","click"]],template:function(e,t){1&e&&(b.Kb(0,"div",0),b.Kb(1,"div",1),b.Ib(2,"i",2),b.Kb(3,"span"),b.vc(4,"Device Service List"),b.Jb(),b.Jb(),b.Kb(5,"div",3),b.Kb(6,"div",4),b.Kb(7,"table",5),b.Kb(8,"thead",6),b.Kb(9,"tr"),b.Kb(10,"th",7),b.vc(11,"#"),b.Jb(),b.Kb(12,"th",7),b.vc(13,"ID"),b.Jb(),b.Kb(14,"th",7),b.vc(15,"Name"),b.Jb(),b.Kb(16,"th",7),b.vc(17,"Description"),b.Jb(),b.Kb(18,"th",7),b.vc(19,"Labels"),b.Jb(),b.Kb(20,"th",7),b.vc(21,"AdminState"),b.Jb(),b.Kb(22,"th",7),b.vc(23,"Created"),b.Jb(),b.Kb(24,"th",7),b.vc(25,"Modified"),b.Jb(),b.Jb(),b.Jb(),b.Kb(26,"tbody"),b.tc(27,ve,19,16,"tr",8),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(28,"div",9),b.Kb(29,"nav",10),b.Kb(30,"ul",11),b.Kb(31,"li",12),b.Kb(32,"span",13),b.vc(33,"items per page"),b.Jb(),b.Jb(),b.Kb(34,"li",14),b.Kb(35,"select",15),b.Sb("ngModelChange",function(e){return t.pageLimit=e})("ngModelChange",function(){return t.onPageSelected()}),b.Kb(36,"option",16),b.vc(37,"5"),b.Jb(),b.Kb(38,"option",17),b.vc(39,"10"),b.Jb(),b.Kb(40,"option",18),b.vc(41,"20"),b.Jb(),b.Jb(),b.Jb(),b.Kb(42,"li",19),b.Kb(43,"button",20),b.Sb("click",function(){return t.prePage()}),b.Ib(44,"i",21),b.vc(45," Previous"),b.Jb(),b.Jb(),b.Kb(46,"li",22),b.Kb(47,"button",20),b.Sb("click",function(){return t.nextPage()}),b.vc(48,"Next "),b.Ib(49,"i",23),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()),2&e&&(b.wb(27),b.bc("ngForOf",t.deviceServiceList),b.wb(8),b.bc("ngModel",t.pageLimit),b.wb(8),b.bc("disabled",1===t.pagination),b.wb(4),b.bc("disabled",t.pageLimit>t.deviceServiceList.length))},directives:[a.k,l.n,l.f,l.i,l.j,l.o],pipes:[a.d],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),ue);function pe(e,t){if(1&e){var i=b.Lb();b.Kb(0,"div",37),b.Kb(1,"div",38),b.Kb(2,"button",39),b.Sb("click",function(){return b.oc(i),b.Vb().refresh()}),b.Kb(3,"span"),b.Ib(4,"i",40),b.vc(5,"Refresh"),b.Jb(),b.Jb(),b.Kb(6,"button",41),b.Kb(7,"span"),b.Ib(8,"i",42),b.vc(9,"Add"),b.Jb(),b.Jb(),b.Kb(10,"button",43),b.Sb("click",function(){return b.oc(i),b.Vb().edit()}),b.Kb(11,"span"),b.Ib(12,"i",44),b.vc(13,"Edit"),b.Jb(),b.Jb(),b.Kb(14,"button",45),b.Sb("click",function(){return b.oc(i),b.Vb().deleteConfirm()}),b.Kb(15,"span"),b.Ib(16,"i",46),b.vc(17,"Delete"),b.Jb(),b.Jb(),b.Jb(),b.Jb()}if(2&e){var n=b.Vb();b.wb(10),b.bc("disabled",1!==n.multiProfilesSelected.length),b.wb(4),b.bc("disabled",0===n.multiProfilesSelected.length)}}function he(e,t){if(1&e){var i=b.Lb();b.Kb(0,"input",47),b.Sb("click",function(e){return b.oc(i),b.Vb().selectAll(e)}),b.Jb()}if(2&e){var n=b.Vb();b.bc("checked",n.isCheckedAll)}}function me(e,t){1&e&&(b.Kb(0,"th",8),b.vc(1,"AssociatedDevice"),b.Jb())}var ge=function(e){return{profileName:e}};function Ke(e,t){if(1&e&&(b.Kb(0,"td",51),b.Kb(1,"a",52),b.Ib(2,"i",53),b.Jb(),b.Jb()),2&e){var i=b.Vb().$implicit;b.wb(1),b.bc("queryParams",b.hc(1,ge,i.name))}}function Je(e,t){if(1&e){var i=b.Lb();b.Kb(0,"tr"),b.Kb(1,"td"),b.Kb(2,"input",48),b.Sb("click",function(e){b.oc(i);var n=t.$implicit;return b.Vb().selectOne(e,n.name)}),b.Jb(),b.Jb(),b.Kb(3,"td",49),b.vc(4),b.Jb(),b.Kb(5,"td",49),b.vc(6),b.Jb(),b.Kb(7,"td"),b.vc(8),b.Jb(),b.tc(9,Ke,3,3,"td",50),b.Kb(10,"td"),b.vc(11),b.Jb(),b.Kb(12,"td"),b.vc(13),b.Jb(),b.Kb(14,"td"),b.vc(15),b.Jb(),b.Jb()}if(2&e){var n=t.$implicit,c=b.Vb();b.zb("table-active",c.isChecked(n.name)),b.wb(2),b.cc("value",n.name),b.bc("checked",c.isChecked(n.name)),b.wb(2),b.wc(n.id),b.wb(2),b.wc(n.name),b.wb(2),b.wc(n.description),b.wb(1),b.bc("ngIf",c.associatedDeviceColumn),b.wb(2),b.wc(n.labels),b.wb(2),b.wc(n.manufacturer),b.wb(2),b.wc(n.model)}}var Se,ye=((Se=function(){function e(t,n,c,o){i(this,e),this.metaSvc=t,this.msgSvc=n,this.route=c,this.router=o,this.associatedDeviceColumn=!0,this.toolbars=!0,this.enableSelectAll=!0,this.singleProfileSelectedEvent=new b.n,this.profileList=[],this.multiProfilesSelected=[],this.isCheckedAll=!1,this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}return c(e,[{key:"ngOnInit",value:function(){var e=this;this.route.queryParams.subscribe(function(t){t.profileName?e.metaSvc.findProfileByName(t.profileName).subscribe(function(t){e.profileList=[],e.profileList.push(t.profile)}):e.findAllDeviceProfilesPagination()})}},{key:"findAllDeviceProfilesPagination",value:function(){var e=this;this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(function(t){e.profileList=t.profiles})}},{key:"onSingleProfileSelectedEmitter",value:function(){this.singleProfileSelectedEvent.emit(this.singleProfileSelected)}},{key:"refresh",value:function(){var e=this;this.metaSvc.allDeviceProfolesPagination(0,this.pageLimit).subscribe(function(t){e.profileList=t.profiles,e.msgSvc.success("refresh"),e.pagination=1,e.resetCheckbox()})}},{key:"onPageSelected",value:function(){this.resetPagination(),this.setPagination(),this.findAllDeviceProfilesPagination()}},{key:"prePage",value:function(){var e=this;this.setPagination(-1),this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(function(t){e.profileList=t.profiles})}},{key:"nextPage",value:function(){var e=this;this.setPagination(1),this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(function(t){e.profileList=t.profiles})}},{key:"setPageLimit",value:function(e){this.pageLimit=e}},{key:"setPagination",value:function(e){1===e?this.pagination+=1:-1===e&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit,this.resetCheckbox()}},{key:"resetPagination",value:function(){this.pagination=1,this.resetCheckbox()}},{key:"resetCheckbox",value:function(){this.isCheckedAll=!1,this.multiProfilesSelected=[]}},{key:"edit",value:function(){this.router.navigate(["../edit-profile"],{relativeTo:this.route,queryParams:{profileName:this.multiProfilesSelected[0]}})}},{key:"deleteConfirm",value:function(){$("#deleteConfirmDialog").modal("show")}},{key:"delete",value:function(){var e=this;this.multiProfilesSelected.forEach(function(t){e.metaSvc.deleteProfileByName(t).subscribe(function(){e.multiProfilesSelected=[],e.profileList.forEach(function(i,n){i.name==t&&(e.profileList.splice(n,1),e.msgSvc.success("delete","  Name: "+i.name))})})}),$("#deleteConfirmDialog").modal("hide")}},{key:"isSingleProfileChecked",value:function(e){var t;return(null===(t=this.singleProfileSelected)||void 0===t?void 0:t.name)===e}},{key:"selectSingleProfile",value:function(e,t){var i=this;e.target.checked?this.profileList.forEach(function(e){e.name===t&&(i.singleProfileSelected=e)}):this.singleProfileSelected=void 0,this.onSingleProfileSelectedEmitter()}},{key:"selectAll",value:function(e){var t=this;if(e.target.checked)return this.multiProfilesSelected=[],this.profileList.forEach(function(e){t.multiProfilesSelected.push(e.name),t.isChecked(e.name)}),void(this.isCheckedAll=!0);this.isCheckedAll=!1,this.multiProfilesSelected=[],this.profileList.forEach(function(e){t.isChecked(e.name)})}},{key:"isChecked",value:function(e){return this.enableSelectAll?this.multiProfilesSelected.findIndex(function(t){return t===e})>=0:this.isSingleProfileChecked(e)}},{key:"selectOne",value:function(e,t){if(this.enableSelectAll)return e.target.checked?(this.multiProfilesSelected.push(t),void(this.multiProfilesSelected.length===this.profileList.length&&(this.isCheckedAll=!0))):(this.isCheckedAll=!1,this.isChecked(t),void this.multiProfilesSelected.splice(this.multiProfilesSelected.indexOf(t),1));this.selectSingleProfile(e,t)}}]),e}()).\u0275fac=function(e){return new(e||Se)(b.Hb(v.a),b.Hb(u.a),b.Hb(s.a),b.Hb(s.e))},Se.\u0275cmp=b.Bb({type:Se,selectors:[["app-device-profile-list"]],inputs:{associatedDeviceColumn:"associatedDeviceColumn",toolbars:"toolbars",enableSelectAll:"enableSelectAll",singleProfileSelected:"singleProfileSelected"},outputs:{singleProfileSelectedEvent:"singleProfileSelectedEvent"},decls:64,vars:7,consts:[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","text-danger","mr-2"],[1,"card-body","p-0"],["class","bg-light px-2 py-2",4,"ngIf"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],["type","checkbox",3,"checked","click",4,"ngIf"],["scope","col",4,"ngIf"],[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"form-control",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left"],[1,"page-item"],[1,"fa","fa-angle-double-right"],["id","deleteConfirmDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteConfirmDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteConfirmDialogLabel",1,"modal-title","text-danger"],[1,"fa","fa-warning"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"bg-light","px-2","py-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","mr-1"],["type","button","routerLink","../add-profile",1,"btn","btn-info"],[1,"fa","fa-plus","mr-1"],["type","button","data-toggle","tooltip","data-placement","top","title","only one should be selected",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-edit","mr-1"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash","mr-1"],["type","checkbox",3,"checked","click"],["type","checkbox",3,"value","checked","click"],[1,"user-select-all"],["class","text-center",4,"ngIf"],[1,"text-center"],["routerLink","../../device-center",1,"badge","badge-pill","badge-primary",3,"queryParams"],[1,"fa","fa-sitemap"]],template:function(e,t){1&e&&(b.Kb(0,"div",0),b.Kb(1,"div",1),b.Ib(2,"i",2),b.Kb(3,"span"),b.vc(4,"Device Profile List"),b.Jb(),b.Jb(),b.Kb(5,"div",3),b.tc(6,pe,18,2,"div",4),b.Kb(7,"div",5),b.Kb(8,"table",6),b.Kb(9,"thead",7),b.Kb(10,"tr"),b.Kb(11,"th",8),b.tc(12,he,1,1,"input",9),b.Jb(),b.Kb(13,"th",8),b.vc(14,"ID"),b.Jb(),b.Kb(15,"th",8),b.vc(16,"Name"),b.Jb(),b.Kb(17,"th",8),b.vc(18,"Description"),b.Jb(),b.tc(19,me,2,0,"th",10),b.Kb(20,"th",8),b.vc(21,"Labels"),b.Jb(),b.Kb(22,"th",8),b.vc(23,"Manufacturer"),b.Jb(),b.Kb(24,"th",8),b.vc(25,"Model"),b.Jb(),b.Jb(),b.Jb(),b.Kb(26,"tbody"),b.tc(27,Je,16,11,"tr",11),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(28,"div",12),b.Kb(29,"nav",13),b.Kb(30,"ul",14),b.Kb(31,"li",15),b.Kb(32,"span",16),b.vc(33,"items per page"),b.Jb(),b.Jb(),b.Kb(34,"li",17),b.Kb(35,"select",18),b.Sb("ngModelChange",function(e){return t.pageLimit=e})("ngModelChange",function(){return t.onPageSelected()}),b.Kb(36,"option",19),b.vc(37,"5"),b.Jb(),b.Kb(38,"option",20),b.vc(39,"10"),b.Jb(),b.Kb(40,"option",21),b.vc(41,"20"),b.Jb(),b.Jb(),b.Jb(),b.Kb(42,"li",22),b.Kb(43,"button",23),b.Sb("click",function(){return t.prePage()}),b.Ib(44,"i",24),b.vc(45," Previous"),b.Jb(),b.Jb(),b.Kb(46,"li",25),b.Kb(47,"button",23),b.Sb("click",function(){return t.nextPage()}),b.vc(48,"Next "),b.Ib(49,"i",26),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(50,"div",27),b.Kb(51,"div",28),b.Kb(52,"div",29),b.Kb(53,"div",30),b.Kb(54,"h5",31),b.Ib(55,"i",32),b.vc(56," Warning "),b.Jb(),b.Jb(),b.Kb(57,"div",33),b.vc(58," The data will be permanently erased!!! Are you sure to execute delete operation\uff1f "),b.Jb(),b.Kb(59,"div",34),b.Kb(60,"button",35),b.vc(61,"Cancel"),b.Jb(),b.Kb(62,"button",36),b.Sb("click",function(){return t.delete()}),b.vc(63,"Confirm"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()),2&e&&(b.wb(6),b.bc("ngIf",t.toolbars),b.wb(6),b.bc("ngIf",t.enableSelectAll),b.wb(7),b.bc("ngIf",t.associatedDeviceColumn),b.wb(8),b.bc("ngForOf",t.profileList),b.wb(8),b.bc("ngModel",t.pageLimit),b.wb(8),b.bc("disabled",1===t.pagination),b.wb(4),b.bc("disabled",t.pageLimit>t.profileList.length))},directives:[a.l,a.k,l.n,l.f,l.i,l.j,l.o,s.f,s.h],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),Se);function we(e,t){1&e&&b.Ib(0,"i",24)}function ke(e,t){1&e&&b.Ib(0,"i",24)}function Pe(e,t){1&e&&b.Ib(0,"i",24)}function Ce(e,t){1&e&&b.Ib(0,"i",24)}function De(e,t){1&e&&b.Ib(0,"i",24)}function Ie(e,t){if(1&e){var i=b.Lb();b.Kb(0,"button",25),b.Sb("click",function(){return b.oc(i),b.Vb().previous()}),b.Ib(1,"i",26),b.vc(2," Previous"),b.Jb()}}function Ne(e,t){if(1&e){var i=b.Lb();b.Kb(0,"button",27),b.Sb("click",function(){return b.oc(i),b.Vb().next()}),b.vc(1,"Next "),b.Ib(2,"i",28),b.Jb()}if(2&e){var n=b.Vb();b.bc("disabled",n.stepStateLock())}}function Ee(e,t){if(1&e){var i=b.Lb();b.Kb(0,"button",29),b.Sb("click",function(){return b.oc(i),b.Vb().skip()}),b.vc(1,"Skip "),b.Ib(2,"i",30),b.Jb()}}function Oe(e,t){if(1&e){var i=b.Lb();b.Kb(0,"button",31),b.Sb("click",function(){return b.oc(i),b.Vb().submit()}),b.Ib(1,"i",32),b.vc(2," Submit"),b.Jb()}if(2&e){var n=b.Vb();b.bc("disabled",!n.protocolName)}}function xe(e,t){if(1&e){var i=b.Lb();b.Kb(0,"div",33),b.Kb(1,"app-device-service-list",34),b.Sb("singleDeviceSvcSelectedEvent",function(e){return b.oc(i),b.Vb().onSingleDeviceSvcSelected(e)}),b.Jb(),b.Jb()}if(2&e){var n=b.Vb();b.wb(1),b.bc("deviceSvcSelected",n.selectedSvc)}}function Le(e,t){if(1&e){var i=b.Lb();b.Kb(0,"div",33),b.Kb(1,"app-device-profile-list",35),b.Sb("singleProfileSelectedEvent",function(e){return b.oc(i),b.Vb().onSingleProfileSelected(e)}),b.Jb(),b.Jb()}if(2&e){var n=b.Vb();b.wb(1),b.bc("singleProfileSelected",n.selectedProfile)("enableSelectAll",!1)("toolbars",!1)("associatedDeviceColumn",!1)}}function Me(e,t){if(1&e){var i=b.Lb();b.Kb(0,"form",36),b.Kb(1,"div",37),b.Kb(2,"label",38),b.vc(3,"Name"),b.Jb(),b.Kb(4,"div",39),b.Kb(5,"input",40),b.Sb("ngModelChange",function(e){return b.oc(i),b.Vb().newDevice.name=e}),b.Jb(),b.Kb(6,"div",41),b.Kb(7,"small"),b.vc(8,"the device name can't be empty!"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(9,"div",42),b.Kb(10,"label",43),b.vc(11,"Description"),b.Jb(),b.Kb(12,"div",39),b.Kb(13,"input",44),b.Sb("ngModelChange",function(e){return b.oc(i),b.Vb().newDevice.description=e}),b.Jb(),b.Jb(),b.Jb(),b.Kb(14,"div",42),b.Kb(15,"label",45),b.vc(16,"Labels"),b.Jb(),b.Kb(17,"div",39),b.Kb(18,"input",46),b.Sb("ngModelChange",function(e){return b.oc(i),b.Vb().deviceLabels=e}),b.Jb(),b.Jb(),b.Jb(),b.Kb(19,"div",42),b.Kb(20,"label",47),b.vc(21,"AdminState"),b.Jb(),b.Kb(22,"div",39),b.Kb(23,"select",48),b.Sb("ngModelChange",function(e){return b.oc(i),b.Vb().newDevice.adminState=e}),b.Kb(24,"option",49),b.vc(25,"UNLOCKED"),b.Jb(),b.Kb(26,"option",50),b.vc(27,"LOCKED"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(28,"div",42),b.Kb(29,"label",51),b.vc(30,"OperatingState"),b.Jb(),b.Kb(31,"div",39),b.Kb(32,"select",52),b.Sb("ngModelChange",function(e){return b.oc(i),b.Vb().newDevice.operatingState=e}),b.Kb(33,"option",53),b.vc(34,"UP"),b.Jb(),b.Kb(35,"option",54),b.vc(36,"DOWN"),b.Jb(),b.Kb(37,"option",54),b.vc(38,"UNKNOWN"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()}if(2&e){var n=b.Vb();b.wb(5),b.zb("is-invalid",!n.newDevice.name)("is-valid",n.newDevice.name),b.bc("ngModel",n.newDevice.name),b.wb(8),b.bc("ngModel",n.newDevice.description),b.wb(5),b.bc("ngModel",n.deviceLabels),b.wb(5),b.bc("ngModel",n.newDevice.adminState),b.wb(9),b.bc("ngModel",n.newDevice.operatingState)}}function Ae(e,t){if(1&e&&(b.Kb(0,"option",80),b.vc(1),b.Jb()),2&e){var i=t.$implicit;b.cc("value",i),b.wb(1),b.wc(i)}}function Ve(e,t){if(1&e){var i=b.Lb();b.Kb(0,"div",62),b.Kb(1,"div",57),b.Kb(2,"form"),b.Kb(3,"div",37),b.Kb(4,"label",63),b.vc(5,"Interval"),b.Jb(),b.Kb(6,"div",39),b.Kb(7,"div",64),b.Kb(8,"input",65),b.Sb("ngModelChange",function(e){return t.$implicit.interval=e}),b.Jb(),b.Kb(9,"div",66),b.Kb(10,"select",67),b.Sb("ngModelChange",function(e){return t.$implicit.unit=e}),b.Kb(11,"option",68),b.vc(12,"millisecond"),b.Jb(),b.Kb(13,"option",69),b.vc(14,"second"),b.Jb(),b.Kb(15,"option",70),b.vc(16,"minute"),b.Jb(),b.Kb(17,"option",71),b.vc(18,"hour"),b.Jb(),b.Jb(),b.Jb(),b.Kb(19,"div",72),b.vc(20," can only be a pure integer number "),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(21,"div",42),b.Kb(22,"label",63),b.vc(23,"onchange"),b.Jb(),b.Kb(24,"div",39),b.Kb(25,"select",73),b.Sb("ngModelChange",function(e){return t.$implicit.onChange=e}),b.Kb(26,"option",74),b.vc(27,"true"),b.Jb(),b.Kb(28,"option",75),b.vc(29,"false"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(30,"div",42),b.Kb(31,"label",63),b.vc(32,"resource"),b.Jb(),b.Kb(33,"div",39),b.Kb(34,"select",76),b.Sb("ngModelChange",function(e){return t.$implicit.resource=e}),b.tc(35,Ae,2,2,"option",77),b.Jb(),b.Kb(36,"div",72),b.vc(37," resource can't be empty "),b.Jb(),b.Jb(),b.Jb(),b.Kb(38,"button",78),b.Sb("click",function(){b.oc(i);var e=t.$implicit;return b.Vb(2).removeAutoEvent(e)}),b.Ib(39,"i",79),b.vc(40," Remove"),b.Jb(),b.Jb(),b.Jb(),b.Jb()}if(2&e){var n=t.$implicit,c=b.Vb(2);b.wb(8),b.zb("is-invalid",!c.eventIntervalNumType(n.interval))("is-valid",c.eventIntervalNumType(n.interval)),b.bc("ngModel",n.interval),b.wb(2),b.bc("ngModel",n.unit),b.wb(15),b.bc("ngModel",n.onChange),b.wb(9),b.zb("is-invalid",!n.resource)("is-valid",n.resource),b.bc("ngModel",n.resource),b.wb(1),b.bc("ngForOf",c.autoEventResourceNameSet)}}function Be(e,t){if(1&e){var i=b.Lb();b.Kb(0,"div",55),b.Kb(1,"div",1),b.Kb(2,"span",56),b.vc(3," this step is optional, you can skip it then use scheduler service to create schedule job."),b.Jb(),b.Jb(),b.Kb(4,"div",57),b.Kb(5,"p",58),b.Ib(6,"span",59),b.Kb(7,"span",60),b.Sb("click",function(){return b.oc(i),b.Vb().addAutoEvent()}),b.vc(8,"Add More AutoEvent"),b.Jb(),b.Jb(),b.tc(9,Ve,41,13,"div",61),b.Jb(),b.Jb()}if(2&e){var n=b.Vb();b.wb(9),b.bc("ngForOf",n.autoEventsInternal)}}function Ue(e,t){1&e&&b.Ib(0,"div")}var Te=function(){return{standalone:!0}};function je(e,t){if(1&e){var i=b.Lb();b.Kb(0,"div"),b.Kb(1,"form",97),b.Kb(2,"div",98),b.Kb(3,"div",99),b.Kb(4,"span",100),b.vc(5,"PropertyKey"),b.Jb(),b.Jb(),b.Ib(6,"input",101),b.Jb(),b.Kb(7,"div",102),b.Ib(8,"i",28),b.Jb(),b.Kb(9,"div",98),b.Kb(10,"div",99),b.Kb(11,"span",100),b.vc(12,"PropertyVaule"),b.Jb(),b.Jb(),b.Kb(13,"input",103),b.Sb("ngModelChange",function(e){b.oc(i);var n=t.$implicit;return b.Vb(4).selectedAvailTemplate[n]=e}),b.Jb(),b.Jb(),b.Jb(),b.Jb()}if(2&e){var n=t.$implicit,c=b.Vb(4);b.wb(6),b.bc("value",n),b.wb(7),b.cc("name",c.selectedAvailTemplate[n]),b.bc("ngModel",c.selectedAvailTemplate[n])("ngModelOptions",b.gc(4,Te))}}function $e(e,t){if(1&e&&(b.Kb(0,"div"),b.tc(1,je,14,5,"div",96),b.Jb()),2&e){var i=b.Vb(3);b.wb(1),b.bc("ngForOf",i.selectedAvailTemplateProperties)}}function Re(e,t){1&e&&(b.Kb(0,"h5",107),b.Ib(1,"i",108),b.vc(2," this device service doesn't need to set protocol properties. "),b.Jb())}function Fe(e,t){if(1&e&&(b.Kb(0,"div"),b.Ib(1,"span",104),b.Kb(2,"span",105),b.vc(3," all avaliable protocol templates refer to the device service released by edgex, such as device-virtual, device-rest, device-mqtt, device-modbus "),b.Jb(),b.Jb(),b.tc(4,Re,3,0,"h5",106)),2&e){var i=b.Vb(3);b.wb(4),b.bc("ngIf",i.protocolName)}}function He(e,t){if(1&e){var i=b.Lb();b.Kb(0,"div",86),b.Kb(1,"div",87),b.Kb(2,"div",88),b.Kb(3,"label"),b.vc(4,"Protocol Name"),b.Jb(),b.Kb(5,"select",89),b.Sb("ngModelChange",function(e){return b.oc(i),b.Vb(2).protocolName=e})("ngModelChange",function(){return b.oc(i),b.Vb(2).onAvailProtocolSelect()}),b.Kb(6,"option",90),b.vc(7,"device-mqtt"),b.Jb(),b.Kb(8,"option",91),b.vc(9,"device-rest"),b.Jb(),b.Kb(10,"option",91),b.vc(11,"device-virtual"),b.Jb(),b.Kb(12,"option",92),b.vc(13,"device-modbus-tcp"),b.Jb(),b.Kb(14,"option",93),b.vc(15,"device-modbus-rtu"),b.Jb(),b.Jb(),b.Kb(16,"div",72),b.Kb(17,"small"),b.vc(18,"the protocol name can't be empty!"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(19,"div",39),b.tc(20,$e,2,1,"div",94),b.tc(21,Fe,5,1,"ng-template",null,95,b.uc),b.Jb(),b.Jb()}if(2&e){var n=b.lc(22),c=b.Vb(2);b.wb(5),b.zb("is-invalid",!c.protocolName)("is-valid",c.protocolName),b.bc("ngModel",c.protocolName),b.wb(15),b.bc("ngIf",0!==c.selectedAvailTemplateProperties.length)("ngIfElse",n)}}function qe(e,t){if(1&e){var i=b.Lb();b.Kb(0,"div"),b.Kb(1,"form",97),b.Kb(2,"div",98),b.Kb(3,"div",99),b.Kb(4,"span",100),b.vc(5,"PropertyKey"),b.Jb(),b.Jb(),b.Kb(6,"input",113),b.Sb("ngModelChange",function(e){return t.$implicit.key=e}),b.Jb(),b.Jb(),b.Kb(7,"div",102),b.Ib(8,"i",28),b.Jb(),b.Kb(9,"div",98),b.Kb(10,"div",99),b.Kb(11,"span",100),b.vc(12,"PropertyValue"),b.Jb(),b.Jb(),b.Kb(13,"input",114),b.Sb("ngModelChange",function(e){return t.$implicit.value=e}),b.Jb(),b.Jb(),b.Kb(14,"div",115),b.Kb(15,"button",78),b.Sb("click",function(){b.oc(i);var e=t.$implicit;return b.Vb(3).removeProtocolProperty(e)}),b.Ib(16,"i",79),b.Jb(),b.Jb(),b.Jb(),b.Jb()}if(2&e){var n=t.$implicit;b.wb(6),b.bc("ngModel",n.key),b.wb(7),b.bc("ngModel",n.value)}}function ze(e,t){if(1&e){var i=b.Lb();b.Kb(0,"div",86),b.Kb(1,"div",109),b.Kb(2,"div",88),b.Kb(3,"label"),b.vc(4,"Protocol Name"),b.Jb(),b.Kb(5,"input",110),b.Sb("ngModelChange",function(e){return b.oc(i),b.Vb(2).protocolName=e}),b.Jb(),b.Kb(6,"div",72),b.Kb(7,"small"),b.vc(8,"the protocol name can't be empty!"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(9,"div",111),b.Kb(10,"div",112),b.Kb(11,"div"),b.Kb(12,"p",58),b.Ib(13,"span",59),b.Kb(14,"span",60),b.Sb("click",function(){return b.oc(i),b.Vb(2).addProtocolProperty()}),b.vc(15,"Add Protocol Property"),b.Jb(),b.Jb(),b.Jb(),b.tc(16,qe,17,2,"div",96),b.Jb(),b.Jb(),b.Jb()}if(2&e){var n=b.Vb(2);b.wb(5),b.zb("is-invalid",!n.protocolName)("is-valid",n.protocolName),b.bc("ngModel",n.protocolName),b.wb(11),b.bc("ngForOf",n.protocolPropertyList)}}function Ge(e,t){if(1&e){var i=b.Lb();b.Kb(0,"div",55),b.Kb(1,"div",57),b.Kb(2,"p",81),b.Ib(3,"span",59),b.Kb(4,"span",60),b.Sb("click",function(){return b.oc(i),b.Vb().setProtocolTemplate("avaliable")}),b.vc(5,"Avaliable Protocol Templates"),b.Jb(),b.Jb(),b.Kb(6,"p",82),b.Ib(7,"span",59),b.Kb(8,"span",60),b.Sb("click",function(){return b.oc(i),b.Vb().setProtocolTemplate("custom")}),b.vc(9,"Custom Protocol Templates"),b.Jb(),b.Jb(),b.tc(10,Ue,1,0,"div",83),b.tc(11,He,23,7,"ng-template",null,84,b.uc),b.tc(13,ze,17,6,"ng-template",null,85,b.uc),b.Jb(),b.Jb()}if(2&e){var n=b.lc(12),c=b.lc(14),o=b.Vb();b.wb(2),b.zb("badge-primary","avaliable"===o.protocolTemplateModel)("badge-secondary","avaliable"!==o.protocolTemplateModel),b.wb(4),b.zb("badge-primary","custom"===o.protocolTemplateModel)("badge-secondary","custom"!==o.protocolTemplateModel),b.wb(4),b.bc("ngIf","custom"===o.protocolTemplateModel)("ngIfThen",c)("ngIfElse",n)}}var Ye,We=function e(){i(this,e),this.Schema="",this.Host="",this.Port="",this.User="",this.Password="",this.ClientId="",this.Topic=""},_e=function e(){i(this,e),this.Address="",this.Port="",this.UnitID=""},Xe=function e(){i(this,e),this.Address="",this.UnitID="",this.BaudRate="",this.DataBits="",this.StopBits="",this.Parity=""},Qe=((Ye=function(){function e(t,n,c,o){i(this,e),this.metaSvc=t,this.msgSvc=n,this.router=c,this.route=o,this.deviceLabels="",this.currentStep=0,this.selectedClass="text-white rounded px-2 bg-success  font-weight-bold",this.noSelectedClass="text-white rounded px-2 bg-secondary  font-weight-bold",this.autoEventResourceNameSet=[],this.autoEventsInternal=[{interval:"",onChange:!1,resource:"",unit:"ms"}],this.protocolTemplateModel="avaliable",this.protocolName="",this.protocolProperty={key:null,value:null},this.protocolPropertyList=[{key:null,value:null}],this.selectedAvailTemplateProperties=[],this.newDevice={adminState:"UNLOCKED",operatingState:"UP"}}return c(e,[{key:"ngOnInit",value:function(){}},{key:"onSingleProfileSelected",value:function(e){this.selectedProfile=e,this.setupAutoEventResourceNameSet(this.selectedProfile)}},{key:"setupAutoEventResourceNameSet",value:function(e){var t=this;e.deviceResources.forEach(function(e,i){t.autoEventResourceNameSet.push(e.name)}),e.deviceCommands.forEach(function(e,i){t.autoEventResourceNameSet.push(e.name)})}},{key:"onSingleDeviceSvcSelected",value:function(e){this.selectedSvc=e}},{key:"onAvailProtocolSelect",value:function(){switch(this.protocolName){case"mqtt":return this.selectedAvailTemplate=new We,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));case"modbus-tcp":return this.selectedAvailTemplate=new _e,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));case"modbus-rtu":return this.selectedAvailTemplate=new Xe,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));default:return this.selectedAvailTemplate={},void(this.selectedAvailTemplateProperties=[])}}},{key:"cleanSelectedAvailTemplateProperties",value:function(){this.selectedAvailTemplateProperties=[]}},{key:"setAutoEventInternal",value:function(e){var t,i=this;e.forEach(function(e){var n=0;e.interval.indexOf("ms")?n=e.interval.indexOf("ms"):e.interval.indexOf("s")?n=e.interval.indexOf("s"):e.interval.indexOf("m")?n=e.interval.indexOf("m"):e.interval.indexOf("h")&&(n=e.interval.indexOf("h")),t=e.interval.substring(n),i.autoEventsInternal.push({interval:e.interval.slice(0,n),onChange:e.onChange,resource:e.sourceName,unit:t})})}},{key:"eventIntervalNumType",value:function(e){return!isNaN(e)&&parseFloat(e)===parseInt(e)}},{key:"setProtocolTemplate",value:function(e){this.protocolName="",this.cleanSelectedAvailTemplateProperties(),this.cleanCustomProtocolProperty(),this.protocolTemplateModel=e}},{key:"addProtocolProperty",value:function(){this.protocolPropertyList.push({key:"",value:""})}},{key:"removeProtocolProperty",value:function(e){this.protocolPropertyList.splice(this.protocolPropertyList.indexOf(e),1)}},{key:"cleanCustomProtocolProperty",value:function(){this.protocolPropertyList=[],this.protocolPropertyList.push({key:"",value:""})}},{key:"addAutoEvent",value:function(){this.autoEventsInternal.push({interval:"",onChange:!1,resource:"",unit:"ms"})}},{key:"removeAutoEvent",value:function(e){this.autoEventsInternal.splice(this.autoEventsInternal.indexOf(e),1)}},{key:"stepStateLock",value:function(){var e=this;switch(this.currentStep){case 0:return void 0===this.selectedSvc;case 1:return void 0===this.selectedProfile;case 2:return""===this.newDevice.name;case 3:var t=!1;return this.autoEventsInternal.forEach(function(i){""!==i.resource&&e.eventIntervalNumType(i.interval)||(t=!0)}),t;case 4:default:return!1}}},{key:"skip",value:function(){this.autoEventsInternal=[],this.next()}},{key:"next",value:function(){this.currentStep+=1}},{key:"previous",value:function(){this.currentStep=this.currentStep-1}},{key:"changeStep",value:function(){this.currentStep+=1}},{key:"submit",value:function(){var e,t,i,n=this,c={},o={};"custom"===this.protocolTemplateModel?(this.protocolPropertyList.forEach(function(e){o[e.key]=e.value}),c[this.protocolName]=o):c[this.protocolName]=Object.assign({},this.selectedAvailTemplate);var r=[];this.autoEventsInternal.forEach(function(e){r.push({interval:"".concat(parseInt(e.interval)).concat(e.unit),onChange:!!e.onChange,sourceName:e.resource})}),this.newDevice.labels=null===(e=this.deviceLabels)||void 0===e?void 0:e.split(","),this.newDevice.serviceName=null===(t=this.selectedSvc)||void 0===t?void 0:t.name,this.newDevice.profileName=null===(i=this.selectedProfile)||void 0===i?void 0:i.name,this.newDevice.protocols=c,this.newDevice.autoEvents=r,this.metaSvc.addDevice(this.newDevice).subscribe(function(){n.msgSvc.success("Add device","name: "+n.newDevice.name),n.router.navigate(["../device-list"],{relativeTo:n.route})})}}]),e}()).\u0275fac=function(e){return new(e||Ye)(b.Hb(v.a),b.Hb(u.a),b.Hb(s.e),b.Hb(s.a))},Ye.\u0275cmp=b.Bb({type:Ye,selectors:[["app-add-device"]],decls:47,vars:20,consts:[[1,"card"],[1,"card-header"],[1,"font-weight-bold"],[1,"fa","fa-lightbulb-o","fa-lg","mr-2","text-danger"],[1,"text-secondary"],[1,"card-header","bg-light"],["aria-label","breadcrumb",1,"mb-0","p-0"],[1,"breadcrumb","p-1","mb-0","bg-light"],[1,"breadcrumb-item"],[3,"ngClass"],["class","fa fa-check",4,"ngIf"],[1,"breadcrumb-item","active"],["class","btn btn-info btn-sm",3,"click",4,"ngIf"],["class","btn btn-primary btn-sm float-right",3,"disabled","click",4,"ngIf","ngIfElse"],["class","btn btn-success btn-sm float-right mr-2",3,"click",4,"ngIf"],["stepDone",""],[1,"card-body","p-0"],[3,"ngSwitch"],[3,"ngSwitchCase"],["SelectDeviceService",""],["SelectDeviceProfile",""],["DevicePrimary",""],["CreateAutoEvent",""],["CreateDeviceProtocol",""],[1,"fa","fa-check"],[1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-long-arrow-left"],[1,"btn","btn-primary","btn-sm","float-right",3,"disabled","click"],[1,"fa","fa-long-arrow-right"],[1,"btn","btn-success","btn-sm","float-right","mr-2",3,"click"],[1,"fa","fa-share"],[1,"btn","btn-success","btn-sm","ml-4","float-right",3,"disabled","click"],[1,"fa","fa-save"],[1,"p-2"],[3,"deviceSvcSelected","singleDeviceSvcSelectedEvent"],[3,"singleProfileSelected","enableSelectAll","toolbars","associatedDeviceColumn","singleProfileSelectedEvent"],[1,"px-5","py-4"],[1,"form-group","row","has-validation"],["for","deviceName","required","",1,"col-md-2","col-form-label"],[1,"col-md-10"],["type","text","id","validationDeviceNameFeedback","name","deviceName",1,"form-control",3,"ngModel","ngModelChange"],["id","validationDeviceNameFeedback",1,"invalid-feedback"],[1,"form-group","row"],["for","deviceDesc",1,"col-md-2","col-form-label"],["type","text","name","deviceDescription",1,"form-control",3,"ngModel","ngModelChange"],["for","deviceLabels",1,"col-md-2","col-form-label"],["type","text","name","deviceLabels","placeholder","Multiple Labels are separated by commas: label1,label2,label3",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],["name","deviceAdminState",1,"form-control",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"],["for","operatingState",1,"col-md-2","col-form-label"],["name","deviceOperatingState",1,"form-control",3,"ngModel","ngModelChange"],["value","UP"],["value","DOWN"],[1,"card","border-0"],[1,"fa","fa-info-circle","text-warning","font-weight-bold"],[1,"card-body"],[1,"badge","badge-secondary","font-weight-bold"],[1,"fa","fa-plus-circle","mr-2"],["role","button",1,"user-select-none",3,"click"],["class","card mb-3",4,"ngFor","ngForOf"],[1,"card","mb-3"],[1,"col-md-2","col-form-label"],[1,"input-group","mb-3",2,"width","250px"],["type","text","name","interval","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["name","eventIntervalUnit","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","ms"],["value","s"],["value","m"],["value","h"],[1,"invalid-feedback"],["name","onchange",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],["value","true"],["value","false"],["name","resource","required","",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"],[3,"value"],[1,"badge","font-weight-bold","mr-3"],[1,"badge","font-weight-bold"],[4,"ngIf","ngIfThen","ngIfElse"],["avaliProtocolTemplate",""],["customProtocolTemplate",""],[1,"row","border","border-secondary","p-2","rounded-lg","mx-1"],[1,"col-md-2","border-right","border-info"],[1,"form-group"],["type","text","name","protocolName","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","mqtt"],["value","other"],["value","modbus-tcp"],["value","modbus-rtu"],[4,"ngIf","ngIfElse"],["noAvailProperty",""],[4,"ngFor","ngForOf"],[1,"form-inline","mb-1"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","disabled","",1,"form-control",2,"width","300px",3,"value"],[1,"form-group","mx-2"],["type","text",1,"form-control",2,"width","300px",3,"name","ngModel","ngModelOptions","ngModelChange"],[1,"fa","fa-info-circle","fa-lg","text-success","font-weight-bold","mr-1"],[1,"text-muted"],["class","text-warning",4,"ngIf"],[1,"text-warning"],[1,"fa","fa-warning"],[1,"col-md-2","col-lg-2","border-right","border-info"],["type","text","name","protocolName",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-10","col-lg-10"],[1,""],["type","text","name","propertyKey",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],["type","text","name","PropertyValue",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"input-group","ml-2"]],template:function(e,t){if(1&e&&(b.Kb(0,"div",0),b.Kb(1,"div",1),b.Kb(2,"span",2),b.Ib(3,"span",3),b.Kb(4,"span",4),b.vc(5,"Add Device Wizard"),b.Jb(),b.Jb(),b.Jb(),b.Kb(6,"div",5),b.Kb(7,"nav",6),b.Kb(8,"ol",7),b.Kb(9,"li",8),b.Kb(10,"span",9),b.vc(11,"SelectDeviceService "),b.tc(12,we,1,0,"i",10),b.Jb(),b.Jb(),b.Kb(13,"li",8),b.Kb(14,"span",9),b.vc(15,"SelectDeviceProfile "),b.tc(16,ke,1,0,"i",10),b.Jb(),b.Jb(),b.Kb(17,"li",8),b.Kb(18,"span",9),b.vc(19,"DevicePrimary "),b.tc(20,Pe,1,0,"i",10),b.Jb(),b.Jb(),b.Kb(21,"li",8),b.Kb(22,"span",9),b.vc(23,"CreateAutoEvent "),b.tc(24,Ce,1,0,"i",10),b.Jb(),b.Jb(),b.Kb(25,"li",11),b.Kb(26,"span",9),b.vc(27,"CreateDeviceProtocol "),b.tc(28,De,1,0,"i",10),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(29,"div",1),b.tc(30,Ie,3,0,"button",12),b.tc(31,Ne,3,1,"button",13),b.tc(32,Ee,3,0,"button",14),b.tc(33,Oe,3,1,"ng-template",null,15,b.uc),b.Jb(),b.Kb(35,"div",16),b.Kb(36,"div",17),b.tc(37,xe,2,1,"ng-template",18,19,b.uc),b.tc(39,Le,2,4,"ng-template",18,20,b.uc),b.tc(41,Me,39,9,"ng-template",18,21,b.uc),b.tc(43,Be,10,1,"ng-template",18,22,b.uc),b.tc(45,Ge,15,11,"ng-template",18,23,b.uc),b.Jb(),b.Jb(),b.Jb()),2&e){var i=b.lc(34);b.wb(10),b.bc("ngClass",t.currentStep>=0?t.selectedClass:t.noSelectedClass),b.wb(2),b.bc("ngIf",t.currentStep>=1),b.wb(2),b.bc("ngClass",t.currentStep>=1?t.selectedClass:t.noSelectedClass),b.wb(2),b.bc("ngIf",t.currentStep>=2),b.wb(2),b.bc("ngClass",t.currentStep>=2?t.selectedClass:t.noSelectedClass),b.wb(2),b.bc("ngIf",t.currentStep>=3),b.wb(2),b.bc("ngClass",t.currentStep>=3?t.selectedClass:t.noSelectedClass),b.wb(2),b.bc("ngIf",t.currentStep>=4),b.wb(2),b.bc("ngClass",t.currentStep>=4?t.selectedClass:t.noSelectedClass),b.wb(2),b.bc("ngIf",t.currentStep>=5),b.wb(2),b.bc("ngIf",t.currentStep),b.wb(1),b.bc("ngIf",4>t.currentStep)("ngIfElse",i),b.wb(1),b.bc("ngIf",3===t.currentStep),b.wb(4),b.bc("ngSwitch",t.currentStep),b.wb(1),b.bc("ngSwitchCase",0),b.wb(2),b.bc("ngSwitchCase",1),b.wb(2),b.bc("ngSwitchCase",2),b.wb(2),b.bc("ngSwitchCase",3),b.wb(2),b.bc("ngSwitchCase",4)}},directives:[a.j,a.l,a.n,a.o,fe,ye,l.p,l.g,l.h,l.a,l.f,l.i,l.n,l.j,l.o,a.k,l.m],styles:['.breadcrumb[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]:before{color:inherit;font-weight:inherit;content:">>";padding:0 5px}.btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}']}),Ye);function Ze(e,t){if(1&e){var i=b.Lb();b.Kb(0,"div"),b.Kb(1,"form",40),b.Kb(2,"div",41),b.Kb(3,"div",42),b.Kb(4,"span",43),b.vc(5,"PropertyKey"),b.Jb(),b.Jb(),b.Kb(6,"input",44),b.Sb("ngModelChange",function(e){return t.$implicit.key=e}),b.Jb(),b.Jb(),b.Kb(7,"div",45),b.Ib(8,"i",46),b.Jb(),b.Kb(9,"div",41),b.Kb(10,"div",42),b.Kb(11,"span",43),b.vc(12,"PropertyValue"),b.Jb(),b.Jb(),b.Kb(13,"input",47),b.Sb("ngModelChange",function(e){return t.$implicit.value=e}),b.Jb(),b.Jb(),b.Kb(14,"div",48),b.Kb(15,"button",49),b.Sb("click",function(){b.oc(i);var e=t.$implicit;return b.Vb(2).removeProtocolProperty(e)}),b.Ib(16,"i",50),b.Jb(),b.Jb(),b.Jb(),b.Jb()}if(2&e){var n=t.$implicit;b.wb(6),b.bc("ngModel",n.key),b.wb(7),b.bc("ngModel",n.value)}}function et(e,t){if(1&e&&(b.Kb(0,"option",65),b.vc(1),b.Jb()),2&e){var i=t.$implicit;b.cc("value",i),b.wb(1),b.wc(i)}}function tt(e,t){if(1&e){var i=b.Lb();b.Kb(0,"div",10),b.Kb(1,"div",9),b.Kb(2,"form"),b.Kb(3,"div",51),b.Kb(4,"label",13),b.vc(5,"Interval"),b.Jb(),b.Kb(6,"div",14),b.Kb(7,"div",52),b.Kb(8,"input",53),b.Sb("ngModelChange",function(e){return t.$implicit.interval=e}),b.Jb(),b.Kb(9,"div",54),b.Kb(10,"select",55),b.Sb("ngModelChange",function(e){return t.$implicit.unit=e}),b.Kb(11,"option",56),b.vc(12,"millisecond"),b.Jb(),b.Kb(13,"option",57),b.vc(14,"second"),b.Jb(),b.Kb(15,"option",58),b.vc(16,"minute"),b.Jb(),b.Kb(17,"option",59),b.vc(18,"hour"),b.Jb(),b.Jb(),b.Jb(),b.Kb(19,"div",16),b.vc(20," can only be a pure integer number "),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(21,"div",12),b.Kb(22,"label",13),b.vc(23,"onchange"),b.Jb(),b.Kb(24,"div",14),b.Kb(25,"select",60),b.Sb("ngModelChange",function(e){return t.$implicit.onChange=e}),b.Kb(26,"option",61),b.vc(27,"true"),b.Jb(),b.Kb(28,"option",62),b.vc(29,"false"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(30,"div",12),b.Kb(31,"label",13),b.vc(32,"resource"),b.Jb(),b.Kb(33,"div",14),b.Kb(34,"select",63),b.Sb("ngModelChange",function(e){return t.$implicit.resource=e}),b.tc(35,et,2,2,"option",64),b.Jb(),b.Kb(36,"div",16),b.vc(37," resource can't be empty "),b.Jb(),b.Jb(),b.Jb(),b.Kb(38,"button",49),b.Sb("click",function(){b.oc(i);var e=t.$implicit;return b.Vb(2).removeAutoEvent(e)}),b.Ib(39,"i",50),b.vc(40," Remove"),b.Jb(),b.Jb(),b.Jb(),b.Jb()}if(2&e){var n=t.$implicit,c=b.Vb(2);b.wb(8),b.zb("is-invalid",!c.eventIntervalNumType(n.interval))("is-valid",c.eventIntervalNumType(n.interval)),b.bc("ngModel",n.interval),b.wb(2),b.bc("ngModel",n.unit),b.wb(15),b.bc("ngModel",n.onChange),b.wb(9),b.zb("is-invalid",""===n.resource)("is-valid",""!==n.resource),b.bc("ngModel",n.resource),b.wb(1),b.bc("ngForOf",c.autoEventResourceNameSet)}}function it(e,t){if(1&e){var i=b.Lb();b.Kb(0,"div",1),b.Kb(1,"div",2),b.Ib(2,"i",3),b.Kb(3,"span",4),b.vc(4,"Edit Device"),b.Jb(),b.Kb(5,"span",5),b.vc(6),b.Jb(),b.Jb(),b.Kb(7,"div",6),b.Kb(8,"button",7),b.Sb("click",function(){return b.oc(i),b.Vb().save()}),b.Kb(9,"span"),b.Ib(10,"i",8),b.vc(11,"Save"),b.Jb(),b.Jb(),b.Jb(),b.Kb(12,"div",9),b.Kb(13,"div",10),b.Kb(14,"div",2),b.Ib(15,"i",11),b.vc(16," Device Primary "),b.Jb(),b.Kb(17,"div",9),b.Kb(18,"form"),b.Kb(19,"div",12),b.Kb(20,"label",13),b.vc(21,"DeviceName"),b.Jb(),b.Kb(22,"div",14),b.Kb(23,"input",15),b.Sb("ngModelChange",function(e){return b.oc(i),b.Vb().device.name=e}),b.Jb(),b.Kb(24,"div",16),b.vc(25," device name can't not be empty! "),b.Jb(),b.Jb(),b.Jb(),b.Kb(26,"div",12),b.Kb(27,"label",13),b.vc(28,"Description"),b.Jb(),b.Kb(29,"div",14),b.Kb(30,"input",17),b.Sb("ngModelChange",function(e){return b.oc(i),b.Vb().device.description=e}),b.Jb(),b.Jb(),b.Jb(),b.Kb(31,"div",12),b.Kb(32,"label",13),b.vc(33,"Labels"),b.Jb(),b.Kb(34,"div",14),b.Kb(35,"input",18),b.Sb("ngModelChange",function(e){return b.oc(i),b.Vb().deviceLabels=e}),b.Jb(),b.Jb(),b.Jb(),b.Kb(36,"div",12),b.Kb(37,"label",19),b.vc(38,"AdminState"),b.Jb(),b.Kb(39,"div",14),b.Kb(40,"select",20),b.Sb("ngModelChange",function(e){return b.oc(i),b.Vb().device.adminState=e}),b.Kb(41,"option",21),b.vc(42,"UNLOCKED"),b.Jb(),b.Kb(43,"option",22),b.vc(44,"LOCKED"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(45,"div",12),b.Kb(46,"label",23),b.vc(47,"OperatingState"),b.Jb(),b.Kb(48,"div",14),b.Kb(49,"select",24),b.Sb("ngModelChange",function(e){return b.oc(i),b.Vb().device.operatingState=e}),b.Kb(50,"option",25),b.vc(51,"UP"),b.Jb(),b.Kb(52,"option",26),b.vc(53,"DOWN"),b.Jb(),b.Kb(54,"option",26),b.vc(55,"UNKNOWN"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(56,"div",27),b.Kb(57,"app-device-service-list",28),b.Sb("singleDeviceSvcSelectedEvent",function(e){return b.oc(i),b.Vb().onSingleDeviceSvcSelected(e)}),b.Jb(),b.Jb(),b.Kb(58,"div",27),b.Kb(59,"app-device-profile-list",29),b.Sb("singleProfileSelectedEvent",function(e){return b.oc(i),b.Vb().onSingleProfileSelected(e)}),b.Jb(),b.Jb(),b.Kb(60,"div",10),b.Kb(61,"div",2),b.Ib(62,"i",11),b.vc(63," Device Protocol "),b.Jb(),b.Kb(64,"div",9),b.Kb(65,"div",1),b.Kb(66,"div",9),b.Kb(67,"div",30),b.Kb(68,"div",31),b.Kb(69,"div",32),b.Kb(70,"label"),b.vc(71,"Protocol Name"),b.Jb(),b.Kb(72,"input",33),b.Sb("ngModelChange",function(e){return b.oc(i),b.Vb().protocolName=e}),b.Jb(),b.Kb(73,"div",16),b.Kb(74,"small"),b.vc(75,"the protocol name can't be empty!"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(76,"div",34),b.Kb(77,"div"),b.Kb(78,"p",35),b.Ib(79,"span",36),b.Kb(80,"span",37),b.Sb("click",function(){return b.oc(i),b.Vb().addProtocolProperty()}),b.vc(81,"Add Protocol Property"),b.Jb(),b.Jb(),b.Jb(),b.tc(82,Ze,17,2,"div",38),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(83,"div",10),b.Kb(84,"div",2),b.Ib(85,"i",11),b.vc(86," AutoEvents "),b.Jb(),b.Kb(87,"div",9),b.Kb(88,"p",35),b.Ib(89,"span",36),b.Kb(90,"span",37),b.Sb("click",function(){return b.oc(i),b.Vb().addAutoEvent()}),b.vc(91,"Add More AutoEvent"),b.Jb(),b.Jb(),b.tc(92,tt,41,13,"div",39),b.Jb(),b.Jb(),b.Jb(),b.Jb()}if(2&e){var n=b.Vb();b.wb(6),b.wc(n.device.name),b.wb(2),b.bc("disabled",n.validateBeforeSave()),b.wb(15),b.zb("is-invalid",""===n.device.name),b.bc("ngModel",n.device.name),b.wb(7),b.bc("ngModel",n.device.description),b.wb(5),b.bc("ngModel",n.deviceLabels),b.wb(5),b.bc("ngModel",n.device.adminState),b.wb(9),b.bc("ngModel",n.device.operatingState),b.wb(8),b.bc("deviceSvcSelected",n.selectedSvc),b.wb(2),b.bc("enableSelectAll",!1)("toolbars",!1)("singleProfileSelected",n.selectedProfile)("associatedDeviceColumn",!1),b.wb(13),b.zb("is-invalid",!n.protocolName)("is-valid",n.protocolName),b.bc("ngModel",n.protocolName),b.wb(10),b.bc("ngForOf",n.protocolPropertyList),b.wb(10),b.bc("ngForOf",n.autoEventsInternal)}}var nt,ct,ot,rt,at,lt,st,bt,dt,vt,ut=((ct=function(){function t(e,n,c,o){i(this,t),this.router=e,this.route=n,this.metaSvc=c,this.msgSvc=o,this.autoEventsInternal=[],this.autoEventResourceNameSet=[],this.protocolProperty={key:"",value:""},this.protocolPropertyList=[]}return c(t,[{key:"ngOnInit",value:function(){var t=this;this.route.queryParams.subscribe(function(i){t.metaSvc.findDeviceByName(i.deviceName).subscribe(function(i){var n;t.device=i.device,t.deviceLabels=null===(n=t.device.labels)||void 0===n?void 0:n.join(","),t.setAutoEventInternal(t.device.autoEvents),t.protocolName=Object.keys(t.device.protocols)[0];for(var c=0,o=Object.entries(t.device.protocols[t.protocolName]);c<o.length;c++){var r=e(o[c],2),a=r[0],l=r[1];t.protocolPropertyList.push({key:a,value:l})}t.setDefaultDeviceSvcSelected(t.device.serviceName),t.setDefaultDeviceProfileSelected(t.device.profileName)})})}},{key:"onSingleProfileSelected",value:function(e){this.selectedProfile=e,this.resetAutoEventsInternal(),this.setupAutoEventResourceNameSet(this.selectedProfile)}},{key:"onSingleDeviceSvcSelected",value:function(e){this.selectedSvc=e}},{key:"setDefaultDeviceSvcSelected",value:function(e){var t=this;this.metaSvc.findDevcieServiceByName(e).subscribe(function(e){t.selectedSvc=e.service})}},{key:"setDefaultDeviceProfileSelected",value:function(e){var t=this;this.metaSvc.findProfileByName(e).subscribe(function(e){t.selectedProfile=e.profile,t.setupAutoEventResourceNameSet(t.selectedProfile)})}},{key:"resetAutoEventsInternal",value:function(){this.autoEventsInternal=[]}},{key:"setupAutoEventResourceNameSet",value:function(e){var t=this;e.deviceResources.forEach(function(e,i){t.autoEventResourceNameSet.push(e.name)}),e.deviceCommands.forEach(function(e,i){t.autoEventResourceNameSet.push(e.name)})}},{key:"setAutoEventInternal",value:function(e){var t,i=this;null==e||e.forEach(function(e){var n=0;-1!==e.interval.indexOf("ms")?n=e.interval.indexOf("ms"):-1!==e.interval.indexOf("s")?n=e.interval.indexOf("s"):-1!==e.interval.indexOf("m")?n=e.interval.indexOf("m"):-1!==e.interval.indexOf("h")&&(n=e.interval.indexOf("h")),t=e.interval.substring(n),i.autoEventsInternal.push({interval:e.interval.slice(0,n),onChange:!!e.onChange,resource:e.sourceName,unit:t})})}},{key:"eventIntervalNumType",value:function(e){return!isNaN(e)&&parseFloat(e)===parseInt(e)}},{key:"addProtocolProperty",value:function(){this.protocolPropertyList.push({key:"",value:""})}},{key:"removeProtocolProperty",value:function(e){this.protocolPropertyList.splice(this.protocolPropertyList.indexOf(e),1)}},{key:"addAutoEvent",value:function(){this.autoEventsInternal.push({interval:"",onChange:!1,resource:"",unit:"ms"})}},{key:"removeAutoEvent",value:function(e){this.autoEventsInternal.splice(this.autoEventsInternal.indexOf(e),1)}},{key:"validateBeforeSave",value:function(){var e,t=this;if((null===(e=this.device)||void 0===e?void 0:e.name)&&this.protocolName){var i=!1;return this.autoEventsInternal.forEach(function(e){t.eventIntervalNumType(e.interval)&&""!==e.resource||(i=!0)}),i}return!0}},{key:"save",value:function(){var e,t,i,n=this,c=this.device,o={},r={};c.labels=null===(e=this.deviceLabels)||void 0===e?void 0:e.split(","),c.serviceName=null===(t=this.selectedSvc)||void 0===t?void 0:t.name,c.profileName=null===(i=this.selectedProfile)||void 0===i?void 0:i.name,this.protocolPropertyList.forEach(function(e){r[e.key]=e.value}),o[this.protocolName]=r,c.protocols=o,c.autoEvents=[],this.autoEventsInternal.forEach(function(e){c.autoEvents.push({interval:"".concat(parseInt(e.interval)).concat(e.unit),onChange:!!e.onChange,sourceName:e.resource})}),this.metaSvc.updateDevice(c).subscribe(function(){var e;n.msgSvc.success("update device","name: "+(null===(e=n.device)||void 0===e?void 0:e.name)),n.router.navigate(["../device-list"],{relativeTo:n.route})})}},{key:"showTips",value:function(){$(".a-question-circle-o").tooltip("toggle")}}]),t}()).\u0275fac=function(e){return new(e||ct)(b.Hb(s.e),b.Hb(s.a),b.Hb(v.a),b.Hb(u.a))},ct.\u0275cmp=b.Bb({type:ct,selectors:[["app-edit-device"]],decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-edit","text-danger","fa-lg"],[1,"mx-2"],[1,"text-primary"],[1,"card-header","py-1"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-save","mr-1"],[1,"card-body"],[1,"card","mb-3"],[1,"fa","fa-tags","fa-lg","text-danger"],[1,"form-group","row"],[1,"col-md-2","col-form-label"],[1,"col-md-10"],["type","text","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"invalid-feedback"],["type","text","name","description",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","labels",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],["name","adminState",1,"form-control",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"],["for","operatingState",1,"col-md-2","col-form-label"],["name","operatingState",1,"form-control",3,"ngModel","ngModelChange"],["value","UP"],["value","DOWN"],[1,"mb-3"],[3,"deviceSvcSelected","singleDeviceSvcSelectedEvent"],[3,"enableSelectAll","toolbars","singleProfileSelected","associatedDeviceColumn","singleProfileSelectedEvent"],[1,"row"],[1,"col-md-2","col-lg-2","border-right","border-secondary"],[1,"form-group"],["type","text","name","protocolName",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-10","col-lg-10"],[1,"badge","badge-secondary","font-weight-bold"],[1,"fa","fa-plus-circle","mr-2"],["role","button",1,"user-select-none",3,"click"],[4,"ngFor","ngForOf"],["class","card mb-3",4,"ngFor","ngForOf"],[1,"form-inline","mb-1"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","name","propertyKey",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"form-group","mx-2"],[1,"fa","fa-long-arrow-right"],["type","text","name","PropertyValue",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"input-group","ml-2"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"],[1,"form-group","row","has-validation"],[1,"input-group","mb-3",2,"width","250px"],["type","text","name","interval","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["name","eventIntervalUnit","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","ms"],["value","s"],["value","m"],["value","h"],["name","onchange",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],["value","true"],["value","false"],["name","resource","required","",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&b.tc(0,it,93,21,"div",0),2&e&&b.bc("ngIf",t.device)},directives:[a.l,l.p,l.g,l.h,l.a,l.m,l.f,l.i,l.n,l.j,l.o,fe,ye,a.k],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),ct),ft=((nt=function(){function e(){i(this,e)}return c(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||nt)},nt.\u0275cmp=b.Bb({type:nt,selectors:[["app-device-profile-center"]],decls:1,vars:0,template:function(e,t){1&e&&b.Ib(0,"router-outlet")},directives:[s.j],styles:[""]}),nt),pt=o("9vc0"),ht=((st=function(){function e(t,n,c,o,r){i(this,e),this.metaSvc=t,this.msgSvc=n,this.errSvc=c,this.router=o,this.route=r}return c(e,[{key:"ngOnInit",value:function(){this.renderYamlSource()}},{key:"renderYamlSource",value:function(){var e=this,t=document.getElementById("editor");this.codeMirrorEditor=CodeMirror.fromTextArea(t,{mode:"yaml",theme:"gruvbox-dark",foldGutter:!0,smartIndent:!0,showCursorWhenSelecting:!0,lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],autofocus:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,cursorHeight:.85,autocorrect:!0}),this.codeMirrorEditor.setSize("auto","600px"),this.codeMirrorEditor.on("drop",function(t,i){var n;e.yamlFile=null===(n=i.dataTransfer)||void 0===n?void 0:n.files[0]}),this.codeMirrorEditor.on("paste",function(e,t){})}},{key:"submit",value:function(){var e=this;this.profileYamlSource=this.codeMirrorEditor.getValue(),this.metaSvc.addProfileYamlByNameViaUIBackend(this.profileYamlSource).subscribe(function(t){e.errSvc.handleErrorForV2API(t)||(e.msgSvc.success("Add profile"),e.router.navigate(["../device-profile-list"],{relativeTo:e.route}))})}}]),e}()).\u0275fac=function(e){return new(e||st)(b.Hb(v.a),b.Hb(u.a),b.Hb(pt.a),b.Hb(s.e),b.Hb(s.a))},st.\u0275cmp=b.Bb({type:st,selectors:[["app-add-profile"]],decls:15,vars:0,consts:[[1,"card"],[1,"card-header"],[1,"text-danger","font-weight-bold","fa","fa-code","mr-2"],[1,"mr-3","font-weight-bold"],[1,"fa","fa-info-circle","text-success","font-weight-bold"],[1,"float-right"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save","mr-1"],[1,"card-body","p-0"],["id","editor","name","editor"]],template:function(e,t){1&e&&(b.Kb(0,"div",0),b.Kb(1,"div",1),b.Kb(2,"span"),b.Ib(3,"span",2),b.Kb(4,"span",3),b.vc(5,"Add Profile"),b.Jb(),b.Kb(6,"span",4),b.vc(7,"\xa0drag-and-drop is enabled"),b.Jb(),b.Jb(),b.Kb(8,"span",5),b.Kb(9,"button",6),b.Sb("click",function(){return t.submit()}),b.Ib(10,"i",7),b.Kb(11,"span"),b.vc(12,"Submit"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(13,"div",8),b.Ib(14,"textarea",9),b.Jb(),b.Jb())},styles:[""]}),st),mt=((lt=function(){function e(t,n,c,o,r){i(this,e),this.metaSvc=t,this.msgSvc=n,this.errSvc=c,this.router=o,this.route=r}return c(e,[{key:"ngOnInit",value:function(){var e=this;this.renderYamlSource(),this.route.queryParams.subscribe(function(t){t.profileName&&(e.profileName=t.profileName,e.metaSvc.findProfileYamlByNameViaUIBackend(t.profileName).subscribe(function(t){e.codeMirrorEditor.setValue(t),e.codeMirrorEditor.refresh()}))})}},{key:"update",value:function(){var e=this;this.codeMirrorEditor.refresh(),this.metaSvc.updateProfileYamlContentViaUIBackend(this.codeMirrorEditor.getValue()).subscribe(function(t){e.errSvc.handleErrorForV2API(t)||(e.msgSvc.success("Update profile","name: "+e.profileName),e.router.navigate(["../device-profile-list"],{relativeTo:e.route}))})}},{key:"renderYamlSource",value:function(){var e=document.getElementById("editor-edit");this.codeMirrorEditor=CodeMirror.fromTextArea(e,{mode:"yaml",theme:"gruvbox-dark",foldGutter:!0,smartIndent:!0,showCursorWhenSelecting:!0,lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],autofocus:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,cursorHeight:.85,autocorrect:!0}),this.codeMirrorEditor.setSize("auto","600px")}},{key:"ngOnDestroy",value:function(){this.codeMirrorEditor=null}}]),e}()).\u0275fac=function(e){return new(e||lt)(b.Hb(v.a),b.Hb(u.a),b.Hb(pt.a),b.Hb(s.e),b.Hb(s.a))},lt.\u0275cmp=b.Bb({type:lt,selectors:[["app-edit-profile"]],decls:12,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"text-danger","fa","fa-edit","mr-2"],[1,"float-right"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save","mr-1"],[1,"card-body","p-0"],["id","editor-edit","name","editor"]],template:function(e,t){1&e&&(b.Kb(0,"div",0),b.Kb(1,"div",1),b.Kb(2,"span"),b.Ib(3,"span",2),b.vc(4),b.Jb(),b.Kb(5,"span",3),b.Kb(6,"button",4),b.Sb("click",function(){return t.update()}),b.Kb(7,"span"),b.Ib(8,"i",5),b.vc(9,"Save"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(10,"div",6),b.Ib(11,"textarea",7),b.Jb(),b.Jb()),2&e&&(b.wb(4),b.xc("",t.profileName," "))},styles:[""]}),lt),gt=((at=function(){function e(){i(this,e)}return c(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||at)},at.\u0275cmp=b.Bb({type:at,selectors:[["app-provision-watcher-center"]],decls:2,vars:0,template:function(e,t){1&e&&(b.Kb(0,"p"),b.vc(1,"provision-watcher-center works!"),b.Jb())},styles:[""]}),at),Kt=((rt=function(){function e(){i(this,e)}return c(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||rt)},rt.\u0275cmp=b.Bb({type:rt,selectors:[["app-provision-watcher-list"]],decls:2,vars:0,template:function(e,t){1&e&&(b.Kb(0,"p"),b.vc(1,"provision-watcher-list works!"),b.Jb())},styles:[""]}),rt),Jt=((ot=function(){function e(){i(this,e)}return c(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ot)},ot.\u0275cmp=b.Bb({type:ot,selectors:[["app-add-provision-watcher"]],decls:2,vars:0,template:function(e,t){1&e&&(b.Kb(0,"p"),b.vc(1,"add-provision-watcher works!"),b.Jb())},styles:[""]}),ot),St=[{path:"",component:d,children:[{path:"",redirectTo:"device-service-list",pathMatch:"full"},{path:"device-service-list",component:w},{path:"device-center",component:k,children:[{path:"",redirectTo:"device-list",pathMatch:"full"},{path:"device-list",component:de},{path:"add-device",component:Qe},{path:"edit-device",component:ut}]},{path:"device-profile-center",component:ft,children:[{path:"",redirectTo:"device-profile-list",pathMatch:"full"},{path:"device-profile-list",component:ye},{path:"edit-profile",component:mt},{path:"add-profile",component:ht}]},{path:"provision-watcher-center",component:gt,children:[{path:"",redirectTo:"provision-watcher-list",pathMatch:"full"},{path:"provision-watcher-list",component:Kt},{path:"edit-provision-watcher",component:(bt=function(){function e(){i(this,e)}return c(e,[{key:"ngOnInit",value:function(){}}]),e}(),bt.\u0275fac=function(e){return new(e||bt)},bt.\u0275cmp=b.Bb({type:bt,selectors:[["app-edit-provision-watcher"]],decls:2,vars:0,template:function(e,t){1&e&&(b.Kb(0,"p"),b.vc(1,"edit-provision-watcher works!"),b.Jb())},styles:[""]}),bt)},{path:"add-provision-watcher",component:Jt}]}]}],yt=((vt=function e(){i(this,e)}).\u0275mod=b.Fb({type:vt}),vt.\u0275inj=b.Eb({factory:function(e){return new(e||vt)},imports:[[s.i.forChild(St)],s.i]}),vt),wt=((dt=function e(){i(this,e)}).\u0275mod=b.Fb({type:dt}),dt.\u0275inj=b.Eb({factory:function(e){return new(e||dt)},imports:[[a.b,l.b,yt]]}),dt)}}])}();