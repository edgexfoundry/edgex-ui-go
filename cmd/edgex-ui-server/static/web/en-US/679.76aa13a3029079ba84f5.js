"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[679],{679:(p_,b,S)=>{S.r(b),S.d(b,{MetadataModule:()=>Ye});var i=S(8583),a=S(3092),I=S(9502),_=S(476);let V=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-metadata"]],decls:14,vars:0,consts:function(){let o,e,n;return o="Device Service",e="Device",n="Device Profile",[[1,"card"],[1,"card-header"],[1,"nav","nav-tabs","card-header-tabs","font-weight-bold"],[1,"nav-item"],["routerLink","./device-service-list","routerLinkActive","active",1,"nav-link"],o,["routerLink","./device-center","routerLinkActive","active",1,"nav-link"],e,["routerLink","./device-profile-center","routerLinkActive","active",1,"nav-link"],n,[1,"card-body"]]},template:function(e,n){1&e&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"ul",2),_.TgZ(3,"li",3),_.TgZ(4,"a",4),_.SDv(5,5),_.qZA(),_.qZA(),_.TgZ(6,"li",3),_.TgZ(7,"a",6),_.SDv(8,7),_.qZA(),_.qZA(),_.TgZ(9,"li",3),_.TgZ(10,"a",8),_.SDv(11,9),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(12,"div",10),_._UZ(13,"router-outlet"),_.qZA(),_.qZA())},directives:[I.yS,I.Od,I.lC],styles:[".active-link[_ngcontent-%COMP%]{color:#922c48;background-color:#922c4866!important}"]}),t})();var f=S(2437),N=S(7822);function l(t,o){if(1&t&&(_.TgZ(0,"p"),_._uU(1),_.qZA()),2&t){const e=_.oxw().$implicit;_.xp6(1),_.Oqu(e.description)}}function r(t,o){1&t&&(_.TgZ(0,"p",20),_._uU(1,"no description."),_.qZA())}function A(t,o){if(1&t&&(_.TgZ(0,"span",21),_._uU(1),_.qZA()),2&t){const e=_.oxw().$implicit;_.xp6(1),_.Oqu(e.adminState)}}function M(t,o){if(1&t&&(_.TgZ(0,"span",22),_._uU(1),_.qZA()),2&t){const e=_.oxw().$implicit;_.xp6(1),_.Oqu(e.adminState)}}function L(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"a",23),_.NdJ("click",function(){_.CHM(e);const E=_.oxw().$implicit;return _.oxw().associatedDevicesSkip(E.name)}),_._UZ(1,"i",24),_.TgZ(2,"span"),_.SDv(3,25),_.qZA(),_._uU(4),_.qZA()}if(2&t){const e=_.oxw().$implicit,n=_.oxw();_.xp6(4),_.hij("\xa0 ",n.associatedDevices.get(e.name)," ")}}function u_(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"li",3),_.TgZ(1,"div",4),_.TgZ(2,"div",5),_._UZ(3,"i",6),_.qZA(),_.TgZ(4,"div",7),_.TgZ(5,"div",8),_.TgZ(6,"h5",9),_._uU(7),_.qZA(),_.qZA(),_.YNc(8,l,2,1,"p",10),_.YNc(9,r,2,0,"ng-template",null,11,_.W1O),_.TgZ(11,"div"),_.TgZ(12,"span",12),_._uU(13),_.qZA(),_.TgZ(14,"span",13),_.YNc(15,A,2,1,"span",14),_.YNc(16,M,2,1,"span",15),_.qZA(),_.YNc(17,L,5,1,"a",16),_.TgZ(18,"span",17),_.NdJ("click",function(){const s=_.CHM(e).$implicit;return _.oxw().edit(s)}),_._UZ(19,"i",18),_.TgZ(20,"span"),_.SDv(21,19),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=o.$implicit,n=_.MAs(10),E=_.oxw();_.xp6(7),_.Oqu(e.name),_.xp6(1),_.Q6J("ngIf",e.description)("ngIfElse",n),_.xp6(5),_.hij("Port ",E.getSvcPort(e.baseAddress),""),_.xp6(1),_.Q6J("ngSwitch",e.adminState),_.xp6(1),_.Q6J("ngSwitchCase","UNLOCKED"),_.xp6(2),_.Q6J("ngIf",E.associatedDevices.size)}}function v(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",26),_.TgZ(1,"div",27),_._UZ(2,"i",28),_.TgZ(3,"span"),_.SDv(4,29),_.qZA(),_.TgZ(5,"span",30),_._uU(6),_.qZA(),_.TgZ(7,"button",31),_.NdJ("click",function(){return _.CHM(e),_.oxw().updateSvc()}),_.SDv(8,32),_.qZA(),_.qZA(),_.TgZ(9,"div",33),_.TgZ(10,"form"),_.TgZ(11,"div",34),_.TgZ(12,"label",35),_.SDv(13,36),_.qZA(),_.TgZ(14,"div",37),_.TgZ(15,"input",38),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().deviceSvcSelected.description=E}),_.qZA(),_.qZA(),_.qZA(),_.TgZ(16,"div",34),_.TgZ(17,"label",39),_.SDv(18,40),_.qZA(),_.TgZ(19,"div",37),_.TgZ(20,"select",41),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().deviceSvcSelected.adminState=E}),_.TgZ(21,"option",42),_._uU(22,"UNLOCKED"),_.qZA(),_.TgZ(23,"option",43),_._uU(24,"LOCKED"),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=_.oxw();_.xp6(6),_.Oqu(e.deviceSvcSelected.name),_.xp6(9),_.Q6J("ngModel",e.deviceSvcSelected.description),_.xp6(5),_.Q6J("ngModel",e.deviceSvcSelected.adminState)}}let G=(()=>{class t{constructor(e,n,E,s){this.metaSvc=e,this.msgSvc=n,this.router=E,this.route=s,this.deviceServiceList=[],this.associatedDevices=new Map}ngOnInit(){this.metaSvc.allDeviceServices().subscribe(e=>{this.deviceServiceList=e.services,this.deviceServiceList.forEach(n=>{this.metaSvc.findDevicesByServiceName(0,20,n.name).subscribe(E=>{this.associatedDevices.set(n.name,E.devices.length>20?"20+":String(E.devices.length))})})})}getSvcPort(e){return new URL(e).port}edit(e){this.deviceSvcSelected=e}updateSvc(){this.metaSvc.updateDeviceService(this.deviceSvcSelected).subscribe(()=>{var e;this.msgSvc.success("update device service",`name: ${null===(e=this.deviceSvcSelected)||void 0===e?void 0:e.name}`),this.deviceSvcSelected=void 0})}associatedDevicesSkip(e){this.router.navigate(["../device-center"],{queryParams:{svcName:e},relativeTo:this.route})}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(f.D),_.Y36(N.e),_.Y36(I.F0),_.Y36(I.gz))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-device-service-media-list"]],decls:3,vars:2,consts:function(){let o,e,n,E,s,c;return o="Setting",e="Associated Devices",n="edit",E="Save",s="Description",c="AdminState",[[1,"list-group","p-0"],["class","list-group-item list-group-item-action list-group-item-light",4,"ngFor","ngForOf"],["class","card mt-3",4,"ngIf"],[1,"list-group-item","list-group-item-action","list-group-item-light"],[1,"media"],[1,"align-self-center","mr-3"],[1,"fa","fa-tags","fa-2x","text-secondary"],[1,"media-body"],[1,"mt-0","mb-1"],[1,"d-inline","mr-3","align-middle","text-dark"],[4,"ngIf","ngIfElse"],["nodesc",""],[1,"badge","badge-info","mr-3"],[3,"ngSwitch"],["class","badge badge-success mr-3",4,"ngSwitchCase"],["class","badge badge-danger mr-3",4,"ngSwitchDefault"],["class","badge badge-primary","role","button",3,"click",4,"ngIf"],["role","button",1,"badge","badge-secondary","float-right",3,"click"],[1,"fa","fa-cog","mr-1"],o,[1,"my-1"],[1,"badge","badge-success","mr-3"],[1,"badge","badge-danger","mr-3"],["role","button",1,"badge","badge-primary",3,"click"],[1,"fa","fa-sitemap","mr-1"],e,[1,"card","mt-3"],[1,"card-header"],[1,"fa","fa-edit","mr-1","text-danger"],n,[1,"ml-1"],[1,"btn","btn-success","btn-sm","float-right",3,"click"],E,[1,"card-body"],[1,"form-group","row"],["for","deviceDesc",1,"col-md-2","col-form-label"],s,[1,"col-md-10"],["type","text","name","deviceSvcDescription",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],c,["name","deviceSvcAdminState",1,"custom-select",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"]]},template:function(e,n){1&e&&(_.TgZ(0,"ul",0),_.YNc(1,u_,22,7,"li",1),_.qZA(),_.YNc(2,v,25,3,"div",2)),2&e&&(_.xp6(1),_.Q6J("ngForOf",n.deviceServiceList),_.xp6(1),_.Q6J("ngIf",n.deviceSvcSelected))},directives:[i.sg,i.O5,i.RF,i.n9,i.ED,a._Y,a.JL,a.F,a.Fj,a.JJ,a.On,a.EJ,a.YN,a.Kr],styles:[""]}),t})(),d=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-device-center"]],decls:1,vars:0,template:function(e,n){1&e&&_._UZ(0,"router-outlet")},directives:[I.lC],styles:[""]}),t})();var T=S(7982);function p(t,o){if(1&t&&(_.TgZ(0,"span"),_.TgZ(1,"span",69),_.SDv(2,70),_.qZA(),_.TgZ(3,"span",71),_._uU(4),_.qZA(),_.TgZ(5,"span"),_.SDv(6,72),_.qZA(),_.qZA()),2&t){const e=_.oxw();_.xp6(4),_.Oqu(e.associatedSvcName)}}function U(t,o){if(1&t&&(_.TgZ(0,"span"),_.TgZ(1,"span",69),_.SDv(2,73),_.qZA(),_.TgZ(3,"span",71),_._uU(4),_.qZA(),_.TgZ(5,"span"),_.SDv(6,74),_.qZA(),_.qZA()),2&t){const e=_.oxw();_.xp6(4),_.Oqu(e.associatedProfileName)}}function k(t,o){1&t&&(_.TgZ(0,"span"),_.SDv(1,75),_.qZA())}function J(t,o){if(1&t&&(_.TgZ(0,"span",87),_._uU(1),_.qZA()),2&t){const e=_.oxw().$implicit;_.xp6(1),_.Oqu(e.adminState)}}function r_(t,o){if(1&t&&(_.TgZ(0,"span",88),_._uU(1),_.qZA()),2&t){const e=_.oxw().$implicit;_.xp6(1),_.Oqu(e.adminState)}}function a_(t,o){if(1&t&&(_.TgZ(0,"span",87),_._uU(1),_.qZA()),2&t){const e=_.oxw().$implicit;_.xp6(1),_.hij(" ",e.operatingState,"")}}function d_(t,o){if(1&t&&(_.TgZ(0,"span",88),_._uU(1),_.qZA()),2&t){const e=_.oxw().$implicit;_.xp6(1),_.hij(" ",e.operatingState,"")}}function A_(t,o){if(1&t&&(_.TgZ(0,"span",88),_._uU(1),_.qZA()),2&t){const e=_.oxw().$implicit;_.xp6(1),_.hij(" ",e.operatingState,"")}}const T_=function(t){return{profileName:t}};function D_(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"tr"),_.TgZ(1,"td"),_.TgZ(2,"input",23),_.NdJ("click",function(E){const c=_.CHM(e).$implicit;return _.oxw().selectOne(E,c)}),_.qZA(),_.qZA(),_.TgZ(3,"td",76),_._uU(4),_.qZA(),_.TgZ(5,"td",76),_._uU(6),_.qZA(),_.TgZ(7,"td"),_._uU(8),_.qZA(),_.TgZ(9,"td"),_._uU(10),_.qZA(),_.TgZ(11,"td"),_.TgZ(12,"span",77),_.YNc(13,J,2,1,"span",78),_.YNc(14,r_,2,1,"span",79),_.qZA(),_.qZA(),_.TgZ(15,"td",80),_.TgZ(16,"span",77),_.YNc(17,a_,2,1,"span",78),_.YNc(18,d_,2,1,"span",81),_.YNc(19,A_,2,1,"span",79),_.qZA(),_.qZA(),_.TgZ(20,"td",80),_.TgZ(21,"span",82),_.NdJ("click",function(){const s=_.CHM(e).$implicit;return _.oxw().checkDeviceCommand(s)}),_._UZ(22,"i",83),_.qZA(),_.qZA(),_.TgZ(23,"td",80),_.TgZ(24,"span",82),_.NdJ("click",function(){const s=_.CHM(e).$implicit;return _.oxw().checkAutoEvent(s)}),_._UZ(25,"i",84),_.qZA(),_.qZA(),_.TgZ(26,"td"),_.TgZ(27,"a",85),_._uU(28),_.qZA(),_.qZA(),_.TgZ(29,"td"),_.TgZ(30,"a",86),_._uU(31),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=o.$implicit,n=_.oxw();_.ekj("table-active",n.isChecked(e.id)||n.associatedCmdDeviceName===e.name||n.associatedAutoEventsDeviceName===e.name),_.xp6(2),_.Q6J("checked",n.isChecked(e.id)),_.xp6(2),_.Oqu(e.id),_.xp6(2),_.Oqu(e.name),_.xp6(2),_.Oqu(e.description),_.xp6(2),_.Oqu(e.labels),_.xp6(2),_.Q6J("ngSwitch",e.adminState),_.xp6(1),_.Q6J("ngSwitchCase","UNLOCKED"),_.xp6(3),_.Q6J("ngSwitch",e.operatingState),_.xp6(1),_.Q6J("ngSwitchCase","UP"),_.xp6(1),_.Q6J("ngSwitchCase","DOWN"),_.xp6(3),_.ekj("badge-danger",n.associatedCmdDeviceName===e.name),_.xp6(3),_.ekj("badge-danger",n.associatedAutoEventsDeviceName===e.name),_.xp6(3),_.Q6J("queryParams",_.VKq(19,T_,e.profileName)),_.xp6(1),_.Oqu(e.profileName),_.xp6(3),_.Oqu(e.serviceName)}}function C_(t,o){if(1&t&&(_.TgZ(0,"tr"),_.TgZ(1,"td"),_._uU(2),_.qZA(),_.TgZ(3,"td"),_.TgZ(4,"span",101),_._uU(5),_.qZA(),_.qZA(),_.TgZ(6,"td"),_.TgZ(7,"span",102),_._uU(8),_.qZA(),_.qZA(),_.qZA()),2&t){const e=o.$implicit;_.xp6(2),_.Oqu(e.sourceName),_.xp6(3),_.Oqu(e.interval),_.xp6(3),_.Oqu(e.onChange)}}function S_(t,o){if(1&t&&(_.TgZ(0,"div"),_.TgZ(1,"div",91),_.TgZ(2,"div",92),_.TgZ(3,"span",93),_._UZ(4,"i",84),_.qZA(),_.TgZ(5,"span",94),_._uU(6),_.qZA(),_.TgZ(7,"span"),_.SDv(8,95),_.qZA(),_.qZA(),_.TgZ(9,"div",96),_.TgZ(10,"div",19),_.TgZ(11,"table",20),_.TgZ(12,"thead",21),_.TgZ(13,"th",22),_.SDv(14,97),_.qZA(),_.TgZ(15,"th",22),_.SDv(16,98),_.qZA(),_.TgZ(17,"th",22),_.SDv(18,99),_.qZA(),_.qZA(),_.TgZ(19,"tbody"),_.YNc(20,C_,9,3,"tr",100),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t){const e=_.oxw(2);_.xp6(6),_.hij(" ",e.associatedAutoEventsDeviceName,""),_.xp6(14),_.Q6J("ngForOf",e.autoEvents)}}function I_(t,o){if(1&t&&(_.TgZ(0,"div",91),_.TgZ(1,"div",92),_.TgZ(2,"span",93),_._UZ(3,"i",84),_.qZA(),_.TgZ(4,"span",94),_._uU(5),_.qZA(),_.TgZ(6,"span"),_.SDv(7,103),_.qZA(),_.qZA(),_.TgZ(8,"div",104),_.TgZ(9,"h5",105),_._UZ(10,"i",60),_.TgZ(11,"span"),_.SDv(12,106),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t){const e=_.oxw(2);_.xp6(5),_.hij(" ",e.associatedAutoEventsDeviceName,"")}}function g_(t,o){if(1&t&&(_.TgZ(0,"div"),_.YNc(1,S_,21,2,"div",89),_.YNc(2,I_,13,1,"ng-template",null,90,_.W1O),_.qZA()),2&t){const e=_.MAs(3),n=_.oxw();_.xp6(1),_.Q6J("ngIf",n.autoEvents)("ngIfElse",e)}}function O_(t,o){1&t&&_._UZ(0,"div")}function m(t,o){if(1&t&&(_.TgZ(0,"div"),_.YNc(1,O_,1,0,"div",107),_.qZA()),2&t){const e=_.oxw(),n=_.MAs(84),E=_.MAs(86);_.xp6(1),_.Q6J("ngIf",e.deviceCoreCommand)("ngIfThen",n)("ngIfElse",E)}}function h_(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"li",119),_.NdJ("click",function(){const s=_.CHM(e).$implicit;return _.oxw(2).selectCmd(s)}),_._uU(1),_.qZA()}if(2&t){const e=o.$implicit,n=_.oxw(2);_.ekj("list-group-item-info",(null==n.selectedCmd?null:n.selectedCmd.name)===e.name),_.xp6(1),_.Oqu(e.name)}}function Z_(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"button",132),_.NdJ("click",function(){return _.CHM(e),_.oxw(3).issueGetCmd()}),_._uU(1,"try"),_.qZA()}}function L_(t,o){1&t&&_._UZ(0,"div")}function b_(t,o){if(1&t&&(_.TgZ(0,"span",139),_._uU(1),_.qZA()),2&t){const e=_.oxw(4);_.xp6(1),_.hij(" ",e.cmdGetResponse,"")}}function V_(t,o){if(1&t&&(_.TgZ(0,"pre",140),_._uU(1),_.qZA()),2&t){const e=_.oxw(4);_.xp6(1),_.Oqu(e.cmdGetResponseRaw)}}function $_(t,o){if(1&t&&(_.TgZ(0,"div"),_.TgZ(1,"span",133),_.SDv(2,134),_.qZA(),_.YNc(3,b_,2,1,"span",135),_.qZA(),_.TgZ(4,"div",136),_.TgZ(5,"span",133),_.SDv(6,137),_.qZA(),_.YNc(7,V_,2,1,"pre",138),_.qZA()),2&t){const e=_.oxw(3);_.xp6(3),_.Q6J("ngIf",e.cmdGetResponse),_.xp6(4),_.Q6J("ngIf",e.cmdGetResponseRaw)}}function X_(t,o){1&t&&(_.TgZ(0,"h6",105),_._UZ(1,"i",60),_.TgZ(2,"span"),_.SDv(3,141),_.qZA(),_.qZA())}function B_(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"button",132),_.NdJ("click",function(){return _.CHM(e),_.oxw(3).issueSetCmd()}),_._uU(1,"try"),_.qZA()}}function x_(t,o){1&t&&_._UZ(0,"div")}function q_(t,o){if(1&t&&(_.TgZ(0,"div"),_.TgZ(1,"label",151),_._uU(2),_.qZA(),_.TgZ(3,"select",152),_.TgZ(4,"option",153),_._uU(5,"false"),_.qZA(),_.TgZ(6,"option",153),_._uU(7,"true"),_.qZA(),_.qZA(),_.qZA()),2&t){const e=_.oxw().$implicit;_.xp6(1),_.s9C("for",e.resourceName),_.xp6(1),_.hij(" ",e.resourceName," "),_.xp6(1),_.s9C("id",e.resourceName),_.s9C("name",e.resourceName),_.xp6(1),_.Q6J("ngValue",!1),_.xp6(2),_.Q6J("ngValue",!0)}}function H_(t,o){if(1&t&&(_.TgZ(0,"label",151),_._uU(1),_.qZA(),_._UZ(2,"input",154)),2&t){const e=_.oxw().$implicit;_.s9C("for",e.resourceName),_.xp6(1),_.Oqu(e.resourceName),_.xp6(1),_.s9C("id",e.resourceName),_.s9C("name",e.resourceName),_.MGl("placeholder","valueType: ",e.valueType,"")}}function y_(t,o){if(1&t&&(_.TgZ(0,"div",149),_.YNc(1,q_,8,6,"div",89),_.YNc(2,H_,3,5,"ng-template",null,150,_.W1O),_.qZA()),2&t){const e=o.$implicit,n=_.MAs(3);_.xp6(1),_.Q6J("ngIf","Bool"==e.valueType)("ngIfElse",n)}}function F_(t,o){if(1&t&&(_.TgZ(0,"div",147),_.YNc(1,y_,4,2,"div",148),_.qZA()),2&t){const e=_.oxw(5);_.xp6(1),_.Q6J("ngForOf",e.selectedCmdSetParams)}}function Y_(t,o){if(1&t&&(_.TgZ(0,"div",113),_.TgZ(1,"div",92),_.SDv(2,145),_.qZA(),_.TgZ(3,"div",110),_.YNc(4,F_,2,1,"div",146),_.qZA(),_.qZA()),2&t){const e=_.oxw(4);_.xp6(4),_.Q6J("ngIf",e.selectedCmd)}}function Q_(t,o){if(1&t&&(_.TgZ(0,"span",139),_._uU(1),_.qZA()),2&t){const e=_.oxw(4);_.xp6(1),_.Oqu(e.cmdSetResponse)}}function W_(t,o){if(1&t&&(_.TgZ(0,"pre",140),_._uU(1),_.qZA()),2&t){const e=_.oxw(4);_.xp6(1),_.Oqu(e.cmdSetResponseRaw)}}function w_(t,o){if(1&t&&(_.YNc(0,Y_,5,1,"div",142),_.TgZ(1,"div"),_.TgZ(2,"div"),_.TgZ(3,"span",133),_.SDv(4,143),_.qZA(),_.YNc(5,Q_,2,1,"span",135),_.qZA(),_.TgZ(6,"div",136),_.TgZ(7,"span",133),_.SDv(8,144),_.qZA(),_.YNc(9,W_,2,1,"pre",138),_.qZA(),_.qZA()),2&t){const e=_.oxw(3);_.Q6J("ngIf",e.selectedCmdSetParams),_.xp6(5),_.Q6J("ngIf",e.cmdSetResponse),_.xp6(4),_.Q6J("ngIf",e.cmdSetResponseRaw)}}function k_(t,o){1&t&&(_.TgZ(0,"h6",105),_._UZ(1,"i",60),_.TgZ(2,"span"),_.SDv(3,155),_.qZA(),_.qZA())}function J_(t,o){if(1&t&&(_.TgZ(0,"div",0),_.TgZ(1,"div",92),_.TgZ(2,"span",120),_._UZ(3,"i",121),_._uU(4),_.qZA(),_.TgZ(5,"span"),_.SDv(6,122),_.qZA(),_.qZA(),_.TgZ(7,"div",123),_.TgZ(8,"div",111),_.TgZ(9,"div",124),_.TgZ(10,"div",113),_.TgZ(11,"div",92),_._uU(12," Get "),_.YNc(13,Z_,2,0,"button",125),_.qZA(),_.TgZ(14,"div",126),_.YNc(15,L_,1,0,"div",107),_.YNc(16,$_,8,2,"ng-template",null,127,_.W1O),_.YNc(18,X_,4,0,"ng-template",null,128,_.W1O),_.qZA(),_.qZA(),_.qZA(),_.TgZ(20,"div",129),_.TgZ(21,"div",0),_.TgZ(22,"div",92),_._uU(23," Set "),_.YNc(24,B_,2,0,"button",125),_.qZA(),_.TgZ(25,"div",110),_.YNc(26,x_,1,0,"div",107),_.YNc(27,w_,10,3,"ng-template",null,130,_.W1O),_.YNc(29,k_,4,0,"ng-template",null,131,_.W1O),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t){const e=_.MAs(17),n=_.MAs(19),E=_.MAs(28),s=_.MAs(30),c=_.oxw(2);_.xp6(4),_.hij(" ",c.selectedCmd.name," method:"),_.xp6(9),_.Q6J("ngIf",c.selectedCmd.get),_.xp6(2),_.Q6J("ngIf",c.selectedCmd.get)("ngIfThen",e)("ngIfElse",n),_.xp6(9),_.Q6J("ngIf",c.selectedCmd.set),_.xp6(2),_.Q6J("ngIf",c.selectedCmd.set)("ngIfThen",E)("ngIfElse",s)}}function z_(t,o){if(1&t&&(_.TgZ(0,"div",91),_.TgZ(1,"div",92),_.TgZ(2,"span",93),_._UZ(3,"i",83),_.qZA(),_.TgZ(4,"span",108),_._uU(5),_.qZA(),_.TgZ(6,"span"),_.SDv(7,109),_.qZA(),_.qZA(),_.TgZ(8,"div",110),_.TgZ(9,"div",111),_.TgZ(10,"div",112),_.TgZ(11,"div",113),_.TgZ(12,"div",1),_.SDv(13,114),_.qZA(),_.TgZ(14,"div",96),_.TgZ(15,"ul",115),_.YNc(16,h_,2,3,"li",116),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(17,"div",117),_.YNc(18,J_,31,9,"div",118),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t){const e=_.oxw();_.xp6(5),_.Oqu(e.associatedCmdDeviceName),_.xp6(11),_.Q6J("ngForOf",e.deviceCoreCommand),_.xp6(2),_.Q6J("ngIf",e.selectedCmd)}}function K_(t,o){if(1&t&&(_.TgZ(0,"div",91),_.TgZ(1,"div",92),_.TgZ(2,"span",93),_._UZ(3,"i",83),_.qZA(),_.TgZ(4,"span",156),_._uU(5),_.qZA(),_.TgZ(6,"span"),_.SDv(7,157),_.qZA(),_.qZA(),_.TgZ(8,"div",104),_.TgZ(9,"h5",105),_._UZ(10,"i",158),_.TgZ(11,"span"),_.SDv(12,159),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t){const e=_.oxw();_.xp6(5),_.Oqu(e.associatedCmdDeviceName)}}let j_=(()=>{class t{constructor(e,n,E,s,c){this.metaSvc=e,this.cmdSvc=n,this.msgSvc=E,this.route=s,this.router=c,this.toolbars=!0,this.enableSelectAll=!0,this.deviceList=[],this.associatedSvcName="",this.associatedProfileName="",this.selectedDevice=[],this.selectedCmd={},this.selectedCmdSetParams=[],this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.route.queryParams.subscribe(e=>e.svcName?(this.associatedSvcName=e.svcName,void this.getDeviceListByAssociatedSvc(this.associatedSvcName)):e.profileName?(this.associatedProfileName=e.profileName,void this.getDeviceListByAssociatedProfile(this.associatedProfileName)):(this.associatedSvcName="",this.associatedProfileName="",void this.getDeviceListPagination()))}renderPopoverComponent(){setTimeout(()=>{$('[data-toggle="popover"]').popover({trigger:"hover"})},250)}getDeviceList(){""===this.associatedSvcName?""===this.associatedProfileName?this.getDeviceListPagination():this.getDeviceListByAssociatedProfile(this.associatedSvcName):this.getDeviceListByAssociatedSvc(this.associatedSvcName)}getDeviceListByAssociatedSvc(e){this.metaSvc.findDevicesByServiceName(this.pageOffset,this.pageLimit,e).subscribe(n=>this.deviceList=n.devices)}getDeviceListByAssociatedProfile(e){this.metaSvc.findDevicesByProfileName(this.pageOffset,this.pageLimit,e).subscribe(n=>this.deviceList=n.devices)}getDeviceListPagination(){this.metaSvc.allDevicesPagination(this.pageOffset,this.pageLimit).subscribe(e=>{this.deviceList=e.devices})}refresh(){this.associatedProfileName="",this.associatedSvcName="",this.metaSvc.allDevicesPagination(0,this.pageLimit).subscribe(e=>{this.deviceList=e.devices,this.msgSvc.success("refresh"),this.resetPagination()})}edit(){this.router.navigate(["../edit-device"],{relativeTo:this.route,queryParams:{deviceName:this.selectedDevice[0].name}})}deleteConfirm(){$("#deleteConfirmDialog").modal("show")}delete(){this.selectedDevice.forEach((e,n)=>{this.metaSvc.deleteOneDeviceByName(e.name).subscribe(()=>{this.selectedDevice.splice(n,1),this.deviceList.forEach((E,s)=>{if(E.id===e.id)return this.deviceList.splice(s,1),void this.msgSvc.success("remove device ",` Name: ${E.name}`)})})}),this.associatedCmdDeviceName=void 0,this.associatedAutoEventsDeviceName=void 0,$("#deleteConfirmDialog").modal("hide")}checkAutoEvent(e){this.associatedAutoEventsDeviceName=e.name,this.autoEvents=e.autoEvents,this.associatedCmdDeviceName=""}isCheckedAll(){let e=!0;return this.deviceList&&0===this.deviceList.length&&(e=!1),this.deviceList.forEach(n=>{-1===this.selectedDevice.findIndex(E=>E.name===n.name)&&(e=!1)}),e}selectAll(e){this.deviceList.forEach(e.target.checked?E=>{-1===this.selectedDevice.findIndex(s=>s.name===E.name)&&this.selectedDevice.push(E)}:E=>{this.selectedDevice.forEach((s,c)=>{s.name===E.name&&this.selectedDevice.splice(c,1)})})}isChecked(e){return this.selectedDevice.findIndex(n=>n.id===e)>=0}selectOne(e,n){e.target.checked?this.selectedDevice.push(n):this.selectedDevice.forEach((s,c)=>{s.name===n.name&&this.selectedDevice.splice(c,1)})}checkDeviceCommand(e){this.resetResponse(),this.metaSvc.findProfileByName(e.profileName).subscribe(n=>this.associateDeviceProfile=n.profile),this.cmdSvc.findDeviceAssociatedCommnadsByDeviceName(e.name).subscribe(n=>{this.associatedAutoEventsDeviceName="",this.associatedCmdDeviceName=n.deviceCoreCommand.deviceName,this.associatedCmdDeviceId=e.id,this.deviceCoreCommand=n.deviceCoreCommand.coreCommands,this.selectedCmd=this.deviceCoreCommand[0],this.selectedCmdSetParams=this.selectedCmd.parameters})}selectCmd(e){this.selectedCmd=e,this.selectedCmdSetParams=this.selectedCmd.parameters,this.resetResponse()}resetResponse(){this.cmdGetResponse="",this.cmdGetResponseRaw="",this.cmdSetResponse="",this.cmdSetResponseRaw="",this.cmdBinaryResponse=!0,this.cmdBinaryResponseURL=""}issueGetCmd(){var e;this.cmdSvc.issueGetCmd(this.associatedCmdDeviceName,null===(e=this.selectedCmd)||void 0===e?void 0:e.name).subscribe(E=>{this.cmdGetResponseRaw=JSON.stringify(E.event.readings,null,3);let s=[];E.event.readings.forEach(c=>{s.push(c.value)}),this.cmdGetResponse=s.join(",")})}issueSetCmd(){var e,n;let s={};null===(e=this.selectedCmdSetParams)||void 0===e||e.forEach(function(c){""!==$(`#${c.resourceName}`).val().trim()&&(s[c.resourceName]=$(`#${c.resourceName}`).val().trim())}),this.cmdSvc.issueSetCmd(this.associatedCmdDeviceName,null===(n=this.selectedCmd)||void 0===n?void 0:n.name,s).subscribe(c=>{this.cmdSetResponseRaw=JSON.stringify(c,null,3),this.cmdSetResponse=c.message})}onPageSelected(){this.resetPagination(),this.getDeviceList()}prePage(){this.setPagination(-1),this.getDeviceList()}nextPage(){this.setPagination(1),this.getDeviceList()}setPagination(e){1===e?this.pagination+=1:-1===e&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit}resetPagination(){this.pagination=1,this.pageOffset=(this.pagination-1)*this.pageLimit}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(f.D),_.Y36(T.V),_.Y36(N.e),_.Y36(I.gz),_.Y36(I.F0))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-device-list"]],inputs:{toolbars:"toolbars",enableSelectAll:"enableSelectAll"},decls:102,vars:12,consts:function(){let o,e,n,E,s,c,O,g,P,h,Z,R,X,B,x,q,H,y,F,Y,Q,W,w,u,z,K,j,__,e_,t_,i_,n_,E_,o_,s_,l_,c_,C,m_,R_,G_,U_,N_,P_;return o="Refresh",e="Add",n="Edit",E="Delete",s="ID",c="Name",O="Description",g="Labels",P="AdminState",h="OperatingState",Z="Command",R="AutoEvents",X="AssociatedProfile",B="AssociatedService",x="items per page",q="Previous",H="Next",y="Warning",F=" The data will be permanently erased!!! Are you sure to execute delete operation\uFF1F ",Y="Cancel",Q="Confirm",W="DeviceService",w="Associated Device List",u="DeviceProfile",z="Associated Device List",K="Device List",j="Associated AutoEvents",__="Resource",e_="Interval",t_="Onchange",i_="Associated AutoEvents",n_="no associated AutoEvents",E_="Associated Commands",o_=" Command Name List ",s_="Get and Set",l_="Response:",c_="ResponseRaw:",C="no Get method",m_="Response:",R_="ResponseRaw:",G_="Set Parameters",U_="no Set method",N_="Associated Commands",P_="no associated commands",[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","text-danger","mr-2"],[4,"ngIf"],[1,"card-body","p-0","position-relative"],[1,"bg-light","px-2","py-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","mr-1"],o,["type","button","routerLink","../add-device",1,"btn","btn-info"],[1,"fa","fa-plus","mr-1"],e,["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-edit","mr-1"],n,["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash","mr-1"],E,[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],["type","checkbox","role","button",3,"checked","click"],s,c,O,g,P,h,Z,R,X,B,[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],x,[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"custom-select",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left","mr-1"],q,[1,"page-item"],H,[1,"fa","fa-angle-double-right","ml-1"],["hasAssociatedCommand",""],["noAssociatedCommand",""],["id","deleteConfirmDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteConfirmDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteConfirmDialogLabel",1,"modal-title","text-danger"],[1,"fa","fa-warning","mr-1"],y,[1,"modal-body"],F,[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],Y,["type","button",1,"btn","btn-danger",3,"click"],Q,[1,"mr-1"],W,[1,"text-danger","mr-1"],w,u,z,K,[1,"user-select-all"],[3,"ngSwitch"],["class","badge badge-success",4,"ngSwitchCase"],["class","badge badge-danger",4,"ngSwitchDefault"],[1,"text-center"],["class","badge badge-danger",4,"ngSwitchCase"],["role","button",1,"badge","badge-primary","text-light",3,"click"],[1,"fa","fa-terminal","font-weight-bolder"],[1,"fa","fa-calendar-check-o","font-weight-bolder"],["routerLink","../../device-profile-center",3,"queryParams"],["routerLink","../../device-service-list"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[4,"ngIf","ngIfElse"],["noAutoEvents",""],[1,"card","mt-3"],[1,"card-header"],[1,"badge","badge-danger","text-light"],[1,"text-primary","mx-2","font-weight-bold"],j,[1,"card-body","p-0"],__,e_,t_,[4,"ngFor","ngForOf"],[1,"badge","badge-secondary","badge-pill"],[1,""],i_,[1,"card-body","text-center"],[1,"text-warning"],n_,[4,"ngIf","ngIfThen","ngIfElse"],[1,"text-primary","ml-2","font-weight-bold"],E_,[1,"card-body"],[1,"row"],[1,"col-md-2","col-lg-2"],[1,"card","mb-2"],o_,[1,"list-group","list-group-flush"],["role","button","class","list-group-item list-group-item-action",3,"list-group-item-info","click",4,"ngFor","ngForOf"],[1,"col-md-10","col-lg-10"],["class","card",4,"ngIf"],["role","button",1,"list-group-item","list-group-item-action",3,"click"],[1,"text-primary","font-weight-bold","mr-2"],[1,"fa","fa-thumb-tack","text-danger","mr-1"],s_,[1,"card-body","px-2"],[1,"col-md-5","col-lg-5"],["class","btn btn-primary btn-sm float-right",3,"click",4,"ngIf"],[1,"card-body","overflow-auto"],["hasGetMethod",""],["noGetMethod",""],[1,"col-md-7","col-lg-7"],["hasSetMethod",""],["noSetMethod",""],[1,"btn","btn-primary","btn-sm","float-right",3,"click"],[1,"badge","badge-info"],l_,["class","ml-2 text-primary",4,"ngIf"],[1,"mt-3"],c_,["class","mt-2 bg-secondary p-2 text-light rounded",4,"ngIf"],[1,"ml-2","text-primary"],[1,"mt-2","bg-secondary","p-2","text-light","rounded"],C,["class","card mb-2",4,"ngIf"],m_,R_,G_,["class","d-flex flex-column bd-highlight",4,"ngIf"],[1,"d-flex","flex-column","bd-highlight"],["class","form p-2 bd-highlight",4,"ngFor","ngForOf"],[1,"form","p-2","bd-highlight"],["valueTypeIsNotBool",""],[3,"for"],[1,"custom-select","custom-select-sm",3,"id","name"],[3,"ngValue"],[1,"form-control","form-control-sm",3,"id","name","placeholder"],U_,[1,"text-primary","mx-1","font-weight-bold"],N_,[1,"fa","fa-warning"],P_]},template:function(e,n){1&e&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_._UZ(2,"i",2),_.YNc(3,p,7,1,"span",3),_.YNc(4,U,7,1,"span",3),_.YNc(5,k,2,0,"span",3),_.qZA(),_.TgZ(6,"div",4),_.TgZ(7,"div",5),_.TgZ(8,"div",6),_.TgZ(9,"button",7),_.NdJ("click",function(){return n.refresh()}),_.TgZ(10,"span"),_._UZ(11,"i",8),_.TgZ(12,"span"),_.SDv(13,9),_.qZA(),_.qZA(),_.qZA(),_.TgZ(14,"button",10),_.TgZ(15,"span"),_._UZ(16,"i",11),_.TgZ(17,"span"),_.SDv(18,12),_.qZA(),_.qZA(),_.qZA(),_.TgZ(19,"button",13),_.NdJ("click",function(){return n.edit()}),_.TgZ(20,"span"),_._UZ(21,"i",14),_.TgZ(22,"span"),_.SDv(23,15),_.qZA(),_.qZA(),_.qZA(),_.TgZ(24,"button",16),_.NdJ("click",function(){return n.deleteConfirm()}),_.TgZ(25,"span"),_._UZ(26,"i",17),_.TgZ(27,"span"),_.SDv(28,18),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(29,"div",19),_.TgZ(30,"table",20),_.TgZ(31,"thead",21),_.TgZ(32,"tr"),_.TgZ(33,"th",22),_.TgZ(34,"input",23),_.NdJ("click",function(s){return n.selectAll(s)}),_.qZA(),_.qZA(),_.TgZ(35,"th",22),_.SDv(36,24),_.qZA(),_.TgZ(37,"th",22),_.SDv(38,25),_.qZA(),_.TgZ(39,"th",22),_.SDv(40,26),_.qZA(),_.TgZ(41,"th",22),_.SDv(42,27),_.qZA(),_.TgZ(43,"th",22),_.SDv(44,28),_.qZA(),_.TgZ(45,"th",22),_.SDv(46,29),_.qZA(),_.TgZ(47,"th",22),_.SDv(48,30),_.qZA(),_.TgZ(49,"th",22),_.SDv(50,31),_.qZA(),_.TgZ(51,"th",22),_.SDv(52,32),_.qZA(),_.TgZ(53,"th",22),_.SDv(54,33),_.qZA(),_.qZA(),_.qZA(),_.TgZ(55,"tbody"),_.YNc(56,D_,32,21,"tr",34),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(57,"div",35),_.TgZ(58,"nav",36),_.TgZ(59,"ul",37),_.TgZ(60,"li",38),_.TgZ(61,"span",39),_.SDv(62,40),_.qZA(),_.qZA(),_.TgZ(63,"li",41),_.TgZ(64,"select",42),_.NdJ("ngModelChange",function(s){return n.pageLimit=s})("ngModelChange",function(){return n.onPageSelected()}),_.TgZ(65,"option",43),_._uU(66,"5"),_.qZA(),_.TgZ(67,"option",44),_._uU(68,"10"),_.qZA(),_.TgZ(69,"option",45),_._uU(70,"20"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(71,"li",46),_.TgZ(72,"button",47),_.NdJ("click",function(){return n.prePage()}),_._UZ(73,"i",48),_.TgZ(74,"span"),_.SDv(75,49),_.qZA(),_.qZA(),_.qZA(),_.TgZ(76,"li",50),_.TgZ(77,"button",47),_.NdJ("click",function(){return n.nextPage()}),_.TgZ(78,"span"),_.SDv(79,51),_.qZA(),_._UZ(80,"i",52),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.YNc(81,g_,4,2,"div",3),_.YNc(82,m,2,3,"div",3),_.YNc(83,z_,19,3,"ng-template",null,53,_.W1O),_.YNc(85,K_,13,1,"ng-template",null,54,_.W1O),_.TgZ(87,"div",55),_.TgZ(88,"div",56),_.TgZ(89,"div",57),_.TgZ(90,"div",58),_.TgZ(91,"h5",59),_._UZ(92,"i",60),_.TgZ(93,"span"),_.SDv(94,61),_.qZA(),_.qZA(),_.qZA(),_.TgZ(95,"div",62),_.SDv(96,63),_.qZA(),_.TgZ(97,"div",64),_.TgZ(98,"button",65),_.SDv(99,66),_.qZA(),_.TgZ(100,"button",67),_.NdJ("click",function(){return n.delete()}),_.SDv(101,68),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&e&&(_.xp6(3),_.Q6J("ngIf",""!==n.associatedSvcName),_.xp6(1),_.Q6J("ngIf",""!==n.associatedProfileName),_.xp6(1),_.Q6J("ngIf",""===n.associatedProfileName&&""===n.associatedSvcName),_.xp6(14),_.Q6J("disabled",1!==n.selectedDevice.length),_.xp6(5),_.Q6J("disabled",0===n.selectedDevice.length),_.xp6(10),_.Q6J("checked",n.isCheckedAll()),_.xp6(22),_.Q6J("ngForOf",n.deviceList),_.xp6(8),_.Q6J("ngModel",n.pageLimit),_.xp6(8),_.Q6J("disabled",1===n.pagination),_.xp6(5),_.Q6J("disabled",n.pageLimit>n.deviceList.length),_.xp6(4),_.Q6J("ngIf",n.associatedAutoEventsDeviceName),_.xp6(1),_.Q6J("ngIf",n.associatedCmdDeviceName))},directives:[i.O5,I.rH,i.sg,a.EJ,a.JJ,a.On,a.YN,a.Kr,i.RF,i.n9,i.ED,I.yS],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),t})();function _e(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"tr"),_.TgZ(1,"td"),_.TgZ(2,"input",35),_.NdJ("click",function(E){const c=_.CHM(e).$implicit;return _.oxw().selectOneSvc(E,c.name)}),_.qZA(),_.qZA(),_.TgZ(3,"td"),_._uU(4),_.qZA(),_.TgZ(5,"td"),_._uU(6),_.qZA(),_.TgZ(7,"td"),_._uU(8),_.qZA(),_.TgZ(9,"td"),_._uU(10),_.qZA(),_.TgZ(11,"td"),_._uU(12),_.qZA(),_.TgZ(13,"td"),_._uU(14),_.ALo(15,"date"),_.qZA(),_.TgZ(16,"td"),_._uU(17),_.ALo(18,"date"),_.qZA(),_.qZA()}if(2&t){const e=o.$implicit,n=_.oxw();_.ekj("table-active",n.isSvcChecked(e.name)),_.xp6(2),_.Q6J("checked",n.isSvcChecked(e.name)),_.xp6(2),_.Oqu(e.id),_.xp6(2),_.Oqu(e.name),_.xp6(2),_.Oqu(e.description),_.xp6(2),_.Oqu(e.labels),_.xp6(2),_.Oqu(e.adminState),_.xp6(2),_.Oqu(_.xi3(15,10,e.created,"yyyy-MM-dd hh:mm:ss")),_.xp6(3),_.Oqu(_.xi3(18,13,e.modified,"yyyy-MM-dd hh:mm:ss"))}}let M_=(()=>{class t{constructor(e){this.metaSvc=e,this.singleDeviceSvcSelectedEvent=new _.vpe,this.deviceServiceList=[],this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.findAllDeviceSvcPagination()}findAllDeviceSvcPagination(){this.metaSvc.findAllDeviceServicesPagination(this.pageOffset,this.pageLimit).subscribe(e=>{this.deviceServiceList=e.services})}onSingleDeviceSvcSelectedEmitter(){this.singleDeviceSvcSelectedEvent.emit(this.deviceSvcSelected)}isSvcChecked(e){var n;return(null===(n=this.deviceSvcSelected)||void 0===n?void 0:n.name)===e}selectOneSvc(e,n){let s=this;e.target.checked?this.deviceServiceList.forEach(function(c){c.name===n&&(s.deviceSvcSelected=c)}):this.deviceSvcSelected=void 0,this.onSingleDeviceSvcSelectedEmitter()}onPageSelected(){this.resetPagination(),this.setPagination(),this.findAllDeviceSvcPagination()}prePage(){this.setPagination(-1),this.findAllDeviceSvcPagination()}nextPage(){this.setPagination(1),this.findAllDeviceSvcPagination()}setPagination(e){1===e?this.pagination+=1:-1===e&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit}resetPagination(){this.pagination=1}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(f.D))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-device-service-list"]],inputs:{deviceSvcSelected:"deviceSvcSelected"},outputs:{singleDeviceSvcSelectedEvent:"singleDeviceSvcSelectedEvent"},decls:52,vars:4,consts:function(){let o,e,n,E,s,c,O,g,P,h,Z;return o="Device Service List",e="ID",n="Name",E="Description",s="Labels",c="AdminState",O="Created",g="Modified",P="items per page",h="Previous",Z="Next",[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","mr-2","text-danger"],o,[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],e,n,E,s,c,O,g,[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],P,[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"custom-select",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left","mr-1"],h,[1,"page-item"],Z,[1,"fa","fa-angle-double-right","ml-1"],["type","checkbox","role","button",3,"checked","click"]]},template:function(e,n){1&e&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_._UZ(2,"i",2),_.TgZ(3,"span"),_.SDv(4,3),_.qZA(),_.qZA(),_.TgZ(5,"div",4),_.TgZ(6,"div",5),_.TgZ(7,"table",6),_.TgZ(8,"thead",7),_.TgZ(9,"tr"),_.TgZ(10,"th",8),_._uU(11,"#"),_.qZA(),_.TgZ(12,"th",8),_.SDv(13,9),_.qZA(),_.TgZ(14,"th",8),_.SDv(15,10),_.qZA(),_.TgZ(16,"th",8),_.SDv(17,11),_.qZA(),_.TgZ(18,"th",8),_.SDv(19,12),_.qZA(),_.TgZ(20,"th",8),_.SDv(21,13),_.qZA(),_.TgZ(22,"th",8),_.SDv(23,14),_.qZA(),_.TgZ(24,"th",8),_.SDv(25,15),_.qZA(),_.qZA(),_.qZA(),_.TgZ(26,"tbody"),_.YNc(27,_e,19,16,"tr",16),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(28,"div",17),_.TgZ(29,"nav",18),_.TgZ(30,"ul",19),_.TgZ(31,"li",20),_.TgZ(32,"span",21),_.SDv(33,22),_.qZA(),_.qZA(),_.TgZ(34,"li",23),_.TgZ(35,"select",24),_.NdJ("ngModelChange",function(s){return n.pageLimit=s})("ngModelChange",function(){return n.onPageSelected()}),_.TgZ(36,"option",25),_._uU(37,"5"),_.qZA(),_.TgZ(38,"option",26),_._uU(39,"10"),_.qZA(),_.TgZ(40,"option",27),_._uU(41,"20"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(42,"li",28),_.TgZ(43,"button",29),_.NdJ("click",function(){return n.prePage()}),_._UZ(44,"i",30),_.TgZ(45,"span"),_.SDv(46,31),_.qZA(),_.qZA(),_.qZA(),_.TgZ(47,"li",32),_.TgZ(48,"button",29),_.NdJ("click",function(){return n.nextPage()}),_.TgZ(49,"span"),_.SDv(50,33),_.qZA(),_._UZ(51,"i",34),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&e&&(_.xp6(27),_.Q6J("ngForOf",n.deviceServiceList),_.xp6(8),_.Q6J("ngModel",n.pageLimit),_.xp6(8),_.Q6J("disabled",1===n.pagination),_.xp6(5),_.Q6J("disabled",n.pageLimit>n.deviceServiceList.length))},directives:[i.sg,a.EJ,a.JJ,a.On,a.YN,a.Kr],pipes:[i.uU],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),t})();var f_=S(2822);function ee(t,o){1&t&&_._UZ(0,"i",30)}function te(t,o){1&t&&_._UZ(0,"i",30)}function ie(t,o){1&t&&_._UZ(0,"i",30)}function ne(t,o){1&t&&_._UZ(0,"i",30)}function Ee(t,o){1&t&&_._UZ(0,"i",30)}function oe(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"button",31),_.NdJ("click",function(){return _.CHM(e),_.oxw().previous()}),_._UZ(1,"i",32),_.TgZ(2,"span"),_.SDv(3,33),_.qZA(),_.qZA()}}function se(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"button",34),_.NdJ("click",function(){return _.CHM(e),_.oxw().next()}),_.TgZ(1,"span"),_.SDv(2,35),_.qZA(),_._UZ(3,"i",36),_.qZA()}if(2&t){const e=_.oxw();_.Q6J("disabled",e.stepStateLock())}}function le(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"button",37),_.NdJ("click",function(){return _.CHM(e),_.oxw().skip()}),_.TgZ(1,"span"),_.SDv(2,38),_.qZA(),_._UZ(3,"i",39),_.qZA()}}function ce(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"button",40),_.NdJ("click",function(){return _.CHM(e),_.oxw().submit()}),_._UZ(1,"i",41),_.TgZ(2,"span"),_.SDv(3,42),_.qZA(),_.qZA()}if(2&t){const e=_.oxw();_.Q6J("disabled",!e.protocolName)}}function re(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",43),_.TgZ(1,"app-device-service-list",44),_.NdJ("singleDeviceSvcSelectedEvent",function(E){return _.CHM(e),_.oxw().onSingleDeviceSvcSelected(E)}),_.qZA(),_.qZA()}if(2&t){const e=_.oxw();_.xp6(1),_.Q6J("deviceSvcSelected",e.selectedSvc)}}function ae(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",43),_.TgZ(1,"app-device-profile-list",45),_.NdJ("singleProfileSelectedEvent",function(E){return _.CHM(e),_.oxw().onSingleProfileSelected(E)}),_.qZA(),_.qZA()}if(2&t){const e=_.oxw();_.xp6(1),_.Q6J("singleProfileSelected",e.selectedProfile)("enableSelectAll",!1)("toolbars",!1)("associatedDeviceColumn",!1)}}function de(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"form",46),_.TgZ(1,"div",47),_.TgZ(2,"label",48),_.SDv(3,49),_.qZA(),_.TgZ(4,"div",50),_.TgZ(5,"input",51),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().newDevice.name=E}),_.qZA(),_.TgZ(6,"div",52),_.TgZ(7,"small"),_.SDv(8,53),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(9,"div",54),_.TgZ(10,"label",55),_.SDv(11,56),_.qZA(),_.TgZ(12,"div",50),_.TgZ(13,"input",57),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().newDevice.description=E}),_.qZA(),_.qZA(),_.qZA(),_.TgZ(14,"div",54),_.TgZ(15,"label",58),_.SDv(16,59),_.qZA(),_.TgZ(17,"div",50),_.TgZ(18,"input",60),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().deviceLabels=E}),_.qZA(),_.qZA(),_.qZA(),_.TgZ(19,"div",54),_.TgZ(20,"label",61),_.SDv(21,62),_.qZA(),_.TgZ(22,"div",50),_.TgZ(23,"select",63),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().newDevice.adminState=E}),_.TgZ(24,"option",64),_._uU(25,"UNLOCKED"),_.qZA(),_.TgZ(26,"option",65),_._uU(27,"LOCKED"),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(28,"div",54),_.TgZ(29,"label",66),_.SDv(30,67),_.qZA(),_.TgZ(31,"div",50),_.TgZ(32,"select",68),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().newDevice.operatingState=E}),_.TgZ(33,"option",69),_._uU(34,"UP"),_.qZA(),_.TgZ(35,"option",70),_._uU(36,"DOWN"),_.qZA(),_.TgZ(37,"option",70),_._uU(38,"UNKNOWN"),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=_.oxw();_.xp6(5),_.ekj("is-invalid",!e.newDevice.name)("is-valid",e.newDevice.name),_.Q6J("ngModel",e.newDevice.name),_.xp6(8),_.Q6J("ngModel",e.newDevice.description),_.xp6(5),_.Q6J("ngModel",e.deviceLabels),_.xp6(5),_.Q6J("ngModel",e.newDevice.adminState),_.xp6(9),_.Q6J("ngModel",e.newDevice.operatingState)}}function Ae(t,o){if(1&t&&(_.TgZ(0,"option",104),_._uU(1),_.qZA()),2&t){const e=o.$implicit;_.s9C("value",e),_.xp6(1),_.Oqu(e)}}function Te(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",80),_.TgZ(1,"div",74),_.TgZ(2,"form"),_.TgZ(3,"div",47),_.TgZ(4,"label",81),_.SDv(5,82),_.qZA(),_.TgZ(6,"div",50),_.TgZ(7,"div",83),_.TgZ(8,"input",84),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.interval=E}),_.qZA(),_.TgZ(9,"div",85),_.TgZ(10,"select",86),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.unit=E}),_.TgZ(11,"option",87),_._uU(12,"millisecond"),_.qZA(),_.TgZ(13,"option",88),_._uU(14,"second"),_.qZA(),_.TgZ(15,"option",89),_._uU(16,"minute"),_.qZA(),_.TgZ(17,"option",90),_._uU(18,"hour"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(19,"div",91),_.SDv(20,92),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(21,"div",54),_.TgZ(22,"label",81),_.SDv(23,93),_.qZA(),_.TgZ(24,"div",50),_.TgZ(25,"select",94),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.onChange=E}),_.TgZ(26,"option",95),_._uU(27,"true"),_.qZA(),_.TgZ(28,"option",96),_._uU(29,"false"),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(30,"div",54),_.TgZ(31,"label",81),_.SDv(32,97),_.qZA(),_.TgZ(33,"div",50),_.TgZ(34,"select",98),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.resource=E}),_.YNc(35,Ae,2,2,"option",99),_.qZA(),_.TgZ(36,"div",91),_.SDv(37,100),_.qZA(),_.qZA(),_.qZA(),_.TgZ(38,"button",101),_.NdJ("click",function(){const s=_.CHM(e).$implicit;return _.oxw(2).removeAutoEvent(s)}),_._UZ(39,"i",102),_.TgZ(40,"span"),_.SDv(41,103),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=o.$implicit,n=_.oxw(2);_.xp6(8),_.ekj("is-invalid",!n.eventIntervalNumType(e.interval))("is-valid",n.eventIntervalNumType(e.interval)),_.Q6J("ngModel",e.interval),_.xp6(2),_.Q6J("ngModel",e.unit),_.xp6(15),_.Q6J("ngModel",e.onChange),_.xp6(9),_.ekj("is-invalid",!e.resource)("is-valid",e.resource),_.Q6J("ngModel",e.resource),_.xp6(1),_.Q6J("ngForOf",n.autoEventResourceNameSet)}}function De(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",71),_.TgZ(1,"div",1),_.TgZ(2,"span",72),_.SDv(3,73),_.qZA(),_.qZA(),_.TgZ(4,"div",74),_.TgZ(5,"p",75),_._UZ(6,"span",76),_.TgZ(7,"span",77),_.NdJ("click",function(){return _.CHM(e),_.oxw().addAutoEvent()}),_.SDv(8,78),_.qZA(),_.qZA(),_.YNc(9,Te,42,13,"div",79),_.qZA(),_.qZA()}if(2&t){const e=_.oxw();_.xp6(9),_.Q6J("ngForOf",e.autoEventsInternal)}}function Ce(t,o){1&t&&_._UZ(0,"div")}const Se=function(){return{standalone:!0}};function Ie(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div"),_.TgZ(1,"form",125),_.TgZ(2,"div",126),_.TgZ(3,"div",127),_.TgZ(4,"span",128),_.SDv(5,129),_.qZA(),_.qZA(),_._UZ(6,"input",130),_.qZA(),_.TgZ(7,"div",131),_._UZ(8,"i",132),_.qZA(),_.TgZ(9,"div",126),_.TgZ(10,"div",127),_.TgZ(11,"span",128),_.SDv(12,133),_.qZA(),_.qZA(),_.TgZ(13,"input",134),_.NdJ("ngModelChange",function(E){const c=_.CHM(e).$implicit;return _.oxw(4).selectedAvailTemplate[c]=E}),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=o.$implicit,n=_.oxw(4);_.xp6(6),_.Q6J("value",e),_.xp6(7),_.s9C("name",n.selectedAvailTemplate[e]),_.Q6J("ngModel",n.selectedAvailTemplate[e])("ngModelOptions",_.DdM(4,Se))}}function ge(t,o){if(1&t&&(_.TgZ(0,"div"),_.YNc(1,Ie,14,5,"div",124),_.qZA()),2&t){const e=_.oxw(3);_.xp6(1),_.Q6J("ngForOf",e.selectedAvailTemplateProperties)}}function Oe(t,o){1&t&&(_.TgZ(0,"h5",139),_._UZ(1,"i",140),_.TgZ(2,"span"),_.SDv(3,141),_.qZA(),_.qZA())}function pe(t,o){if(1&t&&(_.TgZ(0,"div"),_._UZ(1,"span",135),_.TgZ(2,"span",136),_.SDv(3,137),_.qZA(),_.qZA(),_.YNc(4,Oe,4,0,"h5",138)),2&t){const e=_.oxw(3);_.xp6(4),_.Q6J("ngIf",e.protocolName)}}function ue(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",112),_.TgZ(1,"div",113),_.TgZ(2,"div",114),_.TgZ(3,"label"),_.SDv(4,115),_.qZA(),_.TgZ(5,"select",116),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw(2).protocolName=E})("ngModelChange",function(){return _.CHM(e),_.oxw(2).onAvailProtocolSelect()}),_.TgZ(6,"option",117),_._uU(7,"device-mqtt"),_.qZA(),_.TgZ(8,"option",118),_._uU(9,"device-rest"),_.qZA(),_.TgZ(10,"option",118),_._uU(11,"device-virtual"),_.qZA(),_.TgZ(12,"option",119),_._uU(13,"device-modbus-tcp"),_.qZA(),_.TgZ(14,"option",120),_._uU(15,"device-modbus-rtu"),_.qZA(),_.qZA(),_.TgZ(16,"div",91),_.TgZ(17,"small"),_.SDv(18,121),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(19,"div",50),_.YNc(20,ge,2,1,"div",122),_.YNc(21,pe,5,1,"ng-template",null,123,_.W1O),_.qZA(),_.qZA()}if(2&t){const e=_.MAs(22),n=_.oxw(2);_.xp6(5),_.ekj("is-invalid",!n.protocolName)("is-valid",n.protocolName),_.Q6J("ngModel",n.protocolName),_.xp6(15),_.Q6J("ngIf",0!==n.selectedAvailTemplateProperties.length)("ngIfElse",e)}}function fe(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div"),_.TgZ(1,"form",125),_.TgZ(2,"div",126),_.TgZ(3,"div",127),_.TgZ(4,"span",128),_.SDv(5,149),_.qZA(),_.qZA(),_.TgZ(6,"input",150),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.key=E}),_.qZA(),_.qZA(),_.TgZ(7,"div",131),_._UZ(8,"i",132),_.qZA(),_.TgZ(9,"div",126),_.TgZ(10,"div",127),_.TgZ(11,"span",128),_.SDv(12,151),_.qZA(),_.qZA(),_.TgZ(13,"input",152),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.value=E}),_.qZA(),_.qZA(),_.TgZ(14,"div",153),_.TgZ(15,"button",101),_.NdJ("click",function(){const s=_.CHM(e).$implicit;return _.oxw(3).removeProtocolProperty(s)}),_._UZ(16,"i",154),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=o.$implicit;_.xp6(6),_.Q6J("ngModel",e.key),_.xp6(7),_.Q6J("ngModel",e.value)}}function Me(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",112),_.TgZ(1,"div",142),_.TgZ(2,"div",114),_.TgZ(3,"label"),_.SDv(4,143),_.qZA(),_.TgZ(5,"input",144),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw(2).protocolName=E}),_.qZA(),_.TgZ(6,"div",91),_.TgZ(7,"small"),_.SDv(8,145),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(9,"div",146),_.TgZ(10,"div",147),_.TgZ(11,"div"),_.TgZ(12,"p",75),_._UZ(13,"span",76),_.TgZ(14,"span",77),_.NdJ("click",function(){return _.CHM(e),_.oxw(2).addProtocolProperty()}),_.SDv(15,148),_.qZA(),_.qZA(),_.qZA(),_.YNc(16,fe,17,2,"div",124),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=_.oxw(2);_.xp6(5),_.ekj("is-invalid",!e.protocolName)("is-valid",e.protocolName),_.Q6J("ngModel",e.protocolName),_.xp6(11),_.Q6J("ngForOf",e.protocolPropertyList)}}function ve(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",71),_.TgZ(1,"div",74),_.TgZ(2,"p",105),_._UZ(3,"span",76),_.TgZ(4,"span",77),_.NdJ("click",function(){return _.CHM(e),_.oxw().setProtocolTemplate("avaliable")}),_.SDv(5,106),_.qZA(),_.qZA(),_.TgZ(6,"p",107),_._UZ(7,"span",76),_.TgZ(8,"span",77),_.NdJ("click",function(){return _.CHM(e),_.oxw().setProtocolTemplate("custom")}),_.SDv(9,108),_.qZA(),_.qZA(),_.YNc(10,Ce,1,0,"div",109),_.YNc(11,ue,23,7,"ng-template",null,110,_.W1O),_.YNc(13,Me,17,6,"ng-template",null,111,_.W1O),_.qZA(),_.qZA()}if(2&t){const e=_.MAs(12),n=_.MAs(14),E=_.oxw();_.xp6(2),_.ekj("badge-primary","avaliable"===E.protocolTemplateModel)("badge-secondary","avaliable"!==E.protocolTemplateModel),_.xp6(4),_.ekj("badge-primary","custom"===E.protocolTemplateModel)("badge-secondary","custom"!==E.protocolTemplateModel),_.xp6(4),_.Q6J("ngIf","custom"===E.protocolTemplateModel)("ngIfThen",n)("ngIfElse",e)}}class me{constructor(){this.Schema="",this.Host="",this.Port="",this.User="",this.Password="",this.ClientId="",this.CommandTopic=""}}class Re{constructor(){this.Address="",this.Port="",this.UnitID="",this.Timeout="",this.IdleTimeout=""}}class Ge{constructor(){this.Address="",this.UnitID="",this.BaudRate="",this.DataBits="",this.StopBits="",this.Parity="",this.Timeout="",this.IdleTimeout=""}}let Ue=(()=>{class t{constructor(e,n,E,s){this.metaSvc=e,this.msgSvc=n,this.router=E,this.route=s,this.deviceLabels="",this.currentStep=0,this.selectedClass="text-white rounded px-2 bg-success  font-weight-bold",this.noSelectedClass="text-white rounded px-2 bg-secondary  font-weight-bold",this.autoEventResourceNameSet=[],this.autoEventsInternal=[{interval:"",onChange:!1,resource:"",unit:"ms"}],this.protocolTemplateModel="avaliable",this.protocolName="",this.protocolProperty={key:null,value:null},this.protocolPropertyList=[{key:null,value:null}],this.selectedAvailTemplateProperties=[],this.newDevice={adminState:"UNLOCKED",operatingState:"UP"}}ngOnInit(){}onSingleProfileSelected(e){this.selectedProfile=e,this.setupAutoEventResourceNameSet(this.selectedProfile)}setupAutoEventResourceNameSet(e){this.autoEventResourceNameSet=[],e.deviceResources.forEach((n,E)=>{this.autoEventResourceNameSet.push(n.name)}),e.deviceCommands.forEach((n,E)=>{this.autoEventResourceNameSet.push(n.name)})}onSingleDeviceSvcSelected(e){this.selectedSvc=e}onAvailProtocolSelect(){switch(this.protocolName){case"mqtt":return this.selectedAvailTemplate=new me,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));case"modbus-tcp":return this.selectedAvailTemplate=new Re,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));case"modbus-rtu":return this.selectedAvailTemplate=new Ge,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));default:return this.selectedAvailTemplate={},void(this.selectedAvailTemplateProperties=[])}}cleanSelectedAvailTemplateProperties(){this.selectedAvailTemplateProperties=[]}setAutoEventInternal(e){let n;e.forEach(E=>{let s=0;E.interval.indexOf("ms")?s=E.interval.indexOf("ms"):E.interval.indexOf("s")?s=E.interval.indexOf("s"):E.interval.indexOf("m")?s=E.interval.indexOf("m"):E.interval.indexOf("h")&&(s=E.interval.indexOf("h")),n=E.interval.substring(s),this.autoEventsInternal.push({interval:E.interval.slice(0,s),onChange:E.onChange,resource:E.sourceName,unit:n})})}eventIntervalNumType(e){return!isNaN(e)&&parseFloat(e)===parseInt(e)}setProtocolTemplate(e){this.protocolName="",this.cleanSelectedAvailTemplateProperties(),this.cleanCustomProtocolProperty(),this.protocolTemplateModel=e}addProtocolProperty(){this.protocolPropertyList.push({key:"",value:""})}removeProtocolProperty(e){this.protocolPropertyList.splice(this.protocolPropertyList.indexOf(e),1)}cleanCustomProtocolProperty(){this.protocolPropertyList=[],this.protocolPropertyList.push({key:"",value:""})}addAutoEvent(){this.autoEventsInternal.push({interval:"",onChange:!1,resource:"",unit:"ms"})}removeAutoEvent(e){this.autoEventsInternal.splice(this.autoEventsInternal.indexOf(e),1)}stepStateLock(){switch(this.currentStep){case 0:return void 0===this.selectedSvc;case 1:return void 0===this.selectedProfile;case 2:return""===this.newDevice.name;case 3:let e=!1;return this.autoEventsInternal.forEach(n=>{""!==n.resource&&this.eventIntervalNumType(n.interval)||(e=!0)}),e;case 4:default:return!1}}skip(){this.autoEventsInternal=[],this.next()}next(){this.currentStep+=1}previous(){this.currentStep=this.currentStep-1}changeStep(){this.currentStep+=1}submit(){var e,n,E;let s={},c={};"custom"===this.protocolTemplateModel?(this.protocolPropertyList.forEach(g=>{c[g.key]=g.value}),s[this.protocolName]=c):s[this.protocolName]=Object.assign({},this.selectedAvailTemplate);let O=[];this.autoEventsInternal.forEach(g=>{O.push({interval:`${parseInt(g.interval)}${g.unit}`,onChange:!!g.onChange,sourceName:g.resource})}),this.newDevice.labels=null===(e=this.deviceLabels)||void 0===e?void 0:e.split(","),this.newDevice.serviceName=null===(n=this.selectedSvc)||void 0===n?void 0:n.name,this.newDevice.profileName=null===(E=this.selectedProfile)||void 0===E?void 0:E.name,this.newDevice.protocols=s,this.newDevice.autoEvents=O,this.metaSvc.addDevice(this.newDevice).subscribe(()=>{this.msgSvc.success("Add device",`name: ${this.newDevice.name}`),this.router.navigate(["../device-list"],{relativeTo:this.route})})}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(f.D),_.Y36(N.e),_.Y36(I.F0),_.Y36(I.gz))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-add-device"]],decls:52,vars:20,consts:function(){let o,e,n,E,s,c,O,g,P,h,Z,R,X,B,x,q,H,y,F,Y,Q,W,w,u,z,K,j,__,e_,t_,i_,n_,E_,o_,s_,l_,c_;return o="Add Device Wizard",e="SelectDeviceService",n="SelectDeviceProfile",E="DevicePrimary",s="CreateAutoEvent",c="CreateDeviceProtocol",O="Previous",g="Next",P="Skip",h="Submit",Z="Name",R="the device name can't be empty!",X="Description",B="Labels",x="AdminState",q="OperatingState",H=" this step is optional, you can skip it then use scheduler service to create schedule job.",y="Add More AutoEvent",F="Interval",Y=" can only be a pure integer number ",Q="onchange",W="resource",w=" resource can't be empty ",u="Remove",z="Avaliable Protocol Templates",K="Custom Protocol Templates",j="Protocol Name",__="the protocol name can't be empty!",e_="PropertyKey",t_="PropertyVaule",i_=" all avaliable protocol templates refer to the device service released by edgex, such as device-virtual, device-rest, device-mqtt, device-modbus ",n_="this device service doesn't need to set protocol properties",E_="Protocol Name",o_="the protocol name can't be empty!",s_="Add Protocol Property",l_="PropertyKey",c_="PropertyValue",[[1,"card"],[1,"card-header"],[1,"font-weight-bold"],[1,"fa","fa-lightbulb-o","fa-lg","mr-2","text-danger"],[1,"text-secondary"],o,[1,"card-header","bg-light"],["aria-label","breadcrumb",1,"mb-0","p-0"],[1,"breadcrumb","p-1","mb-0","bg-light"],[1,"breadcrumb-item"],[3,"ngClass"],e,["class","fa fa-check ml-1",4,"ngIf"],n,E,s,[1,"breadcrumb-item","active"],c,["class","btn btn-info btn-sm",3,"click",4,"ngIf"],["class","btn btn-primary btn-sm float-right",3,"disabled","click",4,"ngIf","ngIfElse"],["class","btn btn-success btn-sm float-right mr-2",3,"click",4,"ngIf"],["stepDone",""],[1,"card-body","p-0"],[3,"ngSwitch"],[3,"ngSwitchCase"],["SelectDeviceService",""],["SelectDeviceProfile",""],["DevicePrimary",""],["CreateAutoEvent",""],["CreateDeviceProtocol",""],[1,"fa","fa-check","ml-1"],[1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-long-arrow-left","mr-1"],O,[1,"btn","btn-primary","btn-sm","float-right",3,"disabled","click"],g,[1,"fa","fa-long-arrow-right","ml-1"],[1,"btn","btn-success","btn-sm","float-right","mr-2",3,"click"],P,[1,"fa","fa-share","ml-1"],[1,"btn","btn-success","btn-sm","ml-4","float-right",3,"disabled","click"],[1,"fa","fa-save","mr-1"],h,[1,"p-2"],[3,"deviceSvcSelected","singleDeviceSvcSelectedEvent"],[3,"singleProfileSelected","enableSelectAll","toolbars","associatedDeviceColumn","singleProfileSelectedEvent"],[1,"px-5","py-4"],[1,"form-group","row","has-validation"],["for","deviceName","required","",1,"col-md-2","col-form-label"],Z,[1,"col-md-10"],["type","text","id","validationDeviceNameFeedback","name","deviceName",1,"form-control",3,"ngModel","ngModelChange"],["id","validationDeviceNameFeedback",1,"invalid-feedback"],R,[1,"form-group","row"],["for","deviceDesc",1,"col-md-2","col-form-label"],X,["type","text","name","deviceDescription",1,"form-control",3,"ngModel","ngModelChange"],["for","deviceLabels",1,"col-md-2","col-form-label"],B,["type","text","name","deviceLabels","placeholder","Multiple Labels are separated by commas: label1,label2,label3",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],x,["name","deviceAdminState",1,"custom-select",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"],["for","operatingState",1,"col-md-2","col-form-label"],q,["name","deviceOperatingState",1,"custom-select",3,"ngModel","ngModelChange"],["value","UP"],["value","DOWN"],[1,"card","border-0"],[1,"fa","fa-info-circle","text-warning","font-weight-bold"],H,[1,"card-body"],[1,"badge","badge-secondary","font-weight-bold"],[1,"fa","fa-plus-circle","mr-2"],["role","button",1,"user-select-none",3,"click"],y,["class","card mb-3",4,"ngFor","ngForOf"],[1,"card","mb-3"],[1,"col-md-2","col-form-label"],F,[1,"input-group","mb-3",2,"width","250px"],["type","text","name","interval","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["name","eventIntervalUnit","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","ms"],["value","s"],["value","m"],["value","h"],[1,"invalid-feedback"],Y,Q,["name","onchange",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],["value","true"],["value","false"],W,["name","resource","required","",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],w,[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash","mr-1"],u,[3,"value"],[1,"badge","font-weight-bold","mr-3"],z,[1,"badge","font-weight-bold"],K,[4,"ngIf","ngIfThen","ngIfElse"],["avaliProtocolTemplate",""],["customProtocolTemplate",""],[1,"row","border","border-secondary","p-2","rounded-lg","mx-1"],[1,"col-md-2","border-right","border-info"],[1,"form-group"],j,["type","text","name","protocolName","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","mqtt"],["value","other"],["value","modbus-tcp"],["value","modbus-rtu"],__,[4,"ngIf","ngIfElse"],["noAvailProperty",""],[4,"ngFor","ngForOf"],[1,"form-inline","mb-1"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],e_,["type","text","disabled","",1,"form-control",2,"width","300px",3,"value"],[1,"form-group","mx-2"],[1,"fa","fa-long-arrow-right"],t_,["type","text",1,"form-control",2,"width","300px",3,"name","ngModel","ngModelOptions","ngModelChange"],[1,"fa","fa-info-circle","fa-lg","text-success","font-weight-bold","mr-1"],[1,"text-muted"],i_,["class","text-warning",4,"ngIf"],[1,"text-warning"],[1,"fa","fa-warning","mr-1"],n_,[1,"col-md-2","col-lg-2","border-right","border-info"],E_,["type","text","name","protocolName",1,"form-control",3,"ngModel","ngModelChange"],o_,[1,"col-md-10","col-lg-10"],[1,""],s_,l_,["type","text","name","propertyKey",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],c_,["type","text","name","PropertyValue",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"input-group","ml-2"],[1,"fa","fa-trash"]]},template:function(e,n){if(1&e&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"span",2),_._UZ(3,"span",3),_.TgZ(4,"span",4),_.SDv(5,5),_.qZA(),_.qZA(),_.qZA(),_.TgZ(6,"div",6),_.TgZ(7,"nav",7),_.TgZ(8,"ol",8),_.TgZ(9,"li",9),_.TgZ(10,"span",10),_.TgZ(11,"span"),_.SDv(12,11),_.qZA(),_.YNc(13,ee,1,0,"i",12),_.qZA(),_.qZA(),_.TgZ(14,"li",9),_.TgZ(15,"span",10),_.TgZ(16,"span"),_.SDv(17,13),_.qZA(),_.YNc(18,te,1,0,"i",12),_.qZA(),_.qZA(),_.TgZ(19,"li",9),_.TgZ(20,"span",10),_.TgZ(21,"span"),_.SDv(22,14),_.qZA(),_.YNc(23,ie,1,0,"i",12),_.qZA(),_.qZA(),_.TgZ(24,"li",9),_.TgZ(25,"span",10),_.TgZ(26,"span"),_.SDv(27,15),_.qZA(),_.YNc(28,ne,1,0,"i",12),_.qZA(),_.qZA(),_.TgZ(29,"li",16),_.TgZ(30,"span",10),_.TgZ(31,"span"),_.SDv(32,17),_.qZA(),_.YNc(33,Ee,1,0,"i",12),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(34,"div",1),_.YNc(35,oe,4,0,"button",18),_.YNc(36,se,4,1,"button",19),_.YNc(37,le,4,0,"button",20),_.YNc(38,ce,4,1,"ng-template",null,21,_.W1O),_.qZA(),_.TgZ(40,"div",22),_.TgZ(41,"div",23),_.YNc(42,re,2,1,"ng-template",24,25,_.W1O),_.YNc(44,ae,2,4,"ng-template",24,26,_.W1O),_.YNc(46,de,39,9,"ng-template",24,27,_.W1O),_.YNc(48,De,10,1,"ng-template",24,28,_.W1O),_.YNc(50,ve,15,11,"ng-template",24,29,_.W1O),_.qZA(),_.qZA(),_.qZA()),2&e){const E=_.MAs(39);_.xp6(10),_.Q6J("ngClass",n.currentStep>=0?n.selectedClass:n.noSelectedClass),_.xp6(3),_.Q6J("ngIf",n.currentStep>=1),_.xp6(2),_.Q6J("ngClass",n.currentStep>=1?n.selectedClass:n.noSelectedClass),_.xp6(3),_.Q6J("ngIf",n.currentStep>=2),_.xp6(2),_.Q6J("ngClass",n.currentStep>=2?n.selectedClass:n.noSelectedClass),_.xp6(3),_.Q6J("ngIf",n.currentStep>=3),_.xp6(2),_.Q6J("ngClass",n.currentStep>=3?n.selectedClass:n.noSelectedClass),_.xp6(3),_.Q6J("ngIf",n.currentStep>=4),_.xp6(2),_.Q6J("ngClass",n.currentStep>=4?n.selectedClass:n.noSelectedClass),_.xp6(3),_.Q6J("ngIf",n.currentStep>=5),_.xp6(2),_.Q6J("ngIf",n.currentStep),_.xp6(1),_.Q6J("ngIf",4>n.currentStep)("ngIfElse",E),_.xp6(1),_.Q6J("ngIf",3===n.currentStep),_.xp6(4),_.Q6J("ngSwitch",n.currentStep),_.xp6(1),_.Q6J("ngSwitchCase",0),_.xp6(2),_.Q6J("ngSwitchCase",1),_.xp6(2),_.Q6J("ngSwitchCase",2),_.xp6(2),_.Q6J("ngSwitchCase",3),_.xp6(2),_.Q6J("ngSwitchCase",4)}},directives:[i.mk,i.O5,i.RF,i.n9,M_,f_.f,a._Y,a.JL,a.F,a.Fj,a.JJ,a.On,a.EJ,a.YN,a.Kr,i.sg,a.Q7],styles:['.breadcrumb[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]:before{color:inherit;font-weight:inherit;content:">>";padding:0 5px}.btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}']}),t})();function Ne(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div"),_.TgZ(1,"form",55),_.TgZ(2,"div",56),_.TgZ(3,"div",57),_.TgZ(4,"span",58),_.SDv(5,59),_.qZA(),_.qZA(),_.TgZ(6,"input",60),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.key=E}),_.qZA(),_.qZA(),_.TgZ(7,"div",61),_._UZ(8,"i",62),_.qZA(),_.TgZ(9,"div",56),_.TgZ(10,"div",57),_.TgZ(11,"span",58),_.SDv(12,63),_.qZA(),_.qZA(),_.TgZ(13,"input",64),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.value=E}),_.qZA(),_.qZA(),_.TgZ(14,"div",65),_.TgZ(15,"button",66),_.NdJ("click",function(){const s=_.CHM(e).$implicit;return _.oxw(2).removeProtocolProperty(s)}),_._UZ(16,"i",67),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=o.$implicit;_.xp6(6),_.Q6J("ngModel",e.key),_.xp6(7),_.Q6J("ngModel",e.value)}}function Pe(t,o){if(1&t&&(_.TgZ(0,"option",89),_._uU(1),_.qZA()),2&t){const e=o.$implicit;_.s9C("value",e),_.xp6(1),_.Oqu(e)}}function he(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",12),_.TgZ(1,"div",11),_.TgZ(2,"form"),_.TgZ(3,"div",68),_.TgZ(4,"label",16),_.SDv(5,69),_.qZA(),_.TgZ(6,"div",18),_.TgZ(7,"div",70),_.TgZ(8,"input",71),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.interval=E}),_.qZA(),_.TgZ(9,"div",72),_.TgZ(10,"select",73),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.unit=E}),_.TgZ(11,"option",74),_._uU(12,"millisecond"),_.qZA(),_.TgZ(13,"option",75),_._uU(14,"second"),_.qZA(),_.TgZ(15,"option",76),_._uU(16,"minute"),_.qZA(),_.TgZ(17,"option",77),_._uU(18,"hour"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(19,"div",20),_.SDv(20,78),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(21,"div",15),_.TgZ(22,"label",16),_.SDv(23,79),_.qZA(),_.TgZ(24,"div",18),_.TgZ(25,"select",80),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.onChange=E}),_.TgZ(26,"option",81),_._uU(27,"true"),_.qZA(),_.TgZ(28,"option",82),_._uU(29,"false"),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(30,"div",15),_.TgZ(31,"label",16),_.SDv(32,83),_.qZA(),_.TgZ(33,"div",18),_.TgZ(34,"select",84),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.resource=E}),_.YNc(35,Pe,2,2,"option",85),_.qZA(),_.TgZ(36,"div",20),_.SDv(37,86),_.qZA(),_.qZA(),_.qZA(),_.TgZ(38,"button",66),_.NdJ("click",function(){const s=_.CHM(e).$implicit;return _.oxw(2).removeAutoEvent(s)}),_._UZ(39,"i",87),_.TgZ(40,"span"),_.SDv(41,88),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=o.$implicit,n=_.oxw(2);_.xp6(8),_.ekj("is-invalid",!n.eventIntervalNumType(e.interval))("is-valid",n.eventIntervalNumType(e.interval)),_.Q6J("ngModel",e.interval),_.xp6(2),_.Q6J("ngModel",e.unit),_.xp6(15),_.Q6J("ngModel",e.onChange),_.xp6(9),_.ekj("is-invalid",""===e.resource)("is-valid",""!==e.resource),_.Q6J("ngModel",e.resource),_.xp6(1),_.Q6J("ngForOf",n.autoEventResourceNameSet)}}function Ze(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",1),_.TgZ(1,"div",2),_._UZ(2,"i",3),_.TgZ(3,"span",4),_.SDv(4,5),_.qZA(),_.TgZ(5,"span",6),_._uU(6),_.qZA(),_.qZA(),_.TgZ(7,"div",7),_.TgZ(8,"button",8),_.NdJ("click",function(){return _.CHM(e),_.oxw().save()}),_.TgZ(9,"span"),_._UZ(10,"i",9),_.TgZ(11,"span"),_.SDv(12,10),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(13,"div",11),_.TgZ(14,"div",12),_.TgZ(15,"div",2),_._UZ(16,"i",13),_.TgZ(17,"span"),_.SDv(18,14),_.qZA(),_.qZA(),_.TgZ(19,"div",11),_.TgZ(20,"form"),_.TgZ(21,"div",15),_.TgZ(22,"label",16),_.SDv(23,17),_.qZA(),_.TgZ(24,"div",18),_.TgZ(25,"input",19),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().device.name=E}),_.qZA(),_.TgZ(26,"div",20),_.SDv(27,21),_.qZA(),_.qZA(),_.qZA(),_.TgZ(28,"div",15),_.TgZ(29,"label",16),_.SDv(30,22),_.qZA(),_.TgZ(31,"div",18),_.TgZ(32,"input",23),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().device.description=E}),_.qZA(),_.qZA(),_.qZA(),_.TgZ(33,"div",15),_.TgZ(34,"label",16),_.SDv(35,24),_.qZA(),_.TgZ(36,"div",18),_.TgZ(37,"input",25),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().deviceLabels=E}),_.qZA(),_.qZA(),_.qZA(),_.TgZ(38,"div",15),_.TgZ(39,"label",26),_.SDv(40,27),_.qZA(),_.TgZ(41,"div",18),_.TgZ(42,"select",28),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().device.adminState=E}),_.TgZ(43,"option",29),_._uU(44,"UNLOCKED"),_.qZA(),_.TgZ(45,"option",30),_._uU(46,"LOCKED"),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(47,"div",15),_.TgZ(48,"label",31),_.SDv(49,32),_.qZA(),_.TgZ(50,"div",18),_.TgZ(51,"select",33),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().device.operatingState=E}),_.TgZ(52,"option",34),_._uU(53,"UP"),_.qZA(),_.TgZ(54,"option",35),_._uU(55,"DOWN"),_.qZA(),_.TgZ(56,"option",35),_._uU(57,"UNKNOWN"),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(58,"div",36),_.TgZ(59,"app-device-service-list",37),_.NdJ("singleDeviceSvcSelectedEvent",function(E){return _.CHM(e),_.oxw().onSingleDeviceSvcSelected(E)}),_.qZA(),_.qZA(),_.TgZ(60,"div",36),_.TgZ(61,"app-device-profile-list",38),_.NdJ("singleProfileSelectedEvent",function(E){return _.CHM(e),_.oxw().onSingleProfileSelected(E)}),_.qZA(),_.qZA(),_.TgZ(62,"div",12),_.TgZ(63,"div",2),_._UZ(64,"i",13),_.TgZ(65,"span"),_.SDv(66,39),_.qZA(),_.qZA(),_.TgZ(67,"div",11),_.TgZ(68,"div",1),_.TgZ(69,"div",11),_.TgZ(70,"div",40),_.TgZ(71,"div",41),_.TgZ(72,"div",42),_.TgZ(73,"label"),_.SDv(74,43),_.qZA(),_.TgZ(75,"input",44),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().protocolName=E}),_.qZA(),_.TgZ(76,"div",20),_.TgZ(77,"small"),_.SDv(78,45),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(79,"div",46),_.TgZ(80,"div"),_.TgZ(81,"p",47),_._UZ(82,"span",48),_.TgZ(83,"span",49),_.NdJ("click",function(){return _.CHM(e),_.oxw().addProtocolProperty()}),_.SDv(84,50),_.qZA(),_.qZA(),_.qZA(),_.YNc(85,Ne,17,2,"div",51),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(86,"div",12),_.TgZ(87,"div",2),_._UZ(88,"i",13),_.TgZ(89,"span"),_.SDv(90,52),_.qZA(),_.qZA(),_.TgZ(91,"div",11),_.TgZ(92,"p",47),_._UZ(93,"span",48),_.TgZ(94,"span",49),_.NdJ("click",function(){return _.CHM(e),_.oxw().addAutoEvent()}),_.SDv(95,53),_.qZA(),_.qZA(),_.YNc(96,he,42,13,"div",54),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=_.oxw();_.xp6(6),_.Oqu(e.device.name),_.xp6(2),_.Q6J("disabled",e.validateBeforeSave()),_.xp6(17),_.ekj("is-invalid",""===e.device.name),_.Q6J("ngModel",e.device.name),_.xp6(7),_.Q6J("ngModel",e.device.description),_.xp6(5),_.Q6J("ngModel",e.deviceLabels),_.xp6(5),_.Q6J("ngModel",e.device.adminState),_.xp6(9),_.Q6J("ngModel",e.device.operatingState),_.xp6(8),_.Q6J("deviceSvcSelected",e.selectedSvc),_.xp6(2),_.Q6J("enableSelectAll",!1)("toolbars",!1)("singleProfileSelected",e.selectedProfile)("associatedDeviceColumn",!1),_.xp6(14),_.ekj("is-invalid",!e.protocolName)("is-valid",e.protocolName),_.Q6J("ngModel",e.protocolName),_.xp6(10),_.Q6J("ngForOf",e.protocolPropertyList),_.xp6(11),_.Q6J("ngForOf",e.autoEventsInternal)}}let Le=(()=>{class t{constructor(e,n,E,s){this.router=e,this.route=n,this.metaSvc=E,this.msgSvc=s,this.autoEventsInternal=[],this.autoEventResourceNameSet=[],this.protocolProperty={key:"",value:""},this.protocolPropertyList=[]}ngOnInit(){this.route.queryParams.subscribe(e=>{this.metaSvc.findDeviceByName(e.deviceName).subscribe(E=>{var s;this.device=E.device,this.deviceLabels=null===(s=this.device.labels)||void 0===s?void 0:s.join(","),this.setAutoEventInternal(this.device.autoEvents),this.protocolName=Object.keys(this.device.protocols)[0];for(const[c,O]of Object.entries(this.device.protocols[this.protocolName]))this.protocolPropertyList.push({key:c,value:O});this.setDefaultDeviceSvcSelected(this.device.serviceName),this.setDefaultDeviceProfileSelected(this.device.profileName)})})}onSingleProfileSelected(e){this.selectedProfile=e,this.resetAutoEventsInternal(),this.setupAutoEventResourceNameSet(this.selectedProfile)}onSingleDeviceSvcSelected(e){this.selectedSvc=e}setDefaultDeviceSvcSelected(e){this.metaSvc.findDevcieServiceByName(e).subscribe(n=>{this.selectedSvc=n.service})}setDefaultDeviceProfileSelected(e){this.metaSvc.findProfileByName(e).subscribe(n=>{this.selectedProfile=n.profile,this.setupAutoEventResourceNameSet(this.selectedProfile)})}resetAutoEventsInternal(){this.autoEventsInternal=[]}setupAutoEventResourceNameSet(e){e.deviceResources.forEach((n,E)=>{this.autoEventResourceNameSet.push(n.name)}),e.deviceCommands.forEach((n,E)=>{this.autoEventResourceNameSet.push(n.name)})}setAutoEventInternal(e){let n;null==e||e.forEach(E=>{let s=0;-1!==E.interval.indexOf("ms")?s=E.interval.indexOf("ms"):-1!==E.interval.indexOf("s")?s=E.interval.indexOf("s"):-1!==E.interval.indexOf("m")?s=E.interval.indexOf("m"):-1!==E.interval.indexOf("h")&&(s=E.interval.indexOf("h")),n=E.interval.substring(s),this.autoEventsInternal.push({interval:E.interval.slice(0,s),onChange:!!E.onChange,resource:E.sourceName,unit:n})})}eventIntervalNumType(e){return!isNaN(e)&&parseFloat(e)===parseInt(e)}addProtocolProperty(){this.protocolPropertyList.push({key:"",value:""})}removeProtocolProperty(e){this.protocolPropertyList.splice(this.protocolPropertyList.indexOf(e),1)}addAutoEvent(){this.autoEventsInternal.push({interval:"",onChange:!1,resource:"",unit:"ms"})}removeAutoEvent(e){this.autoEventsInternal.splice(this.autoEventsInternal.indexOf(e),1)}validateBeforeSave(){var e;if((null===(e=this.device)||void 0===e?void 0:e.name)&&this.protocolName){let n=!1;return this.autoEventsInternal.forEach(E=>{this.eventIntervalNumType(E.interval)&&""!==E.resource||(n=!0)}),n}return!0}save(){var e,n,E;let s=this.device,c={},O={};s.labels=null===(e=this.deviceLabels)||void 0===e?void 0:e.split(","),s.serviceName=null===(n=this.selectedSvc)||void 0===n?void 0:n.name,s.profileName=null===(E=this.selectedProfile)||void 0===E?void 0:E.name,this.protocolPropertyList.forEach(g=>{O[g.key]=g.value}),c[this.protocolName]=O,s.protocols=c,s.autoEvents=[],this.autoEventsInternal.forEach(g=>{s.autoEvents.push({interval:`${parseInt(g.interval)}${g.unit}`,onChange:!!g.onChange,sourceName:g.resource})}),this.metaSvc.updateDevice(s).subscribe(()=>{var g;this.msgSvc.success("update device",`name: ${null===(g=this.device)||void 0===g?void 0:g.name}`),this.router.navigate(["../device-list"],{relativeTo:this.route})})}showTips(){$(".a-question-circle-o").tooltip("toggle")}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(I.F0),_.Y36(I.gz),_.Y36(f.D),_.Y36(N.e))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-edit-device"]],decls:1,vars:1,consts:function(){let o,e,n,E,s,c,O,g,P,h,Z,R,X,B,x,q,H,y,F,Y,Q,W,w;return o="Edit Device",e="Save",n="Device Primary",E="DeviceName",s=" device name can't not be empty! ",c="Description",O="Labels",g="AdminState",P="OperatingState",h="Device Protocol",Z="Protocol Name",R="the protocol name can't be empty!",X="Add Protocol Property",B="AutoEvents",x="Add More AutoEvent",q="PropertyKey",H="PropertyValue",y="Interval",F=" can only be a pure integer number ",Y="onchange",Q="resource",W=" resource can't be empty ",w="Remove",[["class","card",4,"ngIf"],[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-edit","text-danger","fa-lg"],[1,"mx-2"],o,[1,"text-primary"],[1,"card-header","py-1"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-save","mr-1"],e,[1,"card-body"],[1,"card","mb-3"],[1,"fa","fa-tags","fa-lg","text-danger","mr-1"],n,[1,"form-group","row"],[1,"col-md-2","col-form-label"],E,[1,"col-md-10"],["type","text","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"invalid-feedback"],s,c,["type","text","name","description",1,"form-control",3,"ngModel","ngModelChange"],O,["type","text","name","labels",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],g,["name","adminState",1,"custom-select",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"],["for","operatingState",1,"col-md-2","col-form-label"],P,["name","operatingState",1,"custom-select",3,"ngModel","ngModelChange"],["value","UP"],["value","DOWN"],[1,"mb-3"],[3,"deviceSvcSelected","singleDeviceSvcSelectedEvent"],[3,"enableSelectAll","toolbars","singleProfileSelected","associatedDeviceColumn","singleProfileSelectedEvent"],h,[1,"row"],[1,"col-md-2","col-lg-2","border-right","border-secondary"],[1,"form-group"],Z,["type","text","name","protocolName",1,"form-control",3,"ngModel","ngModelChange"],R,[1,"col-md-10","col-lg-10"],[1,"badge","badge-secondary","font-weight-bold"],[1,"fa","fa-plus-circle","mr-2"],["role","button",1,"user-select-none",3,"click"],X,[4,"ngFor","ngForOf"],B,x,["class","card mb-3",4,"ngFor","ngForOf"],[1,"form-inline","mb-1"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],q,["type","text","name","propertyKey",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"form-group","mx-2"],[1,"fa","fa-long-arrow-right"],H,["type","text","name","PropertyValue",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"input-group","ml-2"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"],[1,"form-group","row","has-validation"],y,[1,"input-group","mb-3",2,"width","250px"],["type","text","name","interval","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["name","eventIntervalUnit","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","ms"],["value","s"],["value","m"],["value","h"],F,Y,["name","onchange",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],["value","true"],["value","false"],Q,["name","resource","required","",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],W,[1,"fa","fa-trash","mr-1"],w,[3,"value"]]},template:function(e,n){1&e&&_.YNc(0,Ze,97,21,"div",0),2&e&&_.Q6J("ngIf",n.device)},directives:[i.O5,a._Y,a.JL,a.F,a.Fj,a.Q7,a.JJ,a.On,a.EJ,a.YN,a.Kr,M_,f_.f,i.sg],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),t})(),be=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-device-profile-center"]],decls:1,vars:0,template:function(e,n){1&e&&_._UZ(0,"router-outlet")},directives:[I.lC],styles:[""]}),t})();var v_=S(4889);let Ve=(()=>{class t{constructor(e,n,E,s,c){this.metaSvc=e,this.msgSvc=n,this.errSvc=E,this.router=s,this.route=c}ngOnInit(){this.renderYamlSource()}renderYamlSource(){let e=document.getElementById("editor");this.codeMirrorEditor=CodeMirror.fromTextArea(e,{mode:"yaml",theme:"gruvbox-dark",foldGutter:!0,smartIndent:!0,showCursorWhenSelecting:!0,lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],autofocus:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,cursorHeight:.85,autocorrect:!0}),this.codeMirrorEditor.setSize("auto","600px"),this.codeMirrorEditor.on("drop",(n,E)=>{var s;this.yamlFile=null===(s=E.dataTransfer)||void 0===s?void 0:s.files[0]}),this.codeMirrorEditor.on("paste",(n,E)=>{})}submit(){this.profileYamlSource=this.codeMirrorEditor.getValue(),this.metaSvc.addProfileYamlByNameViaUIBackend(this.profileYamlSource).subscribe(e=>{this.errSvc.handleErrorForV2API(e)||(this.msgSvc.success("Add profile"),this.router.navigate(["../device-profile-list"],{relativeTo:this.route}))})}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(f.D),_.Y36(N.e),_.Y36(v_.T),_.Y36(I.F0),_.Y36(I.gz))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-add-profile"]],decls:15,vars:0,consts:function(){let o,e,n;return o="Add Profile",e="\xA0drag-and-drop is enabled",n="Submit",[[1,"card"],[1,"card-header"],[1,"text-danger","font-weight-bold","fa","fa-code","mr-2"],[1,"mr-3","font-weight-bold"],o,[1,"fa","fa-info-circle","text-success","font-weight-bold"],e,[1,"float-right"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save","mr-1"],n,[1,"card-body","p-0"],["id","editor","name","editor"]]},template:function(e,n){1&e&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"span"),_._UZ(3,"span",2),_.TgZ(4,"span",3),_.SDv(5,4),_.qZA(),_.TgZ(6,"span",5),_.SDv(7,6),_.qZA(),_.qZA(),_.TgZ(8,"span",7),_.TgZ(9,"button",8),_.NdJ("click",function(){return n.submit()}),_._UZ(10,"i",9),_.TgZ(11,"span"),_.SDv(12,10),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(13,"div",11),_._UZ(14,"textarea",12),_.qZA(),_.qZA())},styles:[""]}),t})(),$e=(()=>{class t{constructor(e,n,E,s,c){this.metaSvc=e,this.msgSvc=n,this.errSvc=E,this.router=s,this.route=c}ngOnInit(){this.renderYamlSource(),this.route.queryParams.subscribe(e=>{e.profileName&&(this.profileName=e.profileName,this.metaSvc.findProfileYamlByNameViaUIBackend(e.profileName).subscribe(n=>{this.codeMirrorEditor.setValue(n),this.codeMirrorEditor.refresh()}))})}update(){this.codeMirrorEditor.refresh(),this.metaSvc.updateProfileYamlContentViaUIBackend(this.codeMirrorEditor.getValue()).subscribe(e=>{this.errSvc.handleErrorForV2API(e)||(this.msgSvc.success("Update profile",`name: ${this.profileName}`),this.router.navigate(["../device-profile-list"],{relativeTo:this.route}))})}renderYamlSource(){let e=document.getElementById("editor-edit");this.codeMirrorEditor=CodeMirror.fromTextArea(e,{mode:"yaml",theme:"gruvbox-dark",foldGutter:!0,smartIndent:!0,showCursorWhenSelecting:!0,lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],autofocus:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,cursorHeight:.85,autocorrect:!0}),this.codeMirrorEditor.setSize("auto","600px")}ngOnDestroy(){this.codeMirrorEditor=null}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(f.D),_.Y36(N.e),_.Y36(v_.T),_.Y36(I.F0),_.Y36(I.gz))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-edit-profile"]],decls:13,vars:1,consts:function(){let o;return o="Save",[[1,"card"],[1,"card-header"],[1,"text-danger","fa","fa-edit","mr-2"],[1,"float-right"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save","mr-1"],o,[1,"card-body","p-0"],["id","editor-edit","name","editor"]]},template:function(e,n){1&e&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"span"),_._UZ(3,"span",2),_._uU(4),_.qZA(),_.TgZ(5,"span",3),_.TgZ(6,"button",4),_.NdJ("click",function(){return n.update()}),_.TgZ(7,"span"),_._UZ(8,"i",5),_.TgZ(9,"span"),_.SDv(10,6),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(11,"div",7),_._UZ(12,"textarea",8),_.qZA(),_.qZA()),2&e&&(_.xp6(4),_.hij("",n.profileName," "))},styles:[""]}),t})(),Xe=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-provision-watcher-center"]],decls:2,vars:0,template:function(e,n){1&e&&(_.TgZ(0,"p"),_._uU(1,"provision-watcher-center works!"),_.qZA())},styles:[""]}),t})(),Be=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-provision-watcher-list"]],decls:2,vars:0,template:function(e,n){1&e&&(_.TgZ(0,"p"),_._uU(1,"provision-watcher-list works!"),_.qZA())},styles:[""]}),t})(),xe=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-add-provision-watcher"]],decls:2,vars:0,template:function(e,n){1&e&&(_.TgZ(0,"p"),_._uU(1,"add-provision-watcher works!"),_.qZA())},styles:[""]}),t})(),qe=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-edit-provision-watcher"]],decls:2,vars:0,template:function(e,n){1&e&&(_.TgZ(0,"p"),_._uU(1,"edit-provision-watcher works!"),_.qZA())},styles:[""]}),t})();const ye=[{path:"",component:V,canActivate:[S(5473).a],children:[{path:"",redirectTo:"device-service-list",pathMatch:"full"},{path:"device-service-list",component:G},{path:"device-center",component:d,children:[{path:"",redirectTo:"device-list",pathMatch:"full"},{path:"device-list",component:j_},{path:"add-device",component:Ue},{path:"edit-device",component:Le}]},{path:"device-profile-center",component:be,children:[{path:"",redirectTo:"device-profile-list",pathMatch:"full"},{path:"device-profile-list",component:f_.f},{path:"edit-profile",component:$e},{path:"add-profile",component:Ve}]},{path:"provision-watcher-center",component:Xe,children:[{path:"",redirectTo:"provision-watcher-list",pathMatch:"full"},{path:"provision-watcher-list",component:Be},{path:"edit-provision-watcher",component:qe},{path:"add-provision-watcher",component:xe}]}]}];let Fe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({imports:[[I.Bz.forChild(ye)],I.Bz]}),t})(),Ye=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({imports:[[i.ez,a.u5,Fe]]}),t})()},2822:(p_,b,S)=>{S.d(b,{f:()=>u_});var i=S(476),a=S(2437),I=S(7822),_=S(9502),V=S(8583),f=S(3092);function N(v,G){if(1&v){const d=i.EpF();i.TgZ(0,"div",50),i.TgZ(1,"div",51),i.TgZ(2,"button",52),i.NdJ("click",function(){return i.CHM(d),i.oxw().refresh()}),i.TgZ(3,"span"),i._UZ(4,"i",53),i.TgZ(5,"span"),i.SDv(6,54),i.qZA(),i.qZA(),i.qZA(),i.TgZ(7,"button",55),i.TgZ(8,"span"),i._UZ(9,"i",56),i.TgZ(10,"span"),i.SDv(11,57),i.qZA(),i.qZA(),i.qZA(),i.TgZ(12,"button",58),i.NdJ("click",function(){return i.CHM(d),i.oxw().edit()}),i.TgZ(13,"span"),i._UZ(14,"i",59),i.TgZ(15,"span"),i.SDv(16,60),i.qZA(),i.qZA(),i.qZA(),i.TgZ(17,"button",61),i.NdJ("click",function(){return i.CHM(d),i.oxw().deleteConfirm()}),i.TgZ(18,"span"),i._UZ(19,"i",62),i.TgZ(20,"span"),i.SDv(21,63),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&v){const d=i.oxw();i.xp6(12),i.Q6J("disabled",1!==d.multiProfilesSelected.length),i.xp6(5),i.Q6J("disabled",0===d.multiProfilesSelected.length)}}function l(v,G){if(1&v){const d=i.EpF();i.TgZ(0,"input",64),i.NdJ("click",function(p){return i.CHM(d),i.oxw().selectAll(p)}),i.qZA()}if(2&v){const d=i.oxw();i.Q6J("checked",d.isCheckedAll())}}function r(v,G){1&v&&(i.TgZ(0,"th",9),i.SDv(1,65),i.qZA())}const A=function(v){return{profileName:v}};function M(v,G){if(1&v&&(i.TgZ(0,"td",69),i.TgZ(1,"a",70),i._UZ(2,"i",71),i.qZA(),i.qZA()),2&v){const d=i.oxw().$implicit;i.xp6(1),i.Q6J("queryParams",i.VKq(1,A,d.name))}}function L(v,G){if(1&v){const d=i.EpF();i.TgZ(0,"tr"),i.TgZ(1,"td"),i.TgZ(2,"input",66),i.NdJ("click",function(p){const k=i.CHM(d).$implicit;return i.oxw().selectOne(p,k.name)}),i.qZA(),i.qZA(),i.TgZ(3,"td",67),i._uU(4),i.qZA(),i.TgZ(5,"td",67),i._uU(6),i.qZA(),i.TgZ(7,"td"),i._uU(8),i.qZA(),i.YNc(9,M,3,3,"td",68),i.TgZ(10,"td"),i._uU(11),i.qZA(),i.TgZ(12,"td"),i._uU(13),i.qZA(),i.TgZ(14,"td"),i._uU(15),i.qZA(),i.qZA()}if(2&v){const d=G.$implicit,T=i.oxw();i.ekj("table-active",T.isChecked(d.name)),i.xp6(2),i.s9C("value",d.name),i.Q6J("checked",T.isChecked(d.name)),i.xp6(2),i.Oqu(d.id),i.xp6(2),i.Oqu(d.name),i.xp6(2),i.Oqu(d.description),i.xp6(1),i.Q6J("ngIf",T.associatedDeviceColumn),i.xp6(2),i.Oqu(d.labels),i.xp6(2),i.Oqu(d.manufacturer),i.xp6(2),i.Oqu(d.model)}}let u_=(()=>{class v{constructor(d,T,p,U){this.metaSvc=d,this.msgSvc=T,this.route=p,this.router=U,this.associatedDeviceColumn=!0,this.toolbars=!0,this.enableSelectAll=!0,this.singleProfileSelectedEvent=new i.vpe,this.multipleProfileSelectedEvent=new i.vpe,this.profileList=[],this.multiProfilesSelected=[],this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.route.queryParams.subscribe(d=>{d.profileName?this.metaSvc.findProfileByName(d.profileName).subscribe(T=>{this.profileList=[],this.profileList.push(T.profile)}):this.findAllDeviceProfilesPagination()})}findAllDeviceProfilesPagination(){this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(d=>{this.profileList=d.profiles})}onSingleProfileSelectedEmitter(){this.singleProfileSelectedEvent.emit(this.singleProfileSelected)}onMultipleProfileSelectedEmitter(){this.multipleProfileSelectedEvent.emit(this.multiProfilesSelected)}refresh(){this.metaSvc.allDeviceProfolesPagination(0,this.pageLimit).subscribe(d=>{this.profileList=d.profiles,this.msgSvc.success("refresh"),this.pagination=1,this.resetCheckbox()})}onPageSelected(){this.resetPagination(),this.setPagination(),this.findAllDeviceProfilesPagination()}prePage(){this.setPagination(-1),this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(d=>{this.profileList=d.profiles})}nextPage(){this.setPagination(1),this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(d=>{this.profileList=d.profiles})}setPageLimit(d){this.pageLimit=d}setPagination(d){1===d?this.pagination+=1:-1===d&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit,this.resetCheckbox()}resetPagination(){this.pagination=1,this.resetCheckbox()}resetCheckbox(){}edit(){this.router.navigate(["../edit-profile"],{relativeTo:this.route,queryParams:{profileName:this.multiProfilesSelected[0]}})}deleteConfirm(){$("#deleteConfirmDialog").modal("show")}delete(){this.multiProfilesSelected.forEach(d=>{this.metaSvc.deleteProfileByName(d).subscribe(()=>{this.multiProfilesSelected=[],this.profileList.forEach((T,p)=>{T.name==d&&(this.profileList.splice(p,1),this.msgSvc.success("delete",`  Name: ${T.name}`))})})}),$("#deleteConfirmDialog").modal("hide")}isSingleProfileChecked(d){var T;return(null===(T=this.singleProfileSelected)||void 0===T?void 0:T.name)===d}selectSingleProfile(d,T){d.target.checked?this.profileList.forEach(U=>{U.name===T&&(this.singleProfileSelected=U)}):this.singleProfileSelected=void 0,this.onSingleProfileSelectedEmitter()}isCheckedAll(){let d=!0;return this.profileList&&0===this.profileList.length&&(d=!1),this.profileList.forEach(T=>{-1===this.multiProfilesSelected.indexOf(T.name)&&(d=!1)}),d}selectAll(d){this.profileList.forEach(d.target.checked?p=>{this.multiProfilesSelected.includes(p.name)||this.multiProfilesSelected.push(p.name)}:p=>{this.multiProfilesSelected.includes(p.name)&&this.multiProfilesSelected.splice(this.multiProfilesSelected.indexOf(p.name),1)}),this.onMultipleProfileSelectedEmitter()}isChecked(d){return this.enableSelectAll?this.multiProfilesSelected.includes(d):this.isSingleProfileChecked(d)}selectOne(d,T){this.enableSelectAll?(d.target.checked?this.multiProfilesSelected.push(T):this.multiProfilesSelected.splice(this.multiProfilesSelected.indexOf(T),1),this.onMultipleProfileSelectedEmitter()):this.selectSingleProfile(d,T)}}return v.\u0275fac=function(d){return new(d||v)(i.Y36(a.D),i.Y36(I.e),i.Y36(_.gz),i.Y36(_.F0))},v.\u0275cmp=i.Xpm({type:v,selectors:[["app-device-profile-list"]],inputs:{associatedDeviceColumn:"associatedDeviceColumn",toolbars:"toolbars",enableSelectAll:"enableSelectAll",multiProfilesSelected:"multiProfilesSelected",singleProfileSelected:"singleProfileSelected"},outputs:{singleProfileSelectedEvent:"singleProfileSelectedEvent",multipleProfileSelectedEvent:"multipleProfileSelectedEvent"},decls:67,vars:7,consts:function(){let G,d,T,p,U,k,J,r_,a_,d_,A_,T_,D_,C_,S_,I_,g_,O_;return G="Device Profile List",d="Name",T="Description",p="Labels",U="Manufacturer",k="Model",J="items per page",r_="Previous",a_="Next",d_="Warning",A_=" The data will be permanently erased!!! Are you sure to execute delete operation\uFF1F ",T_="Cancel",D_="Confirm",C_="Refresh",S_="Add",I_="Edit",g_="Delete",O_="AssociatedDevice",[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","text-danger","mr-2"],G,[1,"card-body","p-0"],["class","bg-light px-2 py-2",4,"ngIf"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],["type","checkbox",3,"checked","click",4,"ngIf"],d,T,["scope","col",4,"ngIf"],p,U,k,[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],J,[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"custom-select",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left","mr-1"],r_,[1,"page-item"],a_,[1,"fa","fa-angle-double-right","ml-1"],["id","deleteConfirmDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteConfirmDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteConfirmDialogLabel",1,"modal-title","text-danger"],[1,"fa","fa-warning","mr-1"],d_,[1,"modal-body"],A_,[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],T_,["type","button",1,"btn","btn-danger",3,"click"],D_,[1,"bg-light","px-2","py-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","mr-1"],C_,["type","button","routerLink","../add-profile",1,"btn","btn-info"],[1,"fa","fa-plus","mr-1"],S_,["type","button","data-toggle","tooltip","data-placement","top","title","only one should be selected",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-edit","mr-1"],I_,["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash","mr-1"],g_,["type","checkbox",3,"checked","click"],O_,["type","checkbox",3,"value","checked","click"],[1,"user-select-all"],["class","text-center",4,"ngIf"],[1,"text-center"],["routerLink","../../device-center",1,"badge","badge-pill","badge-primary",3,"queryParams"],[1,"fa","fa-sitemap"]]},template:function(d,T){1&d&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i._UZ(2,"i",2),i.TgZ(3,"span"),i.SDv(4,3),i.qZA(),i.qZA(),i.TgZ(5,"div",4),i.YNc(6,N,22,2,"div",5),i.TgZ(7,"div",6),i.TgZ(8,"table",7),i.TgZ(9,"thead",8),i.TgZ(10,"tr"),i.TgZ(11,"th",9),i.YNc(12,l,1,1,"input",10),i.qZA(),i.TgZ(13,"th",9),i._uU(14,"ID"),i.qZA(),i.TgZ(15,"th",9),i.SDv(16,11),i.qZA(),i.TgZ(17,"th",9),i.SDv(18,12),i.qZA(),i.YNc(19,r,2,0,"th",13),i.TgZ(20,"th",9),i.SDv(21,14),i.qZA(),i.TgZ(22,"th",9),i.SDv(23,15),i.qZA(),i.TgZ(24,"th",9),i.SDv(25,16),i.qZA(),i.qZA(),i.qZA(),i.TgZ(26,"tbody"),i.YNc(27,L,16,11,"tr",17),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(28,"div",18),i.TgZ(29,"nav",19),i.TgZ(30,"ul",20),i.TgZ(31,"li",21),i.TgZ(32,"span",22),i.SDv(33,23),i.qZA(),i.qZA(),i.TgZ(34,"li",24),i.TgZ(35,"select",25),i.NdJ("ngModelChange",function(U){return T.pageLimit=U})("ngModelChange",function(){return T.onPageSelected()}),i.TgZ(36,"option",26),i._uU(37,"5"),i.qZA(),i.TgZ(38,"option",27),i._uU(39,"10"),i.qZA(),i.TgZ(40,"option",28),i._uU(41,"20"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(42,"li",29),i.TgZ(43,"button",30),i.NdJ("click",function(){return T.prePage()}),i._UZ(44,"i",31),i.TgZ(45,"span"),i.SDv(46,32),i.qZA(),i.qZA(),i.qZA(),i.TgZ(47,"li",33),i.TgZ(48,"button",30),i.NdJ("click",function(){return T.nextPage()}),i.TgZ(49,"span"),i.SDv(50,34),i.qZA(),i._UZ(51,"i",35),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(52,"div",36),i.TgZ(53,"div",37),i.TgZ(54,"div",38),i.TgZ(55,"div",39),i.TgZ(56,"h5",40),i._UZ(57,"i",41),i.TgZ(58,"span"),i.SDv(59,42),i.qZA(),i.qZA(),i.qZA(),i.TgZ(60,"div",43),i.SDv(61,44),i.qZA(),i.TgZ(62,"div",45),i.TgZ(63,"button",46),i.SDv(64,47),i.qZA(),i.TgZ(65,"button",48),i.NdJ("click",function(){return T.delete()}),i.SDv(66,49),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&d&&(i.xp6(6),i.Q6J("ngIf",T.toolbars),i.xp6(6),i.Q6J("ngIf",T.enableSelectAll),i.xp6(7),i.Q6J("ngIf",T.associatedDeviceColumn),i.xp6(8),i.Q6J("ngForOf",T.profileList),i.xp6(8),i.Q6J("ngModel",T.pageLimit),i.xp6(8),i.Q6J("disabled",1===T.pagination),i.xp6(5),i.Q6J("disabled",T.pageLimit>T.profileList.length))},directives:[V.O5,V.sg,f.EJ,f.JJ,f.On,f.YN,f.Kr,_.rH,_.yS],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),v})()},7982:(p_,b,S)=>{S.d(b,{V:()=>V});var i=S(1841),a=S(5894),I=S(476),_=S(4889);let V=(()=>{class f{constructor(l,r){this.http=l,this.errorSvc=r,this.endpoint="/core-command",this.version="/api/v2",this.urlPrefix=`${this.endpoint}${this.version}`,this.endpointHealthUrl="/ping",this.versionUrl="/version",this.configUrl="/config",this.deviceCoreCommandListUrl=`${this.urlPrefix}/device/all`,this.commandsByDeviceIdUrl=`${this.urlPrefix}/device/`,this.commandsByDeviceNameUrl=`${this.urlPrefix}/device/name/`,this.issueCmdByDeviceNameAndCmdNameUrl=`${this.urlPrefix}/device/name/`,this.httpPostOrPutJSONOptions={headers:new i.WM({"Content-type":"application/json"})}}getConfig(){return this.http.get(`${this.urlPrefix}${this.configUrl}`).pipe((0,a.K)(r=>this.errorSvc.handleError(r)))}findCommnadsByDeviceId(l){return this.http.get(`${this.commandsByDeviceIdUrl}${l}`).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}allDeviceCoreCommandsPagination(l,r){return this.http.get(`${this.deviceCoreCommandListUrl}?offset=${l}&limit=${r}`).pipe((0,a.K)(M=>this.errorSvc.handleError(M)))}findDeviceAssociatedCommnadsByDeviceName(l){return this.http.get(`${this.commandsByDeviceNameUrl}${l}`).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}findAllDeviceCommnads(){return this.http.get(`${this.urlPrefix}/device`).pipe((0,a.K)(r=>this.errorSvc.handleError(r)))}issueGetBinaryCmd(l,r){return this.http.request("GET",`${this.commandsByDeviceIdUrl}${l}/command/${r}`,{responseType:"arraybuffer"}).pipe((0,a.K)(M=>this.errorSvc.handleError(M)))}issueGetCmd(l,r){return this.http.get(`${this.issueCmdByDeviceNameAndCmdNameUrl}${l}/${r}`).pipe((0,a.K)(M=>this.errorSvc.handleError(M)))}issueSetCmd(l,r,A){return this.http.put(`${this.issueCmdByDeviceNameAndCmdNameUrl}${l}/${r}`,JSON.stringify(A),this.httpPostOrPutJSONOptions).pipe((0,a.K)(L=>this.errorSvc.handleError(L)))}}return f.\u0275fac=function(l){return new(l||f)(I.LFG(i.eN),I.LFG(_.T))},f.\u0275prov=I.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},2437:(p_,b,S)=>{S.d(b,{D:()=>V});var i=S(1841),a=S(5894),I=S(476),_=S(4889);let V=(()=>{class f{constructor(l,r){this.http=l,this.errorSvc=r,this.endpoint="/core-metadata",this.version="/api/v2",this.urlPrefix=`${this.endpoint}${this.version}`,this.configUrl="/config",this.devicesListUrl=`${this.urlPrefix}/device/all`,this.addOneDeviceUrl=`${this.urlPrefix}/device`,this.updateOneDeviceUrl=`${this.urlPrefix}/device`,this.deleteOneDeviceByIdUrl=`${this.urlPrefix}/device/Id`,this.deleteOneDeviceByNameUrl=`${this.urlPrefix}/device/name`,this.findDeviceByNameUrl=`${this.urlPrefix}/device/name`,this.findDeviceByIdUrl=`${this.urlPrefix}/device/id`,this.findDevicesByServiceIdUrl=`${this.urlPrefix}/device/service/id`,this.findDevicesByServiceNameUrl=`${this.urlPrefix}/device/service/name`,this.findDevicesByProfileIdUrl=`${this.urlPrefix}/device/profile/id`,this.findDevicesByProfileNameUrl=`${this.urlPrefix}/device/profile/name`,this.deviceServicesListUrl=`${this.urlPrefix}/deviceservice/all`,this.updateDeviceServiceUrl=`${this.urlPrefix}/deviceservice`,this.findDeviceServiceByIdUrl=`${this.urlPrefix}/deviceservice/id`,this.findDeviceServiceByNameUrl=`${this.urlPrefix}/deviceservice/name`,this.deviceProfilesListUrl=`${this.urlPrefix}/deviceprofile/all`,this.findProfilesByIdUrl=`${this.urlPrefix}/deviceprofile`,this.findProfilesByNameUrl=`${this.urlPrefix}/deviceprofile/name`,this.updateDeviceProfileUrl=`${this.urlPrefix}/deviceprofile`,this.uploadProfileYamlFileUrl=`${this.urlPrefix}/deviceprofile/uploadfile`,this.uploadProfileYamlContentUrl=`${this.urlPrefix}/deviceprofile/upload`,this.deviceProfileYamlUrl=`${this.urlPrefix}/deviceprofile/yaml`,this.deleteProfileByIdUrl=`${this.urlPrefix}/deviceprofile/id`,this.deleteProfileByNamedUrl=`${this.urlPrefix}/deviceprofile/name`,this.httpPostOrPutJSONOptions={headers:new i.WM({"Content-type":"application/json"})}}getConfig(){return this.http.get(`${this.urlPrefix}${this.configUrl}`).pipe((0,a.K)(r=>this.errorSvc.handleError(r)))}allDevices(){return this.http.get(`${this.devicesListUrl}`).pipe((0,a.K)(r=>this.errorSvc.handleError(r)))}allDevicesPagination(l,r){return this.http.get(`${this.devicesListUrl}?offset=${l}&limit=${r}`).pipe((0,a.K)(M=>this.errorSvc.handleError(M)))}addDevice(l){let r=`${this.addOneDeviceUrl}`;return l.apiVersion="v2",this.http.post(r,JSON.stringify([{apiVersion:"v2",device:l}]),this.httpPostOrPutJSONOptions).pipe((0,a.K)(M=>this.errorSvc.handleError(M)))}deleteOneDeviceByName(l){return this.http.delete(`${this.deleteOneDeviceByNameUrl}/${l}`).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}deleteOneDeviceById(l){return this.http.delete(`${this.deleteOneDeviceByIdUrl}/${l}`).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}updateDevice(l){return this.http.patch(`${this.updateOneDeviceUrl}`,JSON.stringify([{apiVersion:"v2",device:l}]),{headers:new i.WM({"Content-type":"application/json"})}).pipe((0,a.K)(M=>this.errorSvc.handleError(M)))}findDeviceByName(l){return this.http.get(`${this.findDeviceByNameUrl}/${l}`).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}findDeviceById(l){return this.http.get(`${this.findDeviceByIdUrl}/${l}`).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}findDevicesByServiceId(l){return this.http.get(`${this.findDevicesByServiceIdUrl}/${l}`).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}findDevicesByServiceName(l,r,A){return this.http.get(`${this.findDevicesByServiceNameUrl}/${A}?offset=${l}&limit=${r}`).pipe((0,a.K)(L=>this.errorSvc.handleError(L)))}findDevicesByProfileId(l){return this.http.get(`${this.findDevicesByProfileIdUrl}/${l}`).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}findDevicesByProfileName(l,r,A){return this.http.get(`${this.findDevicesByProfileNameUrl}/${A}?offset=${l}&limit=${r}`).pipe((0,a.K)(L=>this.errorSvc.handleError(L)))}allDeviceServices(){return this.http.get(`${this.deviceServicesListUrl}?offset=0&limit=-1`).pipe((0,a.K)(r=>this.errorSvc.handleError(r)))}findAllDeviceServicesPagination(l,r){return this.http.get(`${this.deviceServicesListUrl}?offset=${l}&limit=${r}`).pipe((0,a.K)(M=>this.errorSvc.handleError(M)))}updateDeviceService(l){return this.http.patch(`${this.updateDeviceServiceUrl}`,JSON.stringify([{apiVersion:"v2",service:l}]),this.httpPostOrPutJSONOptions).pipe((0,a.K)(M=>this.errorSvc.handleError(M)))}findDevcieServiceById(l){return this.http.get(`${this.findDeviceServiceByIdUrl}/${l}`).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}findDevcieServiceByName(l){return this.http.get(`${this.findDeviceServiceByNameUrl}/${l}`).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}allDeviceProfoles(){return this.http.get(`${this.deviceProfilesListUrl}?offset=0&limit=-1`).pipe((0,a.K)(r=>this.errorSvc.handleError(r)))}allDeviceProfolesPagination(l,r){return this.http.get(`${this.deviceProfilesListUrl}?offset=${l}&limit=${r}`).pipe((0,a.K)(M=>this.errorSvc.handleError(M)))}addProfileYamlByNameViaUIBackend(l){return this.http.request("POST","/api/v2/profile/yaml",{body:l,responseType:"text"}).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}findProfileById(l){return this.http.get(`${this.findProfilesByIdUrl}/${l}`).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}findProfileByName(l){return this.http.get(`${this.findProfilesByNameUrl}/${l}`).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}findProfileYamlByNameViaUIBackend(l){return this.http.request("GET","/api/v2/profile/yaml/name/"+l,{responseType:"text"}).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}uploadProfileYamlFile(l){return this.http.request("POST",`${this.uploadProfileYamlFileUrl}`,{body:l,responseType:"text"}).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}updateDeviceProfile(l){return this.http.put(`${this.updateDeviceProfileUrl}`,l,this.httpPostOrPutJSONOptions).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}updateProfileYamlContentViaUIBackend(l){return this.http.put("/api/v2/profile/yaml",l,{headers:new i.WM({"Content-Type":"text/plain; charset=utf-8"})}).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}uploadProfileYamlContent(l){return this.http.request("POST",`${this.uploadProfileYamlContentUrl}`,{body:l,responseType:"text",headers:new i.WM({"Content-Type":"text/plain; charset=utf-8"})}).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}findProfileYamlById(l){return this.http.request("GET",`${this.deviceProfileYamlUrl}/${l}`,{responseType:"text"})}deleteProfileById(l){return this.http.delete(`${this.deleteProfileByIdUrl}/${l}`).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}deleteProfileByName(l){return this.http.delete(`${this.deleteProfileByNamedUrl}/${l}`).pipe((0,a.K)(A=>this.errorSvc.handleError(A)))}}return f.\u0275fac=function(l){return new(l||f)(I.LFG(i.eN),I.LFG(_.T))},f.\u0275prov=I.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()}}]);