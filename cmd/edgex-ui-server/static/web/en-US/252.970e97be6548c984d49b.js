"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[252],{3252:(M_,Q,C)=>{C.r(Q),C.d(Q,{MetadataModule:()=>Je});var i=C(8583),a=C(3092),S=C(9502),_=C(476);let W=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-metadata"]],decls:14,vars:0,consts:function(){let o,e,n;return o="Device Service",e="Device",n="Device Profile",[[1,"card"],[1,"card-header"],[1,"nav","nav-tabs","card-header-tabs","font-weight-bold"],[1,"nav-item"],["routerLink","./device-service-list","routerLinkActive","active",1,"nav-link"],o,["routerLink","./device-center","routerLinkActive","active",1,"nav-link"],e,["routerLink","./device-profile-center","routerLinkActive","active",1,"nav-link"],n,[1,"card-body"]]},template:function(e,n){1&e&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"ul",2),_.TgZ(3,"li",3),_.TgZ(4,"a",4),_.SDv(5,5),_.qZA(),_.qZA(),_.TgZ(6,"li",3),_.TgZ(7,"a",6),_.SDv(8,7),_.qZA(),_.qZA(),_.TgZ(9,"li",3),_.TgZ(10,"a",8),_.SDv(11,9),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(12,"div",10),_._UZ(13,"router-outlet"),_.qZA(),_.qZA())},directives:[S.yS,S.Od,S.lC],styles:[".active-link[_ngcontent-%COMP%]{color:#922c48;background-color:#922c4866!important}"]}),t})();var u=C(2437),h=C(7822);function O(t,o){if(1&t&&(_.TgZ(0,"p"),_._uU(1),_.qZA()),2&t){const e=_.oxw().$implicit;_.xp6(1),_.Oqu(e.description)}}function M(t,o){1&t&&(_.TgZ(0,"p",20),_._uU(1,"no description."),_.qZA())}function m(t,o){if(1&t&&(_.TgZ(0,"span",21),_._uU(1),_.qZA()),2&t){const e=_.oxw().$implicit;_.xp6(1),_.Oqu(e.adminState)}}function N(t,o){if(1&t&&(_.TgZ(0,"span",22),_._uU(1),_.qZA()),2&t){const e=_.oxw().$implicit;_.xp6(1),_.Oqu(e.adminState)}}function w(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"a",23),_.NdJ("click",function(){_.CHM(e);const E=_.oxw().$implicit;return _.oxw().associatedDevicesSkip(E.name)}),_._UZ(1,"i",24),_.TgZ(2,"span"),_.SDv(3,25),_.qZA(),_._uU(4),_.qZA()}if(2&t){const e=_.oxw().$implicit,n=_.oxw();_.xp6(4),_.hij("\xa0 ",n.associatedDevices.get(e.name)," ")}}function p_(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"li",3),_.TgZ(1,"div",4),_.TgZ(2,"div",5),_._UZ(3,"i",6),_.qZA(),_.TgZ(4,"div",7),_.TgZ(5,"div",8),_.TgZ(6,"h5",9),_._uU(7),_.qZA(),_.qZA(),_.YNc(8,O,2,1,"p",10),_.YNc(9,M,2,0,"ng-template",null,11,_.W1O),_.TgZ(11,"div"),_.TgZ(12,"span",12),_._uU(13),_.qZA(),_.TgZ(14,"span",13),_.YNc(15,m,2,1,"span",14),_.YNc(16,N,2,1,"span",15),_.qZA(),_.YNc(17,w,5,1,"a",16),_.TgZ(18,"span",17),_.NdJ("click",function(){const c=_.CHM(e).$implicit;return _.oxw().edit(c)}),_._UZ(19,"i",18),_.TgZ(20,"span"),_.SDv(21,19),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=o.$implicit,n=_.MAs(10),E=_.oxw();_.xp6(7),_.Oqu(e.name),_.xp6(1),_.Q6J("ngIf",e.description)("ngIfElse",n),_.xp6(5),_.hij("Port ",E.getSvcPort(e.baseAddress),""),_.xp6(1),_.Q6J("ngSwitch",e.adminState),_.xp6(1),_.Q6J("ngSwitchCase","UNLOCKED"),_.xp6(2),_.Q6J("ngIf",E.associatedDevices.size)}}function p(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",26),_.TgZ(1,"div",27),_._UZ(2,"i",28),_.TgZ(3,"span"),_.SDv(4,29),_.qZA(),_.TgZ(5,"span",30),_._uU(6),_.qZA(),_.TgZ(7,"button",31),_.NdJ("click",function(){return _.CHM(e),_.oxw().updateSvc()}),_.SDv(8,32),_.qZA(),_.qZA(),_.TgZ(9,"div",33),_.TgZ(10,"form"),_.TgZ(11,"div",34),_.TgZ(12,"label",35),_.SDv(13,36),_.qZA(),_.TgZ(14,"div",37),_.TgZ(15,"input",38),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().deviceSvcSelected.description=E}),_.qZA(),_.qZA(),_.qZA(),_.TgZ(16,"div",34),_.TgZ(17,"label",39),_.SDv(18,40),_.qZA(),_.TgZ(19,"div",37),_.TgZ(20,"select",41),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().deviceSvcSelected.adminState=E}),_.TgZ(21,"option",42),_._uU(22,"UNLOCKED"),_.qZA(),_.TgZ(23,"option",43),_._uU(24,"LOCKED"),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=_.oxw();_.xp6(6),_.Oqu(e.deviceSvcSelected.name),_.xp6(9),_.Q6J("ngModel",e.deviceSvcSelected.description),_.xp6(5),_.Q6J("ngModel",e.deviceSvcSelected.adminState)}}let G=(()=>{class t{constructor(e,n,E,c){this.metaSvc=e,this.msgSvc=n,this.router=E,this.route=c,this.deviceServiceList=[],this.associatedDevices=new Map}ngOnInit(){this.metaSvc.allDeviceServices().subscribe(e=>{this.deviceServiceList=e.services,this.deviceServiceList.forEach(n=>{this.metaSvc.findDevicesByServiceName(0,20,n.name).subscribe(E=>{this.associatedDevices.set(n.name,E.devices.length>20?"20+":String(E.devices.length))})})})}getSvcPort(e){return new URL(e).port}edit(e){this.deviceSvcSelected=e}updateSvc(){this.metaSvc.updateDeviceService(this.deviceSvcSelected).subscribe(()=>{var e;this.msgSvc.success("update device service",`name: ${null===(e=this.deviceSvcSelected)||void 0===e?void 0:e.name}`),this.deviceSvcSelected=void 0})}associatedDevicesSkip(e){this.router.navigate(["../device-center"],{queryParams:{svcName:e},relativeTo:this.route})}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(u.D),_.Y36(h.e),_.Y36(S.F0),_.Y36(S.gz))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-device-service-media-list"]],decls:3,vars:2,consts:function(){let o,e,n,E,c,s;return o="Setting",e="Associated Devices",n="edit",E="Save",c="Description",s="AdminState",[[1,"list-group","p-0"],["class","list-group-item list-group-item-action list-group-item-light",4,"ngFor","ngForOf"],["class","card mt-3",4,"ngIf"],[1,"list-group-item","list-group-item-action","list-group-item-light"],[1,"media"],[1,"align-self-center","mr-3"],[1,"fa","fa-tags","fa-2x","text-secondary"],[1,"media-body"],[1,"mt-0","mb-1"],[1,"d-inline","mr-3","align-middle","text-dark"],[4,"ngIf","ngIfElse"],["nodesc",""],[1,"badge","badge-info","mr-3"],[3,"ngSwitch"],["class","badge badge-success mr-3",4,"ngSwitchCase"],["class","badge badge-danger mr-3",4,"ngSwitchDefault"],["class","badge badge-primary","role","button",3,"click",4,"ngIf"],["role","button",1,"badge","badge-secondary","float-right",3,"click"],[1,"fa","fa-cog","mr-1"],o,[1,"my-1"],[1,"badge","badge-success","mr-3"],[1,"badge","badge-danger","mr-3"],["role","button",1,"badge","badge-primary",3,"click"],[1,"fa","fa-sitemap","mr-1"],e,[1,"card","mt-3"],[1,"card-header"],[1,"fa","fa-edit","mr-1","text-danger"],n,[1,"ml-1"],[1,"btn","btn-success","btn-sm","float-right",3,"click"],E,[1,"card-body"],[1,"form-group","row"],["for","deviceDesc",1,"col-md-2","col-form-label"],c,[1,"col-md-10"],["type","text","name","deviceSvcDescription",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],s,["name","deviceSvcAdminState",1,"custom-select",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"]]},template:function(e,n){1&e&&(_.TgZ(0,"ul",0),_.YNc(1,p_,22,7,"li",1),_.qZA(),_.YNc(2,p,25,3,"div",2)),2&e&&(_.xp6(1),_.Q6J("ngForOf",n.deviceServiceList),_.xp6(1),_.Q6J("ngIf",n.deviceSvcSelected))},directives:[i.sg,i.O5,i.RF,i.n9,i.ED,a._Y,a.JL,a.F,a.Fj,a.JJ,a.On,a.EJ,a.YN,a.Kr],styles:[""]}),t})(),l=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-device-center"]],decls:1,vars:0,template:function(e,n){1&e&&_._UZ(0,"router-outlet")},directives:[S.lC],styles:[""]}),t})();var d=C(7982);function I(t,o){if(1&t&&(_.TgZ(0,"span"),_.TgZ(1,"span",69),_.SDv(2,70),_.qZA(),_.TgZ(3,"span",71),_._uU(4),_.qZA(),_.TgZ(5,"span"),_.SDv(6,72),_.qZA(),_.qZA()),2&t){const e=_.oxw();_.xp6(4),_.Oqu(e.associatedSvcName)}}function U(t,o){if(1&t&&(_.TgZ(0,"span"),_.TgZ(1,"span",69),_.SDv(2,73),_.qZA(),_.TgZ(3,"span",71),_._uU(4),_.qZA(),_.TgZ(5,"span"),_.SDv(6,74),_.qZA(),_.qZA()),2&t){const e=_.oxw();_.xp6(4),_.Oqu(e.associatedProfileName)}}function k(t,o){1&t&&(_.TgZ(0,"span"),_.SDv(1,75),_.qZA())}function J(t,o){if(1&t&&(_.TgZ(0,"span",87),_._uU(1),_.qZA()),2&t){const e=_.oxw().$implicit;_.xp6(1),_.Oqu(e.adminState)}}function l_(t,o){if(1&t&&(_.TgZ(0,"span",88),_._uU(1),_.qZA()),2&t){const e=_.oxw().$implicit;_.xp6(1),_.Oqu(e.adminState)}}function a_(t,o){if(1&t&&(_.TgZ(0,"span",87),_._uU(1),_.qZA()),2&t){const e=_.oxw().$implicit;_.xp6(1),_.hij(" ",e.operatingState,"")}}function d_(t,o){if(1&t&&(_.TgZ(0,"span",88),_._uU(1),_.qZA()),2&t){const e=_.oxw().$implicit;_.xp6(1),_.hij(" ",e.operatingState,"")}}function r_(t,o){if(1&t&&(_.TgZ(0,"span",88),_._uU(1),_.qZA()),2&t){const e=_.oxw().$implicit;_.xp6(1),_.hij(" ",e.operatingState,"")}}const A_=function(t){return{profileName:t}};function T_(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"tr"),_.TgZ(1,"td"),_.TgZ(2,"input",23),_.NdJ("click",function(E){const s=_.CHM(e).$implicit;return _.oxw().selectOne(E,s)}),_.qZA(),_.qZA(),_.TgZ(3,"td",76),_._uU(4),_.qZA(),_.TgZ(5,"td",76),_._uU(6),_.qZA(),_.TgZ(7,"td"),_._uU(8),_.qZA(),_.TgZ(9,"td"),_._uU(10),_.qZA(),_.TgZ(11,"td"),_.TgZ(12,"span",77),_.YNc(13,J,2,1,"span",78),_.YNc(14,l_,2,1,"span",79),_.qZA(),_.qZA(),_.TgZ(15,"td",80),_.TgZ(16,"span",77),_.YNc(17,a_,2,1,"span",78),_.YNc(18,d_,2,1,"span",81),_.YNc(19,r_,2,1,"span",79),_.qZA(),_.qZA(),_.TgZ(20,"td",80),_.TgZ(21,"span",82),_.NdJ("click",function(){const c=_.CHM(e).$implicit;return _.oxw().checkDeviceCommand(c)}),_._UZ(22,"i",83),_.qZA(),_.qZA(),_.TgZ(23,"td",80),_.TgZ(24,"span",82),_.NdJ("click",function(){const c=_.CHM(e).$implicit;return _.oxw().checkAutoEvent(c)}),_._UZ(25,"i",84),_.qZA(),_.qZA(),_.TgZ(26,"td"),_.TgZ(27,"a",85),_._uU(28),_.qZA(),_.qZA(),_.TgZ(29,"td"),_.TgZ(30,"a",86),_._uU(31),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=o.$implicit,n=_.oxw();_.ekj("table-active",n.isChecked(e.id)||n.associatedCmdDeviceName===e.name||n.associatedAutoEventsDeviceName===e.name),_.xp6(2),_.Q6J("checked",n.isChecked(e.id)),_.xp6(2),_.Oqu(e.id),_.xp6(2),_.Oqu(e.name),_.xp6(2),_.Oqu(e.description),_.xp6(2),_.Oqu(e.labels),_.xp6(2),_.Q6J("ngSwitch",e.adminState),_.xp6(1),_.Q6J("ngSwitchCase","UNLOCKED"),_.xp6(3),_.Q6J("ngSwitch",e.operatingState),_.xp6(1),_.Q6J("ngSwitchCase","UP"),_.xp6(1),_.Q6J("ngSwitchCase","DOWN"),_.xp6(3),_.ekj("badge-danger",n.associatedCmdDeviceName===e.name),_.xp6(3),_.ekj("badge-danger",n.associatedAutoEventsDeviceName===e.name),_.xp6(3),_.Q6J("queryParams",_.VKq(19,A_,e.profileName)),_.xp6(1),_.Oqu(e.profileName),_.xp6(3),_.Oqu(e.serviceName)}}function C_(t,o){if(1&t&&(_.TgZ(0,"tr"),_.TgZ(1,"td"),_._uU(2),_.qZA(),_.TgZ(3,"td"),_.TgZ(4,"span",101),_._uU(5),_.qZA(),_.qZA(),_.TgZ(6,"td"),_.TgZ(7,"span",102),_._uU(8),_.qZA(),_.qZA(),_.qZA()),2&t){const e=o.$implicit;_.xp6(2),_.Oqu(e.sourceName),_.xp6(3),_.Oqu(e.interval),_.xp6(3),_.Oqu(e.onChange)}}function D_(t,o){if(1&t&&(_.TgZ(0,"div"),_.TgZ(1,"div",91),_.TgZ(2,"div",92),_.TgZ(3,"span",93),_._UZ(4,"i",84),_.qZA(),_.TgZ(5,"span",94),_._uU(6),_.qZA(),_.TgZ(7,"span"),_.SDv(8,95),_.qZA(),_.qZA(),_.TgZ(9,"div",96),_.TgZ(10,"div",19),_.TgZ(11,"table",20),_.TgZ(12,"thead",21),_.TgZ(13,"th",22),_.SDv(14,97),_.qZA(),_.TgZ(15,"th",22),_.SDv(16,98),_.qZA(),_.TgZ(17,"th",22),_.SDv(18,99),_.qZA(),_.qZA(),_.TgZ(19,"tbody"),_.YNc(20,C_,9,3,"tr",100),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t){const e=_.oxw(2);_.xp6(6),_.hij(" ",e.associatedAutoEventsDeviceName,""),_.xp6(14),_.Q6J("ngForOf",e.autoEvents)}}function S_(t,o){if(1&t&&(_.TgZ(0,"div",91),_.TgZ(1,"div",92),_.TgZ(2,"span",93),_._UZ(3,"i",84),_.qZA(),_.TgZ(4,"span",94),_._uU(5),_.qZA(),_.TgZ(6,"span"),_.SDv(7,103),_.qZA(),_.qZA(),_.TgZ(8,"div",104),_.TgZ(9,"h5",105),_._UZ(10,"i",60),_.TgZ(11,"span"),_.SDv(12,106),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t){const e=_.oxw(2);_.xp6(5),_.hij(" ",e.associatedAutoEventsDeviceName,"")}}function I_(t,o){if(1&t&&(_.TgZ(0,"div"),_.YNc(1,D_,21,2,"div",89),_.YNc(2,S_,13,1,"ng-template",null,90,_.W1O),_.qZA()),2&t){const e=_.MAs(3),n=_.oxw();_.xp6(1),_.Q6J("ngIf",n.autoEvents)("ngIfElse",e)}}function g_(t,o){1&t&&_._UZ(0,"div")}function f(t,o){if(1&t&&(_.TgZ(0,"div"),_.YNc(1,g_,1,0,"div",107),_.qZA()),2&t){const e=_.oxw(),n=_.MAs(84),E=_.MAs(86);_.xp6(1),_.Q6J("ngIf",e.deviceCoreCommand)("ngIfThen",n)("ngIfElse",E)}}function h_(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"li",119),_.NdJ("click",function(){const c=_.CHM(e).$implicit;return _.oxw(2).selectCmd(c)}),_._uU(1),_.qZA()}if(2&t){const e=o.$implicit,n=_.oxw(2);_.ekj("list-group-item-info",(null==n.selectedCmd?null:n.selectedCmd.name)===e.name),_.xp6(1),_.Oqu(e.name)}}function L_(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"button",132),_.NdJ("click",function(){return _.CHM(e),_.oxw(3).issueGetCmd()}),_._uU(1,"try"),_.qZA()}}function b_(t,o){1&t&&_._UZ(0,"div")}function V_(t,o){if(1&t&&(_.TgZ(0,"span",139),_._uU(1),_.qZA()),2&t){const e=_.oxw(4);_.xp6(1),_.hij(" ",e.cmdGetResponse,"")}}function X_(t,o){if(1&t&&(_.TgZ(0,"pre",140),_._uU(1),_.qZA()),2&t){const e=_.oxw(4);_.xp6(1),_.Oqu(e.cmdGetResponseRaw)}}function $_(t,o){if(1&t&&(_.TgZ(0,"div"),_.TgZ(1,"span",133),_.SDv(2,134),_.qZA(),_.YNc(3,V_,2,1,"span",135),_.qZA(),_.TgZ(4,"div",136),_.TgZ(5,"span",133),_.SDv(6,137),_.qZA(),_.YNc(7,X_,2,1,"pre",138),_.qZA()),2&t){const e=_.oxw(3);_.xp6(3),_.Q6J("ngIf",e.cmdGetResponse),_.xp6(4),_.Q6J("ngIf",e.cmdGetResponseRaw)}}function q_(t,o){1&t&&(_.TgZ(0,"h6",105),_._UZ(1,"i",60),_.TgZ(2,"span"),_.SDv(3,141),_.qZA(),_.qZA())}function x_(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"button",132),_.NdJ("click",function(){return _.CHM(e),_.oxw(3).issueSetCmd()}),_._uU(1,"try"),_.qZA()}}function H_(t,o){1&t&&_._UZ(0,"div")}function B_(t,o){if(1&t&&(_.TgZ(0,"div"),_.TgZ(1,"label",151),_._uU(2),_.qZA(),_.TgZ(3,"select",152),_.TgZ(4,"option",153),_._uU(5,"false"),_.qZA(),_.TgZ(6,"option",153),_._uU(7,"true"),_.qZA(),_.qZA(),_.qZA()),2&t){const e=_.oxw().$implicit;_.xp6(1),_.s9C("for",e.resourceName),_.xp6(1),_.hij(" ",e.resourceName," "),_.xp6(1),_.s9C("id",e.resourceName),_.s9C("name",e.resourceName),_.xp6(1),_.Q6J("ngValue",!1),_.xp6(2),_.Q6J("ngValue",!0)}}function F_(t,o){if(1&t&&(_.TgZ(0,"label",151),_._uU(1),_.qZA(),_._UZ(2,"input",154)),2&t){const e=_.oxw().$implicit;_.s9C("for",e.resourceName),_.xp6(1),_.Oqu(e.resourceName),_.xp6(1),_.s9C("id",e.resourceName),_.s9C("name",e.resourceName),_.MGl("placeholder","valueType: ",e.valueType,"")}}function y_(t,o){if(1&t&&(_.TgZ(0,"div",149),_.YNc(1,B_,8,6,"div",89),_.YNc(2,F_,3,5,"ng-template",null,150,_.W1O),_.qZA()),2&t){const e=o.$implicit,n=_.MAs(3);_.xp6(1),_.Q6J("ngIf","Bool"==e.valueType)("ngIfElse",n)}}function Y_(t,o){if(1&t&&(_.TgZ(0,"div",147),_.YNc(1,y_,4,2,"div",148),_.qZA()),2&t){const e=_.oxw(5);_.xp6(1),_.Q6J("ngForOf",e.selectedCmdSetParams)}}function Q_(t,o){if(1&t&&(_.TgZ(0,"div",113),_.TgZ(1,"div",92),_.SDv(2,145),_.qZA(),_.TgZ(3,"div",110),_.YNc(4,Y_,2,1,"div",146),_.qZA(),_.qZA()),2&t){const e=_.oxw(4);_.xp6(4),_.Q6J("ngIf",e.selectedCmd)}}function W_(t,o){if(1&t&&(_.TgZ(0,"span",139),_._uU(1),_.qZA()),2&t){const e=_.oxw(4);_.xp6(1),_.Oqu(e.cmdSetResponse)}}function k_(t,o){if(1&t&&(_.TgZ(0,"pre",140),_._uU(1),_.qZA()),2&t){const e=_.oxw(4);_.xp6(1),_.Oqu(e.cmdSetResponseRaw)}}function w_(t,o){if(1&t&&(_.YNc(0,Q_,5,1,"div",142),_.TgZ(1,"div"),_.TgZ(2,"div"),_.TgZ(3,"span",133),_.SDv(4,143),_.qZA(),_.YNc(5,W_,2,1,"span",135),_.qZA(),_.TgZ(6,"div",136),_.TgZ(7,"span",133),_.SDv(8,144),_.qZA(),_.YNc(9,k_,2,1,"pre",138),_.qZA(),_.qZA()),2&t){const e=_.oxw(3);_.Q6J("ngIf",e.selectedCmdSetParams),_.xp6(5),_.Q6J("ngIf",e.cmdSetResponse),_.xp6(4),_.Q6J("ngIf",e.cmdSetResponseRaw)}}function J_(t,o){1&t&&(_.TgZ(0,"h6",105),_._UZ(1,"i",60),_.TgZ(2,"span"),_.SDv(3,155),_.qZA(),_.qZA())}function z_(t,o){if(1&t&&(_.TgZ(0,"div",0),_.TgZ(1,"div",92),_.TgZ(2,"span",120),_._UZ(3,"i",121),_._uU(4),_.qZA(),_.TgZ(5,"span"),_.SDv(6,122),_.qZA(),_.qZA(),_.TgZ(7,"div",123),_.TgZ(8,"div",111),_.TgZ(9,"div",124),_.TgZ(10,"div",113),_.TgZ(11,"div",92),_._uU(12," Get "),_.YNc(13,L_,2,0,"button",125),_.qZA(),_.TgZ(14,"div",126),_.YNc(15,b_,1,0,"div",107),_.YNc(16,$_,8,2,"ng-template",null,127,_.W1O),_.YNc(18,q_,4,0,"ng-template",null,128,_.W1O),_.qZA(),_.qZA(),_.qZA(),_.TgZ(20,"div",129),_.TgZ(21,"div",0),_.TgZ(22,"div",92),_._uU(23," Set "),_.YNc(24,x_,2,0,"button",125),_.qZA(),_.TgZ(25,"div",110),_.YNc(26,H_,1,0,"div",107),_.YNc(27,w_,10,3,"ng-template",null,130,_.W1O),_.YNc(29,J_,4,0,"ng-template",null,131,_.W1O),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t){const e=_.MAs(17),n=_.MAs(19),E=_.MAs(28),c=_.MAs(30),s=_.oxw(2);_.xp6(4),_.hij(" ",s.selectedCmd.name," method:"),_.xp6(9),_.Q6J("ngIf",s.selectedCmd.get),_.xp6(2),_.Q6J("ngIf",s.selectedCmd.get)("ngIfThen",e)("ngIfElse",n),_.xp6(9),_.Q6J("ngIf",s.selectedCmd.set),_.xp6(2),_.Q6J("ngIf",s.selectedCmd.set)("ngIfThen",E)("ngIfElse",c)}}function K_(t,o){if(1&t&&(_.TgZ(0,"div",91),_.TgZ(1,"div",92),_.TgZ(2,"span",93),_._UZ(3,"i",83),_.qZA(),_.TgZ(4,"span",108),_._uU(5),_.qZA(),_.TgZ(6,"span"),_.SDv(7,109),_.qZA(),_.qZA(),_.TgZ(8,"div",110),_.TgZ(9,"div",111),_.TgZ(10,"div",112),_.TgZ(11,"div",113),_.TgZ(12,"div",1),_.SDv(13,114),_.qZA(),_.TgZ(14,"div",96),_.TgZ(15,"ul",115),_.YNc(16,h_,2,3,"li",116),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(17,"div",117),_.YNc(18,z_,31,9,"div",118),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t){const e=_.oxw();_.xp6(5),_.Oqu(e.associatedCmdDeviceName),_.xp6(11),_.Q6J("ngForOf",e.deviceCoreCommand),_.xp6(2),_.Q6J("ngIf",e.selectedCmd)}}function j_(t,o){if(1&t&&(_.TgZ(0,"div",91),_.TgZ(1,"div",92),_.TgZ(2,"span",93),_._UZ(3,"i",83),_.qZA(),_.TgZ(4,"span",156),_._uU(5),_.qZA(),_.TgZ(6,"span"),_.SDv(7,157),_.qZA(),_.qZA(),_.TgZ(8,"div",104),_.TgZ(9,"h5",105),_._UZ(10,"i",158),_.TgZ(11,"span"),_.SDv(12,159),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t){const e=_.oxw();_.xp6(5),_.Oqu(e.associatedCmdDeviceName)}}let _e=(()=>{class t{constructor(e,n,E,c,s){this.metaSvc=e,this.cmdSvc=n,this.msgSvc=E,this.route=c,this.router=s,this.toolbars=!0,this.enableSelectAll=!0,this.deviceList=[],this.associatedSvcName="",this.associatedProfileName="",this.selectedDevice=[],this.selectedCmd={},this.selectedCmdSetParams=[],this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.route.queryParams.subscribe(e=>e.svcName?(this.associatedSvcName=e.svcName,void this.getDeviceListByAssociatedSvc(this.associatedSvcName)):e.profileName?(this.associatedProfileName=e.profileName,void this.getDeviceListByAssociatedProfile(this.associatedProfileName)):(this.associatedSvcName="",this.associatedProfileName="",void this.getDeviceListPagination()))}renderPopoverComponent(){setTimeout(()=>{$('[data-toggle="popover"]').popover({trigger:"hover"})},250)}getDeviceList(){""===this.associatedSvcName?""===this.associatedProfileName?this.getDeviceListPagination():this.getDeviceListByAssociatedProfile(this.associatedSvcName):this.getDeviceListByAssociatedSvc(this.associatedSvcName)}getDeviceListByAssociatedSvc(e){this.metaSvc.findDevicesByServiceName(this.pageOffset,this.pageLimit,e).subscribe(n=>this.deviceList=n.devices)}getDeviceListByAssociatedProfile(e){this.metaSvc.findDevicesByProfileName(this.pageOffset,this.pageLimit,e).subscribe(n=>this.deviceList=n.devices)}getDeviceListPagination(){this.metaSvc.allDevicesPagination(this.pageOffset,this.pageLimit).subscribe(e=>{this.deviceList=e.devices})}refresh(){this.associatedProfileName="",this.associatedSvcName="",this.metaSvc.allDevicesPagination(0,this.pageLimit).subscribe(e=>{this.deviceList=e.devices,this.msgSvc.success("refresh"),this.resetPagination()})}edit(){this.router.navigate(["../edit-device"],{relativeTo:this.route,queryParams:{deviceName:this.selectedDevice[0].name}})}deleteConfirm(){$("#deleteConfirmDialog").modal("show")}delete(){this.selectedDevice.forEach((e,n)=>{this.metaSvc.deleteOneDeviceByName(e.name).subscribe(()=>{this.selectedDevice.splice(n,1),this.deviceList.forEach((E,c)=>{if(E.id===e.id)return this.deviceList.splice(c,1),void this.msgSvc.success("remove device ",` Name: ${E.name}`)})})}),this.associatedCmdDeviceName=void 0,this.associatedAutoEventsDeviceName=void 0,$("#deleteConfirmDialog").modal("hide")}checkAutoEvent(e){this.associatedAutoEventsDeviceName=e.name,this.autoEvents=e.autoEvents,this.associatedCmdDeviceName=""}isCheckedAll(){let e=!0;return this.deviceList&&0===this.deviceList.length&&(e=!1),this.deviceList.forEach(n=>{-1===this.selectedDevice.findIndex(E=>E.name===n.name)&&(e=!1)}),e}selectAll(e){this.deviceList.forEach(e.target.checked?E=>{-1===this.selectedDevice.findIndex(c=>c.name===E.name)&&this.selectedDevice.push(E)}:E=>{this.selectedDevice.forEach((c,s)=>{c.name===E.name&&this.selectedDevice.splice(s,1)})})}isChecked(e){return this.selectedDevice.findIndex(n=>n.id===e)>=0}selectOne(e,n){e.target.checked?this.selectedDevice.push(n):this.selectedDevice.forEach((c,s)=>{c.name===n.name&&this.selectedDevice.splice(s,1)})}checkDeviceCommand(e){this.resetResponse(),this.metaSvc.findProfileByName(e.profileName).subscribe(n=>this.associateDeviceProfile=n.profile),this.cmdSvc.findDeviceAssociatedCommnadsByDeviceName(e.name).subscribe(n=>{this.associatedAutoEventsDeviceName="",this.associatedCmdDeviceName=n.deviceCoreCommand.deviceName,this.associatedCmdDeviceId=e.id,this.deviceCoreCommand=n.deviceCoreCommand.coreCommands,this.selectedCmd=this.deviceCoreCommand[0],this.selectedCmdSetParams=this.selectedCmd.parameters})}selectCmd(e){this.selectedCmd=e,this.selectedCmdSetParams=this.selectedCmd.parameters,this.resetResponse()}resetResponse(){this.cmdGetResponse="",this.cmdGetResponseRaw="",this.cmdSetResponse="",this.cmdSetResponseRaw="",this.cmdBinaryResponse=!0,this.cmdBinaryResponseURL=""}issueGetCmd(){var e;this.cmdSvc.issueGetCmd(this.associatedCmdDeviceName,null===(e=this.selectedCmd)||void 0===e?void 0:e.name).subscribe(E=>{this.cmdGetResponseRaw=JSON.stringify(E.event.readings,null,3);let c=[];E.event.readings.forEach(s=>{c.push(s.value)}),this.cmdGetResponse=c.join(",")})}issueSetCmd(){var e,n;let c={};null===(e=this.selectedCmdSetParams)||void 0===e||e.forEach(function(s){""!==$(`#${s.resourceName}`).val().trim()&&(c[s.resourceName]=$(`#${s.resourceName}`).val().trim())}),this.cmdSvc.issueSetCmd(this.associatedCmdDeviceName,null===(n=this.selectedCmd)||void 0===n?void 0:n.name,c).subscribe(s=>{this.cmdSetResponseRaw=JSON.stringify(s,null,3),this.cmdSetResponse=s.message})}onPageSelected(){this.resetPagination(),this.getDeviceList()}prePage(){this.setPagination(-1),this.getDeviceList()}nextPage(){this.setPagination(1),this.getDeviceList()}setPagination(e){1===e?this.pagination+=1:-1===e&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit}resetPagination(){this.pagination=1,this.pageOffset=(this.pagination-1)*this.pageLimit}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(u.D),_.Y36(d.V),_.Y36(h.e),_.Y36(S.gz),_.Y36(S.F0))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-device-list"]],inputs:{toolbars:"toolbars",enableSelectAll:"enableSelectAll"},decls:102,vars:12,consts:function(){let o,e,n,E,c,s,D,T,R,P,Z,v,L,b,V,X,q,x,H,B,F,y,Y,g,z,K,j,__,e_,t_,n_,i_,E_,o_,c_,s_,A,m_,R_,G_,U_,N_,P_,Z_;return o="Refresh",e="Add",n="Edit",E="Delete",c="ID",s="Name",D="Description",T="Labels",R="AdminState",P="OperatingState",Z="Command",v="AutoEvents",L="AssociatedProfile",b="AssociatedService",V="items per page",X="Previous",q="Next",x="Warning",H=" The data will be permanently erased!!! Are you sure to execute delete operation\uFF1F ",B="Cancel",F="Confirm",y="DeviceService",Y="Associated Device List",g="DeviceProfile",z="Associated Device List",K="Device List",j="Associated AutoEvents",__="Resource",e_="Interval",t_="Onchange",n_="Associated AutoEvents",i_="no associated AutoEvents",E_="Associated Commands",o_=" Command Name List ",c_="Get and Set",s_="Response:",A="ResponseRaw:",m_="no Get method",R_="Response:",G_="ResponseRaw:",U_="Set Parameters",N_="no Set method",P_="Associated Commands",Z_="no associated commands",[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","text-danger","mr-2"],[4,"ngIf"],[1,"card-body","p-0","position-relative"],[1,"bg-light","px-2","py-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","mr-1"],o,["type","button","routerLink","../add-device",1,"btn","btn-info"],[1,"fa","fa-plus","mr-1"],e,["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-edit","mr-1"],n,["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash","mr-1"],E,[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],["type","checkbox","role","button",3,"checked","click"],c,s,D,T,R,P,Z,v,L,b,[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],V,[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"custom-select",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left","mr-1"],X,[1,"page-item"],q,[1,"fa","fa-angle-double-right","ml-1"],["hasAssociatedCommand",""],["noAssociatedCommand",""],["id","deleteConfirmDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteConfirmDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteConfirmDialogLabel",1,"modal-title","text-danger"],[1,"fa","fa-warning","mr-1"],x,[1,"modal-body"],H,[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],B,["type","button",1,"btn","btn-danger",3,"click"],F,[1,"mr-1"],y,[1,"text-danger","mr-1"],Y,g,z,K,[1,"user-select-all"],[3,"ngSwitch"],["class","badge badge-success",4,"ngSwitchCase"],["class","badge badge-danger",4,"ngSwitchDefault"],[1,"text-center"],["class","badge badge-danger",4,"ngSwitchCase"],["role","button",1,"badge","badge-primary","text-light",3,"click"],[1,"fa","fa-terminal","font-weight-bolder"],[1,"fa","fa-calendar-check-o","font-weight-bolder"],["routerLink","../../device-profile-center",3,"queryParams"],["routerLink","../../device-service-list"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[4,"ngIf","ngIfElse"],["noAutoEvents",""],[1,"card","mt-3"],[1,"card-header"],[1,"badge","badge-danger","text-light"],[1,"text-primary","mx-2","font-weight-bold"],j,[1,"card-body","p-0"],__,e_,t_,[4,"ngFor","ngForOf"],[1,"badge","badge-secondary","badge-pill"],[1,""],n_,[1,"card-body","text-center"],[1,"text-warning"],i_,[4,"ngIf","ngIfThen","ngIfElse"],[1,"text-primary","ml-2","font-weight-bold"],E_,[1,"card-body"],[1,"row"],[1,"col-md-2","col-lg-2"],[1,"card","mb-2"],o_,[1,"list-group","list-group-flush"],["role","button","class","list-group-item list-group-item-action",3,"list-group-item-info","click",4,"ngFor","ngForOf"],[1,"col-md-10","col-lg-10"],["class","card",4,"ngIf"],["role","button",1,"list-group-item","list-group-item-action",3,"click"],[1,"text-primary","font-weight-bold","mr-2"],[1,"fa","fa-thumb-tack","text-danger","mr-1"],c_,[1,"card-body","px-2"],[1,"col-md-5","col-lg-5"],["class","btn btn-primary btn-sm float-right",3,"click",4,"ngIf"],[1,"card-body","overflow-auto"],["hasGetMethod",""],["noGetMethod",""],[1,"col-md-7","col-lg-7"],["hasSetMethod",""],["noSetMethod",""],[1,"btn","btn-primary","btn-sm","float-right",3,"click"],[1,"badge","badge-info"],s_,["class","ml-2 text-primary",4,"ngIf"],[1,"mt-3"],A,["class","mt-2 bg-secondary p-2 text-light rounded",4,"ngIf"],[1,"ml-2","text-primary"],[1,"mt-2","bg-secondary","p-2","text-light","rounded"],m_,["class","card mb-2",4,"ngIf"],R_,G_,U_,["class","d-flex flex-column bd-highlight",4,"ngIf"],[1,"d-flex","flex-column","bd-highlight"],["class","form p-2 bd-highlight",4,"ngFor","ngForOf"],[1,"form","p-2","bd-highlight"],["valueTypeIsNotBool",""],[3,"for"],[1,"custom-select","custom-select-sm",3,"id","name"],[3,"ngValue"],[1,"form-control","form-control-sm",3,"id","name","placeholder"],N_,[1,"text-primary","mx-1","font-weight-bold"],P_,[1,"fa","fa-warning"],Z_]},template:function(e,n){1&e&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_._UZ(2,"i",2),_.YNc(3,I,7,1,"span",3),_.YNc(4,U,7,1,"span",3),_.YNc(5,k,2,0,"span",3),_.qZA(),_.TgZ(6,"div",4),_.TgZ(7,"div",5),_.TgZ(8,"div",6),_.TgZ(9,"button",7),_.NdJ("click",function(){return n.refresh()}),_.TgZ(10,"span"),_._UZ(11,"i",8),_.TgZ(12,"span"),_.SDv(13,9),_.qZA(),_.qZA(),_.qZA(),_.TgZ(14,"button",10),_.TgZ(15,"span"),_._UZ(16,"i",11),_.TgZ(17,"span"),_.SDv(18,12),_.qZA(),_.qZA(),_.qZA(),_.TgZ(19,"button",13),_.NdJ("click",function(){return n.edit()}),_.TgZ(20,"span"),_._UZ(21,"i",14),_.TgZ(22,"span"),_.SDv(23,15),_.qZA(),_.qZA(),_.qZA(),_.TgZ(24,"button",16),_.NdJ("click",function(){return n.deleteConfirm()}),_.TgZ(25,"span"),_._UZ(26,"i",17),_.TgZ(27,"span"),_.SDv(28,18),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(29,"div",19),_.TgZ(30,"table",20),_.TgZ(31,"thead",21),_.TgZ(32,"tr"),_.TgZ(33,"th",22),_.TgZ(34,"input",23),_.NdJ("click",function(c){return n.selectAll(c)}),_.qZA(),_.qZA(),_.TgZ(35,"th",22),_.SDv(36,24),_.qZA(),_.TgZ(37,"th",22),_.SDv(38,25),_.qZA(),_.TgZ(39,"th",22),_.SDv(40,26),_.qZA(),_.TgZ(41,"th",22),_.SDv(42,27),_.qZA(),_.TgZ(43,"th",22),_.SDv(44,28),_.qZA(),_.TgZ(45,"th",22),_.SDv(46,29),_.qZA(),_.TgZ(47,"th",22),_.SDv(48,30),_.qZA(),_.TgZ(49,"th",22),_.SDv(50,31),_.qZA(),_.TgZ(51,"th",22),_.SDv(52,32),_.qZA(),_.TgZ(53,"th",22),_.SDv(54,33),_.qZA(),_.qZA(),_.qZA(),_.TgZ(55,"tbody"),_.YNc(56,T_,32,21,"tr",34),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(57,"div",35),_.TgZ(58,"nav",36),_.TgZ(59,"ul",37),_.TgZ(60,"li",38),_.TgZ(61,"span",39),_.SDv(62,40),_.qZA(),_.qZA(),_.TgZ(63,"li",41),_.TgZ(64,"select",42),_.NdJ("ngModelChange",function(c){return n.pageLimit=c})("ngModelChange",function(){return n.onPageSelected()}),_.TgZ(65,"option",43),_._uU(66,"5"),_.qZA(),_.TgZ(67,"option",44),_._uU(68,"10"),_.qZA(),_.TgZ(69,"option",45),_._uU(70,"20"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(71,"li",46),_.TgZ(72,"button",47),_.NdJ("click",function(){return n.prePage()}),_._UZ(73,"i",48),_.TgZ(74,"span"),_.SDv(75,49),_.qZA(),_.qZA(),_.qZA(),_.TgZ(76,"li",50),_.TgZ(77,"button",47),_.NdJ("click",function(){return n.nextPage()}),_.TgZ(78,"span"),_.SDv(79,51),_.qZA(),_._UZ(80,"i",52),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.YNc(81,I_,4,2,"div",3),_.YNc(82,f,2,3,"div",3),_.YNc(83,K_,19,3,"ng-template",null,53,_.W1O),_.YNc(85,j_,13,1,"ng-template",null,54,_.W1O),_.TgZ(87,"div",55),_.TgZ(88,"div",56),_.TgZ(89,"div",57),_.TgZ(90,"div",58),_.TgZ(91,"h5",59),_._UZ(92,"i",60),_.TgZ(93,"span"),_.SDv(94,61),_.qZA(),_.qZA(),_.qZA(),_.TgZ(95,"div",62),_.SDv(96,63),_.qZA(),_.TgZ(97,"div",64),_.TgZ(98,"button",65),_.SDv(99,66),_.qZA(),_.TgZ(100,"button",67),_.NdJ("click",function(){return n.delete()}),_.SDv(101,68),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&e&&(_.xp6(3),_.Q6J("ngIf",""!==n.associatedSvcName),_.xp6(1),_.Q6J("ngIf",""!==n.associatedProfileName),_.xp6(1),_.Q6J("ngIf",""===n.associatedProfileName&&""===n.associatedSvcName),_.xp6(14),_.Q6J("disabled",1!==n.selectedDevice.length),_.xp6(5),_.Q6J("disabled",0===n.selectedDevice.length),_.xp6(10),_.Q6J("checked",n.isCheckedAll()),_.xp6(22),_.Q6J("ngForOf",n.deviceList),_.xp6(8),_.Q6J("ngModel",n.pageLimit),_.xp6(8),_.Q6J("disabled",1===n.pagination),_.xp6(5),_.Q6J("disabled",n.pageLimit>n.deviceList.length),_.xp6(4),_.Q6J("ngIf",n.associatedAutoEventsDeviceName),_.xp6(1),_.Q6J("ngIf",n.associatedCmdDeviceName))},directives:[i.O5,S.rH,i.sg,a.EJ,a.JJ,a.On,a.YN,a.Kr,i.RF,i.n9,i.ED,S.yS],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),t})();var O_=C(4889);function ee(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"tr"),_.TgZ(1,"td"),_.TgZ(2,"input",35),_.NdJ("click",function(E){const s=_.CHM(e).$implicit;return _.oxw().selectOneSvc(E,s.name)}),_.qZA(),_.qZA(),_.TgZ(3,"td"),_._uU(4),_.qZA(),_.TgZ(5,"td"),_._uU(6),_.qZA(),_.TgZ(7,"td"),_._uU(8),_.qZA(),_.TgZ(9,"td"),_._uU(10),_.qZA(),_.TgZ(11,"td"),_._uU(12),_.qZA(),_.TgZ(13,"td"),_._uU(14),_.ALo(15,"date"),_.qZA(),_.TgZ(16,"td"),_._uU(17),_.ALo(18,"date"),_.qZA(),_.qZA()}if(2&t){const e=o.$implicit,n=_.oxw();_.ekj("table-active",n.isSvcChecked(e.name)),_.xp6(2),_.Q6J("checked",n.isSvcChecked(e.name)),_.xp6(2),_.Oqu(e.id),_.xp6(2),_.Oqu(e.name),_.xp6(2),_.Oqu(e.description),_.xp6(2),_.Oqu(e.labels),_.xp6(2),_.Oqu(e.adminState),_.xp6(2),_.Oqu(_.xi3(15,10,e.created,"yyyy-MM-dd hh:mm:ss")),_.xp6(3),_.Oqu(_.xi3(18,13,e.modified,"yyyy-MM-dd hh:mm:ss"))}}let f_=(()=>{class t{constructor(e){this.metaSvc=e,this.singleDeviceSvcSelectedEvent=new _.vpe,this.deviceServiceList=[],this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.findAllDeviceSvcPagination()}findAllDeviceSvcPagination(){this.metaSvc.findAllDeviceServicesPagination(this.pageOffset,this.pageLimit).subscribe(e=>{this.deviceServiceList=e.services})}onSingleDeviceSvcSelectedEmitter(){this.singleDeviceSvcSelectedEvent.emit(this.deviceSvcSelected)}isSvcChecked(e){var n;return(null===(n=this.deviceSvcSelected)||void 0===n?void 0:n.name)===e}selectOneSvc(e,n){let c=this;e.target.checked?this.deviceServiceList.forEach(function(s){s.name===n&&(c.deviceSvcSelected=s)}):this.deviceSvcSelected=void 0,this.onSingleDeviceSvcSelectedEmitter()}onPageSelected(){this.resetPagination(),this.setPagination(),this.findAllDeviceSvcPagination()}prePage(){this.setPagination(-1),this.findAllDeviceSvcPagination()}nextPage(){this.setPagination(1),this.findAllDeviceSvcPagination()}setPagination(e){1===e?this.pagination+=1:-1===e&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit}resetPagination(){this.pagination=1}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(u.D))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-device-service-list"]],inputs:{deviceSvcSelected:"deviceSvcSelected"},outputs:{singleDeviceSvcSelectedEvent:"singleDeviceSvcSelectedEvent"},decls:52,vars:4,consts:function(){let o,e,n,E,c,s,D,T,R,P,Z;return o="Device Service List",e="ID",n="Name",E="Description",c="Labels",s="AdminState",D="Created",T="Modified",R="items per page",P="Previous",Z="Next",[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","mr-2","text-danger"],o,[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],e,n,E,c,s,D,T,[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],R,[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"custom-select",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left","mr-1"],P,[1,"page-item"],Z,[1,"fa","fa-angle-double-right","ml-1"],["type","checkbox","role","button",3,"checked","click"]]},template:function(e,n){1&e&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_._UZ(2,"i",2),_.TgZ(3,"span"),_.SDv(4,3),_.qZA(),_.qZA(),_.TgZ(5,"div",4),_.TgZ(6,"div",5),_.TgZ(7,"table",6),_.TgZ(8,"thead",7),_.TgZ(9,"tr"),_.TgZ(10,"th",8),_._uU(11,"#"),_.qZA(),_.TgZ(12,"th",8),_.SDv(13,9),_.qZA(),_.TgZ(14,"th",8),_.SDv(15,10),_.qZA(),_.TgZ(16,"th",8),_.SDv(17,11),_.qZA(),_.TgZ(18,"th",8),_.SDv(19,12),_.qZA(),_.TgZ(20,"th",8),_.SDv(21,13),_.qZA(),_.TgZ(22,"th",8),_.SDv(23,14),_.qZA(),_.TgZ(24,"th",8),_.SDv(25,15),_.qZA(),_.qZA(),_.qZA(),_.TgZ(26,"tbody"),_.YNc(27,ee,19,16,"tr",16),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(28,"div",17),_.TgZ(29,"nav",18),_.TgZ(30,"ul",19),_.TgZ(31,"li",20),_.TgZ(32,"span",21),_.SDv(33,22),_.qZA(),_.qZA(),_.TgZ(34,"li",23),_.TgZ(35,"select",24),_.NdJ("ngModelChange",function(c){return n.pageLimit=c})("ngModelChange",function(){return n.onPageSelected()}),_.TgZ(36,"option",25),_._uU(37,"5"),_.qZA(),_.TgZ(38,"option",26),_._uU(39,"10"),_.qZA(),_.TgZ(40,"option",27),_._uU(41,"20"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(42,"li",28),_.TgZ(43,"button",29),_.NdJ("click",function(){return n.prePage()}),_._UZ(44,"i",30),_.TgZ(45,"span"),_.SDv(46,31),_.qZA(),_.qZA(),_.qZA(),_.TgZ(47,"li",32),_.TgZ(48,"button",29),_.NdJ("click",function(){return n.nextPage()}),_.TgZ(49,"span"),_.SDv(50,33),_.qZA(),_._UZ(51,"i",34),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&e&&(_.xp6(27),_.Q6J("ngForOf",n.deviceServiceList),_.xp6(8),_.Q6J("ngModel",n.pageLimit),_.xp6(8),_.Q6J("disabled",1===n.pagination),_.xp6(5),_.Q6J("disabled",n.pageLimit>n.deviceServiceList.length))},directives:[i.sg,a.EJ,a.JJ,a.On,a.YN,a.Kr],pipes:[i.uU],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),t})();var u_=C(2822);function te(t,o){1&t&&_._UZ(0,"i",31)}function ne(t,o){1&t&&_._UZ(0,"i",31)}function ie(t,o){1&t&&_._UZ(0,"i",31)}function Ee(t,o){1&t&&_._UZ(0,"i",31)}function oe(t,o){1&t&&_._UZ(0,"i",31)}function ce(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"button",32),_.NdJ("click",function(){return _.CHM(e),_.oxw().previous()}),_._UZ(1,"i",33),_.TgZ(2,"span"),_.SDv(3,34),_.qZA(),_.qZA()}}function se(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"button",35),_.NdJ("click",function(){return _.CHM(e),_.oxw().next()}),_.TgZ(1,"span"),_.SDv(2,36),_.qZA(),_._UZ(3,"i",37),_.qZA()}if(2&t){const e=_.oxw();_.Q6J("disabled",e.stepStateLock())}}function le(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"button",38),_.NdJ("click",function(){return _.CHM(e),_.oxw().skip()}),_.TgZ(1,"span"),_.SDv(2,39),_.qZA(),_._UZ(3,"i",40),_.qZA()}}function ae(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"button",41),_.NdJ("click",function(){return _.CHM(e),_.oxw().submit()}),_._UZ(1,"i",42),_.TgZ(2,"span"),_.SDv(3,43),_.qZA(),_.qZA()}if(2&t){const e=_.oxw();_.Q6J("disabled",!e.protocolName)}}function de(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",44),_.TgZ(1,"app-device-service-list",45),_.NdJ("singleDeviceSvcSelectedEvent",function(E){return _.CHM(e),_.oxw().onSingleDeviceSvcSelected(E)}),_.qZA(),_.qZA()}if(2&t){const e=_.oxw();_.xp6(1),_.Q6J("deviceSvcSelected",e.selectedSvc)}}function re(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",44),_.TgZ(1,"app-device-profile-list",46),_.NdJ("singleProfileSelectedEvent",function(E){return _.CHM(e),_.oxw().onSingleProfileSelected(E)}),_.qZA(),_.qZA()}if(2&t){const e=_.oxw();_.xp6(1),_.Q6J("singleProfileSelected",e.selectedProfile)("enableSelectAll",!1)("toolbars",!1)("associatedDeviceColumn",!1)}}function Ae(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"form",47),_.TgZ(1,"div",48),_.TgZ(2,"label",49),_.SDv(3,50),_.qZA(),_.TgZ(4,"div",51),_.TgZ(5,"input",52),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().newDevice.name=E}),_.qZA(),_.TgZ(6,"div",53),_.TgZ(7,"small"),_.SDv(8,54),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(9,"div",55),_.TgZ(10,"label",56),_.SDv(11,57),_.qZA(),_.TgZ(12,"div",51),_.TgZ(13,"input",58),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().newDevice.description=E}),_.qZA(),_.qZA(),_.qZA(),_.TgZ(14,"div",55),_.TgZ(15,"label",59),_.SDv(16,60),_.qZA(),_.TgZ(17,"div",51),_.TgZ(18,"input",61),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().deviceLabels=E}),_.qZA(),_.qZA(),_.qZA(),_.TgZ(19,"div",55),_.TgZ(20,"label",62),_.SDv(21,63),_.qZA(),_.TgZ(22,"div",51),_.TgZ(23,"select",64),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().newDevice.adminState=E}),_.TgZ(24,"option",65),_._uU(25,"UNLOCKED"),_.qZA(),_.TgZ(26,"option",66),_._uU(27,"LOCKED"),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=_.oxw();_.xp6(5),_.ekj("is-invalid",!e.newDevice.name)("is-valid",e.newDevice.name),_.Q6J("ngModel",e.newDevice.name),_.xp6(8),_.Q6J("ngModel",e.newDevice.description),_.xp6(5),_.Q6J("ngModel",e.deviceLabels),_.xp6(5),_.Q6J("ngModel",e.newDevice.adminState)}}function Te(t,o){if(1&t&&(_.TgZ(0,"option",100),_._uU(1),_.qZA()),2&t){const e=o.$implicit;_.s9C("value",e),_.xp6(1),_.Oqu(e)}}function Ce(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",76),_.TgZ(1,"div",70),_.TgZ(2,"form"),_.TgZ(3,"div",48),_.TgZ(4,"label",77),_.SDv(5,78),_.qZA(),_.TgZ(6,"div",51),_.TgZ(7,"div",79),_.TgZ(8,"input",80),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.interval=E}),_.qZA(),_.TgZ(9,"div",81),_.TgZ(10,"select",82),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.unit=E}),_.TgZ(11,"option",83),_._uU(12,"millisecond"),_.qZA(),_.TgZ(13,"option",84),_._uU(14,"second"),_.qZA(),_.TgZ(15,"option",85),_._uU(16,"minute"),_.qZA(),_.TgZ(17,"option",86),_._uU(18,"hour"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(19,"div",87),_.SDv(20,88),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(21,"div",55),_.TgZ(22,"label",77),_.SDv(23,89),_.qZA(),_.TgZ(24,"div",51),_.TgZ(25,"select",90),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.onChange=E}),_.TgZ(26,"option",91),_._uU(27,"true"),_.qZA(),_.TgZ(28,"option",92),_._uU(29,"false"),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(30,"div",55),_.TgZ(31,"label",77),_.SDv(32,93),_.qZA(),_.TgZ(33,"div",51),_.TgZ(34,"select",94),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.resource=E}),_.YNc(35,Te,2,2,"option",95),_.qZA(),_.TgZ(36,"div",87),_.SDv(37,96),_.qZA(),_.qZA(),_.qZA(),_.TgZ(38,"button",97),_.NdJ("click",function(){const c=_.CHM(e).$implicit;return _.oxw(2).removeAutoEvent(c)}),_._UZ(39,"i",98),_.TgZ(40,"span"),_.SDv(41,99),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=o.$implicit,n=_.oxw(2);_.xp6(8),_.ekj("is-invalid",!n.eventIntervalNumType(e.interval))("is-valid",n.eventIntervalNumType(e.interval)),_.Q6J("ngModel",e.interval),_.xp6(2),_.Q6J("ngModel",e.unit),_.xp6(15),_.Q6J("ngModel",e.onChange),_.xp6(9),_.ekj("is-invalid",!e.resource)("is-valid",e.resource),_.Q6J("ngModel",e.resource),_.xp6(1),_.Q6J("ngForOf",n.autoEventResourceNameSet)}}function De(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",67),_.TgZ(1,"div",1),_.TgZ(2,"span",68),_.SDv(3,69),_.qZA(),_.qZA(),_.TgZ(4,"div",70),_.TgZ(5,"p",71),_._UZ(6,"span",72),_.TgZ(7,"span",73),_.NdJ("click",function(){return _.CHM(e),_.oxw().addAutoEvent()}),_.SDv(8,74),_.qZA(),_.qZA(),_.YNc(9,Ce,42,13,"div",75),_.qZA(),_.qZA()}if(2&t){const e=_.oxw();_.xp6(9),_.Q6J("ngForOf",e.autoEventsInternal)}}function Se(t,o){1&t&&_._UZ(0,"div")}const Ie=function(){return{standalone:!0}};function ge(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div"),_.TgZ(1,"form",121),_.TgZ(2,"div",122),_.TgZ(3,"div",123),_.TgZ(4,"span",124),_.SDv(5,125),_.qZA(),_.qZA(),_._UZ(6,"input",126),_.qZA(),_.TgZ(7,"div",127),_._UZ(8,"i",128),_.qZA(),_.TgZ(9,"div",122),_.TgZ(10,"div",123),_.TgZ(11,"span",124),_.SDv(12,129),_.qZA(),_.qZA(),_.TgZ(13,"input",130),_.NdJ("ngModelChange",function(E){const s=_.CHM(e).$implicit;return _.oxw(4).selectedAvailTemplate[s]=E}),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=o.$implicit,n=_.oxw(4);_.xp6(6),_.Q6J("value",e),_.xp6(7),_.s9C("name",n.selectedAvailTemplate[e]),_.Q6J("ngModel",n.selectedAvailTemplate[e])("ngModelOptions",_.DdM(4,Ie))}}function Oe(t,o){if(1&t&&(_.TgZ(0,"div"),_.YNc(1,ge,14,5,"div",120),_.qZA()),2&t){const e=_.oxw(3);_.xp6(1),_.Q6J("ngForOf",e.selectedAvailTemplateProperties)}}function pe(t,o){1&t&&(_.TgZ(0,"h5",135),_._UZ(1,"i",136),_.TgZ(2,"span"),_.SDv(3,137),_.qZA(),_.qZA())}function ue(t,o){if(1&t&&(_.TgZ(0,"div"),_._UZ(1,"span",131),_.TgZ(2,"span",132),_.SDv(3,133),_.qZA(),_.qZA(),_.YNc(4,pe,4,0,"h5",134)),2&t){const e=_.oxw(3);_.xp6(4),_.Q6J("ngIf",e.protocolName)}}function Me(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",108),_.TgZ(1,"div",109),_.TgZ(2,"div",110),_.TgZ(3,"label"),_.SDv(4,111),_.qZA(),_.TgZ(5,"select",112),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw(2).protocolName=E})("ngModelChange",function(){return _.CHM(e),_.oxw(2).onAvailProtocolSelect()}),_.TgZ(6,"option",113),_._uU(7,"device-mqtt"),_.qZA(),_.TgZ(8,"option",114),_._uU(9,"device-rest"),_.qZA(),_.TgZ(10,"option",114),_._uU(11,"device-virtual"),_.qZA(),_.TgZ(12,"option",115),_._uU(13,"device-modbus-tcp"),_.qZA(),_.TgZ(14,"option",116),_._uU(15,"device-modbus-rtu"),_.qZA(),_.qZA(),_.TgZ(16,"div",87),_.TgZ(17,"small"),_.SDv(18,117),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(19,"div",51),_.YNc(20,Oe,2,1,"div",118),_.YNc(21,ue,5,1,"ng-template",null,119,_.W1O),_.qZA(),_.qZA()}if(2&t){const e=_.MAs(22),n=_.oxw(2);_.xp6(5),_.ekj("is-invalid",!n.protocolName)("is-valid",n.protocolName),_.Q6J("ngModel",n.protocolName),_.xp6(15),_.Q6J("ngIf",0!==n.selectedAvailTemplateProperties.length)("ngIfElse",e)}}function fe(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div"),_.TgZ(1,"form",121),_.TgZ(2,"div",122),_.TgZ(3,"div",123),_.TgZ(4,"span",124),_.SDv(5,145),_.qZA(),_.qZA(),_.TgZ(6,"input",146),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.key=E}),_.qZA(),_.qZA(),_.TgZ(7,"div",127),_._UZ(8,"i",128),_.qZA(),_.TgZ(9,"div",122),_.TgZ(10,"div",123),_.TgZ(11,"span",124),_.SDv(12,147),_.qZA(),_.qZA(),_.TgZ(13,"input",148),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.value=E}),_.qZA(),_.qZA(),_.TgZ(14,"div",149),_.TgZ(15,"button",97),_.NdJ("click",function(){const c=_.CHM(e).$implicit;return _.oxw(3).removeProtocolProperty(c)}),_._UZ(16,"i",150),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=o.$implicit;_.xp6(6),_.Q6J("ngModel",e.key),_.xp6(7),_.Q6J("ngModel",e.value)}}function ve(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",108),_.TgZ(1,"div",138),_.TgZ(2,"div",110),_.TgZ(3,"label"),_.SDv(4,139),_.qZA(),_.TgZ(5,"input",140),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw(2).protocolName=E}),_.qZA(),_.TgZ(6,"div",87),_.TgZ(7,"small"),_.SDv(8,141),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(9,"div",142),_.TgZ(10,"div",143),_.TgZ(11,"div"),_.TgZ(12,"p",71),_._UZ(13,"span",72),_.TgZ(14,"span",73),_.NdJ("click",function(){return _.CHM(e),_.oxw(2).addProtocolProperty()}),_.SDv(15,144),_.qZA(),_.qZA(),_.qZA(),_.YNc(16,fe,17,2,"div",120),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=_.oxw(2);_.xp6(5),_.ekj("is-invalid",!e.protocolName)("is-valid",e.protocolName),_.Q6J("ngModel",e.protocolName),_.xp6(11),_.Q6J("ngForOf",e.protocolPropertyList)}}function me(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",67),_.TgZ(1,"div",70),_.TgZ(2,"p",101),_._UZ(3,"span",72),_.TgZ(4,"span",73),_.NdJ("click",function(){return _.CHM(e),_.oxw().setProtocolTemplate("avaliable")}),_.SDv(5,102),_.qZA(),_.qZA(),_.TgZ(6,"p",103),_._UZ(7,"span",72),_.TgZ(8,"span",73),_.NdJ("click",function(){return _.CHM(e),_.oxw().setProtocolTemplate("custom")}),_.SDv(9,104),_.qZA(),_.qZA(),_.YNc(10,Se,1,0,"div",105),_.YNc(11,Me,23,7,"ng-template",null,106,_.W1O),_.YNc(13,ve,17,6,"ng-template",null,107,_.W1O),_.qZA(),_.qZA()}if(2&t){const e=_.MAs(12),n=_.MAs(14),E=_.oxw();_.xp6(2),_.ekj("badge-primary","avaliable"===E.protocolTemplateModel)("badge-secondary","avaliable"!==E.protocolTemplateModel),_.xp6(4),_.ekj("badge-primary","custom"===E.protocolTemplateModel)("badge-secondary","custom"!==E.protocolTemplateModel),_.xp6(4),_.Q6J("ngIf","custom"===E.protocolTemplateModel)("ngIfThen",n)("ngIfElse",e)}}class Re{constructor(){this.Schema="",this.Host="",this.Port="",this.User="",this.Password="",this.ClientId="",this.CommandTopic=""}}class Ge{constructor(){this.Address="",this.Port="",this.UnitID="",this.Timeout="",this.IdleTimeout=""}}class Ue{constructor(){this.Address="",this.UnitID="",this.BaudRate="",this.DataBits="",this.StopBits="",this.Parity="",this.Timeout="",this.IdleTimeout=""}}let Ne=(()=>{class t{constructor(e,n,E,c,s){this.metaSvc=e,this.msgSvc=n,this.errorSvc=E,this.router=c,this.route=s,this.deviceLabels="",this.currentStep=0,this.selectedClass="text-white rounded px-2 bg-success  font-weight-bold",this.noSelectedClass="text-white rounded px-2 bg-secondary  font-weight-bold",this.autoEventResourceNameSet=[],this.autoEventsInternal=[{interval:"",onChange:!1,resource:"",unit:"ms"}],this.protocolTemplateModel="avaliable",this.protocolName="",this.protocolProperty={key:null,value:null},this.protocolPropertyList=[{key:null,value:null}],this.selectedAvailTemplateProperties=[],this.newDevice={adminState:"UNLOCKED",operatingState:"UP"}}ngOnInit(){}onSingleProfileSelected(e){this.selectedProfile=e,this.setupAutoEventResourceNameSet(this.selectedProfile)}setupAutoEventResourceNameSet(e){this.autoEventResourceNameSet=[],e.deviceResources.forEach((n,E)=>{this.autoEventResourceNameSet.push(n.name)}),e.deviceCommands.forEach((n,E)=>{this.autoEventResourceNameSet.push(n.name)})}onSingleDeviceSvcSelected(e){this.selectedSvc=e}onAvailProtocolSelect(){switch(this.protocolName){case"mqtt":return this.selectedAvailTemplate=new Re,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));case"modbus-tcp":return this.selectedAvailTemplate=new Ge,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));case"modbus-rtu":return this.selectedAvailTemplate=new Ue,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));default:return this.selectedAvailTemplate={},void(this.selectedAvailTemplateProperties=[])}}cleanSelectedAvailTemplateProperties(){this.selectedAvailTemplateProperties=[]}setAutoEventInternal(e){let n;e.forEach(E=>{let c=0;E.interval.indexOf("ms")?c=E.interval.indexOf("ms"):E.interval.indexOf("s")?c=E.interval.indexOf("s"):E.interval.indexOf("m")?c=E.interval.indexOf("m"):E.interval.indexOf("h")&&(c=E.interval.indexOf("h")),n=E.interval.substring(c),this.autoEventsInternal.push({interval:E.interval.slice(0,c),onChange:E.onChange,resource:E.sourceName,unit:n})})}eventIntervalNumType(e){return!isNaN(e)&&parseFloat(e)===parseInt(e)}setProtocolTemplate(e){this.protocolName="",this.cleanSelectedAvailTemplateProperties(),this.cleanCustomProtocolProperty(),this.protocolTemplateModel=e}addProtocolProperty(){this.protocolPropertyList.push({key:"",value:""})}removeProtocolProperty(e){this.protocolPropertyList.splice(this.protocolPropertyList.indexOf(e),1)}cleanCustomProtocolProperty(){this.protocolPropertyList=[],this.protocolPropertyList.push({key:"",value:""})}addAutoEvent(){this.autoEventsInternal.push({interval:"",onChange:!1,resource:"",unit:"ms"})}removeAutoEvent(e){this.autoEventsInternal.splice(this.autoEventsInternal.indexOf(e),1)}stepStateLock(){switch(this.currentStep){case 0:return void 0===this.selectedSvc;case 1:return void 0===this.selectedProfile;case 2:return""===this.newDevice.name;case 3:let e=!1;return this.autoEventsInternal.forEach(n=>{""!==n.resource&&this.eventIntervalNumType(n.interval)||(e=!0)}),e;case 4:default:return!1}}skip(){this.autoEventsInternal=[],this.next()}next(){this.currentStep+=1}previous(){this.currentStep=this.currentStep-1}changeStep(){this.currentStep+=1}submit(){var e,n,E;let c={},s={};"custom"===this.protocolTemplateModel?(this.protocolPropertyList.forEach(T=>{s[T.key]=T.value}),c[this.protocolName]=s):c[this.protocolName]=Object.assign({},this.selectedAvailTemplate);let D=[];this.autoEventsInternal.forEach(T=>{D.push({interval:`${parseInt(T.interval)}${T.unit}`,onChange:!!T.onChange,sourceName:T.resource})}),this.newDevice.labels=null===(e=this.deviceLabels)||void 0===e?void 0:e.split(","),this.newDevice.serviceName=null===(n=this.selectedSvc)||void 0===n?void 0:n.name,this.newDevice.profileName=null===(E=this.selectedProfile)||void 0===E?void 0:E.name,this.newDevice.protocols=c,this.newDevice.autoEvents=D,this.metaSvc.addDevice(this.newDevice).subscribe(T=>{this.errorSvc.handleErrorForV2API(T)||(this.msgSvc.success("Add device",`name: ${this.newDevice.name}`),this.router.navigate(["../device-list"],{relativeTo:this.route}))})}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(u.D),_.Y36(h.e),_.Y36(O_.T),_.Y36(S.F0),_.Y36(S.gz))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-add-device"]],decls:52,vars:20,consts:function(){let o,e,n,E,c,s,D,T,R,P,Z,v,L,b,V,X,q,x,H,B,F,y,Y,g,z,K,j,__,e_,t_,n_,i_,E_,o_,c_,s_;return o="Add Device Wizard",e="SelectDeviceService",n="SelectDeviceProfile",E="DevicePrimary",c="CreateAutoEvent",s="CreateDeviceProtocol",D="Previous",T="Next",R="Skip",P="Submit",Z="Name",v="the device name can't be empty!",L="Description",b="Labels",V="AdminState",X=" this step is optional, you can skip it then use scheduler service to create schedule job.",q="Add More AutoEvent",x="Interval",H=" can only be a pure integer number ",B="onchange",F="resource",y=" resource can't be empty ",Y="Remove",g="Avaliable Protocol Templates",z="Custom Protocol Templates",K="Protocol Name",j="the protocol name can't be empty!",__="PropertyKey",e_="PropertyVaule",t_=" all avaliable protocol templates refer to the device service released by edgex, such as device-virtual, device-rest, device-mqtt, device-modbus ",n_="this device service doesn't need to set protocol properties",i_="Protocol Name",E_="the protocol name can't be empty!",o_="Add Protocol Property",c_="PropertyKey",s_="PropertyValue",[[1,"card"],[1,"card-header"],[1,"font-weight-bold"],[1,"fa","fa-lightbulb-o","fa-lg","mr-2","text-danger"],[1,"text-secondary"],o,[1,"card-header","py-2"],["aria-label","breadcrumb",1,"mb-0","p-0"],[1,"breadcrumb","p-1","mb-0","bg-light"],[1,"breadcrumb-item"],[3,"ngClass"],e,["class","fa fa-check ml-1",4,"ngIf"],n,E,c,[1,"breadcrumb-item","active"],s,[1,"card-header","py-1"],["class","btn btn-info btn-sm",3,"click",4,"ngIf"],["class","btn btn-primary btn-sm float-right",3,"disabled","click",4,"ngIf","ngIfElse"],["class","btn btn-success btn-sm float-right mr-2",3,"click",4,"ngIf"],["stepDone",""],[1,"card-body","p-0"],[3,"ngSwitch"],[3,"ngSwitchCase"],["SelectDeviceService",""],["SelectDeviceProfile",""],["DevicePrimary",""],["CreateAutoEvent",""],["CreateDeviceProtocol",""],[1,"fa","fa-check","ml-1"],[1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-long-arrow-left","mr-1"],D,[1,"btn","btn-primary","btn-sm","float-right",3,"disabled","click"],T,[1,"fa","fa-long-arrow-right","ml-1"],[1,"btn","btn-success","btn-sm","float-right","mr-2",3,"click"],R,[1,"fa","fa-share","ml-1"],[1,"btn","btn-success","btn-sm","ml-4","float-right",3,"disabled","click"],[1,"fa","fa-save","mr-1"],P,[1,"p-2"],[3,"deviceSvcSelected","singleDeviceSvcSelectedEvent"],[3,"singleProfileSelected","enableSelectAll","toolbars","associatedDeviceColumn","singleProfileSelectedEvent"],[1,"px-5","py-4"],[1,"form-group","row","has-validation"],["for","deviceName","required","",1,"col-md-2","col-form-label"],Z,[1,"col-md-10"],["type","text","id","validationDeviceNameFeedback","name","deviceName",1,"form-control",3,"ngModel","ngModelChange"],["id","validationDeviceNameFeedback",1,"invalid-feedback"],v,[1,"form-group","row"],["for","deviceDesc",1,"col-md-2","col-form-label"],L,["type","text","name","deviceDescription",1,"form-control",3,"ngModel","ngModelChange"],["for","deviceLabels",1,"col-md-2","col-form-label"],b,["type","text","name","deviceLabels","placeholder","Multiple Labels are separated by commas: label1,label2,label3",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],V,["name","deviceAdminState",1,"custom-select",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"],[1,"card","border-0"],[1,"fa","fa-info-circle","text-warning","font-weight-bold"],X,[1,"card-body"],[1,"badge","badge-secondary","font-weight-bold"],[1,"fa","fa-plus-circle","mr-2"],["role","button",1,"user-select-none",3,"click"],q,["class","card mb-3",4,"ngFor","ngForOf"],[1,"card","mb-3"],[1,"col-md-2","col-form-label"],x,[1,"input-group","mb-3",2,"width","250px"],["type","text","name","interval","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["name","eventIntervalUnit","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","ms"],["value","s"],["value","m"],["value","h"],[1,"invalid-feedback"],H,B,["name","onchange",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],["value","true"],["value","false"],F,["name","resource","required","",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],y,[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash","mr-1"],Y,[3,"value"],[1,"badge","font-weight-bold","mr-3"],g,[1,"badge","font-weight-bold"],z,[4,"ngIf","ngIfThen","ngIfElse"],["avaliProtocolTemplate",""],["customProtocolTemplate",""],[1,"row","border","border-secondary","p-2","rounded-lg","mx-1"],[1,"col-md-2","border-right","border-info"],[1,"form-group"],K,["type","text","name","protocolName","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","mqtt"],["value","other"],["value","modbus-tcp"],["value","modbus-rtu"],j,[4,"ngIf","ngIfElse"],["noAvailProperty",""],[4,"ngFor","ngForOf"],[1,"form-inline","mb-1"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],__,["type","text","disabled","",1,"form-control",2,"width","300px",3,"value"],[1,"form-group","mx-2"],[1,"fa","fa-long-arrow-right"],e_,["type","text",1,"form-control",2,"width","300px",3,"name","ngModel","ngModelOptions","ngModelChange"],[1,"fa","fa-info-circle","fa-lg","text-success","font-weight-bold","mr-1"],[1,"text-muted"],t_,["class","text-warning",4,"ngIf"],[1,"text-warning"],[1,"fa","fa-warning","mr-1"],n_,[1,"col-md-2","col-lg-2","border-right","border-info"],i_,["type","text","name","protocolName",1,"form-control",3,"ngModel","ngModelChange"],E_,[1,"col-md-10","col-lg-10"],[1,""],o_,c_,["type","text","name","propertyKey",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],s_,["type","text","name","PropertyValue",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"input-group","ml-2"],[1,"fa","fa-trash"]]},template:function(e,n){if(1&e&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"span",2),_._UZ(3,"span",3),_.TgZ(4,"span",4),_.SDv(5,5),_.qZA(),_.qZA(),_.qZA(),_.TgZ(6,"div",6),_.TgZ(7,"nav",7),_.TgZ(8,"ol",8),_.TgZ(9,"li",9),_.TgZ(10,"span",10),_.TgZ(11,"span"),_.SDv(12,11),_.qZA(),_.YNc(13,te,1,0,"i",12),_.qZA(),_.qZA(),_.TgZ(14,"li",9),_.TgZ(15,"span",10),_.TgZ(16,"span"),_.SDv(17,13),_.qZA(),_.YNc(18,ne,1,0,"i",12),_.qZA(),_.qZA(),_.TgZ(19,"li",9),_.TgZ(20,"span",10),_.TgZ(21,"span"),_.SDv(22,14),_.qZA(),_.YNc(23,ie,1,0,"i",12),_.qZA(),_.qZA(),_.TgZ(24,"li",9),_.TgZ(25,"span",10),_.TgZ(26,"span"),_.SDv(27,15),_.qZA(),_.YNc(28,Ee,1,0,"i",12),_.qZA(),_.qZA(),_.TgZ(29,"li",16),_.TgZ(30,"span",10),_.TgZ(31,"span"),_.SDv(32,17),_.qZA(),_.YNc(33,oe,1,0,"i",12),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(34,"div",18),_.YNc(35,ce,4,0,"button",19),_.YNc(36,se,4,1,"button",20),_.YNc(37,le,4,0,"button",21),_.YNc(38,ae,4,1,"ng-template",null,22,_.W1O),_.qZA(),_.TgZ(40,"div",23),_.TgZ(41,"div",24),_.YNc(42,de,2,1,"ng-template",25,26,_.W1O),_.YNc(44,re,2,4,"ng-template",25,27,_.W1O),_.YNc(46,Ae,28,8,"ng-template",25,28,_.W1O),_.YNc(48,De,10,1,"ng-template",25,29,_.W1O),_.YNc(50,me,15,11,"ng-template",25,30,_.W1O),_.qZA(),_.qZA(),_.qZA()),2&e){const E=_.MAs(39);_.xp6(10),_.Q6J("ngClass",n.currentStep>=0?n.selectedClass:n.noSelectedClass),_.xp6(3),_.Q6J("ngIf",n.currentStep>=1),_.xp6(2),_.Q6J("ngClass",n.currentStep>=1?n.selectedClass:n.noSelectedClass),_.xp6(3),_.Q6J("ngIf",n.currentStep>=2),_.xp6(2),_.Q6J("ngClass",n.currentStep>=2?n.selectedClass:n.noSelectedClass),_.xp6(3),_.Q6J("ngIf",n.currentStep>=3),_.xp6(2),_.Q6J("ngClass",n.currentStep>=3?n.selectedClass:n.noSelectedClass),_.xp6(3),_.Q6J("ngIf",n.currentStep>=4),_.xp6(2),_.Q6J("ngClass",n.currentStep>=4?n.selectedClass:n.noSelectedClass),_.xp6(3),_.Q6J("ngIf",n.currentStep>=5),_.xp6(2),_.Q6J("ngIf",n.currentStep),_.xp6(1),_.Q6J("ngIf",4>n.currentStep)("ngIfElse",E),_.xp6(1),_.Q6J("ngIf",3===n.currentStep),_.xp6(4),_.Q6J("ngSwitch",n.currentStep),_.xp6(1),_.Q6J("ngSwitchCase",0),_.xp6(2),_.Q6J("ngSwitchCase",1),_.xp6(2),_.Q6J("ngSwitchCase",2),_.xp6(2),_.Q6J("ngSwitchCase",3),_.xp6(2),_.Q6J("ngSwitchCase",4)}},directives:[i.mk,i.O5,i.RF,i.n9,f_,u_.f,a._Y,a.JL,a.F,a.Fj,a.JJ,a.On,a.EJ,a.YN,a.Kr,i.sg,a.Q7],styles:['.breadcrumb[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]:before{color:inherit;font-weight:inherit;content:">>";padding:0 5px}.btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}']}),t})();function Pe(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div"),_.TgZ(1,"form",53),_.TgZ(2,"div",54),_.TgZ(3,"div",55),_.TgZ(4,"span",56),_.SDv(5,57),_.qZA(),_.qZA(),_.TgZ(6,"input",58),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.key=E}),_.qZA(),_.qZA(),_.TgZ(7,"div",59),_._UZ(8,"i",60),_.qZA(),_.TgZ(9,"div",54),_.TgZ(10,"div",55),_.TgZ(11,"span",56),_.SDv(12,61),_.qZA(),_.qZA(),_.TgZ(13,"input",62),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.value=E}),_.qZA(),_.qZA(),_.TgZ(14,"div",63),_.TgZ(15,"button",64),_.NdJ("click",function(){const c=_.CHM(e).$implicit;return _.oxw(2).removeProtocolProperty(c)}),_._UZ(16,"i",65),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=o.$implicit;_.xp6(6),_.Q6J("ngModel",e.key),_.xp6(7),_.Q6J("ngModel",e.value)}}function Ze(t,o){if(1&t&&(_.TgZ(0,"option",87),_._uU(1),_.qZA()),2&t){const e=o.$implicit;_.s9C("value",e),_.xp6(1),_.Oqu(e)}}function he(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",12),_.TgZ(1,"div",11),_.TgZ(2,"form"),_.TgZ(3,"div",66),_.TgZ(4,"label",16),_.SDv(5,67),_.qZA(),_.TgZ(6,"div",18),_.TgZ(7,"div",68),_.TgZ(8,"input",69),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.interval=E}),_.qZA(),_.TgZ(9,"div",70),_.TgZ(10,"select",71),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.unit=E}),_.TgZ(11,"option",72),_._uU(12,"millisecond"),_.qZA(),_.TgZ(13,"option",73),_._uU(14,"second"),_.qZA(),_.TgZ(15,"option",74),_._uU(16,"minute"),_.qZA(),_.TgZ(17,"option",75),_._uU(18,"hour"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(19,"div",20),_.SDv(20,76),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(21,"div",15),_.TgZ(22,"label",16),_.SDv(23,77),_.qZA(),_.TgZ(24,"div",18),_.TgZ(25,"select",78),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.onChange=E}),_.TgZ(26,"option",79),_._uU(27,"true"),_.qZA(),_.TgZ(28,"option",80),_._uU(29,"false"),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(30,"div",15),_.TgZ(31,"label",16),_.SDv(32,81),_.qZA(),_.TgZ(33,"div",18),_.TgZ(34,"select",82),_.NdJ("ngModelChange",function(E){return _.CHM(e).$implicit.resource=E}),_.YNc(35,Ze,2,2,"option",83),_.qZA(),_.TgZ(36,"div",20),_.SDv(37,84),_.qZA(),_.qZA(),_.qZA(),_.TgZ(38,"button",64),_.NdJ("click",function(){const c=_.CHM(e).$implicit;return _.oxw(2).removeAutoEvent(c)}),_._UZ(39,"i",85),_.TgZ(40,"span"),_.SDv(41,86),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=o.$implicit,n=_.oxw(2);_.xp6(8),_.ekj("is-invalid",!n.eventIntervalNumType(e.interval))("is-valid",n.eventIntervalNumType(e.interval)),_.Q6J("ngModel",e.interval),_.xp6(2),_.Q6J("ngModel",e.unit),_.xp6(15),_.Q6J("ngModel",e.onChange),_.xp6(9),_.ekj("is-invalid",""===e.resource)("is-valid",""!==e.resource),_.Q6J("ngModel",e.resource),_.xp6(1),_.Q6J("ngForOf",n.autoEventResourceNameSet)}}function Le(t,o){if(1&t){const e=_.EpF();_.TgZ(0,"div",1),_.TgZ(1,"div",2),_._UZ(2,"i",3),_.TgZ(3,"span",4),_.SDv(4,5),_.qZA(),_.TgZ(5,"span",6),_._uU(6),_.qZA(),_.qZA(),_.TgZ(7,"div",7),_.TgZ(8,"button",8),_.NdJ("click",function(){return _.CHM(e),_.oxw().save()}),_.TgZ(9,"span"),_._UZ(10,"i",9),_.TgZ(11,"span"),_.SDv(12,10),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(13,"div",11),_.TgZ(14,"div",12),_.TgZ(15,"div",2),_._UZ(16,"i",13),_.TgZ(17,"span"),_.SDv(18,14),_.qZA(),_.qZA(),_.TgZ(19,"div",11),_.TgZ(20,"form"),_.TgZ(21,"div",15),_.TgZ(22,"label",16),_.SDv(23,17),_.qZA(),_.TgZ(24,"div",18),_.TgZ(25,"input",19),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().device.name=E}),_.qZA(),_.TgZ(26,"div",20),_.SDv(27,21),_.qZA(),_.qZA(),_.qZA(),_.TgZ(28,"div",15),_.TgZ(29,"label",16),_.SDv(30,22),_.qZA(),_.TgZ(31,"div",18),_.TgZ(32,"input",23),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().device.description=E}),_.qZA(),_.qZA(),_.qZA(),_.TgZ(33,"div",15),_.TgZ(34,"label",16),_.SDv(35,24),_.qZA(),_.TgZ(36,"div",18),_.TgZ(37,"input",25),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().deviceLabels=E}),_.qZA(),_.qZA(),_.qZA(),_.TgZ(38,"div",15),_.TgZ(39,"label",26),_.SDv(40,27),_.qZA(),_.TgZ(41,"div",18),_.TgZ(42,"select",28),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().device.adminState=E}),_.TgZ(43,"option",29),_._uU(44,"UNLOCKED"),_.qZA(),_.TgZ(45,"option",30),_._uU(46,"LOCKED"),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(47,"div",15),_.TgZ(48,"label",31),_.SDv(49,32),_.qZA(),_.TgZ(50,"div",18),_._UZ(51,"input",33),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(52,"div",34),_.TgZ(53,"app-device-service-list",35),_.NdJ("singleDeviceSvcSelectedEvent",function(E){return _.CHM(e),_.oxw().onSingleDeviceSvcSelected(E)}),_.qZA(),_.qZA(),_.TgZ(54,"div",34),_.TgZ(55,"app-device-profile-list",36),_.NdJ("singleProfileSelectedEvent",function(E){return _.CHM(e),_.oxw().onSingleProfileSelected(E)}),_.qZA(),_.qZA(),_.TgZ(56,"div",12),_.TgZ(57,"div",2),_._UZ(58,"i",13),_.TgZ(59,"span"),_.SDv(60,37),_.qZA(),_.qZA(),_.TgZ(61,"div",11),_.TgZ(62,"div",1),_.TgZ(63,"div",11),_.TgZ(64,"div",38),_.TgZ(65,"div",39),_.TgZ(66,"div",40),_.TgZ(67,"label"),_.SDv(68,41),_.qZA(),_.TgZ(69,"input",42),_.NdJ("ngModelChange",function(E){return _.CHM(e),_.oxw().protocolName=E}),_.qZA(),_.TgZ(70,"div",20),_.TgZ(71,"small"),_.SDv(72,43),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(73,"div",44),_.TgZ(74,"div"),_.TgZ(75,"p",45),_._UZ(76,"span",46),_.TgZ(77,"span",47),_.NdJ("click",function(){return _.CHM(e),_.oxw().addProtocolProperty()}),_.SDv(78,48),_.qZA(),_.qZA(),_.qZA(),_.YNc(79,Pe,17,2,"div",49),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(80,"div",12),_.TgZ(81,"div",2),_._UZ(82,"i",13),_.TgZ(83,"span"),_.SDv(84,50),_.qZA(),_.qZA(),_.TgZ(85,"div",11),_.TgZ(86,"p",45),_._UZ(87,"span",46),_.TgZ(88,"span",47),_.NdJ("click",function(){return _.CHM(e),_.oxw().addAutoEvent()}),_.SDv(89,51),_.qZA(),_.qZA(),_.YNc(90,he,42,13,"div",52),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const e=_.oxw();_.xp6(6),_.Oqu(e.device.name),_.xp6(2),_.Q6J("disabled",e.validateBeforeSave()),_.xp6(17),_.ekj("is-invalid",""===e.device.name),_.Q6J("ngModel",e.device.name),_.xp6(7),_.Q6J("ngModel",e.device.description),_.xp6(5),_.Q6J("ngModel",e.deviceLabels),_.xp6(5),_.Q6J("ngModel",e.device.adminState),_.xp6(9),_.Q6J("value",e.device.operatingState),_.xp6(2),_.Q6J("deviceSvcSelected",e.selectedSvc),_.xp6(2),_.Q6J("enableSelectAll",!1)("toolbars",!1)("singleProfileSelected",e.selectedProfile)("associatedDeviceColumn",!1),_.xp6(14),_.ekj("is-invalid",!e.protocolName)("is-valid",e.protocolName),_.Q6J("ngModel",e.protocolName),_.xp6(10),_.Q6J("ngForOf",e.protocolPropertyList),_.xp6(11),_.Q6J("ngForOf",e.autoEventsInternal)}}let be=(()=>{class t{constructor(e,n,E,c,s){this.router=e,this.route=n,this.metaSvc=E,this.msgSvc=c,this.errorSvc=s,this.autoEventsInternal=[],this.autoEventResourceNameSet=[],this.protocolProperty={key:"",value:""},this.protocolPropertyList=[]}ngOnInit(){this.route.queryParams.subscribe(e=>{!e.deviceName||this.metaSvc.findDeviceByName(e.deviceName).subscribe(E=>{var c;this.device=E.device,this.deviceLabels=null===(c=this.device.labels)||void 0===c?void 0:c.join(","),this.setAutoEventInternal(this.device.autoEvents),this.protocolName=Object.keys(this.device.protocols)[0];for(const[s,D]of Object.entries(this.device.protocols[this.protocolName]))this.protocolPropertyList.push({key:s,value:D});this.setDefaultDeviceSvcSelected(this.device.serviceName),this.setDefaultDeviceProfileSelected(this.device.profileName)})})}onSingleProfileSelected(e){this.selectedProfile=e,this.resetAutoEventsInternal(),this.setupAutoEventResourceNameSet(this.selectedProfile)}onSingleDeviceSvcSelected(e){this.selectedSvc=e}setDefaultDeviceSvcSelected(e){this.metaSvc.findDevcieServiceByName(e).subscribe(n=>{this.selectedSvc=n.service})}setDefaultDeviceProfileSelected(e){this.metaSvc.findProfileByName(e).subscribe(n=>{this.selectedProfile=n.profile,this.setupAutoEventResourceNameSet(this.selectedProfile)})}resetAutoEventsInternal(){this.autoEventsInternal=[]}setupAutoEventResourceNameSet(e){e.deviceResources.forEach((n,E)=>{this.autoEventResourceNameSet.push(n.name)}),e.deviceCommands.forEach((n,E)=>{this.autoEventResourceNameSet.push(n.name)})}setAutoEventInternal(e){let n;null==e||e.forEach(E=>{let c=0;-1!==E.interval.indexOf("ms")?c=E.interval.indexOf("ms"):-1!==E.interval.indexOf("s")?c=E.interval.indexOf("s"):-1!==E.interval.indexOf("m")?c=E.interval.indexOf("m"):-1!==E.interval.indexOf("h")&&(c=E.interval.indexOf("h")),n=E.interval.substring(c),this.autoEventsInternal.push({interval:E.interval.slice(0,c),onChange:!!E.onChange,resource:E.sourceName,unit:n})})}eventIntervalNumType(e){return!isNaN(e)&&parseFloat(e)===parseInt(e)}addProtocolProperty(){this.protocolPropertyList.push({key:"",value:""})}removeProtocolProperty(e){this.protocolPropertyList.splice(this.protocolPropertyList.indexOf(e),1)}addAutoEvent(){this.autoEventsInternal.push({interval:"",onChange:!1,resource:"",unit:"ms"})}removeAutoEvent(e){this.autoEventsInternal.splice(this.autoEventsInternal.indexOf(e),1)}validateBeforeSave(){var e;if((null===(e=this.device)||void 0===e?void 0:e.name)&&this.protocolName){let n=!1;return this.autoEventsInternal.forEach(E=>{this.eventIntervalNumType(E.interval)&&""!==E.resource||(n=!0)}),n}return!0}save(){var e,n,E;let c=this.device,s={},D={};c.labels=null===(e=this.deviceLabels)||void 0===e?void 0:e.split(","),c.serviceName=null===(n=this.selectedSvc)||void 0===n?void 0:n.name,c.profileName=null===(E=this.selectedProfile)||void 0===E?void 0:E.name,this.protocolPropertyList.forEach(T=>{D[T.key]=T.value}),s[this.protocolName]=D,c.protocols=s,c.autoEvents=[],this.autoEventsInternal.forEach(T=>{c.autoEvents.push({interval:`${parseInt(T.interval)}${T.unit}`,onChange:!!T.onChange,sourceName:T.resource})}),this.metaSvc.updateDevice(c).subscribe(T=>{var R;this.errorSvc.handleErrorForV2API(T)||(this.msgSvc.success("update device",`name: ${null===(R=this.device)||void 0===R?void 0:R.name}`),this.router.navigate(["../device-list"],{relativeTo:this.route}))})}showTips(){$(".a-question-circle-o").tooltip("toggle")}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(S.F0),_.Y36(S.gz),_.Y36(u.D),_.Y36(h.e),_.Y36(O_.T))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-edit-device"]],decls:1,vars:1,consts:function(){let o,e,n,E,c,s,D,T,R,P,Z,v,L,b,V,X,q,x,H,B,F,y,Y;return o="Edit Device",e="Save",n="Device Primary",E="DeviceName",c=" device name can't not be empty! ",s="Description",D="Labels",T="AdminState",R="OperatingState",P="Device Protocol",Z="Protocol Name",v="the protocol name can't be empty!",L="Add Protocol Property",b="AutoEvents",V="Add More AutoEvent",X="PropertyKey",q="PropertyValue",x="Interval",H=" can only be a pure integer number ",B="onchange",F="resource",y=" resource can't be empty ",Y="Remove",[["class","card",4,"ngIf"],[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-edit","text-danger","fa-lg"],[1,"mx-2"],o,[1,"text-primary"],[1,"card-header","py-1"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-save","mr-1"],e,[1,"card-body"],[1,"card","mb-3"],[1,"fa","fa-tags","fa-lg","text-danger","mr-1"],n,[1,"form-group","row"],[1,"col-md-2","col-form-label"],E,[1,"col-md-10"],["type","text","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"invalid-feedback"],c,s,["type","text","name","description",1,"form-control",3,"ngModel","ngModelChange"],D,["type","text","name","labels",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],T,["name","adminState",1,"custom-select",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"],["for","operatingState",1,"col-md-2","col-form-label"],R,["type","text","name","operatingState","disabled","",1,"form-control",3,"value"],[1,"mb-3"],[3,"deviceSvcSelected","singleDeviceSvcSelectedEvent"],[3,"enableSelectAll","toolbars","singleProfileSelected","associatedDeviceColumn","singleProfileSelectedEvent"],P,[1,"row"],[1,"col-md-2","col-lg-2","border-right","border-secondary"],[1,"form-group"],Z,["type","text","name","protocolName",1,"form-control",3,"ngModel","ngModelChange"],v,[1,"col-md-10","col-lg-10"],[1,"badge","badge-secondary","font-weight-bold"],[1,"fa","fa-plus-circle","mr-2"],["role","button",1,"user-select-none",3,"click"],L,[4,"ngFor","ngForOf"],b,V,["class","card mb-3",4,"ngFor","ngForOf"],[1,"form-inline","mb-1"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],X,["type","text","name","propertyKey",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"form-group","mx-2"],[1,"fa","fa-long-arrow-right"],q,["type","text","name","PropertyValue",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"input-group","ml-2"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"],[1,"form-group","row","has-validation"],x,[1,"input-group","mb-3",2,"width","250px"],["type","text","name","interval","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["name","eventIntervalUnit","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","ms"],["value","s"],["value","m"],["value","h"],H,B,["name","onchange",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],["value","true"],["value","false"],F,["name","resource","required","",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],y,[1,"fa","fa-trash","mr-1"],Y,[3,"value"]]},template:function(e,n){1&e&&_.YNc(0,Le,91,21,"div",0),2&e&&_.Q6J("ngIf",n.device)},directives:[i.O5,a._Y,a.JL,a.F,a.Fj,a.Q7,a.JJ,a.On,a.EJ,a.YN,a.Kr,f_,u_.f,i.sg],styles:["input[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}.btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),t})(),Ve=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-device-profile-center"]],decls:1,vars:0,template:function(e,n){1&e&&_._UZ(0,"router-outlet")},directives:[S.lC],styles:[""]}),t})(),Xe=(()=>{class t{constructor(e,n,E,c,s){this.metaSvc=e,this.msgSvc=n,this.errSvc=E,this.router=c,this.route=s}ngOnInit(){this.renderYamlSource()}renderYamlSource(){let e=document.getElementById("editor");this.codeMirrorEditor=CodeMirror.fromTextArea(e,{mode:"yaml",theme:"gruvbox-dark",foldGutter:!0,smartIndent:!0,showCursorWhenSelecting:!0,lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],autofocus:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,cursorHeight:.85,autocorrect:!0}),this.codeMirrorEditor.setSize("auto","600px"),this.codeMirrorEditor.on("drop",(n,E)=>{var c;this.yamlFile=null===(c=E.dataTransfer)||void 0===c?void 0:c.files[0]}),this.codeMirrorEditor.on("paste",(n,E)=>{})}submit(){this.profileYamlSource=this.codeMirrorEditor.getValue(),this.metaSvc.addProfileYamlByNameViaUIBackend(this.profileYamlSource).subscribe(e=>{this.errSvc.handleErrorForV2API(e)||(this.msgSvc.success("Add profile"),this.router.navigate(["../device-profile-list"],{relativeTo:this.route}))})}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(u.D),_.Y36(h.e),_.Y36(O_.T),_.Y36(S.F0),_.Y36(S.gz))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-add-profile"]],decls:15,vars:0,consts:function(){let o,e,n;return o="Add Profile",e="\xA0drag-and-drop is enabled",n="Submit",[[1,"card"],[1,"card-header"],[1,"text-danger","font-weight-bold","fa","fa-code","mr-2"],[1,"mr-3","font-weight-bold"],o,[1,"fa","fa-info-circle","text-success","font-weight-bold"],e,[1,"float-right"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save","mr-1"],n,[1,"card-body","p-0"],["id","editor","name","editor"]]},template:function(e,n){1&e&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"span"),_._UZ(3,"span",2),_.TgZ(4,"span",3),_.SDv(5,4),_.qZA(),_.TgZ(6,"span",5),_.SDv(7,6),_.qZA(),_.qZA(),_.TgZ(8,"span",7),_.TgZ(9,"button",8),_.NdJ("click",function(){return n.submit()}),_._UZ(10,"i",9),_.TgZ(11,"span"),_.SDv(12,10),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(13,"div",11),_._UZ(14,"textarea",12),_.qZA(),_.qZA())},styles:[""]}),t})(),$e=(()=>{class t{constructor(e,n,E,c,s){this.metaSvc=e,this.msgSvc=n,this.errSvc=E,this.router=c,this.route=s}ngOnInit(){this.renderYamlSource(),this.route.queryParams.subscribe(e=>{e.profileName&&(this.profileName=e.profileName,this.metaSvc.findProfileYamlByNameViaUIBackend(e.profileName).subscribe(n=>{this.codeMirrorEditor.setValue(n),this.codeMirrorEditor.refresh()}))})}update(){this.codeMirrorEditor.refresh(),this.metaSvc.updateProfileYamlContentViaUIBackend(this.codeMirrorEditor.getValue()).subscribe(e=>{this.errSvc.handleErrorForV2API(e)||(this.msgSvc.success("Update profile",`name: ${this.profileName}`),this.router.navigate(["../device-profile-list"],{relativeTo:this.route}))})}renderYamlSource(){let e=document.getElementById("editor-edit");this.codeMirrorEditor=CodeMirror.fromTextArea(e,{mode:"yaml",theme:"gruvbox-dark",foldGutter:!0,smartIndent:!0,showCursorWhenSelecting:!0,lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],autofocus:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,cursorHeight:.85,autocorrect:!0}),this.codeMirrorEditor.setSize("auto","600px")}ngOnDestroy(){this.codeMirrorEditor=null}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(u.D),_.Y36(h.e),_.Y36(O_.T),_.Y36(S.F0),_.Y36(S.gz))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-edit-profile"]],decls:13,vars:1,consts:function(){let o;return o="Save",[[1,"card"],[1,"card-header"],[1,"text-danger","fa","fa-edit","mr-2"],[1,"float-right"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save","mr-1"],o,[1,"card-body","p-0"],["id","editor-edit","name","editor"]]},template:function(e,n){1&e&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"span"),_._UZ(3,"span",2),_._uU(4),_.qZA(),_.TgZ(5,"span",3),_.TgZ(6,"button",4),_.NdJ("click",function(){return n.update()}),_.TgZ(7,"span"),_._UZ(8,"i",5),_.TgZ(9,"span"),_.SDv(10,6),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(11,"div",7),_._UZ(12,"textarea",8),_.qZA(),_.qZA()),2&e&&(_.xp6(4),_.hij("",n.profileName," "))},styles:[""]}),t})(),qe=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-provision-watcher-center"]],decls:2,vars:0,template:function(e,n){1&e&&(_.TgZ(0,"p"),_._uU(1,"provision-watcher-center works!"),_.qZA())},styles:[""]}),t})(),xe=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-provision-watcher-list"]],decls:2,vars:0,template:function(e,n){1&e&&(_.TgZ(0,"p"),_._uU(1,"provision-watcher-list works!"),_.qZA())},styles:[""]}),t})(),He=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-add-provision-watcher"]],decls:2,vars:0,template:function(e,n){1&e&&(_.TgZ(0,"p"),_._uU(1,"add-provision-watcher works!"),_.qZA())},styles:[""]}),t})(),Be=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-edit-provision-watcher"]],decls:2,vars:0,template:function(e,n){1&e&&(_.TgZ(0,"p"),_._uU(1,"edit-provision-watcher works!"),_.qZA())},styles:[""]}),t})();var Fe=C(8253),ye=C(1964),Ye=C(4294),Qe=C(5894),We=C(7216);let v_=(()=>{class t{constructor(e,n){this.router=e,this.metadataSvc=n}canActivate(e,n){return this.checkAvailable(e,n)}canActivateChild(e,n){return this.canActivate(e,n)}checkAvailable(e,n){return this.metadataSvc.ping().pipe((0,Ye.q)(1),(0,Qe.K)(E=>this.router.navigate(["/svc-unavailable"],{queryParams:{svcName:"metadata",routerPath:`/${n.url.split("/")[1]}`}})),(0,We.z)(()=>(0,ye.of)(!0)))}}return t.\u0275fac=function(e){return new(e||t)(_.LFG(S.F0),_.LFG(u.D))},t.\u0275prov=_.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ke=[{path:"",component:W,canActivate:[Fe.a,v_],canActivateChild:[v_],children:[{path:"",redirectTo:"device-service-list",pathMatch:"full"},{path:"device-service-list",component:G},{path:"device-center",component:l,children:[{path:"",redirectTo:"device-list",pathMatch:"full"},{path:"device-list",component:_e},{path:"add-device",component:Ne},{path:"edit-device",component:be}]},{path:"device-profile-center",component:Ve,children:[{path:"",redirectTo:"device-profile-list",pathMatch:"full"},{path:"device-profile-list",component:u_.f},{path:"edit-profile",component:$e},{path:"add-profile",component:Xe}]},{path:"provision-watcher-center",component:qe,children:[{path:"",redirectTo:"provision-watcher-list",pathMatch:"full"},{path:"provision-watcher-list",component:xe},{path:"edit-provision-watcher",component:Be},{path:"add-provision-watcher",component:He}]}]}];let we=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({imports:[[S.Bz.forChild(ke)],S.Bz]}),t})(),Je=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({imports:[[i.ez,a.u5,we]]}),t})()},2822:(M_,Q,C)=>{C.d(Q,{f:()=>p_});var i=C(476),a=C(2437),S=C(7822),_=C(9502),W=C(8583),u=C(3092);function h(p,G){if(1&p){const l=i.EpF();i.TgZ(0,"div",50),i.TgZ(1,"div",51),i.TgZ(2,"button",52),i.NdJ("click",function(){return i.CHM(l),i.oxw().refresh()}),i.TgZ(3,"span"),i._UZ(4,"i",53),i.TgZ(5,"span"),i.SDv(6,54),i.qZA(),i.qZA(),i.qZA(),i.TgZ(7,"button",55),i.TgZ(8,"span"),i._UZ(9,"i",56),i.TgZ(10,"span"),i.SDv(11,57),i.qZA(),i.qZA(),i.qZA(),i.TgZ(12,"button",58),i.NdJ("click",function(){return i.CHM(l),i.oxw().edit()}),i.TgZ(13,"span"),i._UZ(14,"i",59),i.TgZ(15,"span"),i.SDv(16,60),i.qZA(),i.qZA(),i.qZA(),i.TgZ(17,"button",61),i.NdJ("click",function(){return i.CHM(l),i.oxw().deleteConfirm()}),i.TgZ(18,"span"),i._UZ(19,"i",62),i.TgZ(20,"span"),i.SDv(21,63),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&p){const l=i.oxw();i.xp6(12),i.Q6J("disabled",1!==l.multiProfilesSelected.length),i.xp6(5),i.Q6J("disabled",0===l.multiProfilesSelected.length)}}function O(p,G){if(1&p){const l=i.EpF();i.TgZ(0,"input",64),i.NdJ("click",function(I){return i.CHM(l),i.oxw().selectAll(I)}),i.qZA()}if(2&p){const l=i.oxw();i.Q6J("checked",l.isCheckedAll())}}function M(p,G){1&p&&(i.TgZ(0,"th",9),i.SDv(1,65),i.qZA())}const m=function(p){return{profileName:p}};function N(p,G){if(1&p&&(i.TgZ(0,"td",69),i.TgZ(1,"a",70),i._UZ(2,"i",71),i.qZA(),i.qZA()),2&p){const l=i.oxw().$implicit;i.xp6(1),i.Q6J("queryParams",i.VKq(1,m,l.name))}}function w(p,G){if(1&p){const l=i.EpF();i.TgZ(0,"tr"),i.TgZ(1,"td"),i.TgZ(2,"input",66),i.NdJ("click",function(I){const k=i.CHM(l).$implicit;return i.oxw().selectOne(I,k.name)}),i.qZA(),i.qZA(),i.TgZ(3,"td",67),i._uU(4),i.qZA(),i.TgZ(5,"td",67),i._uU(6),i.qZA(),i.TgZ(7,"td"),i._uU(8),i.qZA(),i.YNc(9,N,3,3,"td",68),i.TgZ(10,"td"),i._uU(11),i.qZA(),i.TgZ(12,"td"),i._uU(13),i.qZA(),i.TgZ(14,"td"),i._uU(15),i.qZA(),i.qZA()}if(2&p){const l=G.$implicit,d=i.oxw();i.ekj("table-active",d.isChecked(l.name)),i.xp6(2),i.s9C("value",l.name),i.Q6J("checked",d.isChecked(l.name)),i.xp6(2),i.Oqu(l.id),i.xp6(2),i.Oqu(l.name),i.xp6(2),i.Oqu(l.description),i.xp6(1),i.Q6J("ngIf",d.associatedDeviceColumn),i.xp6(2),i.Oqu(l.labels),i.xp6(2),i.Oqu(l.manufacturer),i.xp6(2),i.Oqu(l.model)}}let p_=(()=>{class p{constructor(l,d,I,U){this.metaSvc=l,this.msgSvc=d,this.route=I,this.router=U,this.associatedDeviceColumn=!0,this.toolbars=!0,this.enableSelectAll=!0,this.singleProfileSelectedEvent=new i.vpe,this.multipleProfileSelectedEvent=new i.vpe,this.profileList=[],this.multiProfilesSelected=[],this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.route.queryParams.subscribe(l=>{l.profileName?this.metaSvc.findProfileByName(l.profileName).subscribe(d=>{this.profileList=[],this.profileList.push(d.profile)}):this.findAllDeviceProfilesPagination()})}findAllDeviceProfilesPagination(){this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(l=>{this.profileList=l.profiles})}onSingleProfileSelectedEmitter(){this.singleProfileSelectedEvent.emit(this.singleProfileSelected)}onMultipleProfileSelectedEmitter(){this.multipleProfileSelectedEvent.emit(this.multiProfilesSelected)}refresh(){this.metaSvc.allDeviceProfolesPagination(0,this.pageLimit).subscribe(l=>{this.profileList=l.profiles,this.msgSvc.success("refresh"),this.pagination=1,this.resetCheckbox()})}onPageSelected(){this.resetPagination(),this.setPagination(),this.findAllDeviceProfilesPagination()}prePage(){this.setPagination(-1),this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(l=>{this.profileList=l.profiles})}nextPage(){this.setPagination(1),this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(l=>{this.profileList=l.profiles})}setPageLimit(l){this.pageLimit=l}setPagination(l){1===l?this.pagination+=1:-1===l&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit,this.resetCheckbox()}resetPagination(){this.pagination=1,this.resetCheckbox()}resetCheckbox(){}edit(){this.router.navigate(["../edit-profile"],{relativeTo:this.route,queryParams:{profileName:this.multiProfilesSelected[0]}})}deleteConfirm(){$("#deleteConfirmDialog").modal("show")}delete(){this.multiProfilesSelected.forEach(l=>{this.metaSvc.deleteProfileByName(l).subscribe(()=>{this.multiProfilesSelected=[],this.profileList.forEach((d,I)=>{d.name==l&&(this.profileList.splice(I,1),this.msgSvc.success("delete",`  Name: ${d.name}`))})})}),$("#deleteConfirmDialog").modal("hide")}isSingleProfileChecked(l){var d;return(null===(d=this.singleProfileSelected)||void 0===d?void 0:d.name)===l}selectSingleProfile(l,d){l.target.checked?this.profileList.forEach(U=>{U.name===d&&(this.singleProfileSelected=U)}):this.singleProfileSelected=void 0,this.onSingleProfileSelectedEmitter()}isCheckedAll(){let l=!0;return this.profileList&&0===this.profileList.length&&(l=!1),this.profileList.forEach(d=>{-1===this.multiProfilesSelected.indexOf(d.name)&&(l=!1)}),l}selectAll(l){this.profileList.forEach(l.target.checked?I=>{this.multiProfilesSelected.includes(I.name)||this.multiProfilesSelected.push(I.name)}:I=>{this.multiProfilesSelected.includes(I.name)&&this.multiProfilesSelected.splice(this.multiProfilesSelected.indexOf(I.name),1)}),this.onMultipleProfileSelectedEmitter()}isChecked(l){return this.enableSelectAll?this.multiProfilesSelected.includes(l):this.isSingleProfileChecked(l)}selectOne(l,d){this.enableSelectAll?(l.target.checked?this.multiProfilesSelected.push(d):this.multiProfilesSelected.splice(this.multiProfilesSelected.indexOf(d),1),this.onMultipleProfileSelectedEmitter()):this.selectSingleProfile(l,d)}}return p.\u0275fac=function(l){return new(l||p)(i.Y36(a.D),i.Y36(S.e),i.Y36(_.gz),i.Y36(_.F0))},p.\u0275cmp=i.Xpm({type:p,selectors:[["app-device-profile-list"]],inputs:{associatedDeviceColumn:"associatedDeviceColumn",toolbars:"toolbars",enableSelectAll:"enableSelectAll",multiProfilesSelected:"multiProfilesSelected",singleProfileSelected:"singleProfileSelected"},outputs:{singleProfileSelectedEvent:"singleProfileSelectedEvent",multipleProfileSelectedEvent:"multipleProfileSelectedEvent"},decls:67,vars:7,consts:function(){let G,l,d,I,U,k,J,l_,a_,d_,r_,A_,T_,C_,D_,S_,I_,g_;return G="Device Profile List",l="Name",d="Description",I="Labels",U="Manufacturer",k="Model",J="items per page",l_="Previous",a_="Next",d_="Warning",r_=" The data will be permanently erased!!! Are you sure to execute delete operation\uFF1F ",A_="Cancel",T_="Confirm",C_="Refresh",D_="Add",S_="Edit",I_="Delete",g_="AssociatedDevice",[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","text-danger","mr-2"],G,[1,"card-body","p-0"],["class","bg-light px-2 py-2",4,"ngIf"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],["type","checkbox",3,"checked","click",4,"ngIf"],l,d,["scope","col",4,"ngIf"],I,U,k,[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],J,[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"custom-select",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left","mr-1"],l_,[1,"page-item"],a_,[1,"fa","fa-angle-double-right","ml-1"],["id","deleteConfirmDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteConfirmDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteConfirmDialogLabel",1,"modal-title","text-danger"],[1,"fa","fa-warning","mr-1"],d_,[1,"modal-body"],r_,[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],A_,["type","button",1,"btn","btn-danger",3,"click"],T_,[1,"bg-light","px-2","py-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","mr-1"],C_,["type","button","routerLink","../add-profile",1,"btn","btn-info"],[1,"fa","fa-plus","mr-1"],D_,["type","button","data-toggle","tooltip","data-placement","top","title","only one should be selected",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-edit","mr-1"],S_,["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash","mr-1"],I_,["type","checkbox",3,"checked","click"],g_,["type","checkbox",3,"value","checked","click"],[1,"user-select-all"],["class","text-center",4,"ngIf"],[1,"text-center"],["routerLink","../../device-center",1,"badge","badge-pill","badge-primary",3,"queryParams"],[1,"fa","fa-sitemap"]]},template:function(l,d){1&l&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i._UZ(2,"i",2),i.TgZ(3,"span"),i.SDv(4,3),i.qZA(),i.qZA(),i.TgZ(5,"div",4),i.YNc(6,h,22,2,"div",5),i.TgZ(7,"div",6),i.TgZ(8,"table",7),i.TgZ(9,"thead",8),i.TgZ(10,"tr"),i.TgZ(11,"th",9),i.YNc(12,O,1,1,"input",10),i.qZA(),i.TgZ(13,"th",9),i._uU(14,"ID"),i.qZA(),i.TgZ(15,"th",9),i.SDv(16,11),i.qZA(),i.TgZ(17,"th",9),i.SDv(18,12),i.qZA(),i.YNc(19,M,2,0,"th",13),i.TgZ(20,"th",9),i.SDv(21,14),i.qZA(),i.TgZ(22,"th",9),i.SDv(23,15),i.qZA(),i.TgZ(24,"th",9),i.SDv(25,16),i.qZA(),i.qZA(),i.qZA(),i.TgZ(26,"tbody"),i.YNc(27,w,16,11,"tr",17),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(28,"div",18),i.TgZ(29,"nav",19),i.TgZ(30,"ul",20),i.TgZ(31,"li",21),i.TgZ(32,"span",22),i.SDv(33,23),i.qZA(),i.qZA(),i.TgZ(34,"li",24),i.TgZ(35,"select",25),i.NdJ("ngModelChange",function(U){return d.pageLimit=U})("ngModelChange",function(){return d.onPageSelected()}),i.TgZ(36,"option",26),i._uU(37,"5"),i.qZA(),i.TgZ(38,"option",27),i._uU(39,"10"),i.qZA(),i.TgZ(40,"option",28),i._uU(41,"20"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(42,"li",29),i.TgZ(43,"button",30),i.NdJ("click",function(){return d.prePage()}),i._UZ(44,"i",31),i.TgZ(45,"span"),i.SDv(46,32),i.qZA(),i.qZA(),i.qZA(),i.TgZ(47,"li",33),i.TgZ(48,"button",30),i.NdJ("click",function(){return d.nextPage()}),i.TgZ(49,"span"),i.SDv(50,34),i.qZA(),i._UZ(51,"i",35),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(52,"div",36),i.TgZ(53,"div",37),i.TgZ(54,"div",38),i.TgZ(55,"div",39),i.TgZ(56,"h5",40),i._UZ(57,"i",41),i.TgZ(58,"span"),i.SDv(59,42),i.qZA(),i.qZA(),i.qZA(),i.TgZ(60,"div",43),i.SDv(61,44),i.qZA(),i.TgZ(62,"div",45),i.TgZ(63,"button",46),i.SDv(64,47),i.qZA(),i.TgZ(65,"button",48),i.NdJ("click",function(){return d.delete()}),i.SDv(66,49),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&l&&(i.xp6(6),i.Q6J("ngIf",d.toolbars),i.xp6(6),i.Q6J("ngIf",d.enableSelectAll),i.xp6(7),i.Q6J("ngIf",d.associatedDeviceColumn),i.xp6(8),i.Q6J("ngForOf",d.profileList),i.xp6(8),i.Q6J("ngModel",d.pageLimit),i.xp6(8),i.Q6J("disabled",1===d.pagination),i.xp6(5),i.Q6J("disabled",d.pageLimit>d.profileList.length))},directives:[W.O5,W.sg,u.EJ,u.JJ,u.On,u.YN,u.Kr,_.rH,_.yS],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),p})()},7982:(M_,Q,C)=>{C.d(Q,{V:()=>W});var i=C(1841),a=C(5894),S=C(476),_=C(4889);let W=(()=>{class u{constructor(O,M){this.http=O,this.errorSvc=M,this.endpoint="/core-command",this.version="/api/v2",this.urlPrefix=`${this.endpoint}${this.version}`,this.endpointHealthUrl="/ping",this.versionUrl="/version",this.configUrl="/config",this.deviceCoreCommandListUrl=`${this.urlPrefix}/device/all`,this.commandsByDeviceIdUrl=`${this.urlPrefix}/device/`,this.commandsByDeviceNameUrl=`${this.urlPrefix}/device/name/`,this.issueCmdByDeviceNameAndCmdNameUrl=`${this.urlPrefix}/device/name/`,this.httpPostOrPutJSONOptions={headers:new i.WM({"Content-type":"application/json"})}}getConfig(){return this.http.get(`${this.urlPrefix}${this.configUrl}`).pipe((0,a.K)(M=>this.errorSvc.handleError(M)))}findCommnadsByDeviceId(O){return this.http.get(`${this.commandsByDeviceIdUrl}${O}`).pipe((0,a.K)(m=>this.errorSvc.handleError(m)))}allDeviceCoreCommandsPagination(O,M){return this.http.get(`${this.deviceCoreCommandListUrl}?offset=${O}&limit=${M}`).pipe((0,a.K)(N=>this.errorSvc.handleError(N)))}findDeviceAssociatedCommnadsByDeviceName(O){return this.http.get(`${this.commandsByDeviceNameUrl}${O}`).pipe((0,a.K)(m=>this.errorSvc.handleError(m)))}findAllDeviceCommnads(){return this.http.get(`${this.urlPrefix}/device`).pipe((0,a.K)(M=>this.errorSvc.handleError(M)))}issueGetBinaryCmd(O,M){return this.http.request("GET",`${this.commandsByDeviceIdUrl}${O}/command/${M}`,{responseType:"arraybuffer"}).pipe((0,a.K)(N=>this.errorSvc.handleError(N)))}issueGetCmd(O,M){return this.http.get(`${this.issueCmdByDeviceNameAndCmdNameUrl}${O}/${M}?ds-pushevent=yes&ds-returnevent=yes`).pipe((0,a.K)(N=>this.errorSvc.handleError(N)))}issueSetCmd(O,M,m){return this.http.put(`${this.issueCmdByDeviceNameAndCmdNameUrl}${O}/${M}`,JSON.stringify(m),this.httpPostOrPutJSONOptions).pipe((0,a.K)(w=>this.errorSvc.handleError(w)))}}return u.\u0275fac=function(O){return new(O||u)(S.LFG(i.eN),S.LFG(_.T))},u.\u0275prov=S.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);