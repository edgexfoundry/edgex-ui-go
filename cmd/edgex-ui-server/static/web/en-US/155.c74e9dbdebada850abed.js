"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[155],{4155:(pt,M,_)=>{_.r(M),_.d(M,{RuleEngineModule:()=>ut});var p=_(8583),r=_(3092),c=_(9502),e=_(476);let G=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-rule-engine"]],decls:11,vars:0,consts:function(){let s,t;return s="Stream",t="Rules",[[1,"card"],[1,"card-header"],[1,"nav","nav-tabs","card-header-tabs","font-weight-bold"],[1,"nav-item"],["routerLink","./stream-center","routerLinkActive","active",1,"nav-link"],s,["routerLink","./rules-center","routerLinkActive","active",1,"nav-link"],t,[1,"card-body"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"ul",2),e.TgZ(3,"li",3),e.TgZ(4,"a",4),e.SDv(5,5),e.qZA(),e.qZA(),e.TgZ(6,"li",3),e.TgZ(7,"a",6),e.SDv(8,7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",8),e._UZ(10,"router-outlet"),e.qZA(),e.qZA())},directives:[c.yS,c.Od,c.lC],styles:[""]}),i})();var E=_(4791),h=_(7822),X=_(6322),Q=_(1302);function F(i,s){1&i&&e._UZ(0,"i",26)}function V(i,s){1&i&&e._UZ(0,"i",27)}let K=(()=>{class i{constructor(){this.collapseToggleStatus=!1,this.optionalChange=new e.vpe,this._optional={Qos:"0",Retained:"false",SkipCertVerify:"true",AutoReconnect:"true",CleanSession:"true"}}get optional(){return this._optional}set optional(t){Object.assign(this._optional,t)}ngOnInit(){}ngOnChanges(){this.optionalChange.emit(this.optional)}collapseToggle(){this.collapseToggleStatus=!this.collapseToggleStatus}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edgex-sink-optional"]],inputs:{optional:"optional"},outputs:{optionalChange:"optionalChange"},features:[e.TTD],decls:102,vars:27,consts:[[1,"card"],["role","button","data-toggle","collapse","data-target","#collapse-edgex-sink-opts","aria-expanded","false","aria-controls","collapse-edgex-sink-opts",1,"card-header",3,"click"],[1,"fa","fa-tags","text-primary","mr-2"],[1,"text-primary"],[1,"text-primary","ml-2"],["role","button","aria-disabled","true","class","fa fa-angle-double-down fa-lg","data-toggle","collapse","data-target","#collapse-edgex-sink-opts","aria-expanded","false","aria-controls","collapse-edgex-sink-opts",4,"ngIf"],["role","button","aria-disabled","true","class","fa fa-angle-double-up fa-lg","data-toggle","collapse","data-target","#collapse-edgex-sink-opts","aria-expanded","false","aria-controls","collapse-edgex-sink-opts",4,"ngIf"],["id","collapse-edgex-sink-opts",1,"card-body","collapse"],[1,"form-group","row"],[1,"col-sm-3","col-form-label","text-nowrap","text-truncate"],[1,"col-sm-9"],["type","text","name","ClientId",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","Username",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","Password",1,"form-control",3,"ngModel","ngModelChange"],["name","Qos",1,"custom-select",3,"ngModel","ngModelChange"],[3,"value"],["type","number","name","KeepAlive",1,"form-control",3,"ngModel","ngModelChange"],["name","Retained",1,"custom-select",3,"ngModel","ngModelChange"],["name","AutoReconnect",1,"custom-select",3,"ngModel","ngModelChange"],["type","text","name","ConnectTimeout",1,"form-control",3,"ngModel","ngModelChange"],["name","CleanSession",1,"custom-select",3,"ngModel","ngModelChange"],["name","SkipCertVerify",1,"custom-select",3,"ngModel","ngModelChange"],["type","text","name","CertFile",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","KeyFile",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","CertPEMBlock",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","KeyPEMBlock",1,"form-control",3,"ngModel","ngModelChange"],["role","button","aria-disabled","true","data-toggle","collapse","data-target","#collapse-edgex-sink-opts","aria-expanded","false","aria-controls","collapse-edgex-sink-opts",1,"fa","fa-angle-double-down","fa-lg"],["role","button","aria-disabled","true","data-toggle","collapse","data-target","#collapse-edgex-sink-opts","aria-expanded","false","aria-controls","collapse-edgex-sink-opts",1,"fa","fa-angle-double-up","fa-lg"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.NdJ("click",function(){return n.collapseToggle()}),e._UZ(2,"i",2),e.TgZ(3,"span",3),e._uU(4,"EdgeX Sink Options Setting"),e.qZA(),e.TgZ(5,"span",4),e.YNc(6,F,1,0,"i",5),e.YNc(7,V,1,0,"i",6),e.qZA(),e.qZA(),e.TgZ(8,"div",7),e.TgZ(9,"form"),e.TgZ(10,"div",8),e.TgZ(11,"label",9),e._uU(12,"ClientId"),e.qZA(),e.TgZ(13,"div",10),e.TgZ(14,"input",11),e.NdJ("ngModelChange",function(a){return n.optional.ClientId=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",8),e.TgZ(16,"label",9),e._uU(17,"Username"),e.qZA(),e.TgZ(18,"div",10),e.TgZ(19,"input",12),e.NdJ("ngModelChange",function(a){return n.optional.Username=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",8),e.TgZ(21,"label",9),e._uU(22,"Password"),e.qZA(),e.TgZ(23,"div",10),e.TgZ(24,"input",13),e.NdJ("ngModelChange",function(a){return n.optional.Password=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",8),e.TgZ(26,"label",9),e._uU(27,"Qos"),e.qZA(),e.TgZ(28,"div",10),e.TgZ(29,"select",14),e.NdJ("ngModelChange",function(a){return n.optional.Qos=a}),e.TgZ(30,"option",15),e._uU(31,"0"),e.qZA(),e.TgZ(32,"option",15),e._uU(33,"1"),e.qZA(),e.TgZ(34,"option",15),e._uU(35,"2"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",8),e.TgZ(37,"label",9),e._uU(38,"KeepAlive"),e.qZA(),e.TgZ(39,"div",10),e.TgZ(40,"input",16),e.NdJ("ngModelChange",function(a){return n.optional.KeepAlive=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",8),e.TgZ(42,"label",9),e._uU(43,"Retained"),e.qZA(),e.TgZ(44,"div",10),e.TgZ(45,"select",17),e.NdJ("ngModelChange",function(a){return n.optional.Retained=a}),e.TgZ(46,"option",15),e._uU(47,"false"),e.qZA(),e.TgZ(48,"option",15),e._uU(49,"true"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(50,"div",8),e.TgZ(51,"label",9),e._uU(52,"AutoReconnect"),e.qZA(),e.TgZ(53,"div",10),e.TgZ(54,"select",18),e.NdJ("ngModelChange",function(a){return n.optional.AutoReconnect=a}),e.TgZ(55,"option",15),e._uU(56,"false"),e.qZA(),e.TgZ(57,"option",15),e._uU(58,"true"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(59,"div",8),e.TgZ(60,"label",9),e._uU(61,"ConnectTimeout"),e.qZA(),e.TgZ(62,"div",10),e.TgZ(63,"input",19),e.NdJ("ngModelChange",function(a){return n.optional.ConnectTimeout=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(64,"div",8),e.TgZ(65,"label",9),e._uU(66,"CleanSession"),e.qZA(),e.TgZ(67,"div",10),e.TgZ(68,"select",20),e.NdJ("ngModelChange",function(a){return n.optional.CleanSession=a}),e.TgZ(69,"option",15),e._uU(70,"false"),e.qZA(),e.TgZ(71,"option",15),e._uU(72,"true"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(73,"div",8),e.TgZ(74,"label",9),e._uU(75,"SkipCertVerify"),e.qZA(),e.TgZ(76,"div",10),e.TgZ(77,"select",21),e.NdJ("ngModelChange",function(a){return n.optional.SkipCertVerify=a}),e.TgZ(78,"option",15),e._uU(79,"true"),e.qZA(),e.TgZ(80,"option",15),e._uU(81,"false"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(82,"div",8),e.TgZ(83,"label",9),e._uU(84,"CertFile"),e.qZA(),e.TgZ(85,"div",10),e.TgZ(86,"input",22),e.NdJ("ngModelChange",function(a){return n.optional.CertFile=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(87,"div",8),e.TgZ(88,"label",9),e._uU(89,"KeyFile"),e.qZA(),e.TgZ(90,"div",10),e.TgZ(91,"input",23),e.NdJ("ngModelChange",function(a){return n.optional.KeyFile=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(92,"div",8),e.TgZ(93,"label",9),e._uU(94,"CertPEMBlock"),e.qZA(),e.TgZ(95,"div",10),e.TgZ(96,"input",24),e.NdJ("ngModelChange",function(a){return n.optional.CertPEMBlock=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(97,"div",8),e.TgZ(98,"label",9),e._uU(99,"KeyPEMBlock"),e.qZA(),e.TgZ(100,"div",10),e.TgZ(101,"input",25),e.NdJ("ngModelChange",function(a){return n.optional.KeyPEMBlock=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("ngIf",!n.collapseToggleStatus),e.xp6(1),e.Q6J("ngIf",n.collapseToggleStatus),e.xp6(7),e.Q6J("ngModel",n.optional.ClientId),e.xp6(5),e.Q6J("ngModel",n.optional.Username),e.xp6(5),e.Q6J("ngModel",n.optional.Password),e.xp6(5),e.Q6J("ngModel",n.optional.Qos),e.xp6(1),e.Q6J("value",0),e.xp6(2),e.Q6J("value",1),e.xp6(2),e.Q6J("value",2),e.xp6(6),e.Q6J("ngModel",n.optional.KeepAlive),e.xp6(5),e.Q6J("ngModel",n.optional.Retained),e.xp6(1),e.Q6J("value",!1),e.xp6(2),e.Q6J("value",!0),e.xp6(6),e.Q6J("ngModel",n.optional.AutoReconnect),e.xp6(1),e.Q6J("value",!1),e.xp6(2),e.Q6J("value",!0),e.xp6(6),e.Q6J("ngModel",n.optional.ConnectTimeout),e.xp6(5),e.Q6J("ngModel",n.optional.CleanSession),e.xp6(1),e.Q6J("value",!1),e.xp6(2),e.Q6J("value",!0),e.xp6(6),e.Q6J("ngModel",n.optional.SkipCertVerify),e.xp6(1),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(6),e.Q6J("ngModel",n.optional.CertFile),e.xp6(5),e.Q6J("ngModel",n.optional.KeyFile),e.xp6(5),e.Q6J("ngModel",n.optional.CertPEMBlock),e.xp6(5),e.Q6J("ngModel",n.optional.KeyPEMBlock))},directives:[p.O5,r._Y,r.JL,r.F,r.Fj,r.JJ,r.On,r.EJ,r.YN,r.Kr,r.wV],styles:[""]}),i})();var Z=_(9162),Y=function(i){function s(t,n){return i.call(this)||this}return(0,Z.ZT)(s,i),s.prototype.schedule=function(t,n){return void 0===n&&(n=0),this},s}(_(8839).w0),A={setInterval:function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var t=A.delegate;return((null==t?void 0:t.setInterval)||setInterval).apply(void 0,(0,Z.ev)([],(0,Z.CR)(i)))},clearInterval:function(i){var s=A.delegate;return((null==s?void 0:s.clearInterval)||clearInterval)(i)},delegate:void 0},z=_(5850),H=function(i){function s(t,n){var o=i.call(this,t,n)||this;return o.scheduler=t,o.work=n,o.pending=!1,o}return(0,Z.ZT)(s,i),s.prototype.schedule=function(t,n){if(void 0===n&&(n=0),this.closed)return this;this.state=t;var o=this.id,a=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(a,o,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(a,this.id,n),this},s.prototype.requestAsyncId=function(t,n,o){return void 0===o&&(o=0),A.setInterval(t.flush.bind(t,this),o)},s.prototype.recycleAsyncId=function(t,n,o){if(void 0===o&&(o=0),null!=o&&this.delay===o&&!1===this.pending)return n;A.clearInterval(n)},s.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var o=this._execute(t,n);if(o)return o;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},s.prototype._execute=function(t,n){var a,o=!1;try{this.work(t)}catch(l){o=!0,a=!!l&&l||new Error(l)}if(o)return this.unsubscribe(),a},s.prototype.unsubscribe=function(){if(!this.closed){var n=this.id,o=this.scheduler,a=o.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,z.P)(a,this),null!=n&&(this.id=this.recycleAsyncId(o,n,null)),this.delay=null,i.prototype.unsubscribe.call(this)}},s}(Y),v={now:function(){return(v.delegate||Date).now()},delegate:void 0},N=function(){function i(s,t){void 0===t&&(t=i.now),this.schedulerActionCtor=s,this.now=t}return i.prototype.schedule=function(s,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,s).schedule(n,t)},i.now=v.now,i}(),W=new(function(i){function s(t,n){void 0===n&&(n=N.now);var o=i.call(this,t,n)||this;return o.actions=[],o._active=!1,o._scheduled=void 0,o}return(0,Z.ZT)(s,i),s.prototype.flush=function(t){var n=this.actions;if(this._active)n.push(t);else{var o;this._active=!0;do{if(o=t.execute(t.state,t.delay))break}while(t=n.shift());if(this._active=!1,o){for(;t=n.shift();)t.unsubscribe();throw o}}},s}(N))(H),q=_(4297),R=_(5076);function b(i,s){return void 0===s&&(s=W),(0,q.e)(function(t,n){var o=null,a=null,l=null,d=function(){if(o){o.unsubscribe(),o=null;var g=a;a=null,n.next(g)}};function m(){var g=l+i,u=s.now();if(u<g)return o=this.schedule(void 0,g-u),void n.add(o);d()}t.subscribe(new R.Q(n,function(g){a=g,l=s.now(),o||(o=s.schedule(m,i),n.add(o))},function(){d(),n.complete()},void 0,function(){a=o=null}))})}var ee=_(2738);function L(i,s){return void 0===s&&(s=ee.y),i=null!=i?i:te,(0,q.e)(function(t,n){var o,a=!0;t.subscribe(new R.Q(n,function(l){var d=s(l);(a||!i(o,d))&&(a=!1,o=d,n.next(l))}))})}function te(i,s){return i===s}function ne(i,s){1&i&&e._UZ(0,"i",32)}function oe(i,s){1&i&&e._UZ(0,"i",33)}let C=(()=>{class i{constructor(){this.collapseToggleStatus=!1,this.sinkBasePropertiesForm=new r.cw({concurrency:new r.NI(1),bufferLength:new r.NI(1024),runAsync:new r.NI(!1),retryInterval:new r.NI(1e3),retryCount:new r.NI(0),cacheLength:new r.NI(1024),cacheSaveInterval:new r.NI(1e3),omitIfEmpty:new r.NI(!1)}),this.sinkBasePropertiesChange=new e.vpe,this.sinkBaseProperties={}}ngOnChanges(){delete this.sinkBaseProperties.sendSingle,delete this.sinkBaseProperties.dataTemplate;let t={};for(const[n,o]of Object.entries(this.sinkBaseProperties))this.sinkBasePropertiesForm.value.hasOwnProperty(n)&&o&&(t[n]=o);this.sinkBasePropertiesForm.patchValue(t)}ngAfterViewInit(){this.sinkBasePropertiesForm.valueChanges.pipe(b(400),L()).subscribe(()=>{Object.assign(this.sinkBaseProperties,this.sinkBasePropertiesForm.value),this.sinkBasePropertiesChange.emit(this.sinkBaseProperties)})}collapseToggle(){this.collapseToggleStatus=!this.collapseToggleStatus}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-sink-base-properties"]],inputs:{sinkBaseProperties:"sinkBaseProperties"},outputs:{sinkBasePropertiesChange:"sinkBasePropertiesChange"},features:[e.TTD],decls:74,vars:7,consts:function(){let s;return s="Sink Advanced Options",[[1,"card"],["role","button","data-toggle","collapse","data-target","#collapse-sink-base","aria-expanded","false","aria-controls","collapse-sink-base",1,"card-header",3,"click"],[1,"fa","fa-tags","text-primary","mr-2"],[1,"text-primary"],s,[1,"text-primary","ml-2"],["role","button","aria-disabled","true","class","fa fa-angle-double-down fa-lg","data-toggle","collapse","data-target","#collapse-sink-base","aria-expanded","false","aria-controls","collapse-sink-base",4,"ngIf"],["role","button","aria-disabled","true","class","fa fa-angle-double-up fa-lg","data-toggle","collapse","data-target","#collapse-sink-base","aria-expanded","false","aria-controls","collapse-sink-base",4,"ngIf"],["id","collapse-sink-base",1,"card-body","collapse"],[3,"formGroup"],[1,"form-group","row"],[1,"col","col-sm-3","col-form-label","text-nowrap","text-truncate"],[1,"mr-2"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","Specify how many instances of the sink will be run. If the value is bigger than 1, the order of the messages may not be retained.",1,"fa","fa-question-circle-o","fa-lg"],[1,"col-sm-9"],["type","number","name","concurrency","formControlName","concurrency",1,"form-control"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","Specify how many messages can be buffered in memory. If the buffered messages exceed the limit, the sink will block message receiving until the buffered messages have been sent out so that the buffered size is less than the limit.",1,"fa","fa-question-circle-o","fa-lg"],["type","number","name","bufferLength","formControlName","bufferLength",1,"form-control"],[1,"col-sm-3","col-form-label","text-nowrap","text-truncate"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","Specify how many milliseconds will the sink retry to send data out if the previous send failed. If the specified value <= 0, then it will not retry.",1,"fa","fa-question-circle-o","fa-lg"],["type","number","name","retryInterval","formControlName","retryInterval",1,"form-control"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","Specify how many will the sink retry to send data out if the previous send failed. If the specified value <= 0, then it will not retry.",1,"fa","fa-question-circle-o","fa-lg"],["type","number","name","retryCount","formControlName","retryCount",1,"form-control"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","Specify how many messages can be cached. The cached messages will be resent to external system until the data sent out successfully. The cached message will be sent in order except in runAsync or concurrent mode. The cached message will be saved to disk in fixed intervals.",1,"fa","fa-question-circle-o","fa-lg"],["type","number","name","cacheLength","formControlName","cacheLength",1,"form-control"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","Specify the interval to save cached message to the disk. Notice that, if the rule is closed in plan, all the cached messages will be saved at close. A larger value can reduce the saving overhead but may lose more cache messages when the system is interrupted in error.",1,"fa","fa-question-circle-o","fa-lg"],["type","number","name","cacheSaveInterval","formControlName","cacheSaveInterval",1,"form-control"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","Whether the sink will run asynchronously for better performance. If it is true, the sink result order is not promised.",1,"fa","fa-question-circle-o","fa-lg"],["name","runAsync","formControlName","runAsync",1,"custom-select"],[3,"ngValue"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","If the configuration item is set to true, when SELECT result is empty, then the result will not feed to sink operator.",1,"fa","fa-question-circle-o","fa-lg"],["name","omitIfEmpty","formControlName","omitIfEmpty",1,"custom-select"],["role","button","aria-disabled","true","data-toggle","collapse","data-target","#collapse-sink-base","aria-expanded","false","aria-controls","collapse-sink-base",1,"fa","fa-angle-double-down","fa-lg"],["role","button","aria-disabled","true","data-toggle","collapse","data-target","#collapse-sink-base","aria-expanded","false","aria-controls","collapse-sink-base",1,"fa","fa-angle-double-up","fa-lg"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.NdJ("click",function(){return n.collapseToggle()}),e._UZ(2,"i",2),e.TgZ(3,"span",3),e.SDv(4,4),e.qZA(),e.TgZ(5,"span",5),e.YNc(6,ne,1,0,"i",6),e.YNc(7,oe,1,0,"i",7),e.qZA(),e.qZA(),e.TgZ(8,"div",8),e.TgZ(9,"form",9),e.TgZ(10,"div",10),e.TgZ(11,"label",11),e.TgZ(12,"span",12),e._uU(13,"concurrency"),e.qZA(),e._UZ(14,"span",13),e.qZA(),e.TgZ(15,"div",14),e._UZ(16,"input",15),e.qZA(),e.qZA(),e.TgZ(17,"div",10),e.TgZ(18,"label",11),e.TgZ(19,"span",12),e._uU(20,"bufferLength"),e.qZA(),e._UZ(21,"span",16),e.qZA(),e.TgZ(22,"div",14),e._UZ(23,"input",17),e.qZA(),e.qZA(),e.TgZ(24,"div",10),e.TgZ(25,"label",18),e.TgZ(26,"span",12),e._uU(27,"retryInterval"),e.qZA(),e._UZ(28,"span",19),e.qZA(),e.TgZ(29,"div",14),e._UZ(30,"input",20),e.qZA(),e.qZA(),e.TgZ(31,"div",10),e.TgZ(32,"label",18),e.TgZ(33,"span",12),e._uU(34,"retryCount"),e.qZA(),e._UZ(35,"span",21),e.qZA(),e.TgZ(36,"div",14),e._UZ(37,"input",22),e.qZA(),e.qZA(),e.TgZ(38,"div",10),e.TgZ(39,"label",18),e.TgZ(40,"span",12),e._uU(41,"cacheLength"),e.qZA(),e._UZ(42,"span",23),e.qZA(),e.TgZ(43,"div",14),e._UZ(44,"input",24),e.qZA(),e.qZA(),e.TgZ(45,"div",10),e.TgZ(46,"label",18),e.TgZ(47,"span",12),e._uU(48,"cacheSaveInterval"),e.qZA(),e._UZ(49,"span",25),e.qZA(),e.TgZ(50,"div",14),e._UZ(51,"input",26),e.qZA(),e.qZA(),e.TgZ(52,"div",10),e.TgZ(53,"label",18),e.TgZ(54,"span",12),e._uU(55,"runAsync"),e.qZA(),e._UZ(56,"span",27),e.qZA(),e.TgZ(57,"div",14),e.TgZ(58,"select",28),e.TgZ(59,"option",29),e._uU(60,"false"),e.qZA(),e.TgZ(61,"option",29),e._uU(62,"true"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(63,"div",10),e.TgZ(64,"label",18),e.TgZ(65,"span",12),e._uU(66,"omitIfEmpty"),e.qZA(),e._UZ(67,"span",30),e.qZA(),e.TgZ(68,"div",14),e.TgZ(69,"select",31),e.TgZ(70,"option",29),e._uU(71,"false"),e.qZA(),e.TgZ(72,"option",29),e._uU(73,"true"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("ngIf",!n.collapseToggleStatus),e.xp6(1),e.Q6J("ngIf",n.collapseToggleStatus),e.xp6(2),e.Q6J("formGroup",n.sinkBasePropertiesForm),e.xp6(50),e.Q6J("ngValue",!1),e.xp6(2),e.Q6J("ngValue",!0),e.xp6(9),e.Q6J("ngValue",!1),e.xp6(2),e.Q6J("ngValue",!0))},directives:[p.O5,r._Y,r.JL,r.sg,r.wV,r.Fj,r.JJ,r.u,r.EJ,r.YN,r.Kr],styles:[""]}),i})(),ie=(()=>{class i{constructor(){this.sinkBaseProperties={},this.edgeXSinkChange=new e.vpe,this._edgeXSink={type:"redis",protocol:"redis",host:"edgex-redis",port:6379,contentType:"application/json",messageType:"event",sendSingle:!1}}get edgeXSink(){return this._edgeXSink}set edgeXSink(t){Object.assign(this._edgeXSink,t)}ngOnInit(){this.renderPopoverComponent(),Object.assign(this.sinkBaseProperties,this.edgeXSink)}ngOnChanges(){this.edgeXSinkChange.emit(this.edgeXSink)}renderPopoverComponent(){$('[data-toggle="popover"]').popover({trigger:"hover"})}onSinkBasePropertiesChange(t){Object.assign(this.edgeXSink,t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edgex-sink"]],inputs:{edgeXSink:"edgeXSink"},outputs:{edgeXSinkChange:"edgeXSinkChange"},features:[e.TTD],decls:117,vars:20,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-tags","text-danger","mr-2"],[1,"font-weight-bold"],[1,"card-body"],[1,"form-group","row"],[1,"col-sm-3","col-form-label","text-nowrap","text-truncate"],[1,"mr-2"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","the type of EdgeX message bus",1,"fa","fa-question-circle-o","fa-lg"],[1,"col-sm-9"],["name","type",1,"custom-select",3,"ngModel","ngModelChange"],["value","redis"],["value","zero"],["value","mqtt"],["type","text","name","protocol",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","host",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","port",1,"form-control",3,"ngModel","ngModelChange"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","The topic to be published. The topic is static across all messages. To use dynamic topic, leave this empty and specify the topicPrefix property. Only one of the topic and topicPrefix properties can be specified. If both are not specified, then use default topic value application.",1,"fa","fa-question-circle-o","fa-lg"],["type","text","name","topic",1,"form-control",3,"ngModel","ngModelChange"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","The prefix of a dynamic topic to be published. The topic will become a concatenation of $topicPrefix/$profileName/$deviceName/$sourceName.",1,"fa","fa-question-circle-o","fa-lg"],["type","text","name","topicPrefix",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","contentType",1,"form-control",3,"ngModel","ngModelChange"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","The EdgeX message model type. To publish the message as an event like EdgeX application service, use event. Otherwise, to publish the message as an event request like EdgeX device service or core data service, use request. If not specified, then use the default value event.",1,"fa","fa-question-circle-o","fa-lg"],["name","messageType",1,"custom-select",3,"ngModel","ngModelChange"],["value","event"],["value","request"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","The property is a field name that allows user to specify a field name of SQL select clause, the field name should use meta(*) AS xxx to select all of EdgeX metadata from message.",1,"fa","fa-question-circle-o","fa-lg"],["type","text","name","metadata",1,"form-control",3,"ngModel","ngModelChange"],[3,"singleSelectionMode","singleProfileSelected","singleProfileSelectedChange"],[3,"singleSelectionMode","singleDeviceSelected","singleDeviceSelectedChange"],["type","text","name","deviceName",1,"form-control",3,"ngModel","ngModelChange"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content",'The output messages are received as an array. This is indicate whether to send the results one by one. If false, the output message will be {"result":"${the string of received message}"}. For example, {"result":"[{\\"count\\":30},"\\"count\\":20}]"}. Otherwise, the result message will be sent one by one with the actual field name. For the same example as above, it will send {"count":30}, then send {"count":20} to the RESTful endpoint.Default to false.',1,"fa","fa-question-circle-o","fa-lg"],["name","sendSingle",1,"custom-select",3,"ngModel","ngModelChange"],[3,"ngValue"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","The golang template format string to specify the output data format. The input of the template is the sink message which is always an array of map. If no data template is specified, the raw input will be the data.",1,"fa","fa-question-circle-o","fa-lg"],["type","text","name","dataTemplate",1,"form-control",3,"ngModel","ngModelChange"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","EdgeX Message bus connection optional",1,"fa","fa-question-circle-o","fa-lg"],[3,"optional","optionalChange"],[3,"sinkBaseProperties","sinkBasePropertiesChange"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"i",2),e.TgZ(3,"span",3),e._uU(4,"EdgeX Sink"),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"form"),e.TgZ(7,"div",5),e.TgZ(8,"label",6),e.TgZ(9,"span",7),e._uU(10,"Type"),e.qZA(),e._UZ(11,"span",8),e.qZA(),e.TgZ(12,"div",9),e.TgZ(13,"select",10),e.NdJ("ngModelChange",function(a){return n.edgeXSink.type=a}),e.TgZ(14,"option",11),e._uU(15,"redis"),e.qZA(),e.TgZ(16,"option",12),e._uU(17,"zero"),e.qZA(),e.TgZ(18,"option",13),e._uU(19,"mqtt"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",5),e.TgZ(21,"label",6),e._uU(22,"Protocol"),e.qZA(),e.TgZ(23,"div",9),e.TgZ(24,"input",14),e.NdJ("ngModelChange",function(a){return n.edgeXSink.protocol=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",5),e.TgZ(26,"label",6),e._uU(27,"Host"),e.qZA(),e.TgZ(28,"div",9),e.TgZ(29,"input",15),e.NdJ("ngModelChange",function(a){return n.edgeXSink.host=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",5),e.TgZ(31,"label",6),e._uU(32,"Port"),e.qZA(),e.TgZ(33,"div",9),e.TgZ(34,"input",16),e.NdJ("ngModelChange",function(a){return n.edgeXSink.port=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",5),e.TgZ(36,"label",6),e.TgZ(37,"span",7),e._uU(38,"Topic"),e.qZA(),e._UZ(39,"span",17),e.qZA(),e.TgZ(40,"div",9),e.TgZ(41,"input",18),e.NdJ("ngModelChange",function(a){return n.edgeXSink.topic=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",5),e.TgZ(43,"label",6),e.TgZ(44,"span",7),e._uU(45,"TopicPrefix"),e.qZA(),e._UZ(46,"span",19),e.qZA(),e.TgZ(47,"div",9),e.TgZ(48,"input",20),e.NdJ("ngModelChange",function(a){return n.edgeXSink.topicPrefix=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(49,"div",5),e.TgZ(50,"label",6),e._uU(51,"ContentType"),e.qZA(),e.TgZ(52,"div",9),e.TgZ(53,"input",21),e.NdJ("ngModelChange",function(a){return n.edgeXSink.contentType=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(54,"div",5),e.TgZ(55,"label",6),e.TgZ(56,"span",7),e._uU(57,"MessageType"),e.qZA(),e._UZ(58,"span",22),e.qZA(),e.TgZ(59,"div",9),e.TgZ(60,"select",23),e.NdJ("ngModelChange",function(a){return n.edgeXSink.messageType=a}),e.TgZ(61,"option",24),e._uU(62,"event"),e.qZA(),e.TgZ(63,"option",25),e._uU(64,"request"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(65,"div",5),e.TgZ(66,"label",6),e.TgZ(67,"span",7),e._uU(68,"Metadata"),e.qZA(),e._UZ(69,"span",26),e.qZA(),e.TgZ(70,"div",9),e.TgZ(71,"input",27),e.NdJ("ngModelChange",function(a){return n.edgeXSink.metadata=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(72,"div",5),e.TgZ(73,"label",6),e._uU(74,"ProfileName"),e.qZA(),e.TgZ(75,"div",9),e.TgZ(76,"app-device-profile-combo-list",28),e.NdJ("singleProfileSelectedChange",function(a){return n.edgeXSink.profileName=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(77,"div",5),e.TgZ(78,"label",6),e._uU(79,"DeviceName"),e.qZA(),e.TgZ(80,"div",9),e.TgZ(81,"app-device-combo-list",29),e.NdJ("singleDeviceSelectedChange",function(a){return n.edgeXSink.deviceName=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(82,"div",5),e.TgZ(83,"label",6),e._uU(84,"SourceName"),e.qZA(),e.TgZ(85,"div",9),e.TgZ(86,"input",30),e.NdJ("ngModelChange",function(a){return n.edgeXSink.sourceName=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(87,"div",5),e.TgZ(88,"label",6),e.TgZ(89,"span",7),e._uU(90,"SendSingle"),e.qZA(),e._UZ(91,"span",31),e.qZA(),e.TgZ(92,"div",9),e.TgZ(93,"select",32),e.NdJ("ngModelChange",function(a){return n.edgeXSink.sendSingle=a}),e.TgZ(94,"option",33),e._uU(95,"false"),e.qZA(),e.TgZ(96,"option",33),e._uU(97,"true"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(98,"div",5),e.TgZ(99,"label",6),e.TgZ(100,"span",7),e._uU(101,"DataTemplate"),e.qZA(),e._UZ(102,"span",34),e.qZA(),e.TgZ(103,"div",9),e.TgZ(104,"input",35),e.NdJ("ngModelChange",function(a){return n.edgeXSink.dataTemplate=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(105,"div",5),e.TgZ(106,"label",6),e.TgZ(107,"span",7),e._uU(108,"EdgeX Sink Options"),e.qZA(),e._UZ(109,"span",36),e.qZA(),e.TgZ(110,"div",9),e.TgZ(111,"app-edgex-sink-optional",37),e.NdJ("optionalChange",function(a){return n.edgeXSink.optional=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(112,"div",5),e.TgZ(113,"label",6),e._uU(114,"Advanced Options"),e.qZA(),e.TgZ(115,"div",9),e.TgZ(116,"app-sink-base-properties",38),e.NdJ("sinkBasePropertiesChange",function(a){return n.onSinkBasePropertiesChange(a)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(13),e.Q6J("ngModel",n.edgeXSink.type),e.xp6(11),e.Q6J("ngModel",n.edgeXSink.protocol),e.xp6(5),e.Q6J("ngModel",n.edgeXSink.host),e.xp6(5),e.Q6J("ngModel",n.edgeXSink.port),e.xp6(7),e.Q6J("ngModel",n.edgeXSink.topic),e.xp6(7),e.Q6J("ngModel",n.edgeXSink.topicPrefix),e.xp6(5),e.Q6J("ngModel",n.edgeXSink.contentType),e.xp6(7),e.Q6J("ngModel",n.edgeXSink.messageType),e.xp6(11),e.Q6J("ngModel",n.edgeXSink.metadata),e.xp6(5),e.Q6J("singleSelectionMode",!0)("singleProfileSelected",n.edgeXSink.profileName),e.xp6(5),e.Q6J("singleSelectionMode",!0)("singleDeviceSelected",n.edgeXSink.deviceName),e.xp6(5),e.Q6J("ngModel",n.edgeXSink.sourceName),e.xp6(7),e.Q6J("ngModel",n.edgeXSink.sendSingle),e.xp6(1),e.Q6J("ngValue",!1),e.xp6(2),e.Q6J("ngValue",!0),e.xp6(8),e.Q6J("ngModel",n.edgeXSink.dataTemplate),e.xp6(7),e.Q6J("optional",n.edgeXSink.optional),e.xp6(5),e.Q6J("sinkBaseProperties",n.sinkBaseProperties))},directives:[r._Y,r.JL,r.F,r.EJ,r.JJ,r.On,r.YN,r.Kr,r.Fj,r.wV,X.o,Q.h,K,C],styles:[""]}),i})(),ae=(()=>{class i{constructor(){this.sinkBaseProperties={},this.mqttSinkChange=new e.vpe,this._mqttSink={server:"tcp://127.0.0.1:1883",protocolVersion:"3.1",qos:0,insecureSkipVerify:!0,retained:!1,sendSingle:!1}}get mqttSink(){return this._mqttSink}set mqttSink(t){Object.assign(this._mqttSink,t)}ngOnInit(){this.renderPopoverComponent(),Object.assign(this.sinkBaseProperties,this.mqttSink)}ngOnChanges(){this.mqttSinkChange.emit(this.mqttSink)}renderPopoverComponent(){$('[data-toggle="popover"]').popover({trigger:"hover"})}onSinkBasePropertiesChange(t){Object.assign(this.mqttSink,t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-mqtt-sink"]],inputs:{mqttSink:"mqttSink"},outputs:{mqttSinkChange:"mqttSinkChange"},features:[e.TTD],decls:114,vars:32,consts:function(){let s,t,n,o;return s="the mqtt server address can't be empty!",t="the topic can't be empty!",n="Username",o="Password",[[1,"card"],[1,"card-header"],[1,"fa","fa-tags","text-danger","mr-2"],[1,"font-weight-bold"],[1,"card-body"],[1,"form-group","row","has-validation"],[1,"col-sm-3","col-form-label","text-nowrap","text-truncate"],[1,"col-sm-9"],["type","text","name","server",1,"form-control",3,"ngModel","ngModelChange"],["id","ruleName",1,"invalid-feedback"],s,["type","text","name","topic",1,"form-control",3,"ngModel","ngModelChange"],t,[1,"form-group","row"],["type","text","name","clientId",1,"form-control",3,"ngModel","ngModelChange"],["name","protocolVersion",1,"custom-select",3,"ngModel","ngModelChange"],["value","3.1"],["value","3.1.1"],["name","qos",1,"custom-select",3,"ngModel","ngModelChange"],[3,"ngValue"],n,["type","text","name","username",1,"form-control",3,"ngModel","ngModelChange"],o,["type","text","name","password",1,"form-control",3,"ngModel","ngModelChange"],["name","retained",1,"custom-select",3,"ngModel","ngModelChange"],[1,"mr-2"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content",'The output messages are received as an array. This is indicate whether to send the results one by one. If false, the output message will be {"result":"${the string of received message}"}. For example, {"result":"[{\\"count\\":30},"\\"count\\":20}]"}. Otherwise, the result message will be sent one by one with the actual field name. For the same example as above, it will send {"count":30}, then send {"count":20} to the RESTful endpoint.Default to false.',1,"fa","fa-question-circle-o","fa-lg"],["name","sendSingle",1,"custom-select",3,"ngModel","ngModelChange"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","here is treated as mqtt payload, The golang template format string to specify the output data format. The input of the template is the sink message which is always an array of map. If no data template is specified, the raw input will be the data.",1,"fa","fa-question-circle-o","fa-lg"],["type","text","name","dataTemplate",1,"form-control",3,"ngModel","ngModelChange"],["name","insecureSkipVerify",1,"custom-select",3,"ngModel","ngModelChange"],["type","text","name","certificationPath",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","privateKeyPath",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","rootCaPath",1,"form-control",3,"ngModel","ngModelChange"],[3,"sinkBaseProperties","sinkBasePropertiesChange"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"i",2),e.TgZ(3,"span",3),e._uU(4,"MQTT Sink"),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"form"),e.TgZ(7,"div",5),e.TgZ(8,"label",6),e._uU(9,"Server"),e.qZA(),e.TgZ(10,"div",7),e.TgZ(11,"input",8),e.NdJ("ngModelChange",function(a){return n.mqttSink.server=a}),e.qZA(),e.TgZ(12,"div",9),e.TgZ(13,"small"),e.SDv(14,10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",5),e.TgZ(16,"label",6),e._uU(17,"Topic"),e.qZA(),e.TgZ(18,"div",7),e.TgZ(19,"input",11),e.NdJ("ngModelChange",function(a){return n.mqttSink.topic=a}),e.qZA(),e.TgZ(20,"div",9),e.TgZ(21,"small"),e.SDv(22,12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",13),e.TgZ(24,"label",6),e._uU(25,"ClientId"),e.qZA(),e.TgZ(26,"div",7),e.TgZ(27,"input",14),e.NdJ("ngModelChange",function(a){return n.mqttSink.clientId=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",13),e.TgZ(29,"label",6),e._uU(30,"ProtocolVersion"),e.qZA(),e.TgZ(31,"div",7),e.TgZ(32,"select",15),e.NdJ("ngModelChange",function(a){return n.mqttSink.protocolVersion=a}),e.TgZ(33,"option",16),e._uU(34,"3.1"),e.qZA(),e.TgZ(35,"option",17),e._uU(36,"3.1.1"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",13),e.TgZ(38,"label",6),e._uU(39,"Qos"),e.qZA(),e.TgZ(40,"div",7),e.TgZ(41,"select",18),e.NdJ("ngModelChange",function(a){return n.mqttSink.qos=a}),e.TgZ(42,"option",19),e._uU(43,"0"),e.qZA(),e.TgZ(44,"option",19),e._uU(45,"1"),e.qZA(),e.TgZ(46,"option",19),e._uU(47,"2"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(48,"div",13),e.TgZ(49,"label",6),e.SDv(50,20),e.qZA(),e.TgZ(51,"div",7),e.TgZ(52,"input",21),e.NdJ("ngModelChange",function(a){return n.mqttSink.username=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"div",13),e.TgZ(54,"label",6),e.SDv(55,22),e.qZA(),e.TgZ(56,"div",7),e.TgZ(57,"input",23),e.NdJ("ngModelChange",function(a){return n.mqttSink.password=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(58,"div",13),e.TgZ(59,"label",6),e._uU(60,"Retained"),e.qZA(),e.TgZ(61,"div",7),e.TgZ(62,"select",24),e.NdJ("ngModelChange",function(a){return n.mqttSink.retained=a}),e.TgZ(63,"option",19),e._uU(64,"false"),e.qZA(),e.TgZ(65,"option",19),e._uU(66,"true"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(67,"div",13),e.TgZ(68,"label",6),e.TgZ(69,"span",25),e._uU(70,"sendSingle"),e.qZA(),e._UZ(71,"span",26),e.qZA(),e.TgZ(72,"div",7),e.TgZ(73,"select",27),e.NdJ("ngModelChange",function(a){return n.mqttSink.sendSingle=a}),e.TgZ(74,"option",19),e._uU(75,"false"),e.qZA(),e.TgZ(76,"option",19),e._uU(77,"true"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(78,"div",13),e.TgZ(79,"label",6),e.TgZ(80,"span",25),e._uU(81,"dataTemplate"),e.qZA(),e._UZ(82,"span",28),e.qZA(),e.TgZ(83,"div",7),e.TgZ(84,"input",29),e.NdJ("ngModelChange",function(a){return n.mqttSink.dataTemplate=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(85,"div",13),e.TgZ(86,"label",6),e._uU(87,"InsecureSkipVerify"),e.qZA(),e.TgZ(88,"div",7),e.TgZ(89,"select",30),e.NdJ("ngModelChange",function(a){return n.mqttSink.insecureSkipVerify=a}),e.TgZ(90,"option",19),e._uU(91,"true"),e.qZA(),e.TgZ(92,"option",19),e._uU(93,"false"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(94,"div",13),e.TgZ(95,"label",6),e._uU(96,"CertificationPath"),e.qZA(),e.TgZ(97,"div",7),e.TgZ(98,"input",31),e.NdJ("ngModelChange",function(a){return n.mqttSink.certificationPath=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(99,"div",13),e.TgZ(100,"label",6),e._uU(101,"PrivateKeyPath"),e.qZA(),e.TgZ(102,"div",7),e.TgZ(103,"input",32),e.NdJ("ngModelChange",function(a){return n.mqttSink.privateKeyPath=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(104,"div",13),e.TgZ(105,"label",6),e._uU(106,"RootCaPath"),e.qZA(),e.TgZ(107,"div",7),e.TgZ(108,"input",33),e.NdJ("ngModelChange",function(a){return n.mqttSink.rootCaPath=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(109,"div",13),e.TgZ(110,"label",6),e._uU(111,"Advanced Options"),e.qZA(),e.TgZ(112,"div",7),e.TgZ(113,"app-sink-base-properties",34),e.NdJ("sinkBasePropertiesChange",function(a){return n.onSinkBasePropertiesChange(a)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(11),e.ekj("is-invalid",!n.mqttSink.server)("is-valid",n.mqttSink.server),e.Q6J("ngModel",n.mqttSink.server),e.xp6(8),e.ekj("is-invalid",!n.mqttSink.topic)("is-valid",n.mqttSink.topic),e.Q6J("ngModel",n.mqttSink.topic),e.xp6(8),e.Q6J("ngModel",n.mqttSink.clientId),e.xp6(5),e.Q6J("ngModel",n.mqttSink.protocolVersion),e.xp6(9),e.Q6J("ngModel",n.mqttSink.qos),e.xp6(1),e.Q6J("ngValue",0),e.xp6(2),e.Q6J("ngValue",1),e.xp6(2),e.Q6J("ngValue",2),e.xp6(6),e.Q6J("ngModel",n.mqttSink.username),e.xp6(5),e.Q6J("ngModel",n.mqttSink.password),e.xp6(5),e.Q6J("ngModel",n.mqttSink.retained),e.xp6(1),e.Q6J("ngValue",!1),e.xp6(2),e.Q6J("ngValue",!0),e.xp6(8),e.Q6J("ngModel",n.mqttSink.sendSingle),e.xp6(1),e.Q6J("ngValue",!1),e.xp6(2),e.Q6J("ngValue",!0),e.xp6(8),e.Q6J("ngModel",n.mqttSink.dataTemplate),e.xp6(5),e.Q6J("ngModel",n.mqttSink.insecureSkipVerify),e.xp6(1),e.Q6J("ngValue",!0),e.xp6(2),e.Q6J("ngValue",!1),e.xp6(6),e.Q6J("ngModel",n.mqttSink.certificationPath),e.xp6(5),e.Q6J("ngModel",n.mqttSink.privateKeyPath),e.xp6(5),e.Q6J("ngModel",n.mqttSink.rootCaPath),e.xp6(5),e.Q6J("sinkBaseProperties",n.sinkBaseProperties))},directives:[r._Y,r.JL,r.F,r.Fj,r.JJ,r.On,r.EJ,r.YN,r.Kr,C],styles:[""]}),i})();var se=_(2437),re=_(7982),le=_(9549);function de(i,s){1&i&&(e.TgZ(0,"div",21),e._UZ(1,"i",22),e.TgZ(2,"span"),e.SDv(3,23),e.qZA(),e.qZA())}function _e(i,s){1&i&&(e.TgZ(0,"div"),e.TgZ(1,"span"),e.SDv(2,32),e.qZA(),e.qZA())}function ge(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"select",37),e.NdJ("change",function(o){return e.CHM(t),e.oxw(4).onValueOfPutParamsChange(o)}),e.TgZ(1,"option",38),e._uU(2,"false"),e.qZA(),e.TgZ(3,"option",38),e._uU(4,"true"),e.qZA(),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.MGl("id","cmd-param-",t.resourceName,""),e.s9C("name",t.resourceName),e.xp6(1),e.Q6J("ngValue",!1),e.xp6(2),e.Q6J("ngValue",!0)}}function ce(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"input",39),e.NdJ("change",function(o){return e.CHM(t),e.oxw(4).onValueOfPutParamsChange(o)}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.MGl("id","cmd-param-",t.resourceName,""),e.s9C("name",t.resourceName),e.MGl("placeholder","valueType: ",t.valueType,"")}}function ue(i,s){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.cmdParametersValueRender()," ")}}function pe(i,s){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"form"),e.TgZ(2,"div",2),e.TgZ(3,"label",33),e.SDv(4,34),e.qZA(),e.TgZ(5,"div",6),e.YNc(6,ge,5,4,"select",35),e.YNc(7,ce,1,3,"ng-template",null,36,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.YNc(9,ue,2,1,"ng-container",30),e.qZA()),2&i){const t=s.$implicit,n=s.last,o=e.MAs(8);e.xp6(3),e.s9C("for",t.resourceName),e.xp6(1),e.pQV(t.resourceName),e.QtT(4),e.xp6(2),e.Q6J("ngIf","Bool"==t.valueType)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",n)}}function me(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,_e,3,0,"div",30),e.YNc(2,pe,10,5,"div",31),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0==t.cmdSvcInfo.parametersOfPutCommand.length),e.xp6(1),e.Q6J("ngForOf",t.cmdSvcInfo.parametersOfPutCommand)}}function Te(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"label",40),e.TgZ(2,"span",4),e.SDv(3,41),e.qZA(),e._UZ(4,"span",42),e.qZA(),e.TgZ(5,"div",6),e.TgZ(6,"select",43),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).cmdSvcInfo.pushEventOfGetCmdParamter=o}),e.TgZ(7,"option",44),e._uU(8,"true"),e.qZA(),e.TgZ(9,"option",45),e._uU(10,"false"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",2),e.TgZ(12,"label",46),e.TgZ(13,"span",4),e.SDv(14,47),e.qZA(),e._UZ(15,"span",48),e.qZA(),e.TgZ(16,"div",6),e.TgZ(17,"select",49),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).cmdSvcInfo.returnEventOfGetCmdParamter=o}),e.TgZ(18,"option",44),e._uU(19,"true"),e.qZA(),e.TgZ(20,"option",45),e._uU(21,"false"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(6),e.Q6J("ngModel",t.cmdSvcInfo.pushEventOfGetCmdParamter),e.xp6(11),e.Q6J("ngModel",t.cmdSvcInfo.returnEventOfGetCmdParamter)}}function Se(i,s){if(1&i&&(e.TgZ(0,"div",2),e.TgZ(1,"label",18),e._uU(2,"Parameters"),e.qZA(),e.TgZ(3,"div",6),e.TgZ(4,"div",24),e.TgZ(5,"div",25),e.TgZ(6,"span"),e.SDv(7,26),e.qZA(),e.qZA(),e.TgZ(8,"div",27),e.YNc(9,me,3,2,"div",28),e.YNc(10,Te,22,2,"ng-template",null,29,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.MAs(11),n=e.oxw();e.xp6(9),e.Q6J("ngIf","PUT"==n.cmdSvcInfo.httpMethod)("ngIfElse",t)}}let I=(()=>{class i{constructor(t,n){this.metedataSvc=t,this.cmdSvc=n,this.cmdURLFixedPrefix="/api/v3/device/name/",this.notCommandPathMsgShow=!1,this.deviceName="",this.commandName="",this.parameter={},this._url="",this._httpMethod="",this._requestBodyJSONStr="",this.cmdSvcInfoChange=new e.vpe,this.profileForm=new r.cw({host:new r.NI(""),port:new r.NI(""),path:new r.NI(""),httpMethod:new r.NI(""),pushEventOfGetCmdParamter:new r.NI(""),returnEventOfGetCmdParamter:new r.NI("")}),this.cmdSvcInfo={host:"edgex-core-command",port:59882,path:"",pushEventOfGetCmdParamter:"true",returnEventOfGetCmdParamter:"true",parametersOfPutCommand:[]}}get url(){return this._url}set url(t){this._url=t,this._url&&this.urlParser(t)}get httpMethod(){return this._httpMethod}set httpMethod(t){this._httpMethod=t,this.cmdSvcInfo.httpMethod=this._httpMethod}get requestBodyJSONStr(){return this._requestBodyJSONStr}set requestBodyJSONStr(t){this._requestBodyJSONStr=t}ngOnInit(){}ngAfterViewInit(){this.profileForm.valueChanges.pipe(b(400),L()).subscribe(()=>{this.cmdSvcInfoChange.emit(this.cmdSvcInfo)}),this.renderPopoverComponent()}urlParser(t){let n={};try{n=new URL(t)}catch(o){return void(this.notCommandPathMsgShow=!0)}if(n.pathname.startsWith(this.cmdURLFixedPrefix)){let o=n.pathname.substring(this.cmdURLFixedPrefix.length).split("/");if(2===o.length)return this.deviceName=o[0],this.commandName=o[1],this.getCommandParameterByDeviceAndCommandName(this.deviceName,this.commandName),this.cmdSvcInfo.path=n.pathname,this.cmdSvcInfo.host=n.hostname,this.cmdSvcInfo.port=Number(n.port),this.cmdSvcInfo.pushEventOfGetCmdParamter=n.searchParams.get("ds-pushevent")||"true",void(this.cmdSvcInfo.returnEventOfGetCmdParamter=n.searchParams.get("ds-returnevent")||"true")}this.notCommandPathMsgShow=!0}getCommandParameterByDeviceAndCommandName(t,n){this.cmdSvc.findDeviceAssociatedCommnadsByDeviceName(t).subscribe(o=>{o.deviceCoreCommand.coreCommands.forEach(a=>{a.name===n&&(this.cmdSvcInfo.parametersOfPutCommand=a.parameters)})})}cmdParametersValueRender(){let t={};try{t=JSON.parse(this.requestBodyJSONStr)}catch(n){return}for(const[n,o]of Object.entries(t))this.cmdSvcInfo.parametersOfPutCommand.forEach(a=>{a.resourceName===n&&$(`#cmd-param-${n}`).val(o)})}onValueOfPutParamsChange(t){this.cmdSvcInfoChange.emit(this.cmdSvcInfo)}renderPopoverComponent(){$('[data-toggle="popover"]').popover({trigger:"hover"})}onCmdMethodSelected(t){this.cmdSvcInfo.httpMethod=t,this.cmdSvcInfoChange.emit(this.cmdSvcInfo),setTimeout(()=>{this.renderPopoverComponent()},500)}onCommandSelected(t){this.cmdSvcInfo.path=t.path,this.cmdSvcInfo.parametersOfPutCommand=t.parameters}requestBodyAssemble(){let t={};return this.cmdSvcInfo.parametersOfPutCommand.forEach(n=>{!n||!$(`#cmd-param-${n.resourceName}`).val()||""!==$(`#cmd-param-${n.resourceName}`).val().trim()&&(t[n.resourceName]=$(`#cmd-param-${n.resourceName}`).val().trim())}),JSON.stringify(t)}resetPathParameterSuffix(){(-1!==this.cmdSvcInfo.path.indexOf("ds-pushevent")||-1!==this.cmdSvcInfo.path.indexOf("ds-returnevent"))&&(this.cmdSvcInfo.path=this.cmdSvcInfo.path.split("?")[0]),this.cmdSvcInfo.path=`${this.cmdSvcInfo.path}?ds-pushevent=${this.cmdSvcInfo.pushEventOfGetCmdParamter}&ds-returnevent=${this.cmdSvcInfo.returnEventOfGetCmdParamter}`}getHttpMethod(){return this.cmdSvcInfo.httpMethod}getRequestBodyJSONStr(){return this.requestBodyAssemble()}getUrl(){return"GET"===this.cmdSvcInfo.httpMethod&&this.resetPathParameterSuffix(),`http://${this.cmdSvcInfo.host}:${this.cmdSvcInfo.port}${this.cmdSvcInfo.path}`}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(se.D),e.Y36(re.V))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-command-service-template"]],inputs:{url:"url",httpMethod:"httpMethod",requestBodyJSONStr:"requestBodyJSONStr",cmdSvcInfo:"cmdSvcInfo"},outputs:{cmdSvcInfoChange:"cmdSvcInfoChange"},decls:33,vars:19,consts:function(){let s,t,n,o,a,l,d,m;return s="the REST address host can't be empty!",t="the REST address port can't be empty and only pure integer is supported!",n=" Invalid command service url, please don't use this template for custom http request, or select one new valid command path if you insist on using the template! ",o="Command Parameters Setting",a="no paramters.",l="" + "\ufffd0\ufffd" + "",d="pushevent",m="returnevent",[["class","alert alert-danger","role","alert",4,"ngIf"],[3,"formGroup"],[1,"form-group","row"],["for","HttpMethod","required","",1,"col-md-2","col-form-label"],[1,"mr-2"],["role","button","data-html","false","data-animation","true","data-trigger","focus","data-toggle","popover","title","tips","data-content","httpMethod field will be filled up automatically when the path field is selected! ",1,"fa","fa-question-circle-o","fa-lg"],[1,"col-md-10"],["type","text","name","httpMethod","formControlName","httpMethod","readonly","true","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","row","has-validation"],["for","addressHostREST","required","",1,"col-md-2","col-form-label"],["role","button","data-html","false","data-animation","true","data-trigger","focus","data-toggle","popover","title","tips","data-content","Both Host and Port fields are editable if you have a different host address !",1,"fa","fa-question-circle-o","fa-lg"],["type","text","id","addressHostREST","name","addressHost","formControlName","host","required","",1,"form-control",3,"ngModel","ngModelChange"],["id","addressHostRESTFeedback",1,"invalid-feedback"],s,["for","addressPortREST","required","",1,"col-md-2","col-form-label"],["type","number","id","addressPortREST","name","addressPort","formControlName","port","required","",1,"form-control",3,"ngModel","ngModelChange"],["id","addressPortRESTFeedback",1,"invalid-feedback"],t,["for","addressPath","required","",1,"col-md-2","col-form-label"],[3,"validate","deviceName","commandName","httpMethod","commandPath","cmdMethodEvent","commandSelectedEvent"],["class","form-group row",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"fa","fa-warning"],n,[1,"card"],[1,"card-header"],o,[1,"card-body"],[4,"ngIf","ngIfElse"],["getParameter",""],[4,"ngIf"],[4,"ngFor","ngForOf"],a,[1,"col-md-2","col-form-label",3,"for"],l,["class","custom-select",3,"id","name","change",4,"ngIf","ngIfElse"],["valueTypeIsNotBool",""],[1,"custom-select",3,"id","name","change"],[3,"ngValue"],["type","text",1,"form-control",3,"id","name","placeholder","change"],["for","ds-pushevent",1,"col-md-2","col-form-label"],d,["role","button","data-html","false","data-animation","true","data-trigger","focus","data-toggle","popover","title","tips","data-content","true indicates a successful GET will result in an event being pushed to the EdgeX system",1,"fa","fa-question-circle-o","fa-lg"],["id","ds-pushevent","name","ds-pushevent","formControlName","pushEventOfGetCmdParamter",1,"custom-select",3,"ngModel","ngModelChange"],["value","true"],["value","false"],["for","ds-returnevent",1,"col-md-2","col-form-label"],m,["role","button","data-html","false","data-animation","true","data-trigger","focus","data-toggle","popover","title","tips","data-content","no indicates there will be no Event returned in the http response",1,"fa","fa-question-circle-o","fa-lg"],["id","ds-returnevent","name","ds-returnevent","formControlName","returnEventOfGetCmdParamter",1,"custom-select",3,"ngModel","ngModelChange"]]},template:function(t,n){1&t&&(e.YNc(0,de,4,0,"div",0),e.TgZ(1,"form",1),e.TgZ(2,"div",2),e.TgZ(3,"label",3),e.TgZ(4,"span",4),e._uU(5,"HttpMethod"),e.qZA(),e._UZ(6,"span",5),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"input",7),e.NdJ("ngModelChange",function(a){return n.cmdSvcInfo.httpMethod=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"label",9),e.TgZ(11,"span",4),e._uU(12,"Host"),e.qZA(),e._UZ(13,"span",10),e.qZA(),e.TgZ(14,"div",6),e.TgZ(15,"input",11),e.NdJ("ngModelChange",function(a){return n.cmdSvcInfo.host=a}),e.qZA(),e.TgZ(16,"div",12),e.TgZ(17,"small"),e.SDv(18,13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",8),e.TgZ(20,"label",14),e._uU(21,"Port"),e.qZA(),e.TgZ(22,"div",6),e.TgZ(23,"input",15),e.NdJ("ngModelChange",function(a){return n.cmdSvcInfo.port=a}),e.qZA(),e.TgZ(24,"div",16),e.TgZ(25,"small"),e.SDv(26,17),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",2),e.TgZ(28,"label",18),e._uU(29,"Path"),e.qZA(),e.TgZ(30,"div",6),e.TgZ(31,"app-device-core-command-combo-list",19),e.NdJ("cmdMethodEvent",function(a){return n.onCmdMethodSelected(a)})("commandSelectedEvent",function(a){return n.onCommandSelected(a)}),e.qZA(),e.qZA(),e.qZA(),e.YNc(32,Se,12,2,"div",20),e.qZA()),2&t&&(e.Q6J("ngIf",n.notCommandPathMsgShow),e.xp6(1),e.Q6J("formGroup",n.profileForm),e.xp6(7),e.Q6J("ngModel",n.cmdSvcInfo.httpMethod),e.xp6(7),e.ekj("is-invalid",!n.cmdSvcInfo.host)("is-valid",n.cmdSvcInfo.host),e.Q6J("ngModel",n.cmdSvcInfo.host),e.xp6(8),e.ekj("is-invalid",!n.cmdSvcInfo.port)("is-valid",n.cmdSvcInfo.port),e.Q6J("ngModel",n.cmdSvcInfo.port),e.xp6(8),e.Q6J("validate",!0)("deviceName",n.deviceName)("commandName",n.commandName)("httpMethod",n.cmdSvcInfo.httpMethod)("commandPath",n.cmdSvcInfo.path),e.xp6(1),e.Q6J("ngIf",n.cmdSvcInfo.path&&n.cmdSvcInfo.httpMethod&&0!==n.cmdSvcInfo.parametersOfPutCommand.length))},directives:[p.O5,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.Q7,r.wV,le.P,p.sg,r.F,r.YN,r.Kr,r.EJ],styles:[""]}),i})();function fe(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"app-command-service-template",8),e.NdJ("cmdSvcInfoChange",function(o){return e.CHM(t),e.oxw().onCmdSvcTemplateInfoChange(o)}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("url",t.restSink.url)("httpMethod",t.restSink.method)("requestBodyJSONStr",t.restSink.dataTemplate?t.restSink.dataTemplate:"")}}function Ee(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"form",51),e.TgZ(2,"div",52),e.TgZ(3,"div",53),e.TgZ(4,"span",54),e._uU(5,"Key"),e.qZA(),e.qZA(),e.TgZ(6,"input",55),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.key=o})("ngModelChange",function(o){return e.CHM(t),e.oxw(2).requestHeaderChange(o)}),e.qZA(),e.qZA(),e.TgZ(7,"div",56),e._UZ(8,"i",57),e.qZA(),e.TgZ(9,"div",58),e.TgZ(10,"div",53),e.TgZ(11,"span",54),e._uU(12,"Value"),e.qZA(),e.qZA(),e.TgZ(13,"input",59),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.value=o})("ngModelChange",function(o){return e.CHM(t),e.oxw(2).requestHeaderChange(o)}),e.qZA(),e.qZA(),e.TgZ(14,"div",60),e.TgZ(15,"button",61),e.NdJ("click",function(){const a=e.CHM(t).index;return e.oxw(2).removeRequestHeader(a)}),e._UZ(16,"i",62),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=s.$implicit;e.xp6(6),e.Q6J("ngModel",t.key),e.xp6(7),e.Q6J("ngModel",t.value)}}function he(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"form"),e.TgZ(2,"div",9),e.TgZ(3,"label",10),e._uU(4,"Method"),e.qZA(),e.TgZ(5,"div",11),e.TgZ(6,"select",12),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().restSink.method=o}),e.TgZ(7,"option",13),e._uU(8,"GET"),e.qZA(),e.TgZ(9,"option",14),e._uU(10,"POST"),e.qZA(),e.TgZ(11,"option",15),e._uU(12,"PUT"),e.qZA(),e.TgZ(13,"option",16),e._uU(14,"DELETE"),e.qZA(),e.TgZ(15,"option",17),e._uU(16,"PATCH"),e.qZA(),e.TgZ(17,"option",18),e._uU(18,"HEAD"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",19),e.TgZ(20,"label",10),e._uU(21,"URL"),e.qZA(),e.TgZ(22,"div",11),e.TgZ(23,"input",20),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().restSink.url=o}),e.qZA(),e.TgZ(24,"div",21),e.TgZ(25,"small"),e.SDv(26,22),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",9),e.TgZ(28,"label",10),e._uU(29,"BodyType"),e.qZA(),e.TgZ(30,"div",11),e.TgZ(31,"select",23),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().restSink.bodyType=o}),e.TgZ(32,"option",24),e._uU(33,"none"),e.qZA(),e.TgZ(34,"option",25),e._uU(35,"json"),e.qZA(),e.TgZ(36,"option",26),e._uU(37,"text"),e.qZA(),e.TgZ(38,"option",27),e._uU(39,"html"),e.qZA(),e.TgZ(40,"option",28),e._uU(41,"xml"),e.qZA(),e.TgZ(42,"option",29),e._uU(43,"javascript"),e.qZA(),e.TgZ(44,"option",30),e._uU(45,"form"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",9),e.TgZ(47,"label",10),e._uU(48,"Headers"),e.qZA(),e.TgZ(49,"div",11),e.TgZ(50,"div",0),e.TgZ(51,"div",6),e.TgZ(52,"p",31),e._UZ(53,"span",32),e.TgZ(54,"span",33),e.NdJ("click",function(){return e.CHM(t),e.oxw().addRequestHeader()}),e.SDv(55,34),e.qZA(),e.qZA(),e.YNc(56,Ee,17,2,"div",35),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"div",9),e.TgZ(58,"label",10),e.TgZ(59,"span",36),e._uU(60,"timeout"),e.qZA(),e._UZ(61,"span",37),e.qZA(),e.TgZ(62,"div",11),e.TgZ(63,"input",38),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().restSink.timeout=o}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(64,"div",9),e.TgZ(65,"label",10),e.TgZ(66,"span",36),e._uU(67,"DebugResp"),e.qZA(),e._UZ(68,"span",39),e.qZA(),e.TgZ(69,"div",11),e.TgZ(70,"select",40),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().restSink.debugResp=o}),e.TgZ(71,"option",41),e._uU(72,"false"),e.qZA(),e.TgZ(73,"option",41),e._uU(74,"true"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(75,"div",9),e.TgZ(76,"label",10),e.TgZ(77,"span",36),e._uU(78,"sendSingle"),e.qZA(),e._UZ(79,"span",42),e.qZA(),e.TgZ(80,"div",11),e.TgZ(81,"select",43),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().restSink.sendSingle=o}),e.TgZ(82,"option",41),e._uU(83,"false"),e.qZA(),e.TgZ(84,"option",41),e._uU(85,"true"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(86,"div",9),e.TgZ(87,"label",10),e.TgZ(88,"span",36),e._uU(89,"dataTemplate"),e.qZA(),e._UZ(90,"span",44),e.qZA(),e.TgZ(91,"div",11),e.TgZ(92,"input",45),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().restSink.dataTemplate=o}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(93,"div",9),e.TgZ(94,"label",10),e._uU(95,"InsecureSkipVerify"),e.qZA(),e.TgZ(96,"div",11),e.TgZ(97,"select",46),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().restSink.insecureSkipVerify=o}),e.TgZ(98,"option",41),e._uU(99,"true"),e.qZA(),e.TgZ(100,"option",41),e._uU(101,"false"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(102,"div",9),e.TgZ(103,"label",10),e._uU(104,"CertificationPath"),e.qZA(),e.TgZ(105,"div",11),e.TgZ(106,"input",47),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().restSink.certificationPath=o}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(107,"div",9),e.TgZ(108,"label",10),e._uU(109,"PrivateKeyPath"),e.qZA(),e.TgZ(110,"div",11),e.TgZ(111,"input",48),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().restSink.privateKeyPath=o}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(112,"div",9),e.TgZ(113,"label",10),e._uU(114,"RootCaPath"),e.qZA(),e.TgZ(115,"div",11),e.TgZ(116,"input",49),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().restSink.rootCaPath=o}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(117,"div",9),e.TgZ(118,"label",10),e._uU(119,"Advanced Options"),e.qZA(),e.TgZ(120,"div",11),e.TgZ(121,"app-sink-base-properties",50),e.NdJ("sinkBasePropertiesChange",function(o){return e.CHM(t),e.oxw().onSinkBasePropertiesChange(o)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.restSink.method),e.xp6(17),e.ekj("is-invalid",!t.restSink.url)("is-valid",t.restSink.url),e.Q6J("ngModel",t.restSink.url),e.xp6(8),e.Q6J("ngModel",t.restSink.bodyType),e.xp6(25),e.Q6J("ngForOf",t.requestHeaderList),e.xp6(7),e.Q6J("ngModel",t.restSink.timeout),e.xp6(7),e.Q6J("ngModel",t.restSink.debugResp),e.xp6(1),e.Q6J("ngValue",!1),e.xp6(2),e.Q6J("ngValue",!0),e.xp6(8),e.Q6J("ngModel",t.restSink.sendSingle),e.xp6(1),e.Q6J("ngValue",!1),e.xp6(2),e.Q6J("ngValue",!0),e.xp6(8),e.Q6J("ngModel",t.restSink.dataTemplate),e.xp6(5),e.Q6J("ngModel",t.restSink.insecureSkipVerify),e.xp6(1),e.Q6J("ngValue",!0),e.xp6(2),e.Q6J("ngValue",!1),e.xp6(6),e.Q6J("ngModel",t.restSink.certificationPath),e.xp6(5),e.Q6J("ngModel",t.restSink.privateKeyPath),e.xp6(5),e.Q6J("ngModel",t.restSink.rootCaPath),e.xp6(5),e.Q6J("sinkBaseProperties",t.sinkBaseProperties)}}let Ze=(()=>{class i{constructor(){this.SVC_TYPE_COMMAND="command",this.SVC_TYPE_CUSTOM="custom",this.templateTypeSelected=this.SVC_TYPE_COMMAND,this.sinkBaseProperties={},this.restSinkChange=new e.vpe,this.requestHeaderList=[],this._restSink={method:"GET",bodyType:"json",debugResp:!1,insecureSkipVerify:!0,timeout:5e3,sendSingle:!1,dataTemplate:""}}get restSink(){return this._restSink}set restSink(t){Object.assign(this._restSink,t)}ngOnInit(){if(Object.assign(this.sinkBaseProperties,this.restSink),this.restSink.headers)for(const[t,n]of Object.entries(this.restSink.headers))this.requestHeaderList.push({key:t,value:n});this.renderPopoverComponent()}ngOnChanges(){this.restSinkChange.emit(this.restSink)}ngAfterViewInit(){}renderPopoverComponent(){$('[data-toggle="popover"]').popover({trigger:"hover"})}templateTypeToggle(t){this.templateTypeSelected=t,window.setTimeout(()=>{this.renderPopoverComponent()},1e3)}requestHeaderChange(t){this.headersResovler()}headersResovler(){let t={};this.requestHeaderList.forEach(n=>{t[`${n.key}`]=`${n.value}`}),this.restSink.headers=t,this.restSinkChange.emit(this.restSink)}addRequestHeader(){this.requestHeaderList.push({key:"",value:""})}removeRequestHeader(t,n){this.requestHeaderList.splice(t,1),this.headersResovler()}onSinkBasePropertiesChange(t){Object.assign(this.restSink,t)}onCmdSvcTemplateInfoChange(t){this.getValuesSettingAllOfCommandTemplate()}getValuesSettingAllOfCommandTemplate(){this.restSink.method=this.cmdSvcTemplate.getHttpMethod(),this.restSink.url=this.cmdSvcTemplate.getUrl(),this.restSink.dataTemplate=this.cmdSvcTemplate.getRequestBodyJSONStr()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-rest-sink"]],viewQuery:function(t,n){if(1&t&&e.Gf(I,5),2&t){let o;e.iGM(o=e.CRH())&&(n.cmdSvcTemplate=o.first)}},inputs:{restSink:"restSink"},outputs:{restSinkChange:"restSinkChange"},features:[e.TTD],decls:17,vars:10,consts:function(){let s,t;return s="the url can't be empty!",t="Add Headers KV",[[1,"card"],[1,"card-header"],[1,"fa","fa-tags","text-danger","mr-2"],[1,"font-weight-bold"],["role","button",1,"badge","badge-secondary","mr-2",3,"click"],[1,"fa","fa-square-o","mr-1"],[1,"card-body"],[4,"ngIf"],[3,"url","httpMethod","requestBodyJSONStr","cmdSvcInfoChange"],[1,"form-group","row"],[1,"col-sm-3","col-form-label","text-nowrap","text-truncate"],[1,"col-sm-9"],["name","method",1,"custom-select",3,"ngModel","ngModelChange"],["value","GET"],["value","POST"],["value","PUT"],["value","DELETE"],["value","PATCH"],["value","HEAD"],[1,"form-group","row","has-validation"],["type","text","name","url",1,"form-control",3,"ngModel","ngModelChange"],["id","ruleName",1,"invalid-feedback"],s,["name","bodyType",1,"custom-select",3,"ngModel","ngModelChange"],["value","none"],["value","json"],["value","text"],["value","html"],["value","xml"],["value","javascript"],["value","form"],[1,"badge","badge-secondary","font-weight-bold"],[1,"fa","fa-plus-circle","mr-2"],["role","button",1,"user-select-none",3,"click"],t,[4,"ngFor","ngForOf"],[1,"mr-2"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","The timeout (milliseconds) for a HTTP request, defaults to 5000 ms",1,"fa","fa-question-circle-o","fa-lg"],["type","number","name","timeout",1,"form-control",3,"ngModel","ngModelChange"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","Control if print the response information into the console. If set it to true, then print response; If set to false, then skip print log. The default is false.",1,"fa","fa-question-circle-o","fa-lg"],["name","debugResp",1,"custom-select",3,"ngModel","ngModelChange"],[3,"ngValue"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content",'The output messages are received as an array. This is indicate whether to send the results one by one. If false, the output message will be {"result":"${the string of received message}"}. For example, {"result":"[{\\"count\\":30},"\\"count\\":20}]"}. Otherwise, the result message will be sent one by one with the actual field name. For the same example as above, it will send {"count":30}, then send {"count":20} to the RESTful endpoint.Default to false.',1,"fa","fa-question-circle-o","fa-lg"],["name","sendSingle",1,"custom-select",3,"ngModel","ngModelChange"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","here be treated as http post or put RequestBody,The golang template format string to specify the output data format. The input of the template is the sink message which is always an array of map. If no data template is specified, the raw input will be the data.",1,"fa","fa-question-circle-o","fa-lg"],["type","text","name","dataTemplate",1,"form-control",3,"ngModel","ngModelChange"],["name","insecureSkipVerify",1,"custom-select",3,"ngModel","ngModelChange"],["type","text","name","certificationPath",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","privateKeyPath",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","rootCaPath",1,"form-control",3,"ngModel","ngModelChange"],[3,"sinkBaseProperties","sinkBasePropertiesChange"],[1,"form-inline","mb-1"],[1,"input-group","mb-1"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","name","headerKey",1,"form-control",2,"width","200px","min-width","200px",3,"ngModel","ngModelChange"],[1,"input-group","mx-2"],[1,"fa","fa-long-arrow-right"],[1,"input-group"],["type","text","name","headerValue",1,"form-control",2,"width","200px","min-width","200px",3,"ngModel","ngModelChange"],[1,"input-group","ml-2"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"i",2),e.TgZ(3,"span",3),e._uU(4,"REST Sink"),e.qZA(),e.qZA(),e.TgZ(5,"div",1),e.TgZ(6,"span",4),e.NdJ("click",function(){return n.templateTypeToggle(n.SVC_TYPE_COMMAND)}),e._UZ(7,"i",5),e.TgZ(8,"span"),e._uU(9,"EdgeXCommandServiceTemplate"),e.qZA(),e.qZA(),e.TgZ(10,"span",4),e.NdJ("click",function(){return n.templateTypeToggle(n.SVC_TYPE_CUSTOM)}),e._UZ(11,"i",5),e.TgZ(12,"span"),e._uU(13,"CustomHttpServiceTemplate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",6),e.YNc(15,fe,2,3,"div",7),e.YNc(16,he,122,23,"div",7),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.ekj("badge-info",n.templateTypeSelected===n.SVC_TYPE_COMMAND),e.xp6(1),e.ekj("fa-check-square",n.templateTypeSelected===n.SVC_TYPE_COMMAND),e.xp6(3),e.ekj("badge-info",n.templateTypeSelected===n.SVC_TYPE_CUSTOM),e.xp6(1),e.ekj("fa-check-square",n.templateTypeSelected===n.SVC_TYPE_CUSTOM),e.xp6(4),e.Q6J("ngIf",n.templateTypeSelected===n.SVC_TYPE_COMMAND),e.xp6(1),e.Q6J("ngIf",n.templateTypeSelected===n.SVC_TYPE_CUSTOM))},directives:[p.O5,I,r._Y,r.JL,r.F,r.EJ,r.JJ,r.On,r.YN,r.Kr,r.Fj,p.sg,r.wV,C],styles:[""]}),i})(),Ae=(()=>{class i{constructor(){this.sinkBaseProperties={},this.logSinkChange=new e.vpe,this._logSink={sendSingle:!1}}get logSink(){return this._logSink}set logSink(t){Object.assign(this._logSink,t)}ngOnInit(){Object.assign(this.sinkBaseProperties,this.logSink),this.renderPopoverComponent()}ngOnChanges(){this.logSinkChange.emit(this.logSink)}renderPopoverComponent(){$('[data-toggle="popover"]').popover({trigger:"hover"})}onSinkBasePropertiesChange(t){Object.assign(this.logSink,t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-log-sink"]],inputs:{logSink:"logSink"},outputs:{logSinkChange:"logSinkChange"},features:[e.TTD],decls:35,vars:5,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-tags","text-danger","mr-2"],[1,"font-weight-bold"],[1,"card-body"],[1,"text-info","mb-2"],[1,"fa","fa-info-circle","mr-1"],[1,"form-group","row"],[1,"col-sm-3","col-form-label","text-nowrap","text-truncate"],[1,"mr-2"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content",'The output messages are received as an array. This is indicate whether to send the results one by one. If false, the output message will be {"result":"${the string of received message}"}. For example, {"result":"[{\\"count\\":30},"\\"count\\":20}]"}. Otherwise, the result message will be sent one by one with the actual field name. For the same example as above, it will send {"count":30}, then send {"count":20} to the RESTful endpoint.Default to false.',1,"fa","fa-question-circle-o","fa-lg"],[1,"col-sm-9"],["name","sendSingle",1,"custom-select",3,"ngModel","ngModelChange"],[3,"ngValue"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","here is treated as mqtt payload, The golang template format string to specify the output data format. The input of the template is the sink message which is always an array of map. If no data template is specified, the raw input will be the data.",1,"fa","fa-question-circle-o","fa-lg"],["type","text","name","dataTemplate",1,"form-control",3,"ngModel","ngModelChange"],[3,"sinkBaseProperties","sinkBasePropertiesChange"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"i",2),e.TgZ(3,"span",3),e._uU(4,"Log Sink"),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"p",5),e._UZ(7,"i",6),e._uU(8," The action is used for print output message into log file, the log file is at $eKuiper_install/log/stream.log by default."),e._UZ(9,"br"),e._uU(10," No properties can be specified for the action. "),e.qZA(),e.TgZ(11,"div",7),e.TgZ(12,"label",8),e.TgZ(13,"span",9),e._uU(14,"sendSingle"),e.qZA(),e._UZ(15,"span",10),e.qZA(),e.TgZ(16,"div",11),e.TgZ(17,"select",12),e.NdJ("ngModelChange",function(a){return n.logSink.sendSingle=a}),e.TgZ(18,"option",13),e._uU(19,"false"),e.qZA(),e.TgZ(20,"option",13),e._uU(21,"true"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",7),e.TgZ(23,"label",8),e.TgZ(24,"span",9),e._uU(25,"dataTemplate"),e.qZA(),e._UZ(26,"span",14),e.qZA(),e.TgZ(27,"div",11),e.TgZ(28,"input",15),e.NdJ("ngModelChange",function(a){return n.logSink.dataTemplate=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"form"),e.TgZ(30,"div",7),e.TgZ(31,"label",8),e._uU(32,"Advanced Options"),e.qZA(),e.TgZ(33,"div",11),e.TgZ(34,"app-sink-base-properties",16),e.NdJ("sinkBasePropertiesChange",function(a){return n.onSinkBasePropertiesChange(a)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(17),e.Q6J("ngModel",n.logSink.sendSingle),e.xp6(1),e.Q6J("ngValue",!1),e.xp6(2),e.Q6J("ngValue",!0),e.xp6(8),e.Q6J("ngModel",n.logSink.dataTemplate),e.xp6(6),e.Q6J("sinkBaseProperties",n.sinkBaseProperties))},directives:[r.EJ,r.JJ,r.On,r.YN,r.Kr,r.Fj,r._Y,r.JL,r.F,C],styles:[""]}),i})();function Ce(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"li",9),e.TgZ(1,"span",10),e._uU(2),e.qZA(),e.TgZ(3,"span",11),e.TgZ(4,"span",12),e.NdJ("click",function(){const o=e.CHM(t),a=o.$implicit,l=o.index;return e.oxw(2).editSinkTransfer(a,l)}),e._UZ(5,"i",13),e.qZA(),e.TgZ(6,"span",14),e.NdJ("click",function(){const o=e.CHM(t),a=o.$implicit,l=o.index;return e.oxw(2).deleteSink(a,l)}),e._UZ(7,"i",15),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=s.$implicit,n=s.index,o=e.oxw(2);e.ekj("list-group-item-light",n!==o.selectedSinkIndex)("list-group-item-secondary",n===o.selectedSinkIndex),e.xp6(2),e.Oqu(o.getSinkTypeOfAction(t))}}function Me(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"p",2),e.TgZ(2,"span",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().addSinkTransfer()}),e._UZ(3,"span",4),e.TgZ(4,"span",5),e.SDv(5,6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"ul",7),e.YNc(7,Ce,8,5,"li",8),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",t.ruleActions)}}function ve(i,s){1&i&&(e.TgZ(0,"span",33),e._uU(1,"Edit Sink"),e.qZA())}function Ne(i,s){if(1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",32),e.TgZ(2,"span",33),e._uU(3,"Add Sink"),e.qZA(),e.YNc(4,ve,2,0,"span",34),e.qZA()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngIf",t.sinkAddOrEditOperation===t.sinkOperation_EDIT)}}function qe(i,s){1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",35),e.TgZ(2,"span",33),e._uU(3,"Edit Sink"),e.qZA(),e.qZA())}function Re(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addOneNewSink()}),e._uU(1,"Add"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!t.validate())}}function be(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).updateSink()}),e._uU(1,"Update"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!t.validate())}}function Le(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"app-edgex-sink",37),e.NdJ("edgeXSinkChange",function(o){return e.CHM(t),e.oxw(2).edgeXSink=o}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("edgeXSink",t.edgeXSink)}}function Ie(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"app-mqtt-sink",38),e.NdJ("mqttSinkChange",function(o){return e.CHM(t),e.oxw(2).mqttSink=o}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("mqttSink",t.mqttSink)}}function ke(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"app-rest-sink",39),e.NdJ("restSinkChange",function(o){return e.CHM(t),e.oxw(2).restSink=o}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("restSink",t.restSink)}}function Ue(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"app-log-sink",40),e.NdJ("logSinkChange",function(o){return e.CHM(t),e.oxw(2).logSink=o}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("logSink",t.logSink)}}function Pe(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",16),e.TgZ(1,"div",17),e.YNc(2,Ne,5,1,"span",0),e.YNc(3,qe,4,0,"span",0),e.TgZ(4,"span",11),e.YNc(5,Re,2,1,"button",18),e.YNc(6,be,2,1,"button",18),e.TgZ(7,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancel()}),e._uU(8,"Cancel"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",20),e.TgZ(10,"form",21),e.TgZ(11,"div",22),e.TgZ(12,"label",23),e.SDv(13,24),e.qZA(),e.TgZ(14,"div",25),e.TgZ(15,"select",26),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().selectedSinkType=o}),e.TgZ(16,"option",27),e._uU(17),e.qZA(),e.TgZ(18,"option",27),e._uU(19),e.qZA(),e.TgZ(20,"option",27),e._uU(21),e.qZA(),e.TgZ(22,"option",27),e._uU(23),e.qZA(),e.qZA(),e.TgZ(24,"div",28),e.TgZ(25,"small"),e.SDv(26,29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",30),e.YNc(28,Le,2,1,"div",31),e.YNc(29,Ie,2,1,"div",31),e.YNc(30,ke,2,1,"div",31),e.YNc(31,Ue,2,1,"div",31),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.sinkAddOrEditOperation===t.sinkOperation_ADD),e.xp6(1),e.Q6J("ngIf",t.sinkAddOrEditOperation===t.sinkOperation_EDIT),e.xp6(2),e.Q6J("ngIf",t.sinkAddOrEditOperation===t.sinkOperation_ADD),e.xp6(1),e.Q6J("ngIf",t.sinkAddOrEditOperation===t.sinkOperation_EDIT),e.xp6(9),e.ekj("is-invalid",!t.selectedSinkType),e.Q6J("ngModel",t.selectedSinkType),e.xp6(1),e.s9C("value",t.EdgeX_SINK),e.xp6(1),e.Oqu(t.EdgeX_SINK),e.xp6(1),e.s9C("value",t.MQTT_SINK),e.xp6(1),e.Oqu(t.MQTT_SINK),e.xp6(1),e.s9C("value",t.REST_SINK),e.xp6(1),e.Oqu(t.REST_SINK),e.xp6(1),e.s9C("value",t.LOG_SINK),e.xp6(1),e.Oqu(t.LOG_SINK),e.xp6(4),e.Q6J("ngSwitch",t.selectedSinkType),e.xp6(1),e.Q6J("ngSwitchCase",t.EdgeX_SINK),e.xp6(1),e.Q6J("ngSwitchCase",t.MQTT_SINK),e.xp6(1),e.Q6J("ngSwitchCase",t.REST_SINK),e.xp6(1),e.Q6J("ngSwitchCase",t.LOG_SINK)}}let k=(()=>{class i{constructor(){this.EdgeX_SINK="edgex",this.MQTT_SINK="mqtt",this.REST_SINK="rest",this.LOG_SINK="log",this.NOP_SINK="nop",this.ruleActionsChange=new e.vpe,this.edgeXSink={},this.mqttSink={},this.restSink={},this.nopSink={},this.logSink={},this.selectedSinkIndex=-1,this.selectedSinkType="",this.sinkAddOrEditStatus=!1,this.sinkOperation_ADD="add",this.sinkOperation_EDIT="edit",this.sinkAddOrEditOperation="",this.updateTimestamp="",this._ruleActions=[]}get ruleActions(){return this._ruleActions}set ruleActions(t){!t||(this._ruleActions=t)}ngOnInit(){}ngOnChanges(){this.ruleActionsChange.emit(this.ruleActions)}resetSinksConcreteAll(){this.edgeXSink={},this.mqttSink={},this.restSink={},this.nopSink={},this.logSink={}}getSinkTypeOfAction(t){let n=Object.keys(t);return 0===n.length?"":n[0]}getSinkByType(t){let n={};switch(t){case this.EdgeX_SINK:n.edgex=this.edgeXSink;break;case this.MQTT_SINK:n.mqtt=this.mqttSink;break;case this.REST_SINK:n.rest=this.restSink;break;case this.LOG_SINK:n.log=this.logSink;break;default:n.nop=this.nopSink}return n}sinkConcreteExtractor(t){let n=this.getSinkTypeOfAction(t);switch(this.selectedSinkType=n,n){case this.EdgeX_SINK:this.edgeXSink=t.edgex;break;case this.MQTT_SINK:this.mqttSink=t.mqtt;break;case this.REST_SINK:this.restSink=t.rest;break;case this.LOG_SINK:this.logSink=t.log;break;default:this.nopSink=t.nop}}addSinkTransfer(){this.sinkAddOrEditStatus=!0,this.sinkAddOrEditOperation=this.sinkOperation_ADD,this.selectedSinkIndex=-1,this.selectedSinkType="",this.resetSinksConcreteAll()}editSinkTransfer(t,n){this.sinkAddOrEditStatus=!0,this.sinkAddOrEditOperation=this.sinkOperation_EDIT,this.selectedSinkIndex=n,this.sinkConcreteExtractor(t),this.selectedSinkType=this.getSinkTypeOfAction(t)}addOneNewSink(){this.ruleActions.push(this.getSinkByType(this.selectedSinkType)),this.sinkAddOrEditStatus=!1}updateSink(){this.ruleActions.splice(this.selectedSinkIndex,1,this.getSinkByType(this.selectedSinkType)),this.sinkAddOrEditStatus=!1}deleteSink(t,n){this.ruleActions.splice(n,1),this.selectedSinkIndex=-1}cancel(){this.sinkAddOrEditStatus=!1}validate(){if(!this.selectedSinkType)return!1;switch(this.selectedSinkType){case this.MQTT_SINK:if(!this.mqttSink.server||!this.mqttSink.topic)return!1;break;case this.REST_SINK:if(!this.restSink.url)return!1}return!0}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-sink-list"]],inputs:{ruleActions:"ruleActions"},outputs:{ruleActionsChange:"ruleActionsChange"},features:[e.TTD],decls:2,vars:2,consts:function(){let s,t,n;return s="Add Sink",t="Sink Type",n="please select a valid Sink Type !",[[4,"ngIf"],["class","card",4,"ngIf"],[1,"badge","badge-secondary","font-weight-bold"],[3,"click"],[1,"fa","fa-plus-circle","mr-1"],["role","button",1,"user-select-none"],s,[1,"list-group"],["class","list-group-item list-group-item-action ",3,"list-group-item-light","list-group-item-secondary",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action"],[1,"text-dark","mr-2"],[1,"float-right"],["role","button",1,"badge","badge-info","mr-2",3,"click"],[1,"fa","fa-edit"],["role","button",1,"badge","badge-danger",3,"click"],[1,"fa","fa-trash"],[1,"card"],[1,"card-header","p-2"],["class","btn btn-success btn-sm mr-2",3,"disabled","click",4,"ngIf"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"card-body"],[1,"mb-2"],[1,"form-group","row"],[1,"col-sm-3","col-form-label","text-nowrap","text-truncate"],t,[1,"col-sm-9"],["name","SinkType",1,"custom-select",3,"ngModel","ngModelChange"],[3,"value"],["id","validationSinkTypeFeedback",1,"invalid-feedback"],n,[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"fa","fa-plus","mr-2","text-info"],[1,"font-weight-bold"],["class","font-weight-bold",4,"ngIf"],[1,"fa","fa-edit","mr-2","text-info"],[1,"btn","btn-success","btn-sm","mr-2",3,"disabled","click"],[3,"edgeXSink","edgeXSinkChange"],[3,"mqttSink","mqttSinkChange"],[3,"restSink","restSinkChange"],[3,"logSink","logSinkChange"]]},template:function(t,n){1&t&&(e.YNc(0,Me,8,1,"div",0),e.YNc(1,Pe,32,20,"div",1)),2&t&&(e.Q6J("ngIf",!n.sinkAddOrEditStatus),e.xp6(1),e.Q6J("ngIf",n.sinkAddOrEditStatus))},directives:[p.O5,p.sg,r._Y,r.JL,r.F,r.EJ,r.JJ,r.On,r.YN,r.Kr,p.RF,p.n9,ie,ae,Ze,Ae],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),i})();function Oe(i,s){1&i&&e._UZ(0,"i",29)}function ye(i,s){1&i&&e._UZ(0,"i",30)}let U=(()=>{class i{constructor(){this.collapseToggleStatus=!1,this.ruleOptionsChange=new e.vpe,this._ruleOptions={isEventTime:!1,sendMetaToSink:!1,sendError:!0,qos:0}}get ruleOptions(){return this._ruleOptions}set ruleOptions(t){Object.assign(this._ruleOptions,t)}ngOnInit(){}ngOnChanges(){this.ruleOptionsChange.emit(this.ruleOptions)}collapseToggle(t){this.collapseToggleStatus=!this.collapseToggleStatus}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-rule-advanced-options"]],inputs:{ruleOptions:"ruleOptions"},outputs:{ruleOptionsChange:"ruleOptionsChange"},features:[e.TTD],decls:84,vars:19,consts:[[1,"card"],["role","button","data-toggle","collapse","data-target","#clllapse-rule-opts","aria-expanded","false","aria-controls","clllapse-rule-opts",1,"card-header",3,"click"],[1,"fa","fa-tags","text-primary","mr-2"],[1,"font-weight-bold","text-primary"],[1,"text-primary","ml-2"],["aria-disabled","true","class","fa fa-angle-double-down fa-lg","data-toggle","collapse","data-target","#clllapse-rule-opts","aria-expanded","false","aria-controls","clllapse-rule-opts",4,"ngIf"],["aria-disabled","true","class","fa fa-angle-double-up fa-lg","data-toggle","collapse","data-target","#clllapse-rule-opts","aria-expanded","false","aria-controls","clllapse-rule-opts",4,"ngIf"],["id","clllapse-rule-opts",1,"card-body","collapse"],[1,"form-group","row"],[1,"col-sm-3","col-form-label","text-nowrap","text-truncate"],[1,"mr-2"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","Whether to use event time or processing time as the timestamp for an event. If event time is used, the timestamp will be extracted from the payload. The timestamp filed must be specified by the stream definition.",1,"fa","fa-question-circle-o","fa-lg"],[1,"col-sm-9"],["name","isEventTime",1,"custom-select",3,"ngModel","ngModelChange"],[3,"ngValue"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","Specify the qos of the stream. The options are 0: At most once; 1: At least once and 2: Exactly once. If qos is bigger than 0, the checkpoint mechanism will be activated to save states periodically so that the rule can be resumed from errors.",1,"fa","fa-question-circle-o","fa-lg"],["name","SkipCertVerify",1,"custom-select",3,"ngModel","ngModelChange"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","When working with event-time windowing, it can happen that elements arrive late. LateTolerance can specify by how much time(unit is millisecond) elements can be late before they are dropped. By default, the value is 0 which means late elements are dropped.",1,"fa","fa-question-circle-o","fa-lg"],["type","number","name","lateTolerance",1,"form-control",3,"ngModel","ngModelChange"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","A rule is processed by several phases of plans according to the sql statement. This option will specify how many instances will be run for each plan. If the value is bigger than 1, the order of the messages may not be retained.",1,"fa","fa-question-circle-o","fa-lg"],["type","number","name","concurrency",1,"form-control",3,"ngModel","ngModelChange"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","Specify how many messages can be buffered in memory for each plan. If the buffered messages exceed the limit, the plan will block message receiving until the buffered messages have been sent out so that the buffered size is less than the limit. A bigger value will accommodate more throughput but will also take up more memory footprint.",1,"fa","fa-question-circle-o","fa-lg"],["type","number","name","bufferLength",1,"form-control",3,"ngModel","ngModelChange"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","Specify the time interval in milliseconds to trigger a checkpoint. This is only effective when qos is bigger than 0.",1,"fa","fa-question-circle-o","fa-lg"],["type","number","name","checkpointInterval",1,"form-control",3,"ngModel","ngModelChange"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","Specify whether the meta data of an event will be sent to the sink. If true, the sink can get te meta data information.",1,"fa","fa-question-circle-o","fa-lg"],["name","sendMetaToSink",1,"custom-select",3,"ngModel","ngModelChange"],["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","Whether to send the error to sink. If true, any runtime error will be sent through the whole rule into sinks. Otherwise, the error will only be printed out in the log.",1,"fa","fa-question-circle-o","fa-lg"],["name","sendError",1,"custom-select",3,"ngModel","ngModelChange"],["aria-disabled","true","data-toggle","collapse","data-target","#clllapse-rule-opts","aria-expanded","false","aria-controls","clllapse-rule-opts",1,"fa","fa-angle-double-down","fa-lg"],["aria-disabled","true","data-toggle","collapse","data-target","#clllapse-rule-opts","aria-expanded","false","aria-controls","clllapse-rule-opts",1,"fa","fa-angle-double-up","fa-lg"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.NdJ("click",function(a){return n.collapseToggle(a)}),e._UZ(2,"i",2),e.TgZ(3,"span",3),e._uU(4,"Rule Advanced Options"),e.qZA(),e.TgZ(5,"span",4),e.YNc(6,Oe,1,0,"i",5),e.YNc(7,ye,1,0,"i",6),e.qZA(),e.qZA(),e.TgZ(8,"div",7),e.TgZ(9,"form"),e.TgZ(10,"div",8),e.TgZ(11,"label",9),e.TgZ(12,"span",10),e._uU(13,"IsEventTime"),e.qZA(),e._UZ(14,"span",11),e.qZA(),e.TgZ(15,"div",12),e.TgZ(16,"select",13),e.NdJ("ngModelChange",function(a){return n.ruleOptions.isEventTime=a}),e.TgZ(17,"option",14),e._uU(18,"false"),e.qZA(),e.TgZ(19,"option",14),e._uU(20,"true"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",8),e.TgZ(22,"label",9),e.TgZ(23,"span",10),e._uU(24,"Qos"),e.qZA(),e._UZ(25,"span",15),e.qZA(),e.TgZ(26,"div",12),e.TgZ(27,"select",16),e.NdJ("ngModelChange",function(a){return n.ruleOptions.qos=a}),e.TgZ(28,"option",14),e._uU(29,"0"),e.qZA(),e.TgZ(30,"option",14),e._uU(31,"1"),e.qZA(),e.TgZ(32,"option",14),e._uU(33,"2"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",8),e.TgZ(35,"label",9),e.TgZ(36,"span",10),e._uU(37,"LateTolerance"),e.qZA(),e._UZ(38,"span",17),e.qZA(),e.TgZ(39,"div",12),e.TgZ(40,"input",18),e.NdJ("ngModelChange",function(a){return n.ruleOptions.lateTolerance=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",8),e.TgZ(42,"label",9),e.TgZ(43,"span",10),e._uU(44,"Concurrency"),e.qZA(),e._UZ(45,"span",19),e.qZA(),e.TgZ(46,"div",12),e.TgZ(47,"input",20),e.NdJ("ngModelChange",function(a){return n.ruleOptions.concurrency=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(48,"div",8),e.TgZ(49,"label",9),e.TgZ(50,"span",10),e._uU(51,"BufferLength"),e.qZA(),e._UZ(52,"span",21),e.qZA(),e.TgZ(53,"div",12),e.TgZ(54,"input",22),e.NdJ("ngModelChange",function(a){return n.ruleOptions.bufferLength=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(55,"div",8),e.TgZ(56,"label",9),e.TgZ(57,"span",10),e._uU(58,"CheckpointInterval"),e.qZA(),e._UZ(59,"span",23),e.qZA(),e.TgZ(60,"div",12),e.TgZ(61,"input",24),e.NdJ("ngModelChange",function(a){return n.ruleOptions.checkpointInterval=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(62,"div",8),e.TgZ(63,"label",9),e.TgZ(64,"span",10),e._uU(65,"SendMetaToSink"),e.qZA(),e._UZ(66,"span",25),e.qZA(),e.TgZ(67,"div",12),e.TgZ(68,"select",26),e.NdJ("ngModelChange",function(a){return n.ruleOptions.sendMetaToSink=a}),e.TgZ(69,"option",14),e._uU(70,"false"),e.qZA(),e.TgZ(71,"option",14),e._uU(72,"true"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(73,"div",8),e.TgZ(74,"label",9),e.TgZ(75,"span",10),e._uU(76,"SendError"),e.qZA(),e._UZ(77,"span",27),e.qZA(),e.TgZ(78,"div",12),e.TgZ(79,"select",28),e.NdJ("ngModelChange",function(a){return n.ruleOptions.sendError=a}),e.TgZ(80,"option",14),e._uU(81,"false"),e.qZA(),e.TgZ(82,"option",14),e._uU(83,"true"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("ngIf",!n.collapseToggleStatus),e.xp6(1),e.Q6J("ngIf",n.collapseToggleStatus),e.xp6(9),e.Q6J("ngModel",n.ruleOptions.isEventTime),e.xp6(1),e.Q6J("ngValue",!1),e.xp6(2),e.Q6J("ngValue",!0),e.xp6(8),e.Q6J("ngModel",n.ruleOptions.qos),e.xp6(1),e.Q6J("ngValue",0),e.xp6(2),e.Q6J("ngValue",1),e.xp6(2),e.Q6J("ngValue",2),e.xp6(8),e.Q6J("ngModel",n.ruleOptions.lateTolerance),e.xp6(7),e.Q6J("ngModel",n.ruleOptions.concurrency),e.xp6(7),e.Q6J("ngModel",n.ruleOptions.bufferLength),e.xp6(7),e.Q6J("ngModel",n.ruleOptions.checkpointInterval),e.xp6(7),e.Q6J("ngModel",n.ruleOptions.sendMetaToSink),e.xp6(1),e.Q6J("ngValue",!1),e.xp6(2),e.Q6J("ngValue",!0),e.xp6(8),e.Q6J("ngModel",n.ruleOptions.sendError),e.xp6(1),e.Q6J("ngValue",!1),e.xp6(2),e.Q6J("ngValue",!0))},directives:[p.O5,r._Y,r.JL,r.F,r.EJ,r.JJ,r.On,r.YN,r.Kr,r.wV,r.Fj],styles:[""]}),i})();function xe(i,s){1&i&&(e.TgZ(0,"span",40),e._UZ(1,"i",41),e.TgZ(2,"span"),e.SDv(3,42),e.qZA(),e.qZA())}function $e(i,s){1&i&&(e.TgZ(0,"span",40),e._UZ(1,"i",41),e.TgZ(2,"span"),e.SDv(3,43),e.qZA(),e.qZA())}let De=(()=>{class i{constructor(t,n,o,a){this.ruleSvc=t,this.msgSvc=n,this.router=o,this.route=a,this.ruleSql="",this.SQL_CUSTOM_KEYWORDS=["CONCAT","concat"],this.rule={}}ngOnInit(){this.sqlEditorRender(),$(function(){$('[data-toggle="tooltip"]').tooltip()}),this.renderPopoverComponent()}renderPopoverComponent(){$('[data-toggle="popover"]').popover({trigger:"hover"})}sqlEditorRender(){let t=document.getElementById("sql-editor");this.SQL_CUSTOM_KEYWORDS.forEach(n=>{CodeMirror.resolveMode("text/x-pgsql").keywords[n]=!0}),this.sqlEditor=CodeMirror.fromTextArea(t,{mode:"text/x-pgsql",tabSize:4,theme:"gruvbox-dark",lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],autofocus:!0,matchBrackets:!0,styleActiveLine:!0,cursorHeight:.85}),this.sqlEditor.setSize("auto","500px"),this.sqlEditor.on("drop",(n,o)=>{}),this.sqlEditor.on("paste",(n,o)=>{}),this.sqlEditor.on("keyup",(n,o)=>{o.keyCode>=65&&o.keyCode<=90&&n.showHint({completeSingle:!1})})}formatSql(){let t="";t=this.sqlEditor.getValue(),this.sqlEditor.setValue(sqlFormatter.format(t,{language:"postgresql"}))}validate(){return!(!this.rule.id||!this.sqlEditor.getValue()||!this.rule.actions||0===this.rule.actions.length)}submit(){this.rule.sql=this.sqlEditor.getValue(),this.ruleSvc.addRule(this.rule).subscribe(()=>{this.msgSvc.success("Add rule",`Name: ${this.rule.id}`),this.router.navigate(["../rules-list"],{relativeTo:this.route})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(E.n),e.Y36(h.e),e.Y36(c.F0),e.Y36(c.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-rules"]],decls:59,vars:18,consts:function(){let s,t,n,o,a,l,d,m,g,u,S;return s="Add Rule",t="Submit",n="Name",o="the rule name can't be empty!",a="RuleSQL",l="SQL Editor",d="Action",m="Add Action",g="Options",u="SQL can't be empty!",S="at least one rule action required!",[[1,"card"],[1,"card-header"],[1,"fa","fa-plus","mr-1","text-danger"],[1,"font-weight-bold"],s,[1,"btn","btn-success","btn-sm","float-right",3,"disabled","click"],[1,"fa","fa-save","mr-1"],t,[1,"card-body","p-0"],[1,"px-5","py-4"],[1,"form-group","row","has-validation"],["for","ruleName",1,"col-md-2","col-form-label"],[1,"mr-2"],n,["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","The identification of the rule. The rule name cannot be duplicated in the same Kuiper instance.",1,"fa","fa-question-circle-o","fa-lg"],[1,"col-md-10"],["type","text","id","ruleName","name","ruleId",1,"form-control",3,"ngModel","ngModelChange"],["id","ruleName",1,"invalid-feedback"],o,["for","ruleSql",1,"col-md-2","col-form-label"],a,["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content",'The sql query to run for the rule.The Table name must be your stream name.For example "SELECT EdgexStream.temperature, EdgexStream.temp FROM EdgexStream where EdgexStream.temperature > EdgexStream.temp ".',1,"fa","fa-question-circle-o","fa-lg"],[1,"card-header","p-2"],[1,"fa","fa-code","text-info","mr-2","font-weight-bolder"],l,["class","text-danger float-right",4,"ngIf"],[1,"card-header","bg-secondary","py-2"],[1,"text-light"],["role","button","data-toggle","tooltip","data-placement","top","title","formatter",1,"fa","fa-indent","fa-lg","mr-3",3,"click"],["id","sql-editor","name","sql-editor"],["for","ruleActions",1,"col-md-2","col-form-label"],d,["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","tips","data-content","where the sql result data sent to",1,"fa","fa-question-circle-o","fa-lg"],[1,"fa","fa-plus","mr-2","text-info"],m,[1,"card-body"],[3,"ruleActions","ruleActionsChange"],g,["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","tips","data-content","Advanced Options",1,"fa","fa-question-circle-o","fa-lg"],[3,"ruleOptions","ruleOptionsChange"],[1,"text-danger","float-right"],[1,"fa","fa-warning","mr-2"],u,S]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"i",2),e.TgZ(3,"span",3),e.SDv(4,4),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){return n.submit()}),e._UZ(6,"i",6),e.TgZ(7,"span"),e.SDv(8,7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"form",9),e.TgZ(11,"div",10),e.TgZ(12,"label",11),e.TgZ(13,"span",12),e.SDv(14,13),e.qZA(),e._UZ(15,"span",14),e.qZA(),e.TgZ(16,"div",15),e.TgZ(17,"input",16),e.NdJ("ngModelChange",function(a){return n.rule.id=a}),e.qZA(),e.TgZ(18,"div",17),e.TgZ(19,"small"),e.SDv(20,18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",10),e.TgZ(22,"label",19),e.TgZ(23,"span",12),e.SDv(24,20),e.qZA(),e._UZ(25,"span",21),e.qZA(),e.TgZ(26,"div",15),e.TgZ(27,"div",0),e.TgZ(28,"div",22),e._UZ(29,"i",23),e.TgZ(30,"span",3),e.SDv(31,24),e.qZA(),e.YNc(32,xe,4,0,"span",25),e.qZA(),e.TgZ(33,"div",26),e.TgZ(34,"span",27),e.TgZ(35,"i",28),e.NdJ("click",function(){return n.formatSql()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",8),e._UZ(37,"textarea",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",10),e.TgZ(39,"label",30),e.TgZ(40,"span",12),e.SDv(41,31),e.qZA(),e._UZ(42,"span",32),e.qZA(),e.TgZ(43,"div",15),e.TgZ(44,"div",0),e.TgZ(45,"div",1),e._UZ(46,"i",33),e.TgZ(47,"span",3),e.SDv(48,34),e.qZA(),e.YNc(49,$e,4,0,"span",25),e.qZA(),e.TgZ(50,"div",35),e.TgZ(51,"app-sink-list",36),e.NdJ("ruleActionsChange",function(a){return n.rule.actions=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(52,"div",10),e.TgZ(53,"label",19),e.TgZ(54,"span",12),e.SDv(55,37),e.qZA(),e._UZ(56,"span",38),e.qZA(),e.TgZ(57,"div",15),e.TgZ(58,"app-rule-advanced-options",39),e.NdJ("ruleOptionsChange",function(a){return n.rule.options=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("disabled",!n.validate()),e.xp6(12),e.ekj("is-invalid",!n.rule.id)("is-valid",n.rule.id),e.Q6J("ngModel",n.rule.id),e.xp6(11),e.ekj("border",!n.sqlEditor.getValue())("border-danger",!n.sqlEditor.getValue()),e.xp6(4),e.Q6J("ngIf",!n.sqlEditor.getValue()),e.xp6(13),e.ekj("border",!n.rule.actions||0===n.rule.actions.length)("border-danger",!n.rule.actions||0===n.rule.actions.length),e.xp6(4),e.Q6J("ngIf",!n.rule.actions||0===n.rule.actions.length),e.xp6(2),e.Q6J("ruleActions",n.rule.actions),e.xp6(7),e.Q6J("ruleOptions",n.rule.options))},directives:[r._Y,r.JL,r.F,r.Fj,r.JJ,r.On,p.O5,k,U],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),i})();function Je(i,s){1&i&&(e.TgZ(0,"span",40),e._UZ(1,"i",41),e.TgZ(2,"span"),e._uU(3,"SQL can't be empty!"),e.qZA(),e.qZA())}function we(i,s){1&i&&(e.TgZ(0,"span",40),e._UZ(1,"i",41),e.TgZ(2,"span"),e.SDv(3,42),e.qZA(),e.qZA())}let Ge=(()=>{class i{constructor(t,n,o,a){this.ruleSvc=t,this.msgSvc=n,this.router=o,this.route=a,this.ruleSql="",this.SQL_CUSTOM_KEYWORDS=["CONCAT","concat"],this.rule={}}ngOnInit(){this.route.queryParams.subscribe(t=>{t.ruleID&&this.getRuleByID(t.ruleID)}),this.sqlEditorRender(),$(function(){$('[data-toggle="tooltip"]').tooltip()}),this.renderPopoverComponent()}getRuleByID(t){this.ruleSvc.findRuleById(t).subscribe(n=>{this.rule=n,this.sqlEditor.setValue(this.rule.sql)})}renderPopoverComponent(){$('[data-toggle="popover"]').popover({trigger:"hover"})}sqlEditorRender(){let t=document.getElementById("sql-editor");this.SQL_CUSTOM_KEYWORDS.forEach(n=>{CodeMirror.resolveMode("text/x-pgsql").keywords[n]=!0}),this.sqlEditor=CodeMirror.fromTextArea(t,{mode:"text/x-pgsql",tabSize:4,theme:"gruvbox-dark",lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],autofocus:!0,matchBrackets:!0,styleActiveLine:!0,cursorHeight:.85}),this.sqlEditor.setSize("auto","500px"),this.sqlEditor.on("drop",(n,o)=>{}),this.sqlEditor.on("paste",(n,o)=>{}),this.sqlEditor.on("keyup",(n,o)=>{o.keyCode>=65&&o.keyCode<=90&&n.showHint({completeSingle:!1})})}formatSql(){let t="";t=this.sqlEditor.getValue(),this.sqlEditor.setValue(sqlFormatter.format(t,{language:"postgresql"}))}validate(){return!(!this.rule.id||!this.sqlEditor.getValue()||!this.rule.actions||0===this.rule.actions.length)}update(){this.rule.sql=this.sqlEditor.getValue(),this.ruleSvc.updateRule(this.rule).subscribe(()=>{this.msgSvc.success("update",`name: ${this.rule.id}`),this.router.navigate(["../rules-list"],{relativeTo:this.route})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(E.n),e.Y36(h.e),e.Y36(c.F0),e.Y36(c.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-rules"]],decls:59,vars:18,consts:function(){let s,t,n,o,a,l,d,m,g,u;return s="Edit Rule",t="Update",n="Name",o="the rule name can't be empty!",a="RuleSQL",l="SQL Editor",d="Action",m="Add Action",g="Options",u="at least one rule action required!",[[1,"card"],[1,"card-header"],[1,"fa","fa-plus","mr-1","text-danger"],[1,"font-weight-bold"],s,[1,"btn","btn-success","btn-sm","float-right",3,"disabled","click"],[1,"fa","fa-save","mr-1"],t,[1,"card-body","p-0"],[1,"px-5","py-4"],[1,"form-group","row","has-validation"],["for","ruleName",1,"col-md-2","col-form-label"],[1,"mr-2"],n,["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content","The identification of the rule. The rule name cannot be duplicated in the same Kuiper instance.",1,"fa","fa-question-circle-o","fa-lg"],[1,"col-md-10"],["type","text","id","ruleName","name","ruleId",1,"form-control",3,"ngModel","ngModelChange"],["id","ruleName",1,"invalid-feedback"],o,["for","ruleSql",1,"col-md-2","col-form-label"],a,["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","format tips","data-content",'The sql query to run for the rule.The Table name must be your stream name.For example "SELECT EdgexStream.temperature, EdgexStream.temp FROM EdgexStream where EdgexStream.temperature > EdgexStream.temp ".',1,"fa","fa-question-circle-o","fa-lg"],[1,"card-header","p-2"],[1,"fa","fa-code","text-info","mr-2","font-weight-bolder"],l,["class","text-danger float-right",4,"ngIf"],[1,"card-header","bg-secondary","py-2"],[1,"text-light"],["role","button","data-toggle","tooltip","data-placement","top","title","formatter",1,"fa","fa-indent","fa-lg","mr-3",3,"click"],["id","sql-editor","name","sql-editor"],["for","ruleActions",1,"col-md-2","col-form-label"],d,["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","tips","data-content","where the sql result data sent to",1,"fa","fa-question-circle-o","fa-lg"],[1,"fa","fa-plus","mr-2","text-info"],m,[1,"card-body"],[3,"ruleActions","ruleActionsChange"],g,["role","button","data-html","true","data-animation","true","data-trigger","focus","data-toggle","popover","title","tips","data-content","Advanced Options",1,"fa","fa-question-circle-o","fa-lg"],[3,"ruleOptions","ruleOptionsChange"],[1,"text-danger","float-right"],[1,"fa","fa-warning","mr-2"],u]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"i",2),e.TgZ(3,"span",3),e.SDv(4,4),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){return n.update()}),e._UZ(6,"i",6),e.TgZ(7,"span"),e.SDv(8,7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"form",9),e.TgZ(11,"div",10),e.TgZ(12,"label",11),e.TgZ(13,"span",12),e.SDv(14,13),e.qZA(),e._UZ(15,"span",14),e.qZA(),e.TgZ(16,"div",15),e.TgZ(17,"input",16),e.NdJ("ngModelChange",function(a){return n.rule.id=a}),e.qZA(),e.TgZ(18,"div",17),e.TgZ(19,"small"),e.SDv(20,18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",10),e.TgZ(22,"label",19),e.TgZ(23,"span",12),e.SDv(24,20),e.qZA(),e._UZ(25,"span",21),e.qZA(),e.TgZ(26,"div",15),e.TgZ(27,"div",0),e.TgZ(28,"div",22),e._UZ(29,"i",23),e.TgZ(30,"span",3),e.SDv(31,24),e.qZA(),e.YNc(32,Je,4,0,"span",25),e.qZA(),e.TgZ(33,"div",26),e.TgZ(34,"span",27),e.TgZ(35,"i",28),e.NdJ("click",function(){return n.formatSql()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",8),e._UZ(37,"textarea",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",10),e.TgZ(39,"label",30),e.TgZ(40,"span",12),e.SDv(41,31),e.qZA(),e._UZ(42,"span",32),e.qZA(),e.TgZ(43,"div",15),e.TgZ(44,"div",0),e.TgZ(45,"div",1),e._UZ(46,"i",33),e.TgZ(47,"span",3),e.SDv(48,34),e.qZA(),e.YNc(49,we,4,0,"span",25),e.qZA(),e.TgZ(50,"div",35),e.TgZ(51,"app-sink-list",36),e.NdJ("ruleActionsChange",function(a){return n.rule.actions=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(52,"div",10),e.TgZ(53,"label",19),e.TgZ(54,"span",12),e.SDv(55,37),e.qZA(),e._UZ(56,"span",38),e.qZA(),e.TgZ(57,"div",15),e.TgZ(58,"app-rule-advanced-options",39),e.NdJ("ruleOptionsChange",function(a){return n.rule.options=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("disabled",!n.validate()),e.xp6(12),e.ekj("is-invalid",!n.rule.id)("is-valid",n.rule.id),e.Q6J("ngModel",n.rule.id),e.xp6(11),e.ekj("border",!n.sqlEditor.getValue())("border-danger",!n.sqlEditor.getValue()),e.xp6(4),e.Q6J("ngIf",!n.sqlEditor.getValue()),e.xp6(13),e.ekj("border",!n.rule.actions||0===n.rule.actions.length)("border-danger",!n.rule.actions||0===n.rule.actions.length),e.xp6(4),e.Q6J("ngIf",!n.rule.actions||0===n.rule.actions.length),e.xp6(2),e.Q6J("ruleActions",n.rule.actions),e.xp6(7),e.Q6J("ruleOptions",n.rule.options))},directives:[r._Y,r.JL,r.F,r.Fj,r.JJ,r.On,p.O5,k,U],styles:[""]}),i})(),Xe=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-rules-center"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},directives:[c.lC],styles:[""]}),i})();function Qe(i,s){1&i&&(e.TgZ(0,"span"),e.TgZ(1,"div",50),e.TgZ(2,"span",51),e._uU(3,"Loading..."),e.qZA(),e.qZA(),e.qZA())}function Fe(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.status," ")}}function Ve(i,s){1&i&&(e.TgZ(0,"span"),e.TgZ(1,"div",52),e.TgZ(2,"span",51),e._uU(3,"Loading..."),e.qZA(),e.qZA(),e.TgZ(4,"div",53),e.TgZ(5,"span",51),e._uU(6,"Loading..."),e.qZA(),e.qZA(),e.TgZ(7,"div",54),e.TgZ(8,"span",51),e._uU(9,"Loading..."),e.qZA(),e.qZA(),e.qZA())}function Ke(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"span"),e.TgZ(1,"span",55),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().execute(o.id,"start")}),e.SDv(2,56),e.qZA(),e.TgZ(3,"span",57),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().execute(o.id,"restart")}),e.SDv(4,58),e.qZA(),e.TgZ(5,"span",59),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().execute(o.id,"stop")}),e.SDv(6,60),e.qZA(),e.qZA()}}function Be(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"input",24),e.NdJ("click",function(o){const l=e.CHM(t).$implicit;return e.oxw().selectOne(o,l)}),e.qZA(),e.qZA(),e.TgZ(3,"td",46),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.YNc(6,Qe,4,0,"span",47),e.YNc(7,Fe,2,1,"span",47),e.qZA(),e.TgZ(8,"td",48),e.TgZ(9,"i",49),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().statusMetrics(a.id)}),e.qZA(),e.qZA(),e.TgZ(10,"td"),e.YNc(11,Ve,10,0,"span",47),e.YNc(12,Ke,7,0,"span",47),e.qZA(),e.qZA()}if(2&i){const t=s.$implicit,n=e.oxw();e.ekj("table-active",n.isChecked(t.id)),e.xp6(2),e.Q6J("checked",n.isChecked(t.id)),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Q6J("ngIf",n.operationStatus),e.xp6(1),e.Q6J("ngIf",!n.operationStatus),e.xp6(2),e.ekj("text-info",n.statusMetricsRuleID===t.id),e.xp6(2),e.Q6J("ngIf",n.operationStatus),e.xp6(1),e.Q6J("ngIf",!n.operationStatus)}}function Ye(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",61),e.TgZ(1,"div",1),e._UZ(2,"i",62),e.TgZ(3,"span",63),e._uU(4),e.qZA(),e.TgZ(5,"span"),e.SDv(6,64),e.qZA(),e.TgZ(7,"span",65),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.statusMetricsRefresh(o.statusMetricsRuleID)}),e._UZ(8,"i",8),e.TgZ(9,"span"),e.SDv(10,66),e.qZA(),e.qZA(),e.TgZ(11,"span",67),e.TgZ(12,"i",68),e.NdJ("click",function(){return e.CHM(t),e.oxw().statusMetricsShowClose()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",69),e.TgZ(14,"pre",70),e._uU(15),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.statusMetricsRuleID),e.xp6(11),e.Oqu(t.ruleStatusMetrics)}}let ze=(()=>{class i{constructor(t,n,o,a){this.ruleSvc=t,this.msgSvc=n,this.route=o,this.router=a,this.rulesList=[],this.selectedRules=[],this.ruleStatusMetrics="",this.statusMetricsRuleID="",this.operationStatus=!1}ngOnInit(){this.route.queryParams.subscribe(t=>{this.getRulesList()})}getRulesList(){this.ruleSvc.allRules().subscribe(t=>{this.rulesList=t})}refresh(){this.ruleSvc.allRules().subscribe(t=>{this.rulesList=t,this.msgSvc.success("refresh")})}edit(){this.router.navigate(["../edit-rules"],{relativeTo:this.route,queryParams:{ruleID:this.selectedRules[0].id}})}statusMetrics(t){this.statusMetricsRuleID="",this.ruleStatusMetrics="",this.ruleSvc.getRuleStatusMetricsById(t).subscribe(n=>{let o;this.statusMetricsRuleID=t;try{o=JSON.parse(n)}catch(a){return void(this.ruleStatusMetrics=n)}this.ruleStatusMetrics=JSON.stringify(o,null,3)})}statusMetricsShowClose(){this.statusMetricsRuleID="",this.ruleStatusMetrics=""}statusMetricsRefresh(t){this.statusMetrics(t)}deleteConfirm(){$("#deleteConfirmDialog").modal("show")}delete(){this.selectedRules.forEach((t,n)=>{this.ruleSvc.deleteOneRuleById(t.id).subscribe(()=>{this.selectedRules.splice(n,1),this.rulesList.forEach((o,a)=>{o.id===t.id&&(this.rulesList.splice(a,1),this.msgSvc.success("remove rule ",` Id: ${t.id}`))})})}),$("#deleteConfirmDialog").modal("hide")}isCheckedAll(){let t=!0;return this.rulesList&&0===this.rulesList.length&&(t=!1),this.rulesList.forEach(n=>{-1===this.selectedRules.findIndex(o=>o.id===n.id)&&(t=!1)}),t}selectAll(t){this.rulesList.forEach(t.target.checked?o=>{-1===this.selectedRules.findIndex(a=>a.id===o.id)&&this.selectedRules.push(o)}:o=>{let a=this.selectedRules.findIndex(l=>l.id===o.id);-1!==a&&this.selectedRules.splice(a,1)})}isChecked(t){return this.selectedRules.findIndex(n=>n.id===t)>=0}selectOne(t,n){if(t.target.checked)return void this.selectedRules.push(n);let a=this.selectedRules.findIndex(l=>l.id===n.id);-1!==a&&this.selectedRules.splice(a,1)}execute(t,n){this.operationStatus=!0,this.ruleSvc.executeRuleCommand(t,n).subscribe({next:()=>{this.operationStatus=!1,this.msgSvc.success(`${n} ${t}`),this.getRulesList()},error:()=>this.operationStatus=!1})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(E.n),e.Y36(h.e),e.Y36(c.gz),e.Y36(c.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-rules-list"]],decls:56,vars:5,consts:function(){let s,t,n,o,a,l,d,m,g,u,S,f,O,y,x,D,J,w;return s="Rule List",t="Refresh",n="Add",o="Edit",a="Delete",l="ID",d="Status",m="Status Metrics",g="Operaion",u="Warning",S=" The data will be permanently erased!!! Are you sure to execute delete operation\uFF1F ",f="Cancel",O="Confirm",y="start",x="restart",D="stop",J="Status Metrics",w="refresh",[[1,"card"],[1,"card-header"],[1,"fa","fa-list","text-danger","mr-2"],[1,"font-weight-bold"],s,[1,"card-header","p-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","mr-1"],t,["type","button","routerLink","../add-rules",1,"btn","btn-info"],[1,"fa","fa-plus","mr-1"],n,["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-edit","mr-1"],o,["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash","mr-1"],a,[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],["type","checkbox","role","button",3,"checked","click"],l,d,["scope","col",1,"text-center"],m,g,[3,"table-active",4,"ngFor","ngForOf"],["class","card mt-3",4,"ngIf"],["id","deleteConfirmDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteConfirmDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteConfirmDialogLabel",1,"modal-title","text-danger"],[1,"fa","fa-warning","mr-1"],u,[1,"modal-body"],S,[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],f,["type","button",1,"btn","btn-danger",3,"click"],O,[1,"user-select-all"],[4,"ngIf"],[1,"text-center"],["role","button",1,"fa","fa-line-chart","text-primary",3,"click"],["role","status",1,"spinner-border","spinner-border-sm","text-secondary"],[1,"sr-only"],["role","status",1,"spinner-border","spinner-border-sm","mr-1","text-success"],["role","status",1,"spinner-border","spinner-border-sm","mr-1","text-info"],["role","status",1,"spinner-border","spinner-border-sm","mr-1","text-danger"],["role","button",1,"badge","badge-success","mr-1",3,"click"],y,["role","button",1,"badge","badge-info","mr-1",3,"click"],x,["role","button",1,"badge","badge-danger","mr-1",3,"click"],D,[1,"card","mt-3"],[1,"fa","fa-line-chart","mr-2","text-info"],[1,"mr-2","font-weight-bold"],J,["role","button",1,"badge","badge-primary","mx-2",3,"click"],w,["role","button",1,"align-bottom"],[1,"fa","fa-window-close","fa-lg","text-danger","float-right","mt-1",3,"click"],[1,"card-body"],[1,"p-2"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"i",2),e.TgZ(3,"span",3),e.SDv(4,4),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"button",7),e.NdJ("click",function(){return n.refresh()}),e._UZ(8,"i",8),e.TgZ(9,"span"),e.SDv(10,9),e.qZA(),e.qZA(),e.TgZ(11,"button",10),e._UZ(12,"i",11),e.TgZ(13,"span"),e.SDv(14,12),e.qZA(),e.qZA(),e.TgZ(15,"button",13),e.NdJ("click",function(){return n.edit()}),e._UZ(16,"i",14),e.TgZ(17,"span"),e.SDv(18,15),e.qZA(),e.qZA(),e.TgZ(19,"button",16),e.NdJ("click",function(){return n.deleteConfirm()}),e._UZ(20,"i",17),e.TgZ(21,"span"),e.SDv(22,18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",19),e.TgZ(24,"div",20),e.TgZ(25,"table",21),e.TgZ(26,"thead",22),e.TgZ(27,"tr"),e.TgZ(28,"th",23),e.TgZ(29,"input",24),e.NdJ("click",function(a){return n.selectAll(a)}),e.qZA(),e.qZA(),e.TgZ(30,"th",23),e.SDv(31,25),e.qZA(),e.TgZ(32,"th",23),e.SDv(33,26),e.qZA(),e.TgZ(34,"th",27),e.SDv(35,28),e.qZA(),e.TgZ(36,"th",23),e.SDv(37,29),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"tbody"),e.YNc(39,Be,13,10,"tr",30),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(40,Ye,16,2,"div",31),e.TgZ(41,"div",32),e.TgZ(42,"div",33),e.TgZ(43,"div",34),e.TgZ(44,"div",35),e.TgZ(45,"h5",36),e._UZ(46,"i",37),e.TgZ(47,"span"),e.SDv(48,38),e.qZA(),e.qZA(),e.qZA(),e.TgZ(49,"div",39),e.SDv(50,40),e.qZA(),e.TgZ(51,"div",41),e.TgZ(52,"button",42),e.SDv(53,43),e.qZA(),e.TgZ(54,"button",44),e.NdJ("click",function(){return n.delete()}),e.SDv(55,45),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(15),e.Q6J("disabled",1!==n.selectedRules.length),e.xp6(4),e.Q6J("disabled",0===n.selectedRules.length),e.xp6(10),e.Q6J("checked",n.isCheckedAll()),e.xp6(10),e.Q6J("ngForOf",n.rulesList),e.xp6(1),e.Q6J("ngIf",n.ruleStatusMetrics&&n.statusMetricsRuleID))},directives:[c.rH,p.sg,p.O5],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),i})();function He(i,s){1&i&&(e.TgZ(0,"div",18),e._UZ(1,"i",19),e.TgZ(2,"span"),e.SDv(3,20),e.qZA(),e.qZA())}let je=(()=>{class i{constructor(t,n,o,a){this.ruleSvc=t,this.msgSvc=n,this.router=o,this.route=a,this.EDGEX="edgex",this.CUSTOM="custom",this.SQL_CUSTOM_KEYWORDS=["STREAM","stream"],this.templateTypeSelected=this.EDGEX,this.edgexStreamDataTemplate='CREATE STREAM EdgeXStream () WITH ( FORMAT = "JSON", TYPE = "edgex" )',this.customStreamDataTemplate='CREATE STREAM demo ( field1 bigint, field2 float ) WITH ( DATASOURCE = "", KEY = "", FORMAT = "JSON", CONF_KEY = "", TYPE = "edgex", STRICT_VALIDATION = "true", TIMESTAMP = "", TIMESTAMP_FORMAT = "", RETAIN_SIZE = "0", SHARED = "false" )',this.streamIsNullMsg=!1}ngOnInit(){this.sqlEditorRender(),$(function(){$('[data-toggle="tooltip"]').tooltip()})}templateTypeToggle(t){this.templateTypeSelected=t,t===this.EDGEX?this.sqlEditor.setValue(this.edgexStreamDataTemplate):(this.sqlEditor.setValue(this.customStreamDataTemplate),this.formatSql())}sqlEditorRender(){let t=document.getElementById("sql-editor");this.SQL_CUSTOM_KEYWORDS.forEach(n=>{CodeMirror.resolveMode("text/x-pgsql").keywords[n]=!0}),this.sqlEditor=CodeMirror.fromTextArea(t,{mode:"text/x-pgsql",tabSize:4,theme:"gruvbox-dark",lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],autofocus:!0,matchBrackets:!0,styleActiveLine:!0,cursorHeight:.85,hint:CodeMirror.hint.sql}),this.sqlEditor.setSize("auto","500px"),this.sqlEditor.on("drop",(n,o)=>{}),this.sqlEditor.on("paste",(n,o)=>{}),this.sqlEditor.on("keyup",(n,o)=>{o.keyCode>=65&&o.keyCode<=90&&n.showHint({completeSingle:!1})}),this.sqlEditor.setValue(this.edgexStreamDataTemplate)}formatSql(){let t="";t=this.sqlEditor.getValue(),this.sqlEditor.setValue(sqlFormatter.format(t,{language:"postgresql"}))}documentShow(){$("#stream-document").modal("show")}submit(){let t=this.sqlEditor.getValue();if(!t.trim())return this.streamIsNullMsg=!0,void window.setTimeout(()=>{this.streamIsNullMsg=!1},2e3);this.ruleSvc.addStream(JSON.stringify({sql:t})).subscribe(()=>{this.msgSvc.success("Add Stream"),this.router.navigate(["../stream-list"],{relativeTo:this.route})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(E.n),e.Y36(h.e),e.Y36(c.F0),e.Y36(c.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-stream"]],decls:25,vars:9,consts:function(){let s,t,n;return s="Add Stream",t="Submit",n="Stream can't be empty!",[["class","alert alert-warning","role","alert",4,"ngIf"],[1,"card"],[1,"card-header","p-2"],[1,""],[1,"text-danger","font-weight-bold","fa","fa-code","mr-2"],[1,"mr-3","font-weight-bold"],s,["type","button",1,"btn","btn-success","btn-sm","float-right",3,"click"],[1,"fa","fa-save","mr-1"],t,[1,"card-header"],["role","button",1,"badge","badge-secondary","mr-2",3,"click"],[1,"fa","fa-square-o","mr-1"],[1,"card-body","p-0"],[1,"card-header","bg-secondary","py-2"],[1,"text-light"],["role","button","data-toggle","tooltip","data-placement","top","title","formatter",1,"fa","fa-indent","fa-lg","mr-3",3,"click"],["id","sql-editor","name","sql-editor"],["role","alert",1,"alert","alert-warning"],[1,"fa","fa-warning","mr-2"],n]},template:function(t,n){1&t&&(e.YNc(0,He,4,0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"span",3),e._UZ(4,"span",4),e.TgZ(5,"span",5),e.SDv(6,6),e.qZA(),e.qZA(),e.TgZ(7,"button",7),e.NdJ("click",function(){return n.submit()}),e._UZ(8,"i",8),e.TgZ(9,"span"),e.SDv(10,9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",10),e.TgZ(12,"span",11),e.NdJ("click",function(){return n.templateTypeToggle(n.EDGEX)}),e._UZ(13,"i",12),e.TgZ(14,"span"),e._uU(15,"EdgeXStreamTemplate"),e.qZA(),e.qZA(),e.TgZ(16,"span",11),e.NdJ("click",function(){return n.templateTypeToggle(n.CUSTOM)}),e._UZ(17,"i",12),e.TgZ(18,"span"),e._uU(19,"CustomStreamTemplate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",13),e.TgZ(21,"div",14),e.TgZ(22,"span",15),e.TgZ(23,"i",16),e.NdJ("click",function(){return n.formatSql()}),e.qZA(),e.qZA(),e.qZA(),e._UZ(24,"textarea",17),e.qZA(),e.qZA()),2&t&&(e.Q6J("ngIf",n.streamIsNullMsg),e.xp6(12),e.ekj("badge-info",n.templateTypeSelected===n.EDGEX),e.xp6(1),e.ekj("fa-check-square",n.templateTypeSelected===n.EDGEX),e.xp6(3),e.ekj("badge-info",n.templateTypeSelected===n.CUSTOM),e.xp6(1),e.ekj("fa-check-square",n.templateTypeSelected===n.CUSTOM))},directives:[p.O5],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),i})();function We(i,s){1&i&&(e.TgZ(0,"div",16),e._UZ(1,"i",17),e.TgZ(2,"span"),e.SDv(3,18),e.qZA(),e.qZA())}let et=(()=>{class i{constructor(t,n,o,a){this.ruleSvc=t,this.msgSvc=n,this.router=o,this.route=a,this.SQL_CUSTOM_KEYWORDS=["STREAM","stream"],this.streamName="",this.streamStringFormatObj="",this.streamIsNullMsg=!1}ngOnInit(){this.route.queryParams.subscribe(t=>{t.streamName&&(this.streamName=t.streamName,this.getStreamByNameOrID())}),this.sqlEditorRender(),$(function(){$('[data-toggle="tooltip"]').tooltip()})}getStreamByNameOrID(){this.ruleSvc.findStreamByName(this.streamName).subscribe(t=>{this.streamJSONFormatObj=t,this.dataFormatJSONToStringConvertor(),this.sqlEditor.setValue(this.streamStringFormatObj),this.formatSql()})}dataFormatJSONToStringConvertor(){var t,n,o;if(!this.streamJSONFormatObj)return;let a=[];null===(n=null===(t=this.streamJSONFormatObj)||void 0===t?void 0:t.StreamFields)||void 0===n||n.forEach((d,m)=>{a.push(`${d.Name} ${d.FieldType}`)});let l=[];for(const[d,m]of Object.entries(this.streamJSONFormatObj.Options))l.push(`${d} = "${m}"`);this.streamStringFormatObj=`CREATE STREAM ${null===(o=this.streamJSONFormatObj)||void 0===o?void 0:o.Name} ( ${a.join(", ")} ) WITH ( ${l.join(", ")} )`}sqlEditorRender(){let t=document.getElementById("sql-editor");this.SQL_CUSTOM_KEYWORDS.forEach(n=>{CodeMirror.resolveMode("text/x-pgsql").keywords[n]=!0}),this.sqlEditor=CodeMirror.fromTextArea(t,{mode:"text/x-pgsql",tabSize:4,theme:"gruvbox-dark",lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],autofocus:!0,matchBrackets:!0,styleActiveLine:!0,cursorHeight:.85,hint:CodeMirror.hint.sql}),this.sqlEditor.setSize("auto","500px"),this.sqlEditor.on("drop",(n,o)=>{}),this.sqlEditor.on("paste",(n,o)=>{}),this.sqlEditor.on("keyup",(n,o)=>{o.keyCode>=65&&o.keyCode<=90&&n.showHint({completeSingle:!1})})}formatSql(){let t="";t=this.sqlEditor.getValue(),this.sqlEditor.setValue(sqlFormatter.format(t,{language:"postgresql"}))}submit(){let t=this.sqlEditor.getValue();if(!t.trim())return this.streamIsNullMsg=!0,void window.setTimeout(()=>{this.streamIsNullMsg=!1},2e3);this.ruleSvc.updateStream(JSON.stringify({sql:t}),this.streamName).subscribe(()=>{this.msgSvc.success("Update Stream"),this.router.navigate(["../stream-list"],{relativeTo:this.route})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(E.n),e.Y36(h.e),e.Y36(c.F0),e.Y36(c.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-stream"]],decls:19,vars:3,consts:function(){let s,t,n;return s="Edit Stream",t="Submit",n="Stream can't be empty!",[["class","alert alert-warning","role","alert",4,"ngIf"],[1,"card"],[1,"card-header","p-2"],[1,"text-danger","font-weight-bold","fa","fa-code","mr-2"],[1,"mr-2"],s,[1,"font-weight-bold"],[1,"float-right"],["type","button",1,"btn","btn-success","btn-sm",3,"disabled","click"],[1,"fa","fa-save","mr-1"],t,[1,"card-body","p-0"],[1,"card-header","bg-secondary","py-2"],[1,"text-light"],["role","button","data-toggle","tooltip","data-placement","top","title","formatter",1,"fa","fa-indent","fa-lg","mr-3",3,"click"],["id","sql-editor","name","sql-editor"],["role","alert",1,"alert","alert-warning"],[1,"fa","fa-warning","mr-2"],n]},template:function(t,n){1&t&&(e.YNc(0,We,4,0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"span"),e._UZ(4,"span",3),e.TgZ(5,"span",4),e.SDv(6,5),e.qZA(),e.TgZ(7,"span",6),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"span",7),e.TgZ(10,"button",8),e.NdJ("click",function(){return n.submit()}),e._UZ(11,"i",9),e.TgZ(12,"span"),e.SDv(13,10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",11),e.TgZ(15,"div",12),e.TgZ(16,"span",13),e.TgZ(17,"i",14),e.NdJ("click",function(){return n.formatSql()}),e.qZA(),e.qZA(),e.qZA(),e._UZ(18,"textarea",15),e.qZA(),e.qZA()),2&t&&(e.Q6J("ngIf",n.streamIsNullMsg),e.xp6(8),e.Oqu(n.streamName),e.xp6(2),e.Q6J("disabled",!n.streamStringFormatObj))},directives:[p.O5],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),i})(),tt=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-stream-center"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},directives:[c.lC],styles:[""]}),i})();function nt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"li",29),e.TgZ(1,"div",30),e.TgZ(2,"div",31),e._UZ(3,"i",32),e.qZA(),e.TgZ(4,"div",33),e.TgZ(5,"div",34),e.TgZ(6,"h5",35),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"div"),e.TgZ(9,"span",36),e.TgZ(10,"span",37),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().edit(a)}),e._UZ(11,"i",38),e.TgZ(12,"span"),e.SDv(13,39),e.qZA(),e.qZA(),e.TgZ(14,"span",40),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().deleteConfirm(a)}),e._UZ(15,"i",41),e.TgZ(16,"span"),e.SDv(17,42),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=s.$implicit;e.xp6(7),e.Oqu(t)}}let ot=(()=>{class i{constructor(t,n,o,a){this.ruleSvc=t,this.msgSvc=n,this.route=o,this.router=a,this.streamList=[],this.selectedStream=""}ngOnInit(){this.getStreamList()}getStreamList(){this.ruleSvc.allStreams().subscribe(t=>{this.streamList=t})}refresh(){this.ruleSvc.allStreams().subscribe(t=>{this.streamList=t,this.msgSvc.success("refresh")})}add(){this.router.navigate(["../add-stream"],{relativeTo:this.route})}edit(t){this.router.navigate(["../edit-stream"],{relativeTo:this.route,queryParams:{streamName:t}})}deleteConfirm(t){this.selectedStream=t,$("#deleteConfirmDialog").modal("show")}delete(){$("#deleteConfirmDialog").modal("hide"),this.ruleSvc.deleteOneStreamById(this.selectedStream).subscribe(()=>{this.msgSvc.success("delete",`name: ${this.selectedStream}`),this.streamList.forEach((t,n)=>{t===this.selectedStream&&this.streamList.splice(n,1)})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(E.n),e.Y36(h.e),e.Y36(c.gz),e.Y36(c.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-stream-list"]],decls:33,vars:1,consts:function(){let s,t,n,o,a,l,d,m,g;return s="Stream List",t="Refresh",n="Add",o="Warning",a=" The data will be permanently erased!!! Are you sure to execute delete operation\uFF1F ",l="Cancel",d="Confirm",m="Edit",g="Delete",[[1,"card"],[1,"card-header"],[1,"fa","fa-list","mr-2","text-danger"],s,[1,"card-header","p-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-refresh","mr-1"],t,[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-plus-circle","mr-1"],n,[1,"card-body","p-0"],[1,"list-group","p-0","border-0"],["class","list-group-item list-group-item-action list-group-item-light border-top-0 border-left-0  border-right-0",4,"ngFor","ngForOf"],["id","deleteConfirmDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteConfirmDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteConfirmDialogLabel",1,"modal-title","text-danger"],[1,"fa","fa-warning","mr-1"],o,[1,"modal-body"],a,[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],l,["type","button",1,"btn","btn-danger",3,"click"],d,[1,"list-group-item","list-group-item-action","list-group-item-light","border-top-0","border-left-0","border-right-0"],[1,"media"],[1,"align-self-center","mr-3"],[1,"fa","fa-tags","fa-2x","text-secondary"],[1,"media-body"],[1,"mt-0","mb-1"],[1,"d-inline","mr-3","align-middle","text-dark"],[1,"float-right"],["role","button",1,"badge","badge-info","mr-2",3,"click"],[1,"fa","fa-edit","mr-1"],m,["role","button",1,"badge","badge-danger",3,"click"],[1,"fa","fa-trash","mr-1"],g]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"i",2),e.TgZ(3,"span"),e.SDv(4,3),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"button",6),e.NdJ("click",function(){return n.refresh()}),e._UZ(8,"i",7),e.TgZ(9,"span"),e.SDv(10,8),e.qZA(),e.qZA(),e.TgZ(11,"button",9),e.NdJ("click",function(){return n.add()}),e._UZ(12,"i",10),e.TgZ(13,"span"),e.SDv(14,11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",12),e.TgZ(16,"ul",13),e.YNc(17,nt,18,1,"li",14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",15),e.TgZ(19,"div",16),e.TgZ(20,"div",17),e.TgZ(21,"div",18),e.TgZ(22,"h5",19),e._UZ(23,"i",20),e.TgZ(24,"span"),e.SDv(25,21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",22),e.SDv(27,23),e.qZA(),e.TgZ(28,"div",24),e.TgZ(29,"button",25),e.SDv(30,26),e.qZA(),e.TgZ(31,"button",27),e.NdJ("click",function(){return n.delete()}),e.SDv(32,28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(17),e.Q6J("ngForOf",n.streamList))},directives:[p.sg],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}#addStreamDialog[_ngcontent-%COMP%]   #editStreamDialog[_ngcontent-%COMP%]{margin-top:10%}"]}),i})();var it=_(8253),at=_(1964),st=_(4294),rt=_(5894),lt=_(7216);let P=(()=>{class i{constructor(t,n){this.router=t,this.ruleSvc=n}canActivate(t,n){return this.checkAvailable(t,n)}canActivateChild(t,n){return this.canActivate(t,n)}checkAvailable(t,n){return this.ruleSvc.ping().pipe((0,st.q)(1),(0,rt.K)(o=>this.router.navigate(["/svc-unavailable"],{queryParams:{svcName:"rule engine",routerPath:`/${n.url.split("/")[1]}`}})),(0,lt.z)(()=>(0,at.of)(!0)))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(c.F0),e.LFG(E.n))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const dt=[{path:"",component:G,canActivate:[it.a,P],canActivateChild:[P],children:[{path:"",redirectTo:"stream-center",pathMatch:"full"},{path:"stream-center",component:tt,children:[{path:"",redirectTo:"stream-list",pathMatch:"full"},{path:"stream-list",component:ot},{path:"add-stream",component:je},{path:"edit-stream",component:et}]},{path:"rules-center",component:Xe,children:[{path:"",redirectTo:"rules-list",pathMatch:"full"},{path:"rules-list",component:ze},{path:"add-rules",component:De},{path:"edit-rules",component:Ge}]}]}];let _t=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[c.Bz.forChild(dt)],c.Bz]}),i})();var gt=_(6342),ct=_(4010);let ut=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,r.u5,r.UX,_t,gt.Y,ct.MetadataModule]]}),i})()}}]);