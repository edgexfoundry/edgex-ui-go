"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[649],{2649:(Ee,q,u)=>{u.r(q),u.d(q,{MetadataModule:()=>i_});var o=u(6814),a=u(95),C=u(9919),e=u(6689);let w=(()=>{class n{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-metadata"]],decls:17,vars:0,consts:function(){let t,i,_,s;return t="Device Service",i="Device",_="Device Profile",s="Provision Watcher",[[1,"card"],[1,"card-header"],[1,"nav","nav-tabs","card-header-tabs","font-weight-bold"],[1,"nav-item"],["routerLink","./device-service-list","routerLinkActive","active",1,"nav-link"],t,["routerLink","./device-center","routerLinkActive","active",1,"nav-link"],i,["routerLink","./device-profile-center","routerLinkActive","active",1,"nav-link"],_,["routerLink","./provision-watcher-center","routerLinkActive","active",1,"nav-link"],s,[1,"card-body"]]},template:function(i,_){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"ul",2)(3,"li",3)(4,"a",4),e.SDv(5,5),e.qZA()(),e.TgZ(6,"li",3)(7,"a",6),e.SDv(8,7),e.qZA()(),e.TgZ(9,"li",3)(10,"a",8),e.SDv(11,9),e.qZA()(),e.TgZ(12,"li",3)(13,"a",10),e.SDv(14,11),e.qZA()()()(),e.TgZ(15,"div",12),e._UZ(16,"router-outlet"),e.qZA()())},dependencies:[C.lC,C.rH,C.Od],styles:[".active-link[_ngcontent-%COMP%]{color:#922c48;background-color:#922c4866!important}"]})}return n})();var P=u(5167),x=u(3685);function h(n,l){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.description)}}function M(n,l){1&n&&(e.TgZ(0,"p",20),e._uU(1,"no description."),e.qZA())}function L(n,l){if(1&n&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.adminState)}}function y(n,l){if(1&n&&(e.TgZ(0,"span",22),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.adminState)}}function k(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"a",23),e.NdJ("click",function(){e.CHM(t);const _=e.oxw().$implicit,s=e.oxw();return e.KtG(s.associatedDevicesSkip(_.name))}),e._UZ(1,"i",24),e.TgZ(2,"span"),e.SDv(3,25),e.qZA(),e._uU(4),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(4),e.hij("\xa0 ",i.associatedDevices.get(t.name)," ")}}function de(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"li",3)(1,"div",4)(2,"div",5),e._UZ(3,"i",6),e.qZA(),e.TgZ(4,"div",7)(5,"div",8)(6,"h5",9),e._uU(7),e.qZA()(),e.YNc(8,h,2,1,"p",10),e.YNc(9,M,2,0,"ng-template",null,11,e.W1O),e.TgZ(11,"div")(12,"span",12),e._uU(13),e.qZA(),e.TgZ(14,"span",13),e.YNc(15,L,2,1,"span",14),e.YNc(16,y,2,1,"span",15),e.qZA(),e.YNc(17,k,5,1,"a",16),e.TgZ(18,"span",17),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.edit(s))}),e._UZ(19,"i",18),e.TgZ(20,"span"),e.SDv(21,19),e.qZA()()()()()()}if(2&n){const t=l.$implicit,i=e.MAs(10),_=e.oxw();e.xp6(7),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",t.description)("ngIfElse",i),e.xp6(5),e.hij("Port ",_.getSvcPort(t.baseAddress),""),e.xp6(1),e.Q6J("ngSwitch",t.adminState),e.xp6(1),e.Q6J("ngSwitchCase","UNLOCKED"),e.xp6(2),e.Q6J("ngIf",_.associatedDevices.size)}}function R(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",26)(1,"div",27),e._UZ(2,"i",28),e.TgZ(3,"span"),e.SDv(4,29),e.qZA(),e.TgZ(5,"span",30),e._uU(6),e.qZA(),e.TgZ(7,"button",31),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.updateSvc())}),e.SDv(8,32),e.qZA()(),e.TgZ(9,"div",33)(10,"form")(11,"div",34)(12,"label",35),e.SDv(13,36),e.qZA(),e.TgZ(14,"div",37)(15,"input",38),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.deviceSvcSelected.description=_)}),e.qZA()()(),e.TgZ(16,"div",34)(17,"label",39),e.SDv(18,40),e.qZA(),e.TgZ(19,"div",37)(20,"select",41),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.deviceSvcSelected.adminState=_)}),e.TgZ(21,"option",42),e._uU(22,"UNLOCKED"),e.qZA(),e.TgZ(23,"option",43),e._uU(24,"LOCKED"),e.qZA()()()()()()()}if(2&n){const t=e.oxw();e.xp6(6),e.Oqu(t.deviceSvcSelected.name),e.xp6(9),e.Q6J("ngModel",t.deviceSvcSelected.description),e.xp6(5),e.Q6J("ngModel",t.deviceSvcSelected.adminState)}}let G=(()=>{class n{constructor(t,i,_,s){this.metaSvc=t,this.msgSvc=i,this.router=_,this.route=s,this.deviceServiceList=[],this.associatedDevices=new Map}ngOnInit(){this.metaSvc.allDeviceServices().subscribe(t=>{this.deviceServiceList=t.services,this.deviceServiceList.forEach(i=>{this.metaSvc.findDevicesByServiceName(0,20,i.name).subscribe(_=>{this.associatedDevices.set(i.name,_.devices.length>20?"20+":String(_.devices.length))})})})}getSvcPort(t){return new URL(t).port}edit(t){this.deviceSvcSelected=t}updateSvc(){this.metaSvc.updateDeviceService(this.deviceSvcSelected).subscribe(()=>{this.msgSvc.success("update device service",`name: ${this.deviceSvcSelected?.name}`),this.deviceSvcSelected=void 0})}associatedDevicesSkip(t){this.router.navigate(["../device-center"],{queryParams:{svcName:t},relativeTo:this.route})}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(P.D),e.Y36(x.e),e.Y36(C.F0),e.Y36(C.gz))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-device-service-media-list"]],decls:3,vars:2,consts:function(){let t,i,_,s,c,E;return t="Setting",i="Associated Devices",_="edit",s="Save",c="Description",E="AdminState",[[1,"list-group","p-0"],["class","list-group-item list-group-item-action list-group-item-light",4,"ngFor","ngForOf"],["class","card mt-3",4,"ngIf"],[1,"list-group-item","list-group-item-action","list-group-item-light"],[1,"media"],[1,"align-self-center","mr-3"],[1,"fa","fa-tags","fa-2x","text-secondary"],[1,"media-body"],[1,"mt-0","mb-1"],[1,"d-inline","mr-3","align-middle","text-dark"],[4,"ngIf","ngIfElse"],["nodesc",""],[1,"badge","badge-info","mr-3"],[3,"ngSwitch"],["class","badge badge-success mr-3",4,"ngSwitchCase"],["class","badge badge-danger mr-3",4,"ngSwitchDefault"],["class","badge badge-primary","role","button",3,"click",4,"ngIf"],["role","button",1,"badge","badge-secondary","float-right",3,"click"],[1,"fa","fa-cog","mr-1"],t,[1,"my-1"],[1,"badge","badge-success","mr-3"],[1,"badge","badge-danger","mr-3"],["role","button",1,"badge","badge-primary",3,"click"],[1,"fa","fa-sitemap","mr-1"],i,[1,"card","mt-3"],[1,"card-header"],[1,"fa","fa-edit","mr-1","text-danger"],_,[1,"ml-1"],[1,"btn","btn-success","btn-sm","float-right",3,"click"],s,[1,"card-body"],[1,"form-group","row"],["for","deviceDesc",1,"col-md-2","col-form-label"],c,[1,"col-md-10"],["type","text","name","deviceSvcDescription",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],E,["name","deviceSvcAdminState",1,"custom-select",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"]]},template:function(i,_){1&i&&(e.TgZ(0,"ul",0),e.YNc(1,de,22,7,"li",1),e.qZA(),e.YNc(2,R,25,3,"div",2)),2&i&&(e.xp6(1),e.Q6J("ngForOf",_.deviceServiceList),e.xp6(1),e.Q6J("ngIf",_.deviceSvcSelected))},dependencies:[o.sg,o.O5,o.RF,o.n9,o.ED,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.On,a.F]})}return n})(),r=(()=>{class n{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-device-center"]],decls:1,vars:0,template:function(i,_){1&i&&e._UZ(0,"router-outlet")},dependencies:[C.lC]})}return n})();var S=u(9167);function d(n,l){1&n&&e._UZ(0,"div")}function b(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"li",20),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.selectCmd(s))}),e._uU(1),e.qZA()}if(2&n){const t=l.$implicit,i=e.oxw(2);e.ekj("list-group-item-info",(null==i.selectedCmd?null:i.selectedCmd.name)===t.name),e.xp6(1),e.Oqu(t.name)}}function W(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(3);return e.KtG(_.issueGetCmd())}),e._uU(1,"try"),e.qZA()}}function X(n,l){1&n&&e._UZ(0,"div")}function K(n,l){if(1&n&&(e.TgZ(0,"span",41),e._uU(1),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.cmdGetResponse,"")}}function B(n,l){if(1&n&&(e.TgZ(0,"pre",42),e._uU(1),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.Oqu(t.cmdGetResponseRaw)}}function j(n,l){if(1&n&&(e.TgZ(0,"div")(1,"span",35),e.SDv(2,36),e.qZA(),e.YNc(3,K,2,1,"span",37),e.qZA(),e.TgZ(4,"div",38)(5,"span",35),e.SDv(6,39),e.qZA(),e.YNc(7,B,2,1,"pre",40),e.qZA()),2&n){const t=e.oxw(3);e.xp6(3),e.Q6J("ngIf",t.cmdGetResponse),e.xp6(4),e.Q6J("ngIf",t.cmdGetResponseRaw)}}function ee(n,l){1&n&&(e.TgZ(0,"h6",43),e._UZ(1,"i",44),e.TgZ(2,"span"),e.SDv(3,45),e.qZA()())}function te(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(3);return e.KtG(_.issueSetCmd())}),e._uU(1,"try"),e.qZA()}}function _e(n,l){1&n&&e._UZ(0,"div")}function ie(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"label",56),e._uU(2),e.qZA(),e.TgZ(3,"select",57),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw().index,c=e.oxw(6);return e.KtG(c.parameterBearerList[s].value=_)}),e.TgZ(4,"option",58),e._uU(5,"false"),e.qZA(),e.TgZ(6,"option",58),e._uU(7,"true"),e.qZA()()()}if(2&n){const t=e.oxw(),i=t.$implicit,_=t.index,s=e.oxw(6);e.xp6(1),e.s9C("for",i.resourceName),e.xp6(1),e.hij(" ",i.resourceName," "),e.xp6(1),e.s9C("id",i.resourceName),e.s9C("name",i.resourceName),e.Q6J("ngModel",s.parameterBearerList[_].value),e.xp6(1),e.Q6J("ngValue",!1),e.xp6(2),e.Q6J("ngValue",!0)}}function ne(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"label",56),e._uU(1),e.qZA(),e.TgZ(2,"input",59),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw().index,c=e.oxw(6);return e.KtG(c.parameterBearerList[s].value=_)}),e.qZA()}if(2&n){const t=e.oxw(),i=t.$implicit,_=t.index,s=e.oxw(6);e.s9C("for",i.resourceName),e.xp6(1),e.Oqu(i.resourceName),e.xp6(1),e.s9C("id",i.resourceName),e.s9C("name",i.resourceName),e.MGl("placeholder","valueType: ",i.valueType,""),e.Q6J("ngModel",s.parameterBearerList[_].value)}}function oe(n,l){if(1&n&&(e.TgZ(0,"div",53),e.YNc(1,ie,8,7,"div",54),e.YNc(2,ne,3,6,"ng-template",null,55,e.W1O),e.qZA()),2&n){const t=l.$implicit,i=e.MAs(3);e.xp6(1),e.Q6J("ngIf","Bool"==t.valueType)("ngIfElse",i)}}function se(n,l){if(1&n&&(e.TgZ(0,"div",51),e.YNc(1,oe,4,2,"div",52),e.qZA()),2&n){const t=e.oxw(5);e.xp6(1),e.Q6J("ngForOf",t.selectedCmdSetParams)}}function ce(n,l){if(1&n&&(e.TgZ(0,"div",12)(1,"div",4),e.SDv(2,49),e.qZA(),e.TgZ(3,"div",9),e.YNc(4,se,2,1,"div",50),e.qZA()()),2&n){const t=e.oxw(4);e.xp6(4),e.Q6J("ngIf",t.selectedCmd)}}function ae(n,l){if(1&n&&(e.TgZ(0,"span",41),e._uU(1),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.Oqu(t.cmdSetResponse)}}function V(n,l){if(1&n&&(e.TgZ(0,"pre",42),e._uU(1),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.Oqu(t.cmdSetResponseRaw)}}function Pe(n,l){if(1&n&&(e.YNc(0,ce,5,1,"div",46),e.TgZ(1,"div")(2,"div")(3,"span",35),e.SDv(4,47),e.qZA(),e.YNc(5,ae,2,1,"span",37),e.qZA(),e.TgZ(6,"div",38)(7,"span",35),e.SDv(8,48),e.qZA(),e.YNc(9,V,2,1,"pre",40),e.qZA()()),2&n){const t=e.oxw(3);e.Q6J("ngIf",t.selectedCmdSetParams),e.xp6(5),e.Q6J("ngIf",t.cmdSetResponse),e.xp6(4),e.Q6J("ngIf",t.cmdSetResponseRaw)}}function Me(n,l){1&n&&(e.TgZ(0,"h6",43),e._UZ(1,"i",44),e.TgZ(2,"span"),e.SDv(3,60),e.qZA()())}function Oe(n,l){if(1&n&&(e.TgZ(0,"div",21)(1,"div",4)(2,"span",22),e._UZ(3,"i",23),e._uU(4),e.qZA(),e.TgZ(5,"span"),e.SDv(6,24),e.qZA()(),e.TgZ(7,"div",25)(8,"div",10)(9,"div",26)(10,"div",12)(11,"div",4),e._uU(12," Get "),e.YNc(13,W,2,0,"button",27),e.qZA(),e.TgZ(14,"div",28),e.YNc(15,X,1,0,"div",0),e.YNc(16,j,8,2,"ng-template",null,29,e.W1O),e.YNc(18,ee,4,0,"ng-template",null,30,e.W1O),e.qZA()()(),e.TgZ(20,"div",31)(21,"div",21)(22,"div",4),e._uU(23," Set "),e.YNc(24,te,2,0,"button",27),e.qZA(),e.TgZ(25,"div",9),e.YNc(26,_e,1,0,"div",0),e.YNc(27,Pe,10,3,"ng-template",null,32,e.W1O),e.YNc(29,Me,4,0,"ng-template",null,33,e.W1O),e.qZA()()()()()()),2&n){const t=e.MAs(17),i=e.MAs(19),_=e.MAs(28),s=e.MAs(30),c=e.oxw(2);e.xp6(4),e.hij(" ",c.selectedCmd.name," method:"),e.xp6(9),e.Q6J("ngIf",c.selectedCmd.get),e.xp6(2),e.Q6J("ngIf",c.selectedCmd.get)("ngIfThen",t)("ngIfElse",i),e.xp6(9),e.Q6J("ngIf",c.selectedCmd.set),e.xp6(2),e.Q6J("ngIf",c.selectedCmd.set)("ngIfThen",_)("ngIfElse",s)}}function Ne(n,l){if(1&n&&(e.TgZ(0,"div",3)(1,"div",4)(2,"span",5),e._UZ(3,"i",6),e.qZA(),e.TgZ(4,"span",7),e._uU(5),e.qZA(),e.TgZ(6,"span"),e.SDv(7,8),e.qZA()(),e.TgZ(8,"div",9)(9,"div",10)(10,"div",11)(11,"div",12)(12,"div",13),e.SDv(13,14),e.qZA(),e.TgZ(14,"div",15)(15,"ul",16),e.YNc(16,b,2,3,"li",17),e.qZA()()()(),e.TgZ(17,"div",18),e.YNc(18,Oe,31,9,"div",19),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(5),e.Oqu(t.associatedCmdDeviceName),e.xp6(11),e.Q6J("ngForOf",t.deviceCoreCommand),e.xp6(2),e.Q6J("ngIf",t.selectedCmd)}}function he(n,l){if(1&n&&(e.TgZ(0,"div",3)(1,"div",4)(2,"span",5),e._UZ(3,"i",6),e.qZA(),e.TgZ(4,"span",7),e._uU(5),e.qZA(),e.TgZ(6,"span"),e.SDv(7,61),e.qZA()(),e.TgZ(8,"div",62)(9,"h5",43),e._UZ(10,"i",63),e.TgZ(11,"span"),e.SDv(12,64),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(5),e.Oqu(t.associatedCmdDeviceName)}}let Re=(()=>{class n{constructor(t,i){this.cmdSvc=t,this.metadataSvc=i,this.selectedCmd={},this.selectedCmdSetParams=[],this.parameterBearerList=[]}ngOnInit(){}ngOnChanges(){this.deviceName&&(this.resetResponse(),this.cmdSvc.findDeviceAssociatedCommnadsByDeviceName(this.deviceName).subscribe(t=>{this.associatedCmdDeviceName=t.deviceCoreCommand.deviceName,this.deviceCoreCommand=t.deviceCoreCommand.coreCommands,this.deviceCoreCommand&&0!==this.deviceCoreCommand.length&&(this.selectedCmd=this.deviceCoreCommand[0],this.selectedCmdSetParams=this.selectedCmd.parameters,this.setParameterBearerList(),this.getAssociatedDeviceProfile(t.deviceCoreCommand.profileName))}))}getAssociatedDeviceProfile(t){this.metadataSvc.findProfileByName(t).subscribe(i=>this.associateDeviceProfile=i.profile)}selectCmd(t){this.selectedCmd=t,this.selectedCmdSetParams=this.selectedCmd.parameters,this.resetResponse(),this.setParameterBearerList()}setParameterBearerList(){this.parameterBearerList=[],this.selectedCmdSetParams.forEach(t=>{this.parameterBearerList.push({key:t.resourceName,value:""})})}resetResponse(){this.cmdGetResponse="",this.cmdGetResponseRaw="",this.cmdSetResponse="",this.cmdSetResponseRaw="",this.cmdBinaryResponse=!0,this.cmdBinaryResponseURL=""}isBinaryResource(){let t=!1;return this.associateDeviceProfile.deviceResources.forEach(i=>{i.name!==this.selectedCmd.name||"Binary"!==i.properties.valueType||(t=!0)}),t||(this.associateDeviceProfile.deviceCommands.forEach(i=>{i.name===this.selectedCmd.name&&i.resourceOperations.forEach(_=>{this.associateDeviceProfile.deviceResources.forEach(s=>{_.deviceResource!==s.name||"Binary"!==s.properties.valueType||(t=!0)})})}),t)}issueGetCmd(){this.cmdSvc.issueGetCmd(this.associatedCmdDeviceName,this.selectedCmd.name).subscribe(t=>{if(this.cmdGetResponseRaw=JSON.stringify(t.event.readings,null,3),this.isBinaryResource())return void(this.cmdGetResponse="Binary resource is not supported for preview");let i=[];t.event.readings.forEach(_=>{i.push(_.value)}),this.cmdGetResponse=i.join(",")})}issueGetCmdOfBinaryResource(){this.cmdSvc.issueGetBinaryCmd(this.associatedCmdDeviceName,this.selectedCmd.name).subscribe(t=>{let i=CBOR.decode(t);"image/jpeg"===i.mediaType||"image/jpg"===i.mediaType||"image/png"===i.mediaType?(this.cmdBinaryResponse=i.binaryValue,this.cmdBinaryResponseURL=URL.createObjectURL(this.cmdBinaryResponse)):this.cmdBinaryResponse="only image binary is supported"})}issueSetCmd(){let t={};this.parameterBearerList.forEach(i=>{t[i.key]=i.value}),this.cmdSvc.issueSetCmd(this.associatedCmdDeviceName,this.selectedCmd?.name,t).subscribe(i=>{this.cmdSetResponseRaw=JSON.stringify(i,null,3),this.cmdSetResponse=i.message})}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(S.V),e.Y36(P.D))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-device-command-viewer"]],inputs:{deviceName:"deviceName"},features:[e.TTD],decls:5,vars:3,consts:function(){let t,i,_,s,c,E,A,v,p,I,O,T;return t="Associated Commands",i=" Command Name List ",_="Get and Set",s="Response:",c="ResponseRaw:",E="no Get method",A="Response:",v="ResponseRaw:",p="Set Parameters",I="no Set method",O="Associated Commands",T="no associated commands",[[4,"ngIf","ngIfThen","ngIfElse"],["hasAssociatedCommand",""],["noAssociatedCommand",""],[1,"card","mt-3"],[1,"card-header"],[1,"badge","badge-danger","text-light"],[1,"fa","fa-terminal","font-weight-bolder"],[1,"text-primary","mx-2","font-weight-bold"],t,[1,"card-body"],[1,"row"],[1,"col-md-2","col-lg-2"],[1,"card","mb-2"],[1,"card-header","font-weight-bold"],i,[1,"card-body","p-0"],[1,"list-group","list-group-flush"],["role","button","class","list-group-item list-group-item-action",3,"list-group-item-info","click",4,"ngFor","ngForOf"],[1,"col-md-10","col-lg-10"],["class","card",4,"ngIf"],["role","button",1,"list-group-item","list-group-item-action",3,"click"],[1,"card"],[1,"text-primary","font-weight-bold","mr-2"],[1,"fa","fa-thumb-tack","text-danger","mr-1"],_,[1,"card-body","px-2"],[1,"col-md-5","col-lg-5"],["class","btn btn-primary btn-sm float-right",3,"click",4,"ngIf"],[1,"card-body","overflow-auto"],["hasGetMethod",""],["noGetMethod",""],[1,"col-md-7","col-lg-7"],["hasSetMethod",""],["noSetMethod",""],[1,"btn","btn-primary","btn-sm","float-right",3,"click"],[1,"badge","badge-info"],s,["class","ml-2 text-primary",4,"ngIf"],[1,"mt-3"],c,["class","mt-2 bg-secondary p-2 text-light rounded",4,"ngIf"],[1,"ml-2","text-primary"],[1,"mt-2","bg-secondary","p-2","text-light","rounded"],[1,"text-warning"],[1,"fa","fa-warning","mr-1"],E,["class","card mb-2",4,"ngIf"],A,v,p,["class","d-flex flex-column bd-highlight",4,"ngIf"],[1,"d-flex","flex-column","bd-highlight"],["class","form p-2 bd-highlight",4,"ngFor","ngForOf"],[1,"form","p-2","bd-highlight"],[4,"ngIf","ngIfElse"],["valueTypeIsNotBool",""],[3,"for"],[1,"custom-select","custom-select-sm",3,"id","name","ngModel","ngModelChange"],[3,"ngValue"],[1,"form-control","form-control-sm",3,"id","name","ngModel","placeholder","ngModelChange"],I,O,[1,"card-body","text-center"],[1,"fa","fa-warning"],T]},template:function(i,_){if(1&i&&(e.YNc(0,d,1,0,"div",0),e.YNc(1,Ne,19,3,"ng-template",null,1,e.W1O),e.YNc(3,he,13,1,"ng-template",null,2,e.W1O)),2&i){const s=e.MAs(2),c=e.MAs(4);e.Q6J("ngIf",_.deviceCoreCommand)("ngIfThen",s)("ngIfElse",c)}},dependencies:[o.sg,o.O5,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.On]})}return n})();function Ve(n,l){if(1&n&&(e.TgZ(0,"span")(1,"span",67),e.SDv(2,68),e.qZA(),e.TgZ(3,"span",69),e._uU(4),e.qZA(),e.TgZ(5,"span"),e.SDv(6,70),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(t.associatedSvcName)}}function be(n,l){if(1&n&&(e.TgZ(0,"span")(1,"span",67),e.SDv(2,71),e.qZA(),e.TgZ(3,"span",69),e._uU(4),e.qZA(),e.TgZ(5,"span"),e.SDv(6,72),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(t.associatedProfileName)}}function Le(n,l){1&n&&(e.TgZ(0,"span"),e.SDv(1,73),e.qZA())}function $e(n,l){if(1&n&&(e.TgZ(0,"span",85),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.adminState)}}function Ze(n,l){if(1&n&&(e.TgZ(0,"span",86),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.adminState)}}function xe(n,l){if(1&n&&(e.TgZ(0,"span",85),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.operatingState,"")}}function ye(n,l){if(1&n&&(e.TgZ(0,"span",86),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.operatingState,"")}}function We(n,l){if(1&n&&(e.TgZ(0,"span",86),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.operatingState,"")}}const Ge=function(n){return{profileName:n}};function qe(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"input",23),e.NdJ("click",function(_){const c=e.CHM(t).$implicit,E=e.oxw();return e.KtG(E.selectOne(_,c))}),e.qZA()(),e.TgZ(3,"td",74),e._uU(4),e.qZA(),e.TgZ(5,"td",74),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td")(12,"span",75),e.YNc(13,$e,2,1,"span",76),e.YNc(14,Ze,2,1,"span",77),e.qZA()(),e.TgZ(15,"td",78)(16,"span",75),e.YNc(17,xe,2,1,"span",76),e.YNc(18,ye,2,1,"span",79),e.YNc(19,We,2,1,"span",77),e.qZA()(),e.TgZ(20,"td",78)(21,"span",80),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.setSpecialFeatureViewer(s,c.FEATURE_COMMAND))}),e._UZ(22,"i",81),e.qZA()(),e.TgZ(23,"td",78)(24,"span",80),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.setSpecialFeatureViewer(s,c.FEATURE_AUTOEVENT))}),e._UZ(25,"i",82),e.qZA()(),e.TgZ(26,"td")(27,"a",83),e._uU(28),e.qZA()(),e.TgZ(29,"td")(30,"a",84),e._uU(31),e.qZA()()()}if(2&n){const t=l.$implicit,i=e.oxw();e.ekj("table-active",i.isChecked(t.id)||i.specialFeatureAssociatedDeviceName===t.name),e.xp6(2),e.Q6J("checked",i.isChecked(t.id)),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(t.labels),e.xp6(2),e.Q6J("ngSwitch",t.adminState),e.xp6(1),e.Q6J("ngSwitchCase","UNLOCKED"),e.xp6(3),e.Q6J("ngSwitch",t.operatingState),e.xp6(1),e.Q6J("ngSwitchCase","UP"),e.xp6(1),e.Q6J("ngSwitchCase","DOWN"),e.xp6(3),e.ekj("badge-danger",i.specialFeatureName===i.FEATURE_COMMAND&&i.specialFeatureAssociatedDeviceName===t.name),e.xp6(3),e.ekj("badge-danger",i.specialFeatureName===i.FEATURE_AUTOEVENT&&i.specialFeatureAssociatedDeviceName===t.name),e.xp6(3),e.Q6J("queryParams",e.VKq(19,Ge,t.profileName)),e.xp6(1),e.Oqu(t.profileName),e.xp6(3),e.Oqu(t.serviceName)}}function we(n,l){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"span",99),e._uU(5),e.qZA()(),e.TgZ(6,"td")(7,"span",100),e._uU(8),e.qZA()()()),2&n){const t=l.$implicit;e.xp6(2),e.Oqu(t.sourceName),e.xp6(3),e.Oqu(t.interval),e.xp6(3),e.Oqu(t.onChange)}}function Xe(n,l){if(1&n&&(e.TgZ(0,"div")(1,"div",89)(2,"div",90)(3,"span",91),e._UZ(4,"i",82),e.qZA(),e.TgZ(5,"span",92),e._uU(6),e.qZA(),e.TgZ(7,"span"),e.SDv(8,93),e.qZA()(),e.TgZ(9,"div",94)(10,"div",19)(11,"table",20)(12,"thead",21)(13,"th",22),e.SDv(14,95),e.qZA(),e.TgZ(15,"th",22),e.SDv(16,96),e.qZA(),e.TgZ(17,"th",22),e.SDv(18,97),e.qZA()(),e.TgZ(19,"tbody"),e.YNc(20,we,9,3,"tr",98),e.qZA()()()()()()),2&n){const t=e.oxw(2);e.xp6(6),e.hij(" ",t.specialFeatureAssociatedDeviceName,""),e.xp6(14),e.Q6J("ngForOf",t.autoEvents)}}function He(n,l){if(1&n&&(e.TgZ(0,"div",89)(1,"div",90)(2,"span",91),e._UZ(3,"i",82),e.qZA(),e.TgZ(4,"span",92),e._uU(5),e.qZA(),e.TgZ(6,"span"),e.SDv(7,101),e.qZA()(),e.TgZ(8,"div",102)(9,"h5",103),e._UZ(10,"i",58),e.TgZ(11,"span"),e.SDv(12,104),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(5),e.hij(" ",t.specialFeatureAssociatedDeviceName,"")}}function ke(n,l){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Xe,21,2,"div",87),e.YNc(2,He,13,1,"ng-template",null,88,e.W1O),e.qZA()),2&n){const t=e.MAs(3),i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.autoEvents)("ngIfElse",t)}}function Ue(n,l){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-device-command-viewer",105),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("deviceName",t.specialFeatureAssociatedDeviceName)}}let Je=(()=>{class n{constructor(t,i,_,s){this.metaSvc=t,this.msgSvc=i,this.route=_,this.router=s,this.toolbars=!0,this.enableSelectAll=!0,this.deviceList=[],this.associatedSvcName="",this.associatedProfileName="",this.selectedDevice=[],this.FEATURE_AUTOEVENT="autoevent",this.FEATURE_COMMAND="command",this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.route.queryParams.subscribe(t=>t.svcName?(this.associatedSvcName=t.svcName,void this.getDeviceListByAssociatedSvc(this.associatedSvcName)):t.profileName?(this.associatedProfileName=t.profileName,void this.getDeviceListByAssociatedProfile(this.associatedProfileName)):(this.associatedSvcName="",this.associatedProfileName="",void this.getDeviceListPagination()))}renderPopoverComponent(){setTimeout(()=>{$('[data-toggle="popover"]').popover({trigger:"hover"})},250)}getDeviceList(){""===this.associatedSvcName?""===this.associatedProfileName?this.getDeviceListPagination():this.getDeviceListByAssociatedProfile(this.associatedSvcName):this.getDeviceListByAssociatedSvc(this.associatedSvcName)}getDeviceListByAssociatedSvc(t){this.metaSvc.findDevicesByServiceName(this.pageOffset,this.pageLimit,t).subscribe(i=>this.deviceList=i.devices)}getDeviceListByAssociatedProfile(t){this.metaSvc.findDevicesByProfileName(this.pageOffset,this.pageLimit,t).subscribe(i=>this.deviceList=i.devices)}getDeviceListPagination(){this.metaSvc.allDevicesPagination(this.pageOffset,this.pageLimit).subscribe(t=>{this.deviceList=t.devices})}refresh(){this.associatedProfileName="",this.associatedSvcName="",this.metaSvc.allDevicesPagination(0,this.pageLimit).subscribe(t=>{this.deviceList=t.devices,this.msgSvc.success("refresh"),this.resetPagination()})}edit(){this.router.navigate(["../edit-device"],{relativeTo:this.route,queryParams:{deviceName:this.selectedDevice[0].name}})}deleteConfirm(){$("#deleteConfirmDialog").modal("show")}delete(){this.selectedDevice.forEach((t,i)=>{this.metaSvc.deleteOneDeviceByName(t.name).subscribe(()=>{this.selectedDevice.splice(i,1),this.deviceList.forEach((_,s)=>{if(_.id===t.id)return this.deviceList.splice(s,1),void this.msgSvc.success("remove device ",` Name: ${_.name}`)})})}),this.specialFeatureName=void 0,$("#deleteConfirmDialog").modal("hide")}setSpecialFeatureViewer(t,i){this.specialFeatureAssociatedDeviceName=t.name,this.specialFeatureName=i,this.specialFeatureName===this.FEATURE_AUTOEVENT&&(this.autoEvents=t.autoEvents)}isCheckedAll(){let t=!0;return this.deviceList&&0===this.deviceList.length&&(t=!1),this.deviceList.forEach(i=>{-1===this.selectedDevice.findIndex(_=>_.name===i.name)&&(t=!1)}),t}selectAll(t){this.deviceList.forEach(t.target.checked?_=>{-1===this.selectedDevice.findIndex(s=>s.name===_.name)&&this.selectedDevice.push(_)}:_=>{this.selectedDevice.forEach((s,c)=>{s.name===_.name&&this.selectedDevice.splice(c,1)})})}isChecked(t){return this.selectedDevice.findIndex(i=>i.id===t)>=0}selectOne(t,i){t.target.checked?this.selectedDevice.push(i):this.selectedDevice.forEach((s,c)=>{s.name===i.name&&this.selectedDevice.splice(c,1)})}onPageSelected(){this.resetPagination(),this.getDeviceList()}prePage(){this.setPagination(-1),this.getDeviceList()}nextPage(){this.setPagination(1),this.getDeviceList()}setPagination(t){1===t?this.pagination+=1:-1===t&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit}resetPagination(){this.pagination=1,this.pageOffset=(this.pagination-1)*this.pageLimit}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(P.D),e.Y36(x.e),e.Y36(C.gz),e.Y36(C.F0))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-device-list"]],inputs:{toolbars:"toolbars",enableSelectAll:"enableSelectAll"},decls:98,vars:12,consts:function(){let t,i,_,s,c,E,A,v,p,I,O,T,D,Z,m,g,J,F,z,Q,Y,N,Ae,ge,Se,pe,Ie,fe,ue,ve,De,me;return t="Refresh",i="Add",_="Edit",s="Delete",c="ID",E="Name",A="Description",v="Labels",p="AdminState",I="OperatingState",O="Command",T="AutoEvents",D="AssociatedProfile",Z="AssociatedService",m="items per page",g="Previous",J="Next",F="Warning",z=" The data will be permanently erased!!! Are you sure to execute delete operation\uFF1F ",Q="Cancel",Y="Confirm",N="DeviceService",Ae="Associated Device List",ge="DeviceProfile",Se="Associated Device List",pe="Device List",Ie="Associated AutoEvents",fe="Resource",ue="Interval",ve="Onchange",De="Associated AutoEvents",me="no associated AutoEvents",[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","text-danger","mr-2"],[4,"ngIf"],[1,"card-body","p-0","position-relative"],[1,"bg-light","px-2","py-2"],["role","group",1,"btn-group","btn-group-sm"],["data-testid","device-list-refresh-btn",1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","mr-1"],t,["type","button","routerLink","../add-device",1,"btn","btn-info"],[1,"fa","fa-plus","mr-1"],i,["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-edit","mr-1"],_,["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash","mr-1"],s,[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],["type","checkbox","role","button",3,"checked","click"],c,E,A,v,p,I,O,T,D,Z,[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],m,[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"custom-select",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left","mr-1"],g,[1,"page-item"],J,[1,"fa","fa-angle-double-right","ml-1"],["id","deleteConfirmDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteConfirmDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteConfirmDialogLabel",1,"modal-title","text-danger"],[1,"fa","fa-warning","mr-1"],F,[1,"modal-body"],z,[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],Q,["type","button",1,"btn","btn-danger",3,"click"],Y,[1,"mr-1"],N,[1,"text-danger","mr-1"],Ae,ge,Se,pe,[1,"user-select-all"],[3,"ngSwitch"],["class","badge badge-success",4,"ngSwitchCase"],["class","badge badge-danger",4,"ngSwitchDefault"],[1,"text-center"],["class","badge badge-danger",4,"ngSwitchCase"],["role","button",1,"badge","badge-primary","text-light",3,"click"],[1,"fa","fa-terminal","font-weight-bolder"],[1,"fa","fa-calendar-check-o","font-weight-bolder"],["routerLink","../../device-profile-center",3,"queryParams"],["routerLink","../../device-service-list"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[4,"ngIf","ngIfElse"],["noAutoEvents",""],[1,"card","mt-3"],[1,"card-header"],[1,"badge","badge-danger","text-light"],[1,"text-primary","mx-2","font-weight-bold"],Ie,[1,"card-body","p-0"],fe,ue,ve,[4,"ngFor","ngForOf"],[1,"badge","badge-secondary","badge-pill"],[1,""],De,[1,"card-body","text-center"],[1,"text-warning"],me,[3,"deviceName"]]},template:function(i,_){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"i",2),e.YNc(3,Ve,7,1,"span",3),e.YNc(4,be,7,1,"span",3),e.YNc(5,Le,2,0,"span",3),e.qZA(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"button",7),e.NdJ("click",function(){return _.refresh()}),e.TgZ(10,"span"),e._UZ(11,"i",8),e.TgZ(12,"span"),e.SDv(13,9),e.qZA()()(),e.TgZ(14,"button",10)(15,"span"),e._UZ(16,"i",11),e.TgZ(17,"span"),e.SDv(18,12),e.qZA()()(),e.TgZ(19,"button",13),e.NdJ("click",function(){return _.edit()}),e.TgZ(20,"span"),e._UZ(21,"i",14),e.TgZ(22,"span"),e.SDv(23,15),e.qZA()()(),e.TgZ(24,"button",16),e.NdJ("click",function(){return _.deleteConfirm()}),e.TgZ(25,"span"),e._UZ(26,"i",17),e.TgZ(27,"span"),e.SDv(28,18),e.qZA()()()()(),e.TgZ(29,"div",19)(30,"table",20)(31,"thead",21)(32,"tr")(33,"th",22)(34,"input",23),e.NdJ("click",function(c){return _.selectAll(c)}),e.qZA()(),e.TgZ(35,"th",22),e.SDv(36,24),e.qZA(),e.TgZ(37,"th",22),e.SDv(38,25),e.qZA(),e.TgZ(39,"th",22),e.SDv(40,26),e.qZA(),e.TgZ(41,"th",22),e.SDv(42,27),e.qZA(),e.TgZ(43,"th",22),e.SDv(44,28),e.qZA(),e.TgZ(45,"th",22),e.SDv(46,29),e.qZA(),e.TgZ(47,"th",22),e.SDv(48,30),e.qZA(),e.TgZ(49,"th",22),e.SDv(50,31),e.qZA(),e.TgZ(51,"th",22),e.SDv(52,32),e.qZA(),e.TgZ(53,"th",22),e.SDv(54,33),e.qZA()()(),e.TgZ(55,"tbody"),e.YNc(56,qe,32,21,"tr",34),e.qZA()()()(),e.TgZ(57,"div",35)(58,"nav",36)(59,"ul",37)(60,"li",38)(61,"span",39),e.SDv(62,40),e.qZA()(),e.TgZ(63,"li",41)(64,"select",42),e.NdJ("ngModelChange",function(c){return _.pageLimit=c})("ngModelChange",function(){return _.onPageSelected()}),e.TgZ(65,"option",43),e._uU(66,"5"),e.qZA(),e.TgZ(67,"option",44),e._uU(68,"10"),e.qZA(),e.TgZ(69,"option",45),e._uU(70,"20"),e.qZA()()(),e.TgZ(71,"li",46)(72,"button",47),e.NdJ("click",function(){return _.prePage()}),e._UZ(73,"i",48),e.TgZ(74,"span"),e.SDv(75,49),e.qZA()()(),e.TgZ(76,"li",50)(77,"button",47),e.NdJ("click",function(){return _.nextPage()}),e.TgZ(78,"span"),e.SDv(79,51),e.qZA(),e._UZ(80,"i",52),e.qZA()()()()()(),e.YNc(81,ke,4,2,"div",3),e.YNc(82,Ue,2,1,"div",3),e.TgZ(83,"div",53)(84,"div",54)(85,"div",55)(86,"div",56)(87,"h5",57),e._UZ(88,"i",58),e.TgZ(89,"span"),e.SDv(90,59),e.qZA()()(),e.TgZ(91,"div",60),e.SDv(92,61),e.qZA(),e.TgZ(93,"div",62)(94,"button",63),e.SDv(95,64),e.qZA(),e.TgZ(96,"button",65),e.NdJ("click",function(){return _.delete()}),e.SDv(97,66),e.qZA()()()()()),2&i&&(e.xp6(3),e.Q6J("ngIf",""!==_.associatedSvcName),e.xp6(1),e.Q6J("ngIf",""!==_.associatedProfileName),e.xp6(1),e.Q6J("ngIf",""===_.associatedProfileName&&""===_.associatedSvcName),e.xp6(14),e.Q6J("disabled",1!==_.selectedDevice.length),e.xp6(5),e.Q6J("disabled",0===_.selectedDevice.length),e.xp6(10),e.Q6J("checked",_.isCheckedAll()),e.xp6(22),e.Q6J("ngForOf",_.deviceList),e.xp6(8),e.Q6J("ngModel",_.pageLimit),e.xp6(8),e.Q6J("disabled",1===_.pagination),e.xp6(5),e.Q6J("disabled",_.pageLimit>_.deviceList.length),e.xp6(4),e.Q6J("ngIf",_.specialFeatureName===_.FEATURE_AUTOEVENT),e.xp6(1),e.Q6J("ngIf",_.specialFeatureName===_.FEATURE_COMMAND))},dependencies:[o.sg,o.O5,o.RF,o.n9,o.ED,a.YN,a.Kr,a.EJ,a.JJ,a.On,C.rH,Re],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]})}return n})();class Fe{constructor(){this.Schema="",this.Host="",this.Port="",this.User="",this.Password="",this.ClientId="",this.CommandTopic=""}}class ze{constructor(){this.Address="",this.Port="",this.UnitID="",this.Timeout="",this.IdleTimeout=""}}class Qe{constructor(){this.Address="",this.UnitID="",this.BaudRate="",this.DataBits="",this.StopBits="",this.Parity="",this.Timeout="",this.IdleTimeout=""}}class Ye{constructor(){this.Address="",this.Port=""}}class Ke{constructor(){this.Address="",this.Port="",this.MACAddress=""}}class Be{constructor(){this.host="",this.port=""}}function je(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"span",11),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.changeProtocolTemplateMode(_.TEMPLATE_BUILT_IN))}),e._UZ(2,"i",12),e.TgZ(3,"span"),e.SDv(4,13),e.qZA()(),e.TgZ(5,"span",14),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.changeProtocolTemplateMode(_.TEMPLATE_CUSTOM))}),e._UZ(6,"i",12),e.TgZ(7,"span"),e.SDv(8,15),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.ekj("badge-primary",t.protocolTemplateMode===t.TEMPLATE_BUILT_IN)("badge-secondary",t.protocolTemplateMode!==t.TEMPLATE_BUILT_IN),e.xp6(1),e.ekj("fa-check-square",t.protocolTemplateMode===t.TEMPLATE_BUILT_IN),e.xp6(3),e.ekj("badge-primary",t.protocolTemplateMode===t.TEMPLATE_CUSTOM)("badge-secondary",t.protocolTemplateMode!==t.TEMPLATE_CUSTOM),e.xp6(1),e.ekj("fa-check-square",t.protocolTemplateMode===t.TEMPLATE_CUSTOM)}}function et(n,l){1&n&&e._UZ(0,"div")}function tt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"form",34)(2,"div",35)(3,"div",36)(4,"span",37),e.SDv(5,38),e.qZA()(),e._UZ(6,"input",39),e.qZA(),e.TgZ(7,"div",40),e._UZ(8,"i",41),e.qZA(),e.TgZ(9,"div",35)(10,"div",36)(11,"span",37),e.SDv(12,42),e.qZA()(),e.TgZ(13,"input",43),e.NdJ("ngModelChange",function(_){const c=e.CHM(t).$implicit,E=e.oxw(4);return e.KtG(E.builtinProtocolTemplateSelected[c]=_)}),e.qZA()()()()}if(2&n){const t=l.$implicit,i=e.oxw(4);e.xp6(6),e.Q6J("value",t),e.xp6(7),e.Q6J("ngModel",i.builtinProtocolTemplateSelected[t])}}function _t(n,l){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,tt,14,2,"div",33),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.builtinProtocolTemplateProperties)}}function it(n,l){1&n&&(e.TgZ(0,"h5",48),e._UZ(1,"i",49),e.TgZ(2,"span"),e.SDv(3,50),e.qZA()())}function nt(n,l){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"span",44),e.TgZ(2,"span",45),e.SDv(3,46),e.qZA()(),e.YNc(4,it,4,0,"h5",47)),2&n){const t=e.oxw(3);e.xp6(4),e.Q6J("ngIf",0===t.builtinProtocolTemplateProperties.length&&t.builtinProtocolName)}}function ot(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",17)(2,"form")(3,"div",18)(4,"label"),e.SDv(5,19),e.qZA(),e.TgZ(6,"select",20),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw(2);return e.KtG(s.builtinProtocolName=_)})("ngModelChange",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.onSelectBuiltinProtocolTemplate())}),e.TgZ(7,"option",21),e._uU(8,"device-mqtt"),e.qZA(),e.TgZ(9,"option",22),e._uU(10,"device-rest"),e.qZA(),e.TgZ(11,"option",23),e._uU(12,"device-virtual"),e.qZA(),e.TgZ(13,"option",24),e._uU(14,"device-modbus-tcp"),e.qZA(),e.TgZ(15,"option",25),e._uU(16,"device-modbus-rtu"),e.qZA(),e.TgZ(17,"option",26),e._uU(18,"device-onvif-camera"),e.qZA(),e.TgZ(19,"option",27),e._uU(20,"device-rfid-llrp"),e.qZA()(),e.TgZ(21,"div",28)(22,"small"),e.SDv(23,29),e.qZA()()()()(),e.TgZ(24,"div",30),e.YNc(25,_t,2,1,"div",31),e.YNc(26,nt,5,1,"ng-template",null,32,e.W1O),e.qZA()()}if(2&n){const t=e.MAs(27),i=e.oxw(2);e.xp6(6),e.ekj("is-invalid",!i.builtinProtocolName)("is-valid",i.builtinProtocolName),e.Q6J("ngModel",i.builtinProtocolName),e.xp6(19),e.Q6J("ngIf",0!==i.builtinProtocolTemplateProperties.length)("ngIfElse",t)}}function st(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"form",34)(2,"div",35)(3,"div",36)(4,"span",37),e.SDv(5,60),e.qZA()(),e.TgZ(6,"input",61),e.NdJ("ngModelChange",function(_){const c=e.CHM(t).$implicit;return e.KtG(c.propertyName=_)}),e.qZA()(),e.TgZ(7,"div",40),e._UZ(8,"i",41),e.qZA(),e.TgZ(9,"div",35)(10,"div",36)(11,"span",37),e.SDv(12,62),e.qZA()(),e.TgZ(13,"input",63),e.NdJ("ngModelChange",function(_){const c=e.CHM(t).$implicit;return e.KtG(c.propertyValue=_)}),e.qZA()(),e.TgZ(14,"div",64)(15,"button",65),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.removeCustomProtocolProperty(s))}),e._UZ(16,"i",66),e.qZA()()()()}if(2&n){const t=l.$implicit;e.xp6(6),e.Q6J("ngModel",t.propertyName),e.xp6(7),e.Q6J("ngModel",t.propertyValue)}}function ct(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",51)(2,"div",18)(3,"label"),e.SDv(4,52),e.qZA(),e.TgZ(5,"input",53),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw(2);return e.KtG(s.customProtocolName=_)})("ngModelChange",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.onCustomProtocolNameChange())}),e.qZA(),e.TgZ(6,"div",28)(7,"small"),e.SDv(8,54),e.qZA()()()(),e.TgZ(9,"div",55)(10,"div")(11,"p",56),e._UZ(12,"span",57),e.TgZ(13,"span",58),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.addCustomProtocolProperty())}),e.SDv(14,59),e.qZA()()(),e.YNc(15,st,17,2,"div",33),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(5),e.ekj("is-invalid",!t.customProtocolName)("is-valid",t.customProtocolName),e.Q6J("ngModel",t.customProtocolName),e.xp6(10),e.Q6J("ngForOf",t.customProtocolPropertyBearer)}}function at(n,l){if(1&n&&(e.TgZ(0,"div",0)(1,"div",4),e.YNc(2,je,9,12,"div",6),e.YNc(3,et,1,0,"div",7),e.YNc(4,ot,28,7,"ng-template",null,8,e.W1O),e.YNc(6,ct,16,6,"ng-template",null,9,e.W1O),e.qZA()()),2&n){const t=e.MAs(5),i=e.MAs(7),_=e.oxw();e.xp6(2),e.Q6J("ngIf",_.mode===_.MODE_ADD),e.xp6(1),e.Q6J("ngIf",_.protocolTemplateMode===_.TEMPLATE_CUSTOM)("ngIfThen",i)("ngIfElse",t)}}let le=(()=>{class n{constructor(){this.MODE_ADD="add",this.MODE_EDIT="edit",this.deviceProtocols={},this.isValid=!1,this.isValidChange=new e.vpe,this.TEMPLATE_CUSTOM="custom",this.TEMPLATE_BUILT_IN="built-in",this.customProtocolPropertyBearer=[],this.builtinProtocolTemplateProperties=[]}ngOnInit(){if(this.mode){if(this.mode==this.MODE_EDIT)return this.protocolTemplateMode=this.TEMPLATE_CUSTOM,this.extractProtocolName(),this.customProtocolName=this.protocolName?this.protocolName:"",void this.setCustomProtocolPropertysBearer();this.mode==this.MODE_ADD&&(this.protocolTemplateMode=this.TEMPLATE_BUILT_IN),this.validate()}}extractProtocolName(){!this.deviceProtocols||0===Object.keys(this.deviceProtocols).length||(this.protocolName=Object.keys(this.deviceProtocols)[0])}onSelectBuiltinProtocolTemplate(){switch(this.validate(),this.builtinProtocolName){case"mqtt":this.builtinProtocolTemplateSelected=new Fe;break;case"modbus-tcp":this.builtinProtocolTemplateSelected=new ze;break;case"modbus-rtu":this.builtinProtocolTemplateSelected=new Qe;break;case"other":this.builtinProtocolTemplateSelected=new Ye;break;case"other-rest":default:this.builtinProtocolTemplateSelected={};break;case"Onvif":this.builtinProtocolTemplateSelected=new Ke;break;case"tcp":this.builtinProtocolTemplateSelected=new Be}this.builtinProtocolTemplateProperties=Object.keys(this.builtinProtocolTemplateSelected)}changeProtocolTemplateMode(t){this.protocolTemplateMode=t,this.validate()}onCustomProtocolNameChange(){this.validate()}setCustomProtocolPropertysBearer(){if(this.customProtocolName)for(const[t,i]of Object.entries(this.deviceProtocols[this.customProtocolName]))this.customProtocolPropertyBearer.push({propertyName:t,propertyValue:i})}addCustomProtocolProperty(){this.customProtocolPropertyBearer.push({propertyName:"",propertyValue:""})}removeCustomProtocolProperty(t){this.customProtocolPropertyBearer.splice(this.customProtocolPropertyBearer.indexOf(t),1)}getDeviceProtocols(){if(this.deviceProtocols={},this.protocolTemplateMode===this.TEMPLATE_BUILT_IN)this.deviceProtocols[this.builtinProtocolName]=Object.assign({},this.builtinProtocolTemplateSelected);else{let t={};this.customProtocolPropertyBearer.forEach(i=>{t[i.propertyName]=i.propertyValue}),this.deviceProtocols[this.customProtocolName]=t}return this.deviceProtocols}validate(){this.isValid=!0,this.protocolTemplateMode===this.TEMPLATE_BUILT_IN?this.builtinProtocolName||(this.isValid=!1):this.customProtocolName||(this.isValid=!1),this.isValidChange.emit(this.isValid)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-device-protocol"]],inputs:{mode:"mode",deviceProtocols:"deviceProtocols",isValid:"isValid"},outputs:{isValidChange:"isValidChange"},decls:7,vars:1,consts:function(){let t,i,_,s,c,E,A,v,p,I,O,T,D,Z;return t="Device Protocol",i="Avaliable Protocol Templates",_="Custom Protocol Templates",s="Protocol Name",c="the protocol name can't be empty!",E="PropertyName",A="PropertyVaule",v=" all built-in protocol templates refer to the device service released by edgex, such as device-virtual, device-rest, device-mqtt, device-modbus ",p="this device service doesn't need to set protocol properties",I="Protocol Name",O="the protocol name can't be empty!",T="Add Protocol Property",D="PropertyName",Z="PropertyValue",[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-tags","fa-lg","text-danger","mr-1"],t,[1,"card-body"],["class","card",4,"ngIf"],["class","mb-2",4,"ngIf"],[4,"ngIf","ngIfThen","ngIfElse"],["builtinProtocolTemplate",""],["customProtocolTemplate",""],[1,"mb-2"],["role","button",1,"user-select-none","badge","font-weight-bold","mr-3",3,"click"],[1,"fa","fa-square-o","mr-1"],i,["role","button",1,"user-select-none","badge","font-weight-bold",3,"click"],_,[1,"row","border","border-secondary","p-2","rounded-lg","mx-1"],[1,"col-md-2","border-right","border-info"],[1,"form-group"],s,["type","text","name","builtinProtocolName","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","mqtt"],["value","other-rest"],["value","other"],["value","modbus-tcp"],["value","modbus-rtu"],["value","Onvif"],["value","tcp"],[1,"invalid-feedback"],c,[1,"col-md-10"],[4,"ngIf","ngIfElse"],["noBuiltinProperties",""],[4,"ngFor","ngForOf"],[1,"form-inline","mb-1"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],E,["type","text","disabled","",1,"form-control",2,"width","300px",3,"value"],[1,"form-group","mx-2"],[1,"fa","fa-long-arrow-right"],A,["type","text","name","property",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"fa","fa-info-circle","fa-lg","text-success","font-weight-bold","mr-1"],[1,"text-muted"],v,["class","text-warning",4,"ngIf"],[1,"text-warning"],[1,"fa","fa-warning","mr-1"],p,[1,"col-md-2","col-lg-2","border-right","border-secondary"],I,["type","text","name","customProtocolName",1,"form-control",3,"ngModel","ngModelChange"],O,[1,"col-md-10","col-lg-10"],[1,"badge","badge-secondary","font-weight-bold"],[1,"fa","fa-plus-circle","mr-2"],["role","button",1,"user-select-none",3,"click"],T,D,["type","text","name","propertyName",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],Z,["type","text","name","PropertyValue",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"input-group","ml-2"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"]]},template:function(i,_){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"i",2),e.TgZ(3,"span"),e.SDv(4,3),e.qZA()(),e.TgZ(5,"div",4),e.YNc(6,at,8,4,"div",5),e.qZA()()),2&i&&(e.xp6(6),e.Q6J("ngIf",_.mode))},dependencies:[o.sg,o.O5,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.Q7,a.On,a.F]})}return n})();var H=u(8027);function lt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"input",35),e.NdJ("click",function(_){const c=e.CHM(t).$implicit,E=e.oxw();return e.KtG(E.selectOneSvc(_,c.name))}),e.qZA()(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"date"),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.ALo(18,"date"),e.qZA()()}if(2&n){const t=l.$implicit,i=e.oxw();e.ekj("table-active",i.isSvcChecked(t.name)),e.xp6(2),e.Q6J("checked",i.isSvcChecked(t.name)),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(t.labels),e.xp6(2),e.Oqu(t.adminState),e.xp6(2),e.Oqu(e.xi3(15,10,t.created,"yyyy-MM-dd hh:mm:ss")),e.xp6(3),e.Oqu(e.xi3(18,13,t.modified,"yyyy-MM-dd hh:mm:ss"))}}let re=(()=>{class n{constructor(t){this.metaSvc=t,this.singleDeviceSvcSelectedEvent=new e.vpe,this.deviceServiceList=[],this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.findAllDeviceSvcPagination()}findAllDeviceSvcPagination(){this.metaSvc.findAllDeviceServicesPagination(this.pageOffset,this.pageLimit).subscribe(t=>{this.deviceServiceList=t.services})}onSingleDeviceSvcSelectedEmitter(){this.singleDeviceSvcSelectedEvent.emit(this.deviceSvcSelected)}isSvcChecked(t){return this.deviceSvcSelected?.name===t}selectOneSvc(t,i){let s=this;t.target.checked?this.deviceServiceList.forEach(function(c){c.name===i&&(s.deviceSvcSelected=c)}):this.deviceSvcSelected=void 0,this.onSingleDeviceSvcSelectedEmitter()}onPageSelected(){this.resetPagination(),this.setPagination(),this.findAllDeviceSvcPagination()}prePage(){this.setPagination(-1),this.findAllDeviceSvcPagination()}nextPage(){this.setPagination(1),this.findAllDeviceSvcPagination()}setPagination(t){1===t?this.pagination+=1:-1===t&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit}resetPagination(){this.pagination=1}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(P.D))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-device-service-list"]],inputs:{deviceSvcSelected:"deviceSvcSelected"},outputs:{singleDeviceSvcSelectedEvent:"singleDeviceSvcSelectedEvent"},decls:52,vars:4,consts:function(){let t,i,_,s,c,E,A,v,p,I,O;return t="Device Service List",i="ID",_="Name",s="Description",c="Labels",E="AdminState",A="Created",v="Modified",p="items per page",I="Previous",O="Next",[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","mr-2","text-danger"],t,[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],i,_,s,c,E,A,v,[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],p,[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"custom-select",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left","mr-1"],I,[1,"page-item"],O,[1,"fa","fa-angle-double-right","ml-1"],["type","checkbox","role","button",3,"checked","click"]]},template:function(i,_){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"i",2),e.TgZ(3,"span"),e.SDv(4,3),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5)(7,"table",6)(8,"thead",7)(9,"tr")(10,"th",8),e._uU(11,"#"),e.qZA(),e.TgZ(12,"th",8),e.SDv(13,9),e.qZA(),e.TgZ(14,"th",8),e.SDv(15,10),e.qZA(),e.TgZ(16,"th",8),e.SDv(17,11),e.qZA(),e.TgZ(18,"th",8),e.SDv(19,12),e.qZA(),e.TgZ(20,"th",8),e.SDv(21,13),e.qZA(),e.TgZ(22,"th",8),e.SDv(23,14),e.qZA(),e.TgZ(24,"th",8),e.SDv(25,15),e.qZA()()(),e.TgZ(26,"tbody"),e.YNc(27,lt,19,16,"tr",16),e.qZA()()()(),e.TgZ(28,"div",17)(29,"nav",18)(30,"ul",19)(31,"li",20)(32,"span",21),e.SDv(33,22),e.qZA()(),e.TgZ(34,"li",23)(35,"select",24),e.NdJ("ngModelChange",function(c){return _.pageLimit=c})("ngModelChange",function(){return _.onPageSelected()}),e.TgZ(36,"option",25),e._uU(37,"5"),e.qZA(),e.TgZ(38,"option",26),e._uU(39,"10"),e.qZA(),e.TgZ(40,"option",27),e._uU(41,"20"),e.qZA()()(),e.TgZ(42,"li",28)(43,"button",29),e.NdJ("click",function(){return _.prePage()}),e._UZ(44,"i",30),e.TgZ(45,"span"),e.SDv(46,31),e.qZA()()(),e.TgZ(47,"li",32)(48,"button",29),e.NdJ("click",function(){return _.nextPage()}),e.TgZ(49,"span"),e.SDv(50,33),e.qZA(),e._UZ(51,"i",34),e.qZA()()()()()()),2&i&&(e.xp6(27),e.Q6J("ngForOf",_.deviceServiceList),e.xp6(8),e.Q6J("ngModel",_.pageLimit),e.xp6(8),e.Q6J("disabled",1===_.pagination),e.xp6(5),e.Q6J("disabled",_.pageLimit>_.deviceServiceList.length))},dependencies:[o.sg,a.YN,a.Kr,a.EJ,a.JJ,a.On,o.uU],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]})}return n})();var U=u(9519);function rt(n,l){if(1&n&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function dt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",4)(2,"form")(3,"div",11)(4,"label",12),e.SDv(5,13),e.qZA(),e.TgZ(6,"div",14)(7,"div",15)(8,"input",16),e.NdJ("ngModelChange",function(_){const c=e.CHM(t).$implicit;return e.KtG(c.interval=_)})("ngModelChange",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.onValueChange())}),e.qZA(),e.TgZ(9,"div",17)(10,"select",18),e.NdJ("ngModelChange",function(_){const c=e.CHM(t).$implicit;return e.KtG(c.unit=_)})("ngModelChange",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.onValueChange())}),e.TgZ(11,"option",19),e._uU(12,"millisecond"),e.qZA(),e.TgZ(13,"option",20),e._uU(14,"second"),e.qZA(),e.TgZ(15,"option",21),e._uU(16,"minute"),e.qZA(),e.TgZ(17,"option",22),e._uU(18,"hour"),e.qZA()()(),e.TgZ(19,"div",23),e.SDv(20,24),e.qZA()()()(),e.TgZ(21,"div",25)(22,"label",12),e.SDv(23,26),e.qZA(),e.TgZ(24,"div",14)(25,"select",27),e.NdJ("ngModelChange",function(_){const c=e.CHM(t).$implicit;return e.KtG(c.onChange=_)})("ngModelChange",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.onValueChange())}),e.TgZ(26,"option",28),e._uU(27,"true"),e.qZA(),e.TgZ(28,"option",29),e._uU(29,"false"),e.qZA()()()(),e.TgZ(30,"div",25)(31,"label",12),e.SDv(32,30),e.qZA(),e.TgZ(33,"div",14)(34,"select",31),e.NdJ("ngModelChange",function(_){const c=e.CHM(t).$implicit;return e.KtG(c.resource=_)})("ngModelChange",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.onValueChange())}),e.YNc(35,rt,2,2,"option",32),e.qZA(),e.TgZ(36,"div",23),e.SDv(37,33),e.qZA()()(),e.TgZ(38,"button",34),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.removeAutoEvent(s))}),e._UZ(39,"i",35),e.TgZ(40,"span"),e.SDv(41,36),e.qZA()()()()()}if(2&n){const t=l.$implicit,i=e.oxw();e.xp6(8),e.ekj("is-invalid",!i.eventIntervalNumType(t.interval))("is-valid",i.eventIntervalNumType(t.interval)),e.Q6J("ngModel",t.interval),e.xp6(2),e.Q6J("ngModel",t.unit),e.xp6(15),e.Q6J("ngModel",t.onChange),e.xp6(9),e.ekj("is-invalid",""===t.resource)("is-valid",""!==t.resource),e.Q6J("ngModel",t.resource),e.xp6(1),e.Q6J("ngForOf",i.autoEventResourceNameSet)}}let Te=(()=>{class n{constructor(){this.autoEvents=[],this.autoEventsChange=new e.vpe,this.isValid=!1,this.isValidChange=new e.vpe,this.autoEventDecoratorBearer=[],this.autoEventResourceNameSet=[]}ngOnInit(){}ngOnChanges(){this.resetAutoEventDecoratorBearer(),this.setAutoEventDecorator(this.autoEvents),this.setupAutoEventResourceNameSet(this.deviceProfile),this.resumeOriginalAutoEvents()}onValueChange(){this.resumeOriginalAutoEvents()}resetAutoEventDecoratorBearer(){this.autoEventDecoratorBearer.splice(0,this.autoEventDecoratorBearer.length)}addAutoEvent(){this.autoEventDecoratorBearer.push({interval:"",onChange:!1,resource:"",unit:"ms"}),this.resumeOriginalAutoEvents()}removeAutoEvent(t){this.autoEventDecoratorBearer.splice(this.autoEventDecoratorBearer.indexOf(t),1),this.resumeOriginalAutoEvents()}setupAutoEventResourceNameSet(t){t&&(this.autoEventResourceNameSet.splice(0,this.autoEventResourceNameSet.length),t.deviceResources.forEach((i,_)=>{this.autoEventResourceNameSet.push(i.name)}),t.deviceCommands.forEach((i,_)=>{this.autoEventResourceNameSet.push(i.name)}))}eventIntervalNumType(t){return!isNaN(t)&&parseFloat(t)===parseInt(t)}setAutoEventDecorator(t){t&&t.forEach(i=>{let _=0;-1!==i.interval.indexOf("ms")?_=i.interval.indexOf("ms"):-1!==i.interval.indexOf("s")?_=i.interval.indexOf("s"):-1!==i.interval.indexOf("m")?_=i.interval.indexOf("m"):-1!==i.interval.indexOf("h")&&(_=i.interval.indexOf("h")),this.autoEventDecoratorBearer.push({interval:i.interval.slice(0,_),onChange:!!i.onChange&&i.onChange,resource:i.sourceName,unit:i.interval.substring(_)})})}resumeOriginalAutoEvents(){this.autoEvents?this.autoEvents.splice(0,this.autoEvents.length):this.autoEvents=[],this.autoEventDecoratorBearer.forEach(t=>{this.autoEvents.push({interval:`${t.interval}${t.unit}`,onChange:!!t.onChange,sourceName:t.resource})}),this.validate(),this.autoEventsChange.emit(this.autoEvents)}validate(){this.isValid=!0,0!==this.autoEventDecoratorBearer.length&&this.autoEventDecoratorBearer.forEach(t=>{this.eventIntervalNumType(t.interval)&&""!==t.resource||(this.isValid=!1)}),this.isValidChange.emit(this.isValid)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-device-auto-event"]],inputs:{autoEvents:"autoEvents",deviceProfile:"deviceProfile",isValid:"isValid"},outputs:{autoEventsChange:"autoEventsChange",isValidChange:"isValidChange"},features:[e.TTD],decls:11,vars:1,consts:function(){let t,i,_,s,c,E,A,v;return t="AutoEvents",i="Add More AutoEvent",_="Interval",s=" can only be a pure integer number ",c="onchange",E="resource",A=" resource can't be empty ",v="Remove",[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-tags","fa-lg","text-danger","mr-1"],t,[1,"card-body"],[1,"badge","badge-secondary","font-weight-bold"],[1,"fa","fa-plus-circle","mr-2"],["role","button",1,"user-select-none",3,"click"],i,["class","card mb-3",4,"ngFor","ngForOf"],[1,"card","mb-3"],[1,"form-group","row","has-validation"],[1,"col-md-2","col-form-label"],_,[1,"col-md-10"],[1,"input-group","mb-3",2,"width","250px"],["type","text","name","interval","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["name","eventIntervalUnit","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","ms"],["value","s"],["value","m"],["value","h"],[1,"invalid-feedback"],s,[1,"form-group","row"],c,["name","onchange",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],["value","true"],["value","false"],E,["name","resource","required","",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],A,[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash","mr-1"],v,[3,"value"]]},template:function(i,_){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"i",2),e.TgZ(3,"span"),e.SDv(4,3),e.qZA()(),e.TgZ(5,"div",4)(6,"p",5),e._UZ(7,"span",6),e.TgZ(8,"span",7),e.NdJ("click",function(){return _.addAutoEvent()}),e.SDv(9,8),e.qZA()(),e.YNc(10,dt,42,13,"div",9),e.qZA()()),2&i&&(e.xp6(10),e.Q6J("ngForOf",_.autoEventDecoratorBearer))},dependencies:[o.sg,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.Q7,a.On,a.F]})}return n})();function Et(n,l){1&n&&e._UZ(0,"i",33)}function Tt(n,l){1&n&&e._UZ(0,"i",33)}function Ct(n,l){1&n&&e._UZ(0,"i",33)}function At(n,l){1&n&&e._UZ(0,"i",33)}function gt(n,l){1&n&&e._UZ(0,"i",33)}function St(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.previous())}),e._UZ(1,"i",35),e.TgZ(2,"span"),e.SDv(3,36),e.qZA()()}}function pt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.next())}),e.TgZ(1,"span"),e.SDv(2,38),e.qZA(),e._UZ(3,"i",39),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.stepStateLock())}}function It(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.submit())}),e._UZ(1,"i",41),e.TgZ(2,"span"),e.SDv(3,42),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.stepStateLock())}}function ft(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",43)(1,"app-device-service-list",44),e.NdJ("singleDeviceSvcSelectedEvent",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.onSingleDeviceSvcSelected(_))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("deviceSvcSelected",t.selectedSvc)}}function ut(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",43)(1,"app-device-profile-list",45),e.NdJ("singleProfileSelectedEvent",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.onSingleProfileSelected(_))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("singleProfileSelected",t.selectedProfile)("enableSelectAll",!1)("toolbars",!1)("associatedDeviceColumn",!1)}}function vt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"form",46)(1,"div",47)(2,"label",48),e.SDv(3,49),e.qZA(),e.TgZ(4,"div",50)(5,"input",51),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.newDevice.name=_)}),e.qZA(),e.TgZ(6,"div",52)(7,"small"),e.SDv(8,53),e.qZA()()()(),e.TgZ(9,"div",54)(10,"label",55),e.SDv(11,56),e.qZA(),e.TgZ(12,"div",50)(13,"input",57),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.newDevice.description=_)}),e.qZA()()(),e.TgZ(14,"div",54)(15,"label",58),e.SDv(16,59),e.qZA(),e.TgZ(17,"div",50)(18,"input",60),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.deviceLabels=_)}),e.qZA()()(),e.TgZ(19,"div",54)(20,"label",61),e.SDv(21,62),e.qZA(),e.TgZ(22,"div",50)(23,"select",63),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.newDevice.adminState=_)}),e.TgZ(24,"option",64),e._uU(25,"UNLOCKED"),e.qZA(),e.TgZ(26,"option",65),e._uU(27,"LOCKED"),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(5),e.ekj("is-invalid",!t.newDevice.name)("is-valid",t.newDevice.name),e.Q6J("ngModel",t.newDevice.name),e.xp6(8),e.Q6J("ngModel",t.newDevice.description),e.xp6(5),e.Q6J("ngModel",t.deviceLabels),e.xp6(5),e.Q6J("ngModel",t.newDevice.adminState)}}function Dt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",30)(1,"div",1)(2,"span",66),e.SDv(3,67),e.qZA()(),e.TgZ(4,"div",31)(5,"app-device-auto-event",68),e.NdJ("autoEventsChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.newDevice.autoEvents=_)})("isValidChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.isAutoEventsValid=_)}),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("deviceProfile",t.selectedProfile)("autoEvents",t.newDevice.autoEvents)("isValid",t.isAutoEventsValid)}}let mt=(()=>{class n{constructor(t,i,_,s,c){this.metaSvc=t,this.msgSvc=i,this.errorSvc=_,this.router=s,this.route=c,this.deviceLabels="",this.currentStep=0,this.selectedClass="text-white rounded px-2 bg-success  font-weight-bold",this.noSelectedClass="text-white rounded px-2 bg-secondary  font-weight-bold",this.isProtocolValid=!1,this.isAutoEventsValid=!1,this.newDevice={adminState:"UNLOCKED",operatingState:"UP"}}ngOnInit(){}onSingleProfileSelected(t){this.selectedProfile=t}onSingleDeviceSvcSelected(t){this.selectedSvc=t}stepStateLock(){switch(this.currentStep){case 0:return void 0===this.selectedSvc;case 1:return void 0===this.selectedProfile;case 2:return!this.newDevice.name;case 3:return!this.isAutoEventsValid;case 4:return!this.isProtocolValid;default:return!1}}next(){this.currentStep+=1}previous(){this.currentStep=this.currentStep-1}submit(){this.newDevice.labels=this.deviceLabels?.split(","),this.newDevice.serviceName=this.selectedSvc?.name,this.newDevice.profileName=this.selectedProfile?.name,this.newDevice.protocols=this.deviceProtocols.getDeviceProtocols(),this.metaSvc.addDevice(this.newDevice).subscribe(t=>{this.errorSvc.handleErrorForAPI(t)||(this.msgSvc.success("Add device",`name: ${this.newDevice.name}`),this.router.navigate(["../device-list"],{relativeTo:this.route}))})}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(P.D),e.Y36(x.e),e.Y36(H.T),e.Y36(C.F0),e.Y36(C.gz))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-device"]],viewQuery:function(i,_){if(1&i&&e.Gf(le,5),2&i){let s;e.iGM(s=e.CRH())&&(_.deviceProtocols=s.first)}},decls:54,vars:22,consts:function(){let t,i,_,s,c,E,A,v,p,I,O,T,D,Z,m;return t="Add Device Wizard",i="SelectDeviceService",_="SelectDeviceProfile",s="DevicePrimary",c="CreateAutoEvent",E="CreateDeviceProtocol",A="Previous",v="Next",p="Submit",I="Name",O="the device name can't be empty!",T="Description",D="Labels",Z="AdminState",m=" this step is optional, you can skip it then set it later in edit mode.",[[1,"card"],[1,"card-header"],[1,"font-weight-bold"],[1,"fa","fa-lightbulb-o","fa-lg","mr-2","text-danger"],[1,"text-secondary"],t,[1,"card-header","py-2"],["aria-label","breadcrumb",1,"mb-0","p-0"],[1,"breadcrumb","p-1","mb-0","bg-light"],[1,"breadcrumb-item"],[3,"ngClass"],i,["class","fa fa-check ml-1",4,"ngIf"],_,s,c,[1,"breadcrumb-item","active"],E,[1,"card-header","py-1"],["class","btn btn-info btn-sm",3,"click",4,"ngIf"],["class","btn btn-primary btn-sm float-right",3,"disabled","click",4,"ngIf","ngIfElse"],["stepDone",""],[1,"card-body","p-0"],[3,"ngSwitch"],[3,"ngSwitchCase"],["SelectDeviceService",""],["SelectDeviceProfile",""],["DevicePrimary",""],["CreateAutoEvent",""],["CreateDeviceProtocol",""],[1,"card","border-0"],[1,"card-body"],[3,"mode","isValid","isValidChange"],[1,"fa","fa-check","ml-1"],[1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-long-arrow-left","mr-1"],A,[1,"btn","btn-primary","btn-sm","float-right",3,"disabled","click"],v,[1,"fa","fa-long-arrow-right","ml-1"],[1,"btn","btn-success","btn-sm","ml-4","float-right",3,"disabled","click"],[1,"fa","fa-save","mr-1"],p,[1,"p-2"],[3,"deviceSvcSelected","singleDeviceSvcSelectedEvent"],[3,"singleProfileSelected","enableSelectAll","toolbars","associatedDeviceColumn","singleProfileSelectedEvent"],[1,"px-5","py-4"],[1,"form-group","row","has-validation"],["for","deviceName","required","",1,"col-md-2","col-form-label"],I,[1,"col-md-10"],["type","text","id","validationDeviceNameFeedback","name","deviceName",1,"form-control",3,"ngModel","ngModelChange"],["id","validationDeviceNameFeedback",1,"invalid-feedback"],O,[1,"form-group","row"],["for","deviceDesc",1,"col-md-2","col-form-label"],T,["type","text","name","deviceDescription",1,"form-control",3,"ngModel","ngModelChange"],["for","deviceLabels",1,"col-md-2","col-form-label"],D,["type","text","name","deviceLabels","placeholder","Multiple Labels are separated by commas: label1,label2,label3",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],Z,["name","deviceAdminState",1,"custom-select",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"],[1,"fa","fa-info-circle","text-warning","font-weight-bold"],m,[3,"deviceProfile","autoEvents","isValid","autoEventsChange","isValidChange"]]},template:function(i,_){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._UZ(3,"span",3),e.TgZ(4,"span",4),e.SDv(5,5),e.qZA()()(),e.TgZ(6,"div",6)(7,"nav",7)(8,"ol",8)(9,"li",9)(10,"span",10)(11,"span"),e.SDv(12,11),e.qZA(),e.YNc(13,Et,1,0,"i",12),e.qZA()(),e.TgZ(14,"li",9)(15,"span",10)(16,"span"),e.SDv(17,13),e.qZA(),e.YNc(18,Tt,1,0,"i",12),e.qZA()(),e.TgZ(19,"li",9)(20,"span",10)(21,"span"),e.SDv(22,14),e.qZA(),e.YNc(23,Ct,1,0,"i",12),e.qZA()(),e.TgZ(24,"li",9)(25,"span",10)(26,"span"),e.SDv(27,15),e.qZA(),e.YNc(28,At,1,0,"i",12),e.qZA()(),e.TgZ(29,"li",16)(30,"span",10)(31,"span"),e.SDv(32,17),e.qZA(),e.YNc(33,gt,1,0,"i",12),e.qZA()()()()(),e.TgZ(34,"div",18),e.YNc(35,St,4,0,"button",19),e.YNc(36,pt,4,1,"button",20),e.YNc(37,It,4,1,"ng-template",null,21,e.W1O),e.qZA(),e.TgZ(39,"div",22)(40,"div",23),e.YNc(41,ft,2,1,"ng-template",24,25,e.W1O),e.YNc(43,ut,2,4,"ng-template",24,26,e.W1O),e.YNc(45,vt,28,8,"ng-template",24,27,e.W1O),e.YNc(47,Dt,6,3,"ng-template",24,28,e.W1O),e.TgZ(49,"div",null,29)(51,"div",30)(52,"div",31)(53,"app-device-protocol",32),e.NdJ("isValidChange",function(c){return _.isProtocolValid=c}),e.qZA()()()()()()()),2&i){const s=e.MAs(38);e.xp6(10),e.Q6J("ngClass",_.currentStep>=0?_.selectedClass:_.noSelectedClass),e.xp6(3),e.Q6J("ngIf",_.currentStep>=1),e.xp6(2),e.Q6J("ngClass",_.currentStep>=1?_.selectedClass:_.noSelectedClass),e.xp6(3),e.Q6J("ngIf",_.currentStep>=2),e.xp6(2),e.Q6J("ngClass",_.currentStep>=2?_.selectedClass:_.noSelectedClass),e.xp6(3),e.Q6J("ngIf",_.currentStep>=3),e.xp6(2),e.Q6J("ngClass",_.currentStep>=3?_.selectedClass:_.noSelectedClass),e.xp6(3),e.Q6J("ngIf",_.currentStep>=4),e.xp6(2),e.Q6J("ngClass",_.currentStep>=4?_.selectedClass:_.noSelectedClass),e.xp6(3),e.Q6J("ngIf",_.currentStep>=5),e.xp6(2),e.Q6J("ngIf",_.currentStep),e.xp6(1),e.Q6J("ngIf",4>_.currentStep)("ngIfElse",s),e.xp6(4),e.Q6J("ngSwitch",_.currentStep),e.xp6(1),e.Q6J("ngSwitchCase",0),e.xp6(2),e.Q6J("ngSwitchCase",1),e.xp6(2),e.Q6J("ngSwitchCase",2),e.xp6(2),e.Q6J("ngSwitchCase",3),e.xp6(2),e.Udp("display",4===_.currentStep?"":"none"),e.xp6(4),e.Q6J("mode","add")("isValid",_.isProtocolValid)}},dependencies:[o.mk,o.O5,o.RF,o.n9,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.On,a.F,re,U.f,Te,le],styles:['.breadcrumb[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]:before{color:inherit;font-weight:inherit;content:">>";padding:0 5px}.btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}']})}return n})();function Pt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e._UZ(2,"i",3),e.TgZ(3,"span",4),e.SDv(4,5),e.qZA(),e.TgZ(5,"span",6),e._uU(6),e.qZA(),e.TgZ(7,"button",7),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.save())}),e.TgZ(8,"span"),e._UZ(9,"i",8),e.TgZ(10,"span"),e.SDv(11,9),e.qZA()()()(),e.TgZ(12,"div",10)(13,"div",11)(14,"div",2),e._UZ(15,"i",12),e.TgZ(16,"span"),e.SDv(17,13),e.qZA()(),e.TgZ(18,"div",10)(19,"form")(20,"div",14)(21,"label",15),e.SDv(22,16),e.qZA(),e.TgZ(23,"div",17)(24,"input",18),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.device.name=_)}),e.qZA(),e.TgZ(25,"div",19),e.SDv(26,20),e.qZA()()(),e.TgZ(27,"div",14)(28,"label",15),e.SDv(29,21),e.qZA(),e.TgZ(30,"div",17)(31,"input",22),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.device.description=_)}),e.qZA()()(),e.TgZ(32,"div",14)(33,"label",15),e.SDv(34,23),e.qZA(),e.TgZ(35,"div",17)(36,"input",24),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.deviceLabels=_)}),e.qZA()()(),e.TgZ(37,"div",14)(38,"label",25),e.SDv(39,26),e.qZA(),e.TgZ(40,"div",17)(41,"select",27),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.device.adminState=_)}),e.TgZ(42,"option",28),e._uU(43,"UNLOCKED"),e.qZA(),e.TgZ(44,"option",29),e._uU(45,"LOCKED"),e.qZA()()()(),e.TgZ(46,"div",14)(47,"label",30),e.SDv(48,31),e.qZA(),e.TgZ(49,"div",17),e._UZ(50,"input",32),e.qZA()()()()(),e.TgZ(51,"div",33)(52,"app-device-service-list",34),e.NdJ("singleDeviceSvcSelectedEvent",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.onSingleDeviceSvcSelected(_))}),e.qZA()(),e.TgZ(53,"div",33)(54,"app-device-profile-list",35),e.NdJ("singleProfileSelectedEvent",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.onSingleProfileSelected(_))}),e.qZA()(),e.TgZ(55,"div",33)(56,"app-device-protocol",36),e.NdJ("isValidChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.isProtocolValid=_)}),e.qZA()(),e.TgZ(57,"div",33)(58,"app-device-auto-event",37),e.NdJ("autoEventsChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.device.autoEvents=_)})("isValidChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.isAutoEventsValid=_)}),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(6),e.Oqu(t.device.name),e.xp6(1),e.Q6J("disabled",t.validateBeforeSave()),e.xp6(17),e.ekj("is-invalid",""===t.device.name),e.Q6J("ngModel",t.device.name),e.xp6(7),e.Q6J("ngModel",t.device.description),e.xp6(5),e.Q6J("ngModel",t.deviceLabels),e.xp6(5),e.Q6J("ngModel",t.device.adminState),e.xp6(9),e.Q6J("value",t.device.operatingState),e.xp6(2),e.Q6J("deviceSvcSelected",t.selectedSvc),e.xp6(2),e.Q6J("enableSelectAll",!1)("toolbars",!1)("singleProfileSelected",t.selectedProfile)("associatedDeviceColumn",!1),e.xp6(2),e.Q6J("mode","edit")("deviceProtocols",t.device.protocols)("isValid",t.isProtocolValid),e.xp6(2),e.Q6J("deviceProfile",t.selectedProfile)("autoEvents",t.device.autoEvents)("isValid",t.isAutoEventsValid)}}let Mt=(()=>{class n{constructor(t,i,_,s,c){this.router=t,this.route=i,this.metaSvc=_,this.msgSvc=s,this.errorSvc=c,this.isProtocolValid=!0,this.isAutoEventsValid=!0}ngOnInit(){this.route.queryParams.subscribe(t=>{t.deviceName&&this.metaSvc.findDeviceByName(t.deviceName).subscribe(_=>{this.device=_.device,this.deviceLabels=this.device.labels?.join(","),this.setDefaultDeviceSvcSelected(this.device.serviceName),this.setDefaultDeviceProfileSelected(this.device.profileName)})})}onSingleProfileSelected(t){this.selectedProfile=t}onSingleDeviceSvcSelected(t){this.selectedSvc=t}setDefaultDeviceSvcSelected(t){this.metaSvc.findDevcieServiceByName(t).subscribe(i=>{this.selectedSvc=i.service})}setDefaultDeviceProfileSelected(t){this.metaSvc.findProfileByName(t).subscribe(i=>{this.selectedProfile=i.profile})}validateBeforeSave(){return""===this.device.name||!this.isAutoEventsValid||!this.isProtocolValid}save(){this.device.labels=this.deviceLabels?.split(","),this.device.serviceName=this.selectedSvc?.name,this.device.profileName=this.selectedProfile?.name,this.device.protocols=this.deviceProtocols.getDeviceProtocols(),this.metaSvc.updateDevice(this.device).subscribe(t=>{this.errorSvc.handleErrorForAPI(t)||(this.msgSvc.success("update device",`name: ${this.device?.name}`),this.router.navigate(["../device-list"],{relativeTo:this.route}))})}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(C.F0),e.Y36(C.gz),e.Y36(P.D),e.Y36(x.e),e.Y36(H.T))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit-device"]],viewQuery:function(i,_){if(1&i&&e.Gf(le,5),2&i){let s;e.iGM(s=e.CRH())&&(_.deviceProtocols=s.first)}},decls:1,vars:1,consts:function(){let t,i,_,s,c,E,A,v,p;return t="Edit Device",i="Save",_="Device Primary",s="DeviceName",c=" device name can't not be empty! ",E="Description",A="Labels",v="AdminState",p="OperatingState",[["class","card",4,"ngIf"],[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-edit","text-danger","fa-lg"],[1,"mx-2"],t,[1,"text-primary"],["type","button",1,"btn","btn-success","btn-sm","float-right",3,"disabled","click"],[1,"fa","fa-save","mr-1"],i,[1,"card-body"],[1,"card","mb-3"],[1,"fa","fa-tags","fa-lg","text-danger","mr-1"],_,[1,"form-group","row"],[1,"col-md-2","col-form-label"],s,[1,"col-md-10"],["type","text","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"invalid-feedback"],c,E,["type","text","name","description",1,"form-control",3,"ngModel","ngModelChange"],A,["type","text","name","labels",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],v,["name","adminState",1,"custom-select",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"],["for","operatingState",1,"col-md-2","col-form-label"],p,["type","text","name","operatingState","disabled","",1,"form-control",3,"value"],[1,"mb-3"],[3,"deviceSvcSelected","singleDeviceSvcSelectedEvent"],[3,"enableSelectAll","toolbars","singleProfileSelected","associatedDeviceColumn","singleProfileSelectedEvent"],[3,"mode","deviceProtocols","isValid","isValidChange"],[3,"deviceProfile","autoEvents","isValid","autoEventsChange","isValidChange"]]},template:function(i,_){1&i&&e.YNc(0,Pt,59,20,"div",0),2&i&&e.Q6J("ngIf",_.device)},dependencies:[o.O5,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.Q7,a.On,a.F,re,U.f,Te,le],styles:["input[disabled][_ngcontent-%COMP%]:hover, .btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]})}return n})(),Ot=(()=>{class n{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-device-profile-center"]],decls:1,vars:0,template:function(i,_){1&i&&e._UZ(0,"router-outlet")},dependencies:[C.lC]})}return n})(),Nt=(()=>{class n{constructor(t,i,_,s,c){this.metaSvc=t,this.msgSvc=i,this.errSvc=_,this.router=s,this.route=c}ngOnInit(){this.renderYamlSource()}renderYamlSource(){let t=document.getElementById("editor");this.codeMirrorEditor=CodeMirror.fromTextArea(t,{mode:"yaml",theme:"gruvbox-dark",foldGutter:!0,smartIndent:!0,showCursorWhenSelecting:!0,lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],autofocus:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,cursorHeight:.85,autocorrect:!0}),this.codeMirrorEditor.setSize("auto","600px"),this.codeMirrorEditor.on("drop",(i,_)=>{this.yamlFile=_.dataTransfer?.files[0]}),this.codeMirrorEditor.on("paste",(i,_)=>{})}submit(){this.profileYamlSource=this.codeMirrorEditor.getValue(),this.metaSvc.addProfileYamlByNameViaUIBackend(this.profileYamlSource).subscribe(t=>{this.errSvc.handleErrorForAPI(t)||(this.msgSvc.success("Add profile"),this.router.navigate(["../device-profile-list"],{relativeTo:this.route}))})}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(P.D),e.Y36(x.e),e.Y36(H.T),e.Y36(C.F0),e.Y36(C.gz))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-profile"]],decls:15,vars:0,consts:function(){let t,i,_;return t="Add Profile",i="\xA0drag-and-drop is enabled",_="Submit",[[1,"card"],[1,"card-header"],[1,"text-danger","font-weight-bold","fa","fa-code","mr-2"],[1,"mr-3","font-weight-bold"],t,[1,"fa","fa-info-circle","text-success","font-weight-bold"],i,[1,"float-right"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save","mr-1"],_,[1,"card-body","p-0"],["id","editor","name","editor"]]},template:function(i,_){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span"),e._UZ(3,"span",2),e.TgZ(4,"span",3),e.SDv(5,4),e.qZA(),e.TgZ(6,"span",5),e.SDv(7,6),e.qZA()(),e.TgZ(8,"span",7)(9,"button",8),e.NdJ("click",function(){return _.submit()}),e._UZ(10,"i",9),e.TgZ(11,"span"),e.SDv(12,10),e.qZA()()()(),e.TgZ(13,"div",11),e._UZ(14,"textarea",12),e.qZA()())}})}return n})(),ht=(()=>{class n{constructor(t,i,_,s,c){this.metaSvc=t,this.msgSvc=i,this.errSvc=_,this.router=s,this.route=c}ngOnInit(){this.renderYamlSource(),this.route.queryParams.subscribe(t=>{t.profileName&&(this.profileName=t.profileName,this.metaSvc.findProfileYamlByNameViaUIBackend(t.profileName).subscribe(i=>{this.codeMirrorEditor.setValue(i),this.codeMirrorEditor.refresh()}))})}update(){this.codeMirrorEditor.refresh(),this.metaSvc.updateProfileYamlContentViaUIBackend(this.codeMirrorEditor.getValue()).subscribe(t=>{this.errSvc.handleErrorForAPI(t)||(this.msgSvc.success("Update profile",`name: ${this.profileName}`),this.router.navigate(["../device-profile-list"],{relativeTo:this.route}))})}renderYamlSource(){let t=document.getElementById("editor-edit");this.codeMirrorEditor=CodeMirror.fromTextArea(t,{mode:"yaml",theme:"gruvbox-dark",foldGutter:!0,smartIndent:!0,showCursorWhenSelecting:!0,lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],autofocus:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,cursorHeight:.85,autocorrect:!0}),this.codeMirrorEditor.setSize("auto","600px")}ngOnDestroy(){this.codeMirrorEditor=null}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(P.D),e.Y36(x.e),e.Y36(H.T),e.Y36(C.F0),e.Y36(C.gz))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit-profile"]],decls:13,vars:1,consts:function(){let t;return t="Save",[[1,"card"],[1,"card-header"],[1,"text-danger","fa","fa-edit","mr-2"],[1,"float-right"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save","mr-1"],t,[1,"card-body","p-0"],["id","editor-edit","name","editor"]]},template:function(i,_){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span"),e._UZ(3,"span",2),e._uU(4),e.qZA(),e.TgZ(5,"span",3)(6,"button",4),e.NdJ("click",function(){return _.update()}),e.TgZ(7,"span"),e._UZ(8,"i",5),e.TgZ(9,"span"),e.SDv(10,6),e.qZA()()()()(),e.TgZ(11,"div",7),e._UZ(12,"textarea",8),e.qZA()()),2&i&&(e.xp6(4),e.hij("",_.profileName," "))}})}return n})(),Rt=(()=>{class n{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-provision-watcher-center"]],decls:1,vars:0,template:function(i,_){1&i&&e._UZ(0,"router-outlet")},dependencies:[C.lC]})}return n})();function Vt(n,l){if(1&n&&(e.TgZ(0,"span",72),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.adminState)}}function bt(n,l){if(1&n&&(e.TgZ(0,"span",73),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.adminState)}}function Lt(n,l){if(1&n&&(e.TgZ(0,"span",72),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.discoveredDevice.adminState)}}function $t(n,l){if(1&n&&(e.TgZ(0,"span",73),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.discoveredDevice.adminState)}}const Zt=function(n){return{profileName:n}};function xt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"input",23),e.NdJ("click",function(_){const c=e.CHM(t).$implicit,E=e.oxw();return e.KtG(E.selectOne(_,c))}),e.qZA()(),e.TgZ(3,"td",66),e._uU(4),e.qZA(),e.TgZ(5,"td",66),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"span",67),e.YNc(11,Vt,2,1,"span",68),e.YNc(12,bt,2,1,"span",69),e.qZA()(),e.TgZ(13,"td")(14,"span",67),e.YNc(15,Lt,2,1,"span",68),e.YNc(16,$t,2,1,"span",69),e.qZA()(),e.TgZ(17,"td")(18,"a",70),e._uU(19),e.qZA()(),e.TgZ(20,"td")(21,"a",71),e._uU(22),e.qZA()(),e.TgZ(23,"td"),e._uU(24),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.qZA(),e.TgZ(27,"td"),e._uU(28),e.ALo(29,"json"),e.qZA()()}if(2&n){const t=l.$implicit,i=e.oxw();e.ekj("table-active",i.isChecked(t.id)||i.specialFeatureAssociatedProvisionWatcherName===t.name),e.xp6(2),e.Q6J("checked",i.isChecked(t.id)),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.labels),e.xp6(2),e.Q6J("ngSwitch",t.adminState),e.xp6(1),e.Q6J("ngSwitchCase","UNLOCKED"),e.xp6(3),e.Q6J("ngSwitch",t.discoveredDevice.adminState),e.xp6(1),e.Q6J("ngSwitchCase","UNLOCKED"),e.xp6(3),e.Q6J("queryParams",e.VKq(18,Zt,t.discoveredDevice.profileName)),e.xp6(1),e.Oqu(t.discoveredDevice.profileName),e.xp6(3),e.Oqu(t.serviceName),e.xp6(2),e.Oqu(t.identifiers.address),e.xp6(2),e.Oqu(t.identifiers.port),e.xp6(2),e.Oqu(e.lcZ(29,16,t.blockingIdentifiers))}}let yt=(()=>{class n{constructor(t,i,_,s){this.metaSvc=t,this.msgSvc=i,this.route=_,this.router=s,this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit,this.provisionWatcherList=[],this.selectedProvisionWatcher=[]}ngOnInit(){this.route.queryParams.subscribe(t=>{this.getProvisionWatcherListPagination()})}getProvisionWatcherList(){this.getProvisionWatcherListPagination()}getProvisionWatcherListPagination(){this.metaSvc.allProvisionWatchersPagination(this.pageOffset,this.pageLimit).subscribe(t=>{this.provisionWatcherList=t.provisionWatchers})}edit(){this.router.navigate(["../edit-provision-watcher"],{relativeTo:this.route,queryParams:{provisionWatcherName:this.selectedProvisionWatcher[0].name}})}selectAll(t){this.provisionWatcherList.forEach(t.target.checked?_=>{-1===this.selectedProvisionWatcher.findIndex(s=>s.name===_.name)&&this.selectedProvisionWatcher.push(_)}:_=>{this.selectedProvisionWatcher.forEach((s,c)=>{s.name===_.name&&this.selectedProvisionWatcher.splice(c,1)})})}selectOne(t,i){t.target.checked?this.selectedProvisionWatcher.push(i):this.selectedProvisionWatcher.forEach((s,c)=>{s.name===i.name&&this.selectedProvisionWatcher.splice(c,1)})}isChecked(t){return this.selectedProvisionWatcher.findIndex(i=>i.id===t)>=0}isCheckedAll(){let t=!0;return this.provisionWatcherList&&0===this.provisionWatcherList.length&&(t=!1),this.provisionWatcherList.forEach(i=>{-1===this.selectedProvisionWatcher.findIndex(_=>_.name===i.name)&&(t=!1)}),t}deleteConfirm(){$("#deleteConfirmDialog").modal("show")}refresh(){this.metaSvc.allProvisionWatchersPagination(0,this.pageLimit).subscribe(t=>{this.provisionWatcherList=t.provisionWatchers,this.msgSvc.success("refresh"),this.resetPagination()})}delete(){this.selectedProvisionWatcher.forEach((t,i)=>{this.metaSvc.deleteOneProvisionWatcherByName(t.name).subscribe(()=>{this.selectedProvisionWatcher.splice(i,1),this.provisionWatcherList.forEach((_,s)=>{if(_.id===t.id)return this.provisionWatcherList.splice(s,1),void this.msgSvc.success("remove provisionWatcher ",` Name: ${_.name}`)})})}),this.specialFeatureName=void 0,$("#deleteConfirmDialog").modal("hide")}onPageSelected(){this.resetPagination(),this.getProvisionWatcherList()}prePage(){this.setPagination(-1),this.getProvisionWatcherList()}nextPage(){this.setPagination(1),this.getProvisionWatcherList()}setPagination(t){1===t?this.pagination+=1:-1===t&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit}resetPagination(){this.pagination=1,this.pageOffset=(this.pagination-1)*this.pageLimit}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(P.D),e.Y36(x.e),e.Y36(C.gz),e.Y36(C.F0))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-provision-watcher-list"]],decls:95,vars:7,consts:function(){let t,i,_,s,c,E,A,v,p,I,O,T,D,Z,m,g,J,F,z,Q,Y;return t="Device Profile List",i="Refresh",_="Add",s="Edit",c="Delete",E="Name",A="Labels",v="AdminState",p="DiscoveredDeviceAdminState",I="DiscoveredDeviceProfileName",O="ServiceName",T="IdentifiersAddress",D="IdentifiersPort",Z="BlockingIdentifiers",m="items per page",g="Previous",J="Next",F="Warning",z=" The data will be permanently erased!!! Are you sure to execute delete operation\uFF1F ",Q="Cancel",Y="Confirm",[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","text-danger","mr-2"],t,[1,"card-body","p-0"],[1,"bg-light","px-2","py-2"],["role","group",1,"btn-group","btn-group-sm"],["data-testid","device-list-refresh-btn",1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","mr-1"],i,["type","button","routerLink","../add-provision-watcher",1,"btn","btn-info"],[1,"fa","fa-plus","mr-1"],_,["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-edit","mr-1"],s,["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash","mr-1"],c,[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],["type","checkbox","role","button",3,"checked","click"],E,A,v,p,I,O,T,D,Z,[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],m,[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"custom-select",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left","mr-1"],g,[1,"page-item"],J,[1,"fa","fa-angle-double-right","ml-1"],["id","deleteConfirmDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteConfirmDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteConfirmDialogLabel",1,"modal-title","text-danger"],[1,"fa","fa-warning","mr-1"],F,[1,"modal-body"],z,[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],Q,["type","button",1,"btn","btn-danger",3,"click"],Y,[1,"user-select-all"],[3,"ngSwitch"],["class","badge badge-success",4,"ngSwitchCase"],["class","badge badge-danger",4,"ngSwitchDefault"],["routerLink","../../device-profile-center",3,"queryParams"],["routerLink","../../device-service-list"],[1,"badge","badge-success"],[1,"badge","badge-danger"]]},template:function(i,_){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"i",2),e.TgZ(3,"span"),e.SDv(4,3),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"button",7),e.NdJ("click",function(){return _.refresh()}),e.TgZ(9,"span"),e._UZ(10,"i",8),e.TgZ(11,"span"),e.SDv(12,9),e.qZA()()(),e.TgZ(13,"button",10)(14,"span"),e._UZ(15,"i",11),e.TgZ(16,"span"),e.SDv(17,12),e.qZA()()(),e.TgZ(18,"button",13),e.NdJ("click",function(){return _.edit()}),e.TgZ(19,"span"),e._UZ(20,"i",14),e.TgZ(21,"span"),e.SDv(22,15),e.qZA()()(),e.TgZ(23,"button",16),e.NdJ("click",function(){return _.deleteConfirm()}),e.TgZ(24,"span"),e._UZ(25,"i",17),e.TgZ(26,"span"),e.SDv(27,18),e.qZA()()()()(),e.TgZ(28,"div",19)(29,"table",20)(30,"thead",21)(31,"tr")(32,"th",22)(33,"input",23),e.NdJ("click",function(c){return _.selectAll(c)}),e.qZA()(),e.TgZ(34,"th",22),e._uU(35,"ID"),e.qZA(),e.TgZ(36,"th",22),e.SDv(37,24),e.qZA(),e.TgZ(38,"th",22),e.SDv(39,25),e.qZA(),e.TgZ(40,"th",22),e.SDv(41,26),e.qZA(),e.TgZ(42,"th",22),e.SDv(43,27),e.qZA(),e.TgZ(44,"th",22),e.SDv(45,28),e.qZA(),e.TgZ(46,"th",22),e.SDv(47,29),e.qZA(),e.TgZ(48,"th",22),e.SDv(49,30),e.qZA(),e.TgZ(50,"th",22),e.SDv(51,31),e.qZA(),e.TgZ(52,"th",22),e.SDv(53,32),e.qZA()()(),e.TgZ(54,"tbody"),e.YNc(55,xt,30,20,"tr",33),e.qZA()()()(),e.TgZ(56,"div",34)(57,"nav",35)(58,"ul",36)(59,"li",37)(60,"span",38),e.SDv(61,39),e.qZA()(),e.TgZ(62,"li",40)(63,"select",41),e.NdJ("ngModelChange",function(c){return _.pageLimit=c})("ngModelChange",function(){return _.onPageSelected()}),e.TgZ(64,"option",42),e._uU(65,"5"),e.qZA(),e.TgZ(66,"option",43),e._uU(67,"10"),e.qZA(),e.TgZ(68,"option",44),e._uU(69,"20"),e.qZA()()(),e.TgZ(70,"li",45)(71,"button",46),e.NdJ("click",function(){return _.prePage()}),e._UZ(72,"i",47),e.TgZ(73,"span"),e.SDv(74,48),e.qZA()()(),e.TgZ(75,"li",49)(76,"button",46),e.NdJ("click",function(){return _.nextPage()}),e.TgZ(77,"span"),e.SDv(78,50),e.qZA(),e._UZ(79,"i",51),e.qZA()()()()()(),e.TgZ(80,"div",52)(81,"div",53)(82,"div",54)(83,"div",55)(84,"h5",56),e._UZ(85,"i",57),e.TgZ(86,"span"),e.SDv(87,58),e.qZA()()(),e.TgZ(88,"div",59),e.SDv(89,60),e.qZA(),e.TgZ(90,"div",61)(91,"button",62),e.SDv(92,63),e.qZA(),e.TgZ(93,"button",64),e.NdJ("click",function(){return _.delete()}),e.SDv(94,65),e.qZA()()()()()),2&i&&(e.xp6(18),e.Q6J("disabled",1!==_.selectedProvisionWatcher.length),e.xp6(5),e.Q6J("disabled",0===_.selectedProvisionWatcher.length),e.xp6(10),e.Q6J("checked",_.isCheckedAll()),e.xp6(22),e.Q6J("ngForOf",_.provisionWatcherList),e.xp6(8),e.Q6J("ngModel",_.pageLimit),e.xp6(8),e.Q6J("disabled",1===_.pagination),e.xp6(5),e.Q6J("disabled",_.pageLimit>_.provisionWatcherList.length))},dependencies:[o.sg,o.RF,o.n9,o.ED,a.YN,a.Kr,a.EJ,a.JJ,a.On,C.rH,o.Ts],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]})}return n})();function Wt(n,l){1&n&&e._UZ(0,"i",25)}function Gt(n,l){1&n&&e._UZ(0,"i",25)}function qt(n,l){1&n&&e._UZ(0,"i",25)}function wt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.previous())}),e._UZ(1,"i",27),e.TgZ(2,"span"),e.SDv(3,28),e.qZA()()}}function Xt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.next())}),e.TgZ(1,"span"),e.SDv(2,30),e.qZA(),e._UZ(3,"i",31),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.stepStateLock())}}function Ht(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.submit())}),e._UZ(1,"i",33),e.TgZ(2,"span"),e.SDv(3,34),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.stepStateLock())}}function kt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",35)(1,"app-device-service-list",36),e.NdJ("singleDeviceSvcSelectedEvent",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.onSingleDeviceSvcSelected(_))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("deviceSvcSelected",t.selectedSvc)}}function Ut(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",35)(1,"app-device-profile-list",37),e.NdJ("singleProfileSelectedEvent",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.onSingleProfileSelected(_))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("singleProfileSelected",t.selectedProfile)("enableSelectAll",!1)("toolbars",!1)("associatedDeviceColumn",!1)}}function Jt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"form",38)(1,"div",39)(2,"label",40),e.SDv(3,41),e.qZA(),e.TgZ(4,"div",42)(5,"input",43),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.newProvisionWatcher.name=_)}),e.qZA(),e.TgZ(6,"div",44)(7,"small"),e.SDv(8,45),e.qZA()()()(),e.TgZ(9,"div",46)(10,"label",47),e.SDv(11,48),e.qZA(),e.TgZ(12,"div",42)(13,"input",49),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.provisionWatcherLabels=_)}),e.qZA()()(),e.TgZ(14,"div",46)(15,"label",50),e.SDv(16,51),e.qZA(),e.TgZ(17,"div",42)(18,"input",52),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.provisionWatcherBlockingIdentifiers=_)}),e.qZA()()(),e.TgZ(19,"div",46)(20,"label",53),e.SDv(21,54),e.qZA(),e.TgZ(22,"div",42)(23,"input",55),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.provisionWatcherIdentifiersAddress=_)}),e.qZA()()(),e.TgZ(24,"div",46)(25,"label",56),e.SDv(26,57),e.qZA(),e.TgZ(27,"div",42)(28,"input",58),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.provisionWatcherIdentifiersPort=_)}),e.qZA()()(),e.TgZ(29,"div",46)(30,"label",59),e.SDv(31,60),e.qZA(),e.TgZ(32,"div",42)(33,"select",61),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.newProvisionWatcher.adminState=_)}),e.TgZ(34,"option",62),e._uU(35,"UNLOCKED"),e.qZA(),e.TgZ(36,"option",63),e._uU(37,"LOCKED"),e.qZA()()()(),e.TgZ(38,"div",46)(39,"label",64),e.SDv(40,65),e.qZA(),e.TgZ(41,"div",42)(42,"select",66),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.newProvisionWatcher.discoveredDevice.adminState=_)}),e.TgZ(43,"option",62),e._uU(44,"UNLOCKED"),e.qZA(),e.TgZ(45,"option",63),e._uU(46,"LOCKED"),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(5),e.ekj("is-invalid",!t.newProvisionWatcher.name)("is-valid",t.newProvisionWatcher.name),e.Q6J("ngModel",t.newProvisionWatcher.name),e.xp6(8),e.Q6J("ngModel",t.provisionWatcherLabels),e.xp6(5),e.Q6J("ngModel",t.provisionWatcherBlockingIdentifiers),e.xp6(5),e.Q6J("ngModel",t.provisionWatcherIdentifiersAddress),e.xp6(5),e.Q6J("ngModel",t.provisionWatcherIdentifiersPort),e.xp6(5),e.Q6J("ngModel",t.newProvisionWatcher.adminState),e.xp6(9),e.Q6J("ngModel",t.newProvisionWatcher.discoveredDevice.adminState)}}let Ft=(()=>{class n{constructor(t,i,_,s,c){this.metaSvc=t,this.msgSvc=i,this.errorSvc=_,this.router=s,this.route=c,this.currentStep=0,this.selectedClass="text-white rounded px-2 bg-success  font-weight-bold",this.noSelectedClass="text-white rounded px-2 bg-secondary  font-weight-bold",this.isProtocolValid=!1,this.isAutoEventsValid=!1,this.provisionWatcherLabels="",this.provisionWatcherBlockingIdentifiers="",this.provisionWatcherIdentifiersAddress="",this.provisionWatcherIdentifiersPort="",this.newProvisionWatcher={name:"",serviceName:"",adminState:"LOCKED",labels:[],identifiers:{address:"",port:""},blockingIdentifiers:{port:[]},discoveredDevice:{adminState:"LOCKED",profileName:""}}}ngOnInit(){}onSingleDeviceSvcSelected(t){this.selectedSvc=t}onSingleProfileSelected(t){this.selectedProfile=t}submit(){this.newProvisionWatcher.labels=this.provisionWatcherLabels?.split(","),this.newProvisionWatcher.serviceName=this.selectedSvc?.name,this.newProvisionWatcher.discoveredDevice.profileName=this.selectedProfile?.name,this.newProvisionWatcher.identifiers.address=this.provisionWatcherIdentifiersAddress,this.newProvisionWatcher.identifiers.port=this.provisionWatcherIdentifiersPort,this.newProvisionWatcher.blockingIdentifiers.port=this.provisionWatcherBlockingIdentifiers?.split(","),this.metaSvc.addProvisionWatcher(this.newProvisionWatcher).subscribe(t=>{this.errorSvc.handleErrorForAPI(t)||(this.msgSvc.success("Add ProvisionWatcher",`name: ${this.newProvisionWatcher.name}`),this.router.navigate(["../provision-watcher-list"],{relativeTo:this.route}))})}next(){this.currentStep+=1}previous(){this.currentStep=this.currentStep-1}stepStateLock(){switch(this.currentStep){case 0:return void 0===this.selectedSvc;case 1:return void 0===this.selectedProfile;case 2:return!this.newProvisionWatcher.name;case 3:return!this.isAutoEventsValid;case 4:return!this.isProtocolValid;default:return!1}}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(P.D),e.Y36(x.e),e.Y36(H.T),e.Y36(C.F0),e.Y36(C.gz))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-provision-watcher"]],decls:37,vars:13,consts:function(){let t,i,_,s,c,E,A,v,p,I,O,T,D,Z,m;return t="Add Provision Watcher Wizard",i="SelectDeviceService",_="SelectDiscoveredDeviceProfile",s="ProvisionWatcherPrimary",c="Previous",E="Next",A="Submit",v="Name",p="the provision watcher name can't be empty!",I="Labels",O="BlockingIdentifiers",T="IdentifiersAddress",D="IdentifiersPort",Z="AdminState",m="DiscoveredDevice AdminState",[[1,"card"],[1,"card-header"],[1,"font-weight-bold"],[1,"fa","fa-lightbulb-o","fa-lg","mr-2","text-danger"],[1,"text-secondary"],t,[1,"card-header","py-2"],["aria-label","breadcrumb",1,"mb-0","p-0"],[1,"breadcrumb","p-1","mb-0","bg-light"],[1,"breadcrumb-item"],[3,"ngClass"],i,["class","fa fa-check ml-1",4,"ngIf"],_,s,[1,"card-header","py-1"],["class","btn btn-info btn-sm",3,"click",4,"ngIf"],["class","btn btn-primary btn-sm float-right",3,"disabled","click",4,"ngIf","ngIfElse"],["stepDone",""],[1,"card-body","p-0"],[3,"ngSwitch"],[3,"ngSwitchCase"],["SelectDeviceService",""],["SelectDeviceProfile",""],["DevicePrimary",""],[1,"fa","fa-check","ml-1"],[1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-long-arrow-left","mr-1"],c,[1,"btn","btn-primary","btn-sm","float-right",3,"disabled","click"],E,[1,"fa","fa-long-arrow-right","ml-1"],[1,"btn","btn-success","btn-sm","ml-4","float-right",3,"disabled","click"],[1,"fa","fa-save","mr-1"],A,[1,"p-2"],[3,"deviceSvcSelected","singleDeviceSvcSelectedEvent"],[3,"singleProfileSelected","enableSelectAll","toolbars","associatedDeviceColumn","singleProfileSelectedEvent"],[1,"px-5","py-4"],[1,"form-group","row","has-validation"],["for","provisionWatcherName","required","",1,"col-md-2","col-form-label"],v,[1,"col-md-10"],["type","text","id","validationProvisionWatcherNameFeedback","name","provisionWatcherName",1,"form-control",3,"ngModel","ngModelChange"],["id","validationProvisionWatcherNameFeedback",1,"invalid-feedback"],p,[1,"form-group","row"],["for","provisionWatcherLabels",1,"col-md-2","col-form-label"],I,["type","text","name","provisionWatcherLabels","placeholder","Multiple Labels are separated by commas: label1,label2,label3",1,"form-control",3,"ngModel","ngModelChange"],["for","provisionWatcherBlockingIdentifiers",1,"col-md-2","col-form-label"],O,["type","text","name","provisionWatcherBlockingIdentifiers","placeholder","Multiple BlockingIdentifiers are separated by commas: port1,port2,port3",1,"form-control",3,"ngModel","ngModelChange"],["for","provisionWatcherIdentifiersAddress",1,"col-md-2","col-form-label"],T,["type","text","name","provisionWatcherIdentifiersAddress",1,"form-control",3,"ngModel","ngModelChange"],["for","provisionWatcherIdentifiersPort",1,"col-md-2","col-form-label"],D,["type","text","name","provisionWatcherIdentifiersPort",1,"form-control",3,"ngModel","ngModelChange"],["for","provisionWatcherAdminState",1,"col-md-2","col-form-label"],Z,["name","provisionWatcherAdminState",1,"custom-select",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"],["for","provisionWatcherDiscoveredDeviceAdminState",1,"col-md-2","col-form-label"],m,["name","provisionWatcherDiscoveredDeviceAdminState",1,"custom-select",3,"ngModel","ngModelChange"]]},template:function(i,_){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._UZ(3,"span",3),e.TgZ(4,"span",4),e.SDv(5,5),e.qZA()()(),e.TgZ(6,"div",6)(7,"nav",7)(8,"ol",8)(9,"li",9)(10,"span",10)(11,"span"),e.SDv(12,11),e.qZA(),e.YNc(13,Wt,1,0,"i",12),e.qZA()(),e.TgZ(14,"li",9)(15,"span",10)(16,"span"),e.SDv(17,13),e.qZA(),e.YNc(18,Gt,1,0,"i",12),e.qZA()(),e.TgZ(19,"li",9)(20,"span",10)(21,"span"),e.SDv(22,14),e.qZA(),e.YNc(23,qt,1,0,"i",12),e.qZA()()()()(),e.TgZ(24,"div",15),e.YNc(25,wt,4,0,"button",16),e.YNc(26,Xt,4,1,"button",17),e.YNc(27,Ht,4,1,"ng-template",null,18,e.W1O),e.qZA(),e.TgZ(29,"div",19)(30,"div",20),e.YNc(31,kt,2,1,"ng-template",21,22,e.W1O),e.YNc(33,Ut,2,4,"ng-template",21,23,e.W1O),e.YNc(35,Jt,47,11,"ng-template",21,24,e.W1O),e.qZA()()()),2&i){const s=e.MAs(28);e.xp6(10),e.Q6J("ngClass",_.currentStep>=0?_.selectedClass:_.noSelectedClass),e.xp6(3),e.Q6J("ngIf",_.currentStep>=1),e.xp6(2),e.Q6J("ngClass",_.currentStep>=1?_.selectedClass:_.noSelectedClass),e.xp6(3),e.Q6J("ngIf",_.currentStep>=2),e.xp6(2),e.Q6J("ngClass",_.currentStep>=2?_.selectedClass:_.noSelectedClass),e.xp6(3),e.Q6J("ngIf",_.currentStep>=3),e.xp6(2),e.Q6J("ngIf",_.currentStep),e.xp6(1),e.Q6J("ngIf",2>_.currentStep)("ngIfElse",s),e.xp6(4),e.Q6J("ngSwitch",_.currentStep),e.xp6(1),e.Q6J("ngSwitchCase",0),e.xp6(2),e.Q6J("ngSwitchCase",1),e.xp6(2),e.Q6J("ngSwitchCase",2)}},dependencies:[o.mk,o.O5,o.RF,o.n9,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.On,a.F,re,U.f],styles:['.breadcrumb[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]:before{color:inherit;font-weight:inherit;content:">>";padding:0 5px}.btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}']})}return n})();function zt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e._UZ(2,"i",3),e.TgZ(3,"span",4),e.SDv(4,5),e.qZA(),e.TgZ(5,"span",6),e._uU(6),e.qZA(),e.TgZ(7,"button",7),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.save())}),e.TgZ(8,"span"),e._UZ(9,"i",8),e.TgZ(10,"span"),e.SDv(11,9),e.qZA()()()(),e.TgZ(12,"div",10)(13,"div",11)(14,"div",2),e._UZ(15,"i",12),e.TgZ(16,"span"),e.SDv(17,13),e.qZA()(),e.TgZ(18,"div",10)(19,"form")(20,"div",14)(21,"label",15),e.SDv(22,16),e.qZA(),e.TgZ(23,"div",17)(24,"input",18),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.provisionWatcher.name=_)}),e.qZA(),e.TgZ(25,"div",19),e.SDv(26,20),e.qZA()()(),e.TgZ(27,"div",14)(28,"label",15),e.SDv(29,21),e.qZA(),e.TgZ(30,"div",17)(31,"input",22),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.provisionWatcherLabels=_)}),e.qZA()()(),e.TgZ(32,"div",14)(33,"label",23),e.SDv(34,24),e.qZA(),e.TgZ(35,"div",17)(36,"select",25),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.provisionWatcher.adminState=_)}),e.TgZ(37,"option",26),e._uU(38,"UNLOCKED"),e.qZA(),e.TgZ(39,"option",27),e._uU(40,"LOCKED"),e.qZA()()()(),e.TgZ(41,"div",14)(42,"label",28),e.SDv(43,29),e.qZA(),e.TgZ(44,"div",17)(45,"select",30),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.provisionWatcher.discoveredDevice.adminState=_)}),e.TgZ(46,"option",26),e._uU(47,"UNLOCKED"),e.qZA(),e.TgZ(48,"option",27),e._uU(49,"LOCKED"),e.qZA()()()(),e.TgZ(50,"div",14)(51,"label",15),e.SDv(52,31),e.qZA(),e.TgZ(53,"div",17)(54,"input",32),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.provisionWatcher.identifiers.address=_)}),e.qZA()()(),e.TgZ(55,"div",14)(56,"label",15),e.SDv(57,33),e.qZA(),e.TgZ(58,"div",17)(59,"input",34),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.provisionWatcher.identifiers.port=_)}),e.qZA()()(),e.TgZ(60,"div",14)(61,"label",15),e.SDv(62,35),e.qZA(),e.TgZ(63,"div",17)(64,"input",36),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.blockingIdentifiers=_)}),e.qZA()()()()()(),e.TgZ(65,"div",37)(66,"app-device-service-list",38),e.NdJ("singleDeviceSvcSelectedEvent",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.onSingleDeviceSvcSelected(_))}),e.qZA()(),e.TgZ(67,"div",37)(68,"app-device-profile-list",39),e.NdJ("singleProfileSelectedEvent",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.onSingleProfileSelected(_))}),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(6),e.Oqu(t.provisionWatcher.name),e.xp6(1),e.Q6J("disabled",t.validateBeforeSave()),e.xp6(17),e.ekj("is-invalid",""===t.provisionWatcher.name),e.Q6J("ngModel",t.provisionWatcher.name),e.xp6(7),e.Q6J("ngModel",t.provisionWatcherLabels),e.xp6(5),e.Q6J("ngModel",t.provisionWatcher.adminState),e.xp6(9),e.Q6J("ngModel",t.provisionWatcher.discoveredDevice.adminState),e.xp6(9),e.Q6J("ngModel",t.provisionWatcher.identifiers.address),e.xp6(5),e.Q6J("ngModel",t.provisionWatcher.identifiers.port),e.xp6(5),e.Q6J("ngModel",t.blockingIdentifiers),e.xp6(2),e.Q6J("deviceSvcSelected",t.selectedSvc),e.xp6(2),e.Q6J("enableSelectAll",!1)("toolbars",!1)("singleProfileSelected",t.selectedProfile)("associatedDeviceColumn",!1)}}let Qt=(()=>{class n{constructor(t,i,_,s,c){this.router=t,this.route=i,this.metaSvc=_,this.msgSvc=s,this.errorSvc=c}ngOnInit(){this.route.queryParams.subscribe(t=>{t.provisionWatcherName&&this.metaSvc.findProvisionWatcherByName(t.provisionWatcherName).subscribe(_=>{this.provisionWatcher=_.provisionWatcher,this.provisionWatcherLabels=this.provisionWatcher.labels?.join(","),this.blockingIdentifiers=JSON.stringify(_.provisionWatcher.blockingIdentifiers),this.setDefaultDeviceSvcSelected(this.provisionWatcher.serviceName),this.setDefaultDeviceProfileSelected(this.provisionWatcher.discoveredDevice.profileName)})})}setDefaultDeviceSvcSelected(t){this.metaSvc.findDevcieServiceByName(t).subscribe(i=>{this.selectedSvc=i.service})}onSingleProfileSelected(t){this.selectedProfile=t}onSingleDeviceSvcSelected(t){this.selectedSvc=t}setDefaultDeviceProfileSelected(t){this.metaSvc.findProfileByName(t).subscribe(i=>{this.selectedProfile=i.profile})}validateBeforeSave(){return""===this.provisionWatcher.name}save(){this.provisionWatcher.labels=this.provisionWatcherLabels?.split(","),this.provisionWatcher.serviceName=this.selectedSvc?.name,this.provisionWatcher.discoveredDevice.profileName=this.selectedProfile?.name,this.metaSvc.updateProvisionWatcher(this.provisionWatcher).subscribe(t=>{this.errorSvc.handleErrorForAPI(t)||(this.msgSvc.success("update ProvisionWatcher",`name: ${this.provisionWatcher?.name}`),this.router.navigate(["../provision-watcher-list"],{relativeTo:this.route}))})}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(C.F0),e.Y36(C.gz),e.Y36(P.D),e.Y36(x.e),e.Y36(H.T))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit-provision-watcher"]],decls:1,vars:1,consts:function(){let t,i,_,s,c,E,A,v,p,I,O;return t="Edit ProvisionWatcher",i="Save",_="ProvisionWatcher Primary",s="ProvisionWatcherName",c=" device name can't not be empty! ",E="Labels",A="AdminState",v="DiscoveredDeviceAdminState",p="IdentifiersAddress",I="IdentifiersPort",O="BlockingIdentifiers",[["class","card",4,"ngIf"],[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-edit","text-danger","fa-lg"],[1,"mx-2"],t,[1,"text-primary"],["type","button",1,"btn","btn-success","btn-sm","float-right",3,"disabled","click"],[1,"fa","fa-save","mr-1"],i,[1,"card-body"],[1,"card","mb-3"],[1,"fa","fa-tags","fa-lg","text-danger","mr-1"],_,[1,"form-group","row"],[1,"col-md-2","col-form-label"],s,[1,"col-md-10"],["type","text","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"invalid-feedback"],c,E,["type","text","name","labels",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],A,["name","adminState",1,"custom-select",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"],["for","discoveredDeviceadminState",1,"col-md-2","col-form-label"],v,["name","discoveredDevice.adminState",1,"custom-select",3,"ngModel","ngModelChange"],p,["type","text","name","address",1,"form-control",3,"ngModel","ngModelChange"],I,["type","text","name","port",1,"form-control",3,"ngModel","ngModelChange"],O,["type","text","name","blockingIdentifiers",1,"form-control",3,"ngModel","ngModelChange"],[1,"mb-3"],[3,"deviceSvcSelected","singleDeviceSvcSelectedEvent"],[3,"enableSelectAll","toolbars","singleProfileSelected","associatedDeviceColumn","singleProfileSelectedEvent"]]},template:function(i,_){1&i&&e.YNc(0,zt,69,16,"div",0),2&i&&e.Q6J("ngIf",_.provisionWatcher)},dependencies:[o.O5,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.Q7,a.On,a.F,re,U.f]})}return n})();var Yt=u(2560),Kt=u(2096),Bt=u(8180),jt=u(6306),e_=u(1631);let Ce=(()=>{class n{constructor(t,i){this.router=t,this.metadataSvc=i}canActivate(t,i){return this.checkAvailable(t,i)}canActivateChild(t,i){return this.canActivate(t,i)}checkAvailable(t,i){return this.metadataSvc.ping().pipe((0,Bt.q)(1),(0,jt.K)(_=>this.router.navigate(["/svc-unavailable"],{queryParams:{svcName:"metadata",routerPath:`/${i.url.split("/")[1]}`}})),(0,e_.z)(()=>(0,Kt.of)(!0)))}static#e=this.\u0275fac=function(i){return new(i||n)(e.LFG(C.F0),e.LFG(P.D))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const t_=[{path:"",component:w,canActivate:[Yt.a,Ce],canActivateChild:[Ce],children:[{path:"",redirectTo:"device-service-list",pathMatch:"full"},{path:"device-service-list",component:G},{path:"device-center",component:r,children:[{path:"",redirectTo:"device-list",pathMatch:"full"},{path:"device-list",component:Je},{path:"add-device",component:mt},{path:"edit-device",component:Mt}]},{path:"device-profile-center",component:Ot,children:[{path:"",redirectTo:"device-profile-list",pathMatch:"full"},{path:"device-profile-list",component:U.f},{path:"edit-profile",component:ht},{path:"add-profile",component:Nt}]},{path:"provision-watcher-center",component:Rt,children:[{path:"",redirectTo:"provision-watcher-list",pathMatch:"full"},{path:"provision-watcher-list",component:yt},{path:"edit-provision-watcher",component:Qt},{path:"add-provision-watcher",component:Ft}]}]}];let __=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#_=this.\u0275inj=e.cJS({imports:[C.Bz.forChild(t_),C.Bz]})}return n})(),i_=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#_=this.\u0275inj=e.cJS({imports:[o.ez,a.u5,__,a.UX]})}return n})()},9519:(Ee,q,u)=>{u.d(q,{f:()=>de});var o=u(6689),a=u(5167),C=u(3685),e=u(9919),w=u(6814),P=u(95);function x(R,G){if(1&R){const r=o.EpF();o.TgZ(0,"div",50)(1,"div",51)(2,"button",52),o.NdJ("click",function(){o.CHM(r);const d=o.oxw();return o.KtG(d.refresh())}),o.TgZ(3,"span"),o._UZ(4,"i",53),o.TgZ(5,"span"),o.SDv(6,54),o.qZA()()(),o.TgZ(7,"button",55)(8,"span"),o._UZ(9,"i",56),o.TgZ(10,"span"),o.SDv(11,57),o.qZA()()(),o.TgZ(12,"button",58),o.NdJ("click",function(){o.CHM(r);const d=o.oxw();return o.KtG(d.edit())}),o.TgZ(13,"span"),o._UZ(14,"i",59),o.TgZ(15,"span"),o.SDv(16,60),o.qZA()()(),o.TgZ(17,"button",61),o.NdJ("click",function(){o.CHM(r);const d=o.oxw();return o.KtG(d.deleteConfirm())}),o.TgZ(18,"span"),o._UZ(19,"i",62),o.TgZ(20,"span"),o.SDv(21,63),o.qZA()()()()()}if(2&R){const r=o.oxw();o.xp6(12),o.Q6J("disabled",1!==r.multiProfilesSelected.length),o.xp6(5),o.Q6J("disabled",0===r.multiProfilesSelected.length)}}function h(R,G){if(1&R){const r=o.EpF();o.TgZ(0,"input",64),o.NdJ("click",function(d){o.CHM(r);const b=o.oxw();return o.KtG(b.selectAll(d))}),o.qZA()}if(2&R){const r=o.oxw();o.Q6J("checked",r.isCheckedAll())}}function M(R,G){1&R&&(o.TgZ(0,"th",9),o.SDv(1,65),o.qZA())}const L=function(R){return{profileName:R}};function y(R,G){if(1&R&&(o.TgZ(0,"td",69)(1,"a",70),o._UZ(2,"i",71),o.qZA()()),2&R){const r=o.oxw().$implicit;o.xp6(1),o.Q6J("queryParams",o.VKq(1,L,r.name))}}function k(R,G){if(1&R){const r=o.EpF();o.TgZ(0,"tr")(1,"td")(2,"input",66),o.NdJ("click",function(d){const W=o.CHM(r).$implicit,X=o.oxw();return o.KtG(X.selectOne(d,W.name))}),o.qZA()(),o.TgZ(3,"td",67),o._uU(4),o.qZA(),o.TgZ(5,"td",67),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.YNc(9,y,3,3,"td",68),o.TgZ(10,"td"),o._uU(11),o.qZA(),o.TgZ(12,"td"),o._uU(13),o.qZA(),o.TgZ(14,"td"),o._uU(15),o.qZA()()}if(2&R){const r=G.$implicit,S=o.oxw();o.ekj("table-active",S.isChecked(r.name)),o.xp6(2),o.s9C("value",r.name),o.Q6J("checked",S.isChecked(r.name)),o.xp6(2),o.Oqu(r.id),o.xp6(2),o.Oqu(r.name),o.xp6(2),o.Oqu(r.description),o.xp6(1),o.Q6J("ngIf",S.associatedDeviceColumn),o.xp6(2),o.Oqu(r.labels),o.xp6(2),o.Oqu(r.manufacturer),o.xp6(2),o.Oqu(r.model)}}let de=(()=>{class R{constructor(r,S,d,b){this.metaSvc=r,this.msgSvc=S,this.route=d,this.router=b,this.associatedDeviceColumn=!0,this.toolbars=!0,this.enableSelectAll=!0,this.singleProfileSelectedEvent=new o.vpe,this.multipleProfileSelectedEvent=new o.vpe,this.profileList=[],this.multiProfilesSelected=[],this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.route.queryParams.subscribe(r=>{r.profileName?this.metaSvc.findProfileByName(r.profileName).subscribe(S=>{this.profileList=[],this.profileList.push(S.profile)}):this.findAllDeviceProfilesPagination()})}findAllDeviceProfilesPagination(){this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(r=>{this.profileList=r.profiles})}onSingleProfileSelectedEmitter(){this.singleProfileSelectedEvent.emit(this.singleProfileSelected)}onMultipleProfileSelectedEmitter(){this.multipleProfileSelectedEvent.emit(this.multiProfilesSelected)}refresh(){this.metaSvc.allDeviceProfolesPagination(0,this.pageLimit).subscribe(r=>{this.profileList=r.profiles,this.msgSvc.success("refresh"),this.pagination=1,this.resetCheckbox()})}onPageSelected(){this.resetPagination(),this.setPagination(),this.findAllDeviceProfilesPagination()}prePage(){this.setPagination(-1),this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(r=>{this.profileList=r.profiles})}nextPage(){this.setPagination(1),this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(r=>{this.profileList=r.profiles})}setPageLimit(r){this.pageLimit=r}setPagination(r){1===r?this.pagination+=1:-1===r&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit,this.resetCheckbox()}resetPagination(){this.pagination=1,this.resetCheckbox()}resetCheckbox(){}edit(){this.router.navigate(["../edit-profile"],{relativeTo:this.route,queryParams:{profileName:this.multiProfilesSelected[0]}})}deleteConfirm(){$("#deleteConfirmDialog").modal("show")}delete(){this.multiProfilesSelected.forEach(r=>{this.metaSvc.deleteProfileByName(r).subscribe(()=>{this.multiProfilesSelected=[],this.profileList.forEach((S,d)=>{S.name==r&&(this.profileList.splice(d,1),this.msgSvc.success("delete",`  Name: ${S.name}`))})})}),$("#deleteConfirmDialog").modal("hide")}isSingleProfileChecked(r){return this.singleProfileSelected?.name===r}selectSingleProfile(r,S){r.target.checked?this.profileList.forEach(b=>{b.name===S&&(this.singleProfileSelected=b)}):this.singleProfileSelected=void 0,this.onSingleProfileSelectedEmitter()}isCheckedAll(){let r=!0;return this.profileList&&0===this.profileList.length&&(r=!1),this.profileList.forEach(S=>{-1===this.multiProfilesSelected.indexOf(S.name)&&(r=!1)}),r}selectAll(r){this.profileList.forEach(r.target.checked?d=>{this.multiProfilesSelected.includes(d.name)||this.multiProfilesSelected.push(d.name)}:d=>{this.multiProfilesSelected.includes(d.name)&&this.multiProfilesSelected.splice(this.multiProfilesSelected.indexOf(d.name),1)}),this.onMultipleProfileSelectedEmitter()}isChecked(r){return this.enableSelectAll?this.multiProfilesSelected.includes(r):this.isSingleProfileChecked(r)}selectOne(r,S){this.enableSelectAll?(r.target.checked?this.multiProfilesSelected.push(S):this.multiProfilesSelected.splice(this.multiProfilesSelected.indexOf(S),1),this.onMultipleProfileSelectedEmitter()):this.selectSingleProfile(r,S)}static#e=this.\u0275fac=function(S){return new(S||R)(o.Y36(a.D),o.Y36(C.e),o.Y36(e.gz),o.Y36(e.F0))};static#t=this.\u0275cmp=o.Xpm({type:R,selectors:[["app-device-profile-list"]],inputs:{associatedDeviceColumn:"associatedDeviceColumn",toolbars:"toolbars",enableSelectAll:"enableSelectAll",multiProfilesSelected:"multiProfilesSelected",singleProfileSelected:"singleProfileSelected"},outputs:{singleProfileSelectedEvent:"singleProfileSelectedEvent",multipleProfileSelectedEvent:"multipleProfileSelectedEvent"},decls:67,vars:7,consts:function(){let r,S,d,b,W,X,K,B,j,ee,te,_e,ie,ne,oe,se,ce,ae;return r="Device Profile List",S="Name",d="Description",b="Labels",W="Manufacturer",X="Model",K="items per page",B="Previous",j="Next",ee="Warning",te=" The data will be permanently erased!!! Are you sure to execute delete operation\uFF1F ",_e="Cancel",ie="Confirm",ne="Refresh",oe="Add",se="Edit",ce="Delete",ae="AssociatedDevice",[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","text-danger","mr-2"],r,[1,"card-body","p-0"],["class","bg-light px-2 py-2",4,"ngIf"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],["type","checkbox",3,"checked","click",4,"ngIf"],S,d,["scope","col",4,"ngIf"],b,W,X,[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],K,[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"custom-select",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left","mr-1"],B,[1,"page-item"],j,[1,"fa","fa-angle-double-right","ml-1"],["id","deleteConfirmDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteConfirmDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteConfirmDialogLabel",1,"modal-title","text-danger"],[1,"fa","fa-warning","mr-1"],ee,[1,"modal-body"],te,[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],_e,["type","button",1,"btn","btn-danger",3,"click"],ie,[1,"bg-light","px-2","py-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","mr-1"],ne,["type","button","routerLink","../add-profile",1,"btn","btn-info"],[1,"fa","fa-plus","mr-1"],oe,["type","button","data-toggle","tooltip","data-placement","top","title","only one should be selected",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-edit","mr-1"],se,["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash","mr-1"],ce,["type","checkbox",3,"checked","click"],ae,["type","checkbox",3,"value","checked","click"],[1,"user-select-all"],["class","text-center",4,"ngIf"],[1,"text-center"],["routerLink","../../device-center",1,"badge","badge-pill","badge-primary",3,"queryParams"],[1,"fa","fa-sitemap"]]},template:function(S,d){1&S&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"i",2),o.TgZ(3,"span"),o.SDv(4,3),o.qZA()(),o.TgZ(5,"div",4),o.YNc(6,x,22,2,"div",5),o.TgZ(7,"div",6)(8,"table",7)(9,"thead",8)(10,"tr")(11,"th",9),o.YNc(12,h,1,1,"input",10),o.qZA(),o.TgZ(13,"th",9),o._uU(14,"ID"),o.qZA(),o.TgZ(15,"th",9),o.SDv(16,11),o.qZA(),o.TgZ(17,"th",9),o.SDv(18,12),o.qZA(),o.YNc(19,M,2,0,"th",13),o.TgZ(20,"th",9),o.SDv(21,14),o.qZA(),o.TgZ(22,"th",9),o.SDv(23,15),o.qZA(),o.TgZ(24,"th",9),o.SDv(25,16),o.qZA()()(),o.TgZ(26,"tbody"),o.YNc(27,k,16,11,"tr",17),o.qZA()()()(),o.TgZ(28,"div",18)(29,"nav",19)(30,"ul",20)(31,"li",21)(32,"span",22),o.SDv(33,23),o.qZA()(),o.TgZ(34,"li",24)(35,"select",25),o.NdJ("ngModelChange",function(W){return d.pageLimit=W})("ngModelChange",function(){return d.onPageSelected()}),o.TgZ(36,"option",26),o._uU(37,"5"),o.qZA(),o.TgZ(38,"option",27),o._uU(39,"10"),o.qZA(),o.TgZ(40,"option",28),o._uU(41,"20"),o.qZA()()(),o.TgZ(42,"li",29)(43,"button",30),o.NdJ("click",function(){return d.prePage()}),o._UZ(44,"i",31),o.TgZ(45,"span"),o.SDv(46,32),o.qZA()()(),o.TgZ(47,"li",33)(48,"button",30),o.NdJ("click",function(){return d.nextPage()}),o.TgZ(49,"span"),o.SDv(50,34),o.qZA(),o._UZ(51,"i",35),o.qZA()()()()()(),o.TgZ(52,"div",36)(53,"div",37)(54,"div",38)(55,"div",39)(56,"h5",40),o._UZ(57,"i",41),o.TgZ(58,"span"),o.SDv(59,42),o.qZA()()(),o.TgZ(60,"div",43),o.SDv(61,44),o.qZA(),o.TgZ(62,"div",45)(63,"button",46),o.SDv(64,47),o.qZA(),o.TgZ(65,"button",48),o.NdJ("click",function(){return d.delete()}),o.SDv(66,49),o.qZA()()()()()),2&S&&(o.xp6(6),o.Q6J("ngIf",d.toolbars),o.xp6(6),o.Q6J("ngIf",d.enableSelectAll),o.xp6(7),o.Q6J("ngIf",d.associatedDeviceColumn),o.xp6(8),o.Q6J("ngForOf",d.profileList),o.xp6(8),o.Q6J("ngModel",d.pageLimit),o.xp6(8),o.Q6J("disabled",1===d.pagination),o.xp6(5),o.Q6J("disabled",d.pageLimit>d.profileList.length))},dependencies:[w.sg,w.O5,P.YN,P.Kr,P.EJ,P.JJ,P.On,e.rH],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]})}return R})()},9167:(Ee,q,u)=>{u.d(q,{V:()=>w});var o=u(9862),a=u(6306),C=u(6689),e=u(8027);let w=(()=>{class P{constructor(h,M){this.http=h,this.errorSvc=M,this.endpoint="/core-command",this.version="/api/v3",this.urlPrefix=`${this.endpoint}${this.version}`,this.endpointHealthUrl="/ping",this.versionUrl="/version",this.configUrl="/config",this.deviceCoreCommandListUrl=`${this.urlPrefix}/device/all`,this.commandsByDeviceIdUrl=`${this.urlPrefix}/device/`,this.commandsByDeviceNameUrl=`${this.urlPrefix}/device/name/`,this.issueCmdByDeviceNameAndCmdNameUrl=`${this.urlPrefix}/device/name/`,this.httpPostOrPutJSONOptions={headers:new o.WM({"Content-type":"application/json"})}}getConfig(){return this.http.get(`${this.urlPrefix}${this.configUrl}`).pipe((0,a.K)(M=>this.errorSvc.handleError(M)))}findCommnadsByDeviceId(h){return this.http.get(`${this.commandsByDeviceIdUrl}${h}`).pipe((0,a.K)(L=>this.errorSvc.handleError(L)))}allDeviceCoreCommandsPagination(h,M){return this.http.get(`${this.deviceCoreCommandListUrl}?offset=${h}&limit=${M}`).pipe((0,a.K)(y=>this.errorSvc.handleError(y)))}findDeviceAssociatedCommnadsByDeviceName(h){return this.http.get(`${this.commandsByDeviceNameUrl}${h}`).pipe((0,a.K)(L=>this.errorSvc.handleError(L)))}findAllDeviceCommnads(){return this.http.get(`${this.urlPrefix}/device`).pipe((0,a.K)(M=>this.errorSvc.handleError(M)))}issueGetBinaryCmd(h,M){return this.http.request("GET",`${this.commandsByDeviceIdUrl}${h}/command/${M}`,{responseType:"arraybuffer"}).pipe((0,a.K)(y=>this.errorSvc.handleError(y)))}issueGetCmd(h,M){return this.http.get(`${this.issueCmdByDeviceNameAndCmdNameUrl}${h}/${M}?ds-pushevent=true&ds-returnevent=true`).pipe((0,a.K)(y=>this.errorSvc.handleError(y)))}issueSetCmd(h,M,L){return this.http.put(`${this.issueCmdByDeviceNameAndCmdNameUrl}${h}/${M}`,JSON.stringify(L),this.httpPostOrPutJSONOptions).pipe((0,a.K)(k=>this.errorSvc.handleError(k)))}static#e=this.\u0275fac=function(M){return new(M||P)(C.LFG(o.eN),C.LFG(e.T))};static#t=this.\u0275prov=C.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"})}return P})()}}]);