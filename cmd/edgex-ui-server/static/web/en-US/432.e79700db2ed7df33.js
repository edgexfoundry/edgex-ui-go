"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[432],{3432:(C,d,o)=>{o.r(d),o.d(d,{CoreDataModule:()=>D});var u=o(6814),i=o(9919),e=o(6689);let _=(()=>{class n{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(t){return new(t||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-core-data"]],decls:21,vars:0,consts:function(){let a,t,r;return a=" An event represents a collection of one or more sensor readings. Some sensors or devices are only providing a single value \u2013 a single reading - at a time. Other sensors spew multiple values whenever they are read. An event must have at least one reading. Events are associated to a sensor or device. " + "[\ufffd#7\ufffd\ufffd/#7\ufffd|\ufffd#8\ufffd\ufffd/#8\ufffd|\ufffd#9\ufffd\ufffd/#9\ufffd]" + "" + "[\ufffd#7\ufffd\ufffd/#7\ufffd|\ufffd#8\ufffd\ufffd/#8\ufffd|\ufffd#9\ufffd\ufffd/#9\ufffd]" + " The following data is only for the convenience of the user to view the data format of the data center, which does not make any sense to manipulate! " + "[\ufffd#7\ufffd\ufffd/#7\ufffd|\ufffd#8\ufffd\ufffd/#8\ufffd|\ufffd#9\ufffd\ufffd/#9\ufffd]" + " The dynamic display effect of the data is that only the API of the Core Data service is called periodically, with intervals of 3 seconds. ",a=e.Zx4(a),t="Event",r="Reading",[[1,"card","mb-2"],[1,"card-header"],[1,"fa","fa-info-circle","mr-2","text-info"],[1,"card-body"],a,[1,"card"],[1,"nav","nav-tabs","card-header-tabs","font-weight-bold"],[1,"nav-item"],["routerLink","./event","routerLinkActive","active",1,"nav-link"],t,["routerLink","./reading","routerLinkActive","active",1,"nav-link"],r]},template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"i",2),e.TgZ(3,"span"),e._uU(4,"Tips"),e.qZA()(),e.TgZ(5,"div",3),e.tHW(6,4),e._UZ(7,"br")(8,"br")(9,"br"),e.N_p(),e.qZA()(),e.TgZ(10,"div",5)(11,"div",1)(12,"ul",6)(13,"li",7)(14,"a",8),e.SDv(15,9),e.qZA()(),e.TgZ(16,"li",7)(17,"a",10),e.SDv(18,11),e.qZA()()()(),e.TgZ(19,"div",3),e._UZ(20,"router-outlet"),e.qZA()())},dependencies:[i.lC,i.rH,i.Od]})}return n})();var l=o(2848);let p=(()=>{class n{constructor(a){this.dataSvc=a,this.pauseOperate=!0}ngOnInit(){}feedEvents(){this.feedInterval=setInterval(()=>{this.dataSvc.allEventsPagination(0,5).subscribe(a=>{0!==a.events.length?a.events.forEach((t,r)=>{$("#data-event-stream").prepend('<p class="user-select-all">'+JSON.stringify(t)+"</p>")}):$("#data-event-stream").prepend('<p class="user-select-all">no data stream available, please confirm whether there is at least one device to collect data</p>')})},3e3)}start(){this.pauseOperate=!1,this.feedEvents()}pause(){this.pauseOperate=!0,window.clearInterval(this.feedInterval)}operateToggle(){this.pauseOperate=!this.pauseOperate}ngOnDestroy(){window.clearInterval(this.feedInterval)}static#e=this.\u0275fac=function(t){return new(t||n)(e.Y36(l.D))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-event"]],decls:20,vars:2,consts:function(){let a,t,r;return a="Event Data Stream",t="Start",r="Pause",[[1,"card"],[1,"card-header"],[1,"font-weight-bold"],[1,"fa","fa-area-chart","mr-2","text-danger"],[1,"text-secondary"],a,[1,"card-header","p-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-play","mr-1"],t,["type","button",1,"btn","btn-info",3,"disabled","click"],[1,"fa","fa-pause","mr-1"],r,[1,"card-body"],["id","data-event-stream",1,"w-100","overflow-auto",2,"height","350px"]]},template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._UZ(3,"span",3),e.TgZ(4,"span",4),e.SDv(5,5),e.qZA()()(),e.TgZ(6,"div",6)(7,"div",7)(8,"button",8),e.NdJ("click",function(){return r.start()}),e.TgZ(9,"span"),e._UZ(10,"i",9),e.TgZ(11,"span"),e.SDv(12,10),e.qZA()()(),e.TgZ(13,"button",11),e.NdJ("click",function(){return r.pause()}),e.TgZ(14,"span"),e._UZ(15,"i",12),e.TgZ(16,"span"),e.SDv(17,13),e.qZA()()()()(),e.TgZ(18,"div",14),e._UZ(19,"pre",15),e.qZA()()),2&t&&(e.xp6(8),e.Q6J("disabled",!r.pauseOperate),e.xp6(5),e.Q6J("disabled",r.pauseOperate))},styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]})}return n})(),F=(()=>{class n{constructor(a){this.dataSvc=a,this.pauseOperate=!0}ngOnInit(){}feedEvents(){this.feedInterval=setInterval(()=>{this.dataSvc.allReadingsPagination(0,5).subscribe(a=>{0!==a.readings.length?a.readings.forEach((t,r)=>{$("#data-reading-stream").prepend('<p class="user-select-all">'+JSON.stringify(t)+"</p>")}):$("#data-event-stream").prepend('<p class="user-select-all">no data stream available, please confirm whether there is at least one device to collect data</p>')})},3e3)}start(){this.pauseOperate=!1,this.feedEvents()}pause(){this.pauseOperate=!0,window.clearInterval(this.feedInterval)}operateToggle(){this.pauseOperate=!this.pauseOperate}ngOnDestroy(){window.clearInterval(this.feedInterval)}static#e=this.\u0275fac=function(t){return new(t||n)(e.Y36(l.D))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-reading"]],decls:20,vars:2,consts:function(){let a,t,r;return a="Reading Data Stream",t="Start",r="Pause",[[1,"card"],[1,"card-header"],[1,"font-weight-bold"],[1,"fa","fa-area-chart","mr-2","text-danger"],[1,"text-secondary"],a,[1,"card-header","p-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-play","mr-1"],t,["type","button",1,"btn","btn-info",3,"disabled","click"],[1,"fa","fa-pause","mr-1"],r,[1,"card-body"],["id","data-reading-stream",1,"w-100","overflow-auto",2,"height","350px"]]},template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._UZ(3,"span",3),e.TgZ(4,"span",4),e.SDv(5,5),e.qZA()()(),e.TgZ(6,"div",6)(7,"div",7)(8,"button",8),e.NdJ("click",function(){return r.start()}),e.TgZ(9,"span"),e._UZ(10,"i",9),e.TgZ(11,"span"),e.SDv(12,10),e.qZA()()(),e.TgZ(13,"button",11),e.NdJ("click",function(){return r.pause()}),e.TgZ(14,"span"),e._UZ(15,"i",12),e.TgZ(16,"span"),e.SDv(17,13),e.qZA()()()()(),e.TgZ(18,"div",14),e._UZ(19,"pre",15),e.qZA()()),2&t&&(e.xp6(8),e.Q6J("disabled",!r.pauseOperate),e.xp6(5),e.Q6J("disabled",r.pauseOperate))},styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]})}return n})();var f=o(2560),g=o(2096),E=o(8180),v=o(6306),A=o(1631);let c=(()=>{class n{constructor(a,t){this.router=a,this.dataSvc=t}canActivate(a,t){return this.checkAvailable(a,t)}canActivateChild(a,t){return this.canActivate(a,t)}checkAvailable(a,t){return this.dataSvc.ping().pipe((0,E.q)(1),(0,v.K)(r=>this.router.navigate(["/svc-unavailable"],{queryParams:{svcName:"core data",routerPath:`/${t.url.split("/")[1]}`}})),(0,A.z)(()=>(0,g.of)(!0)))}static#e=this.\u0275fac=function(t){return new(t||n)(e.LFG(i.F0),e.LFG(l.D))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const T=[{path:"",component:_,canActivate:[f.a,c],canActivateChild:[c],children:[{path:"",redirectTo:"event",pathMatch:"full"},{path:"event",component:p},{path:"reading",component:F}]}];let h=(()=>{class n{static#e=this.\u0275fac=function(t){return new(t||n)};static#t=this.\u0275mod=e.oAB({type:n});static#a=this.\u0275inj=e.cJS({imports:[i.Bz.forChild(T),i.Bz]})}return n})(),D=(()=>{class n{static#e=this.\u0275fac=function(t){return new(t||n)};static#t=this.\u0275mod=e.oAB({type:n});static#a=this.\u0275inj=e.cJS({imports:[u.ez,h]})}return n})()}}]);