"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[489],{3489:(R,d,r)=>{r.r(d),r.d(d,{CoreDataModule:()=>f});var E=r(8583),s=r(9502),_=r(476);let c=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-core-data"]],decls:21,vars:0,consts:function(){let n,e,a;return n=" An event represents a collection of one or more sensor readings. Some sensors or devices are only providing a single value \u2013 a single reading - at a time. Other sensors spew multiple values whenever they are read. An event must have at least one reading. Events are associated to a sensor or device. " + "[\ufffd#7\ufffd\ufffd/#7\ufffd|\ufffd#8\ufffd\ufffd/#8\ufffd|\ufffd#9\ufffd\ufffd/#9\ufffd]" + "" + "[\ufffd#7\ufffd\ufffd/#7\ufffd|\ufffd#8\ufffd\ufffd/#8\ufffd|\ufffd#9\ufffd\ufffd/#9\ufffd]" + " The following data is only for the convenience of the user to view the data format of the data center, which does not make any sense to manipulate! " + "[\ufffd#7\ufffd\ufffd/#7\ufffd|\ufffd#8\ufffd\ufffd/#8\ufffd|\ufffd#9\ufffd\ufffd/#9\ufffd]" + " The dynamic display effect of the data is that only the API of the Core Data service is called periodically, with intervals of 3 seconds. ",n=_.Zx4(n),e="Event",a="Reading",[[1,"card","mb-2"],[1,"card-header"],[1,"fa","fa-info-circle","mr-2","text-info"],[1,"card-body"],n,[1,"card"],[1,"nav","nav-tabs","card-header-tabs","font-weight-bold"],[1,"nav-item"],["routerLink","./event","routerLinkActive","active",1,"nav-link"],e,["routerLink","./reading","routerLinkActive","active",1,"nav-link"],a]},template:function(e,a){1&e&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_._UZ(2,"i",2),_.TgZ(3,"span"),_._uU(4,"Tips"),_.qZA(),_.qZA(),_.TgZ(5,"div",3),_.tHW(6,4),_._UZ(7,"br"),_._UZ(8,"br"),_._UZ(9,"br"),_.N_p(),_.qZA(),_.qZA(),_.TgZ(10,"div",5),_.TgZ(11,"div",1),_.TgZ(12,"ul",6),_.TgZ(13,"li",7),_.TgZ(14,"a",8),_.SDv(15,9),_.qZA(),_.qZA(),_.TgZ(16,"li",7),_.TgZ(17,"a",10),_.SDv(18,11),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(19,"div",3),_._UZ(20,"router-outlet"),_.qZA(),_.qZA())},directives:[s.yS,s.Od,s.lC],styles:[""]}),t})();var i=r(2468);let u=(()=>{class t{constructor(e){this.dataSvc=e,this.pauseOperate=!0}ngOnInit(){}feedEvents(){this.feedInterval=setInterval(()=>{this.dataSvc.allEventsPagination(0,5).subscribe(e=>{0!==e.events.length?e.events.forEach((a,o)=>{$("#data-event-stream").prepend('<p class="user-select-all">'+JSON.stringify(a)+"</p>")}):$("#data-event-stream").prepend('<p class="user-select-all">no data stream available, please confirm whether there is at least one device to collect data</p>')})},3e3)}start(){this.pauseOperate=!1,this.feedEvents()}pause(){this.pauseOperate=!0,window.clearInterval(this.feedInterval)}operateToggle(){this.pauseOperate=!this.pauseOperate}ngOnDestroy(){window.clearInterval(this.feedInterval)}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(i.D))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-event"]],decls:20,vars:2,consts:function(){let n,e,a;return n="Event Data Stream",e="Start",a="Pause",[[1,"card"],[1,"card-header"],[1,"font-weight-bold"],[1,"fa","fa-area-chart","mr-2","text-danger"],[1,"text-secondary"],n,[1,"card-header","p-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-play","mr-1"],e,["type","button",1,"btn","btn-info",3,"disabled","click"],[1,"fa","fa-pause","mr-1"],a,[1,"card-body"],["id","data-event-stream",1,"w-100","overflow-auto",2,"height","350px"]]},template:function(e,a){1&e&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"span",2),_._UZ(3,"span",3),_.TgZ(4,"span",4),_.SDv(5,5),_.qZA(),_.qZA(),_.qZA(),_.TgZ(6,"div",6),_.TgZ(7,"div",7),_.TgZ(8,"button",8),_.NdJ("click",function(){return a.start()}),_.TgZ(9,"span"),_._UZ(10,"i",9),_.TgZ(11,"span"),_.SDv(12,10),_.qZA(),_.qZA(),_.qZA(),_.TgZ(13,"button",11),_.NdJ("click",function(){return a.pause()}),_.TgZ(14,"span"),_._UZ(15,"i",12),_.TgZ(16,"span"),_.SDv(17,13),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(18,"div",14),_._UZ(19,"pre",15),_.qZA(),_.qZA()),2&e&&(_.xp6(8),_.Q6J("disabled",!a.pauseOperate),_.xp6(5),_.Q6J("disabled",a.pauseOperate))},styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),t})(),A=(()=>{class t{constructor(e){this.dataSvc=e,this.pauseOperate=!0}ngOnInit(){}feedEvents(){this.feedInterval=setInterval(()=>{this.dataSvc.allReadingsPagination(0,5).subscribe(e=>{0!==e.readings.length?e.readings.forEach((a,o)=>{$("#data-reading-stream").prepend('<p class="user-select-all">'+JSON.stringify(a)+"</p>")}):$("#data-event-stream").prepend('<p class="user-select-all">no data stream available, please confirm whether there is at least one device to collect data</p>')})},3e3)}start(){this.pauseOperate=!1,this.feedEvents()}pause(){this.pauseOperate=!0,window.clearInterval(this.feedInterval)}operateToggle(){this.pauseOperate=!this.pauseOperate}ngOnDestroy(){window.clearInterval(this.feedInterval)}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(i.D))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-reading"]],decls:20,vars:2,consts:function(){let n,e,a;return n="Reading Data Stream",e="Start",a="Pause",[[1,"card"],[1,"card-header"],[1,"font-weight-bold"],[1,"fa","fa-area-chart","mr-2","text-danger"],[1,"text-secondary"],n,[1,"card-header","p-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-play","mr-1"],e,["type","button",1,"btn","btn-info",3,"disabled","click"],[1,"fa","fa-pause","mr-1"],a,[1,"card-body"],["id","data-reading-stream",1,"w-100","overflow-auto",2,"height","350px"]]},template:function(e,a){1&e&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"span",2),_._UZ(3,"span",3),_.TgZ(4,"span",4),_.SDv(5,5),_.qZA(),_.qZA(),_.qZA(),_.TgZ(6,"div",6),_.TgZ(7,"div",7),_.TgZ(8,"button",8),_.NdJ("click",function(){return a.start()}),_.TgZ(9,"span"),_._UZ(10,"i",9),_.TgZ(11,"span"),_.SDv(12,10),_.qZA(),_.qZA(),_.qZA(),_.TgZ(13,"button",11),_.NdJ("click",function(){return a.pause()}),_.TgZ(14,"span"),_._UZ(15,"i",12),_.TgZ(16,"span"),_.SDv(17,13),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(18,"div",14),_._UZ(19,"pre",15),_.qZA(),_.qZA()),2&e&&(_.xp6(8),_.Q6J("disabled",!a.pauseOperate),_.xp6(5),_.Q6J("disabled",a.pauseOperate))},styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),t})();var O=r(8253),F=r(1964),p=r(4294),D=r(5894),g=r(7216);let l=(()=>{class t{constructor(e,a){this.router=e,this.dataSvc=a}canActivate(e,a){return this.checkAvailable(e,a)}canActivateChild(e,a){return this.canActivate(e,a)}checkAvailable(e,a){return this.dataSvc.ping().pipe((0,p.q)(1),(0,D.K)(o=>this.router.navigate(["/svc-unavailable"],{queryParams:{svcName:"core data",routerPath:`/${a.url.split("/")[1]}`}})),(0,g.z)(()=>(0,F.of)(!0)))}}return t.\u0275fac=function(e){return new(e||t)(_.LFG(s.F0),_.LFG(i.D))},t.\u0275prov=_.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const T=[{path:"",component:c,canActivate:[O.a,l],canActivateChild:[l],children:[{path:"",redirectTo:"event",pathMatch:"full"},{path:"event",component:u},{path:"reading",component:A}]}];let C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({imports:[[s.Bz.forChild(T)],s.Bz]}),t})(),f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({imports:[[E.ez,C]]}),t})()}}]);