"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[679],{679:(U,q,v)=>{v.r(q),v.d(q,{MetadataModule:()=>ct});var n=v(8583),d=v(3092),_=v(9502),e=v(476);let b=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-metadata"]],decls:14,vars:0,consts:[[1,"card"],[1,"card-header"],[1,"nav","nav-tabs","card-header-tabs","font-weight-bold"],[1,"nav-item"],["routerLink","./device-service-list","routerLinkActive","active",1,"nav-link"],["routerLink","./device-center","routerLinkActive","active",1,"nav-link"],["routerLink","./device-profile-center","routerLinkActive","active",1,"nav-link"],[1,"card-body"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"ul",2),e.TgZ(3,"li",3),e.TgZ(4,"a",4),e._uU(5,"Device Service"),e.qZA(),e.qZA(),e.TgZ(6,"li",3),e.TgZ(7,"a",5),e._uU(8,"Device"),e.qZA(),e.qZA(),e.TgZ(9,"li",3),e.TgZ(10,"a",6),e._uU(11,"Device Profile"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",7),e._UZ(13,"router-outlet"),e.qZA(),e.qZA())},directives:[_.yS,_.Od,_.lC],styles:[".active-link[_ngcontent-%COMP%]{color:#922c48;background-color:#922c4866!important}"]}),i})();var f=v(2437),T=v(7822);function a(i,c){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.description)}}function l(i,c){1&i&&(e.TgZ(0,"p",19),e._uU(1,"no description."),e.qZA())}function p(i,c){if(1&i&&(e.TgZ(0,"span",20),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.adminState)}}function h(i,c){if(1&i&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.adminState)}}function P(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"a",22),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw().associatedDevicesSkip(r.name)}),e._UZ(1,"i",23),e._uU(2),e.qZA()}if(2&i){const t=e.oxw().$implicit,o=e.oxw();e.xp6(2),e.hij(" Associated Devices \xa0 ",o.associatedDevices.get(t.name),"")}}function y(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"li",3),e.TgZ(1,"div",4),e.TgZ(2,"div",5),e._UZ(3,"i",6),e.qZA(),e.TgZ(4,"div",7),e.TgZ(5,"div",8),e.TgZ(6,"h5",9),e._uU(7),e.qZA(),e.qZA(),e.YNc(8,a,2,1,"p",10),e.YNc(9,l,2,0,"ng-template",null,11,e.W1O),e.TgZ(11,"div"),e.TgZ(12,"span",12),e._uU(13),e.qZA(),e.TgZ(14,"span",13),e.YNc(15,p,2,1,"span",14),e.YNc(16,h,2,1,"span",15),e.qZA(),e.YNc(17,P,3,1,"a",16),e.TgZ(18,"span",17),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().edit(s)}),e._UZ(19,"i",18),e._uU(20," Setting"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=c.$implicit,o=e.MAs(10),r=e.oxw();e.xp6(7),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",t.description)("ngIfElse",o),e.xp6(5),e.hij("Port ",r.getSvcPort(t.baseAddress),""),e.xp6(1),e.Q6J("ngSwitch",t.adminState),e.xp6(1),e.Q6J("ngSwitchCase","UNLOCKED"),e.xp6(2),e.Q6J("ngIf",r.associatedDevices.size)}}function A(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",24),e.TgZ(1,"div",25),e._UZ(2,"i",26),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.TgZ(5,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateSvc()}),e._uU(6,"Save"),e.qZA(),e.qZA(),e.TgZ(7,"div",28),e.TgZ(8,"form"),e.TgZ(9,"div",29),e.TgZ(10,"label",30),e._uU(11,"Description"),e.qZA(),e.TgZ(12,"div",31),e.TgZ(13,"input",32),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().deviceSvcSelected.description=r}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",29),e.TgZ(15,"label",33),e._uU(16,"AdminState"),e.qZA(),e.TgZ(17,"div",31),e.TgZ(18,"select",34),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().deviceSvcSelected.adminState=r}),e.TgZ(19,"option",35),e._uU(20,"UNLOCKED"),e.qZA(),e.TgZ(21,"option",36),e._uU(22,"LOCKED"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(4),e.hij("edit ",t.deviceSvcSelected.name,""),e.xp6(9),e.Q6J("ngModel",t.deviceSvcSelected.description),e.xp6(5),e.Q6J("ngModel",t.deviceSvcSelected.adminState)}}let S=(()=>{class i{constructor(t,o,r,s){this.metaSvc=t,this.msgSvc=o,this.router=r,this.route=s,this.deviceServiceList=[],this.associatedDevices=new Map}ngOnInit(){this.metaSvc.allDeviceServices().subscribe(t=>{this.deviceServiceList=t.services,this.deviceServiceList.forEach(o=>{this.metaSvc.findDevicesByServiceName(0,20,o.name).subscribe(r=>{this.associatedDevices.set(o.name,r.devices.length>20?"20+":String(r.devices.length))})})})}getSvcPort(t){return new URL(t).port}edit(t){this.deviceSvcSelected=t}updateSvc(){this.metaSvc.updateDeviceService(this.deviceSvcSelected).subscribe(()=>{var t;this.msgSvc.success("update device service",`name: ${null===(t=this.deviceSvcSelected)||void 0===t?void 0:t.name}`),this.deviceSvcSelected=void 0})}associatedDevicesSkip(t){this.router.navigate(["../device-center"],{queryParams:{svcName:t},relativeTo:this.route})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.D),e.Y36(T.e),e.Y36(_.F0),e.Y36(_.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-device-service-media-list"]],decls:3,vars:2,consts:[[1,"list-group","p-0"],["class","list-group-item list-group-item-action list-group-item-light",4,"ngFor","ngForOf"],["class","card mt-3",4,"ngIf"],[1,"list-group-item","list-group-item-action","list-group-item-light"],[1,"media"],[1,"align-self-center","mr-3"],[1,"fa","fa-tags","fa-2x","text-secondary"],[1,"media-body"],[1,"mt-0","mb-1"],[1,"d-inline","mr-3","align-middle","text-dark"],[4,"ngIf","ngIfElse"],["nodesc",""],[1,"badge","badge-info","mr-3"],[3,"ngSwitch"],["class","badge badge-success mr-3",4,"ngSwitchCase"],["class","badge badge-danger mr-3",4,"ngSwitchDefault"],["class","badge badge-primary","role","button",3,"click",4,"ngIf"],["role","button",1,"badge","badge-secondary","float-right",3,"click"],[1,"fa","fa-cog"],[1,"my-1"],[1,"badge","badge-success","mr-3"],[1,"badge","badge-danger","mr-3"],["role","button",1,"badge","badge-primary",3,"click"],[1,"fa","fa-sitemap"],[1,"card","mt-3"],[1,"card-header"],[1,"fa","fa-edit","mr-1","text-danger"],[1,"btn","btn-success","btn-sm","float-right",3,"click"],[1,"card-body"],[1,"form-group","row"],["for","deviceDesc",1,"col-md-2","col-form-label"],[1,"col-md-10"],["type","text","name","deviceSvcDescription",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],["name","deviceSvcAdminState",1,"custom-select",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"]],template:function(t,o){1&t&&(e.TgZ(0,"ul",0),e.YNc(1,y,21,7,"li",1),e.qZA(),e.YNc(2,A,23,3,"div",2)),2&t&&(e.xp6(1),e.Q6J("ngForOf",o.deviceServiceList),e.xp6(1),e.Q6J("ngIf",o.deviceSvcSelected))},directives:[n.sg,n.O5,n.RF,n.n9,n.ED,d._Y,d.JL,d.F,d.Fj,d.JJ,d.On,d.EJ,d.YN,d.Kr],styles:[""]}),i})(),u=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-device-center"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},directives:[_.lC],styles:[""]}),i})();var m=v(7982);function Z(i,c){if(1&i&&(e.TgZ(0,"span"),e.TgZ(1,"span",48),e._uU(2,"DeviceService"),e.qZA(),e.TgZ(3,"span",49),e._uU(4),e.qZA(),e.TgZ(5,"span"),e._uU(6,"Associated Device List"),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.associatedSvcName)}}function D(i,c){if(1&i&&(e.TgZ(0,"span"),e.TgZ(1,"span",48),e._uU(2,"DeviceProfile"),e.qZA(),e.TgZ(3,"span",49),e._uU(4),e.qZA(),e.TgZ(5,"span"),e._uU(6,"Associated Device List"),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.associatedProfileName)}}function N(i,c){1&i&&(e.TgZ(0,"span"),e._uU(1,"Device List"),e.qZA())}function E(i,c){if(1&i&&(e.TgZ(0,"span",61),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.adminState)}}function w(i,c){if(1&i&&(e.TgZ(0,"span",62),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.adminState)}}function k(i,c){if(1&i&&(e.TgZ(0,"span",61),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.operatingState,"")}}function J(i,c){if(1&i&&(e.TgZ(0,"span",62),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.operatingState,"")}}function I(i,c){if(1&i&&(e.TgZ(0,"span",62),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.operatingState,"")}}const Y=function(i){return{profileName:i}};function Q(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"input",19),e.NdJ("click",function(r){const g=e.CHM(t).$implicit;return e.oxw().selectOne(r,g)}),e.qZA(),e.qZA(),e.TgZ(3,"td",50),e._uU(4),e.qZA(),e.TgZ(5,"td",50),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e.TgZ(12,"span",51),e.YNc(13,E,2,1,"span",52),e.YNc(14,w,2,1,"span",53),e.qZA(),e.qZA(),e.TgZ(15,"td",54),e.TgZ(16,"span",51),e.YNc(17,k,2,1,"span",52),e.YNc(18,J,2,1,"span",55),e.YNc(19,I,2,1,"span",53),e.qZA(),e.qZA(),e.TgZ(20,"td",54),e.TgZ(21,"span",56),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().checkDeviceCommand(s)}),e._UZ(22,"i",57),e.qZA(),e.qZA(),e.TgZ(23,"td",54),e.TgZ(24,"span",56),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().checkAutoEvent(s)}),e._UZ(25,"i",58),e.qZA(),e.qZA(),e.TgZ(26,"td"),e.TgZ(27,"a",59),e._uU(28),e.qZA(),e.qZA(),e.TgZ(29,"td"),e.TgZ(30,"a",60),e._uU(31),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=c.$implicit,o=e.oxw();e.ekj("table-active",o.isChecked(t.id)||o.associatedCmdDeviceName===t.name||o.associatedAutoEventsDeviceName===t.name),e.xp6(2),e.Q6J("checked",o.isChecked(t.id)),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(t.labels),e.xp6(2),e.Q6J("ngSwitch",t.adminState),e.xp6(1),e.Q6J("ngSwitchCase","UNLOCKED"),e.xp6(3),e.Q6J("ngSwitch",t.operatingState),e.xp6(1),e.Q6J("ngSwitchCase","UP"),e.xp6(1),e.Q6J("ngSwitchCase","DOWN"),e.xp6(3),e.ekj("badge-danger",o.associatedCmdDeviceName===t.name),e.xp6(3),e.ekj("badge-danger",o.associatedAutoEventsDeviceName===t.name),e.xp6(3),e.Q6J("queryParams",e.VKq(19,Y,t.profileName)),e.xp6(1),e.Oqu(t.profileName),e.xp6(3),e.Oqu(t.serviceName)}}function F(i,c){if(1&i&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e.TgZ(4,"span",71),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"td"),e.TgZ(7,"span",72),e._uU(8),e.qZA(),e.qZA(),e.qZA()),2&i){const t=c.$implicit;e.xp6(2),e.Oqu(t.sourceName),e.xp6(3),e.Oqu(t.interval),e.xp6(3),e.Oqu(t.onChange)}}function B(i,c){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",65),e.TgZ(2,"div",66),e.TgZ(3,"span",67),e._UZ(4,"i",58),e.qZA(),e.TgZ(5,"span",68),e._uU(6),e.qZA(),e._uU(7," Associated AutoEvents "),e.qZA(),e.TgZ(8,"div",69),e.TgZ(9,"div",15),e.TgZ(10,"table",16),e.TgZ(11,"thead",17),e.TgZ(12,"th",18),e._uU(13,"Resource"),e.qZA(),e.TgZ(14,"th",18),e._uU(15,"Interval"),e.qZA(),e.TgZ(16,"th",18),e._uU(17,"Onchange"),e.qZA(),e.qZA(),e.TgZ(18,"tbody"),e.YNc(19,F,9,3,"tr",70),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(6),e.hij(" ",t.associatedAutoEventsDeviceName,""),e.xp6(13),e.Q6J("ngForOf",t.autoEvents)}}function R(i,c){if(1&i&&(e.TgZ(0,"div",65),e.TgZ(1,"div",66),e.TgZ(2,"span",67),e._UZ(3,"i",58),e.qZA(),e.TgZ(4,"span",68),e._uU(5),e.qZA(),e._uU(6," Associated AutoEvents "),e.qZA(),e.TgZ(7,"div",73),e.TgZ(8,"h5",74),e._UZ(9,"i",43),e._uU(10," no associated AutoEvents"),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(5),e.hij(" ",t.associatedAutoEventsDeviceName,"")}}function K(i,c){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,B,20,2,"div",63),e.YNc(2,R,11,1,"ng-template",null,64,e.W1O),e.qZA()),2&i){const t=e.MAs(3),o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.autoEvents)("ngIfElse",t)}}function H(i,c){1&i&&e._UZ(0,"div")}function W(i,c){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,H,1,0,"div",75),e.qZA()),2&i){const t=e.oxw(),o=e.MAs(78),r=e.MAs(80);e.xp6(1),e.Q6J("ngIf",t.deviceCoreCommand)("ngIfThen",o)("ngIfElse",r)}}function j(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"li",85),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).selectCmd(s)}),e._uU(1),e.qZA()}if(2&i){const t=c.$implicit,o=e.oxw(2);e.ekj("list-group-item-info",(null==o.selectedCmd?null:o.selectedCmd.name)===t.name),e.xp6(1),e.Oqu(t.name)}}function G(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",97),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).issueGetCmd()}),e._uU(1,"try"),e.qZA()}}function V(i,c){1&i&&e._UZ(0,"div")}function z(i,c){if(1&i&&(e.TgZ(0,"span",102),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",t.cmdGetResponse,"")}}function X(i,c){if(1&i&&(e.TgZ(0,"pre",103),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Oqu(t.cmdGetResponseRaw)}}function ee(i,c){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"span",98),e._uU(2,"Response:"),e.qZA(),e.YNc(3,z,2,1,"span",99),e.qZA(),e.TgZ(4,"div",100),e.TgZ(5,"span",98),e._uU(6,"ResponseRaw:"),e.qZA(),e.YNc(7,X,2,1,"pre",101),e.qZA()),2&i){const t=e.oxw(3);e.xp6(3),e.Q6J("ngIf",t.cmdGetResponse),e.xp6(4),e.Q6J("ngIf",t.cmdGetResponseRaw)}}function te(i,c){1&i&&(e.TgZ(0,"h6",74),e._UZ(1,"i",43),e._uU(2," no Get method"),e.qZA())}function ie(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",97),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).issueSetCmd()}),e._uU(1,"try"),e.qZA()}}function ne(i,c){1&i&&e._UZ(0,"div")}function oe(i,c){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"label",110),e._uU(2),e.qZA(),e.TgZ(3,"select",111),e.TgZ(4,"option",112),e._uU(5,"false"),e.qZA(),e.TgZ(6,"option",112),e._uU(7,"true"),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.s9C("for",t.resourceName),e.xp6(1),e.hij(" ",t.resourceName," "),e.xp6(1),e.s9C("id",t.resourceName),e.s9C("name",t.resourceName),e.xp6(1),e.Q6J("ngValue",!1),e.xp6(2),e.Q6J("ngValue",!0)}}function re(i,c){if(1&i&&(e.TgZ(0,"label",110),e._uU(1),e.qZA(),e._UZ(2,"input",113)),2&i){const t=e.oxw().$implicit;e.s9C("for",t.resourceName),e.xp6(1),e.Oqu(t.resourceName),e.xp6(1),e.s9C("id",t.resourceName),e.s9C("name",t.resourceName),e.MGl("placeholder","valueType: ",t.valueType,"")}}function se(i,c){if(1&i&&(e.TgZ(0,"div",108),e.YNc(1,oe,8,6,"div",63),e.YNc(2,re,3,5,"ng-template",null,109,e.W1O),e.qZA()),2&i){const t=c.$implicit,o=e.MAs(3);e.xp6(1),e.Q6J("ngIf","Bool"==t.valueType)("ngIfElse",o)}}function ce(i,c){if(1&i&&(e.TgZ(0,"div",106),e.YNc(1,se,4,2,"div",107),e.qZA()),2&i){const t=e.oxw(5);e.xp6(1),e.Q6J("ngForOf",t.selectedCmdSetParams)}}function le(i,c){if(1&i&&(e.TgZ(0,"div",80),e.TgZ(1,"div",66),e._uU(2,"Set Parameters"),e.qZA(),e.TgZ(3,"div",77),e.YNc(4,ce,2,1,"div",105),e.qZA(),e.qZA()),2&i){const t=e.oxw(4);e.xp6(4),e.Q6J("ngIf",t.selectedCmd)}}function ae(i,c){if(1&i&&(e.TgZ(0,"span",102),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Oqu(t.cmdSetResponse)}}function de(i,c){if(1&i&&(e.TgZ(0,"pre",103),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Oqu(t.cmdSetResponseRaw)}}function pe(i,c){if(1&i&&(e.YNc(0,le,5,1,"div",104),e.TgZ(1,"div"),e.TgZ(2,"div"),e.TgZ(3,"span",98),e._uU(4," Response:"),e.qZA(),e.YNc(5,ae,2,1,"span",99),e.qZA(),e.TgZ(6,"div",100),e.TgZ(7,"span",98),e._uU(8," ResponseRaw:"),e.qZA(),e.YNc(9,de,2,1,"pre",101),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.Q6J("ngIf",t.selectedCmdSetParams),e.xp6(5),e.Q6J("ngIf",t.cmdSetResponse),e.xp6(4),e.Q6J("ngIf",t.cmdSetResponseRaw)}}function ge(i,c){1&i&&(e.TgZ(0,"h6",74),e._UZ(1,"i",43),e._uU(2," no Set method"),e.qZA())}function ue(i,c){if(1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",66),e.TgZ(2,"span",86),e._UZ(3,"i",87),e._uU(4),e.qZA(),e.TgZ(5,"span"),e._uU(6,"Get and Set"),e.qZA(),e.qZA(),e.TgZ(7,"div",88),e.TgZ(8,"div",78),e.TgZ(9,"div",89),e.TgZ(10,"div",80),e.TgZ(11,"div",66),e._uU(12," Get "),e.YNc(13,G,2,0,"button",90),e.qZA(),e.TgZ(14,"div",91),e.YNc(15,V,1,0,"div",75),e.YNc(16,ee,8,2,"ng-template",null,92,e.W1O),e.YNc(18,te,3,0,"ng-template",null,93,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",94),e.TgZ(21,"div",0),e.TgZ(22,"div",66),e._uU(23," Set "),e.YNc(24,ie,2,0,"button",90),e.qZA(),e.TgZ(25,"div",77),e.YNc(26,ne,1,0,"div",75),e.YNc(27,pe,10,3,"ng-template",null,95,e.W1O),e.YNc(29,ge,3,0,"ng-template",null,96,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.MAs(17),o=e.MAs(19),r=e.MAs(28),s=e.MAs(30),g=e.oxw(2);e.xp6(4),e.hij(" ",g.selectedCmd.name," method:"),e.xp6(9),e.Q6J("ngIf",g.selectedCmd.get),e.xp6(2),e.Q6J("ngIf",g.selectedCmd.get)("ngIfThen",t)("ngIfElse",o),e.xp6(9),e.Q6J("ngIf",g.selectedCmd.set),e.xp6(2),e.Q6J("ngIf",g.selectedCmd.set)("ngIfThen",r)("ngIfElse",s)}}function me(i,c){if(1&i&&(e.TgZ(0,"div",65),e.TgZ(1,"div",66),e.TgZ(2,"span",67),e._UZ(3,"i",57),e.qZA(),e.TgZ(4,"span",76),e._uU(5),e.qZA(),e._uU(6," Associated Commands "),e.qZA(),e.TgZ(7,"div",77),e.TgZ(8,"div",78),e.TgZ(9,"div",79),e.TgZ(10,"div",80),e.TgZ(11,"div",1),e._uU(12," Command Name List "),e.qZA(),e.TgZ(13,"div",69),e.TgZ(14,"ul",81),e.YNc(15,j,2,3,"li",82),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",83),e.YNc(17,ue,31,9,"div",84),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(5),e.Oqu(t.associatedCmdDeviceName),e.xp6(10),e.Q6J("ngForOf",t.deviceCoreCommand),e.xp6(2),e.Q6J("ngIf",t.selectedCmd)}}function ve(i,c){if(1&i&&(e.TgZ(0,"div",65),e.TgZ(1,"div",66),e.TgZ(2,"span",67),e._UZ(3,"i",57),e.qZA(),e.TgZ(4,"span",114),e._uU(5),e.qZA(),e._uU(6," Associated Commands "),e.qZA(),e.TgZ(7,"div",73),e.TgZ(8,"h5",74),e._UZ(9,"i",43),e._uU(10," no associated commands"),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(5),e.Oqu(t.associatedCmdDeviceName)}}let _e=(()=>{class i{constructor(t,o,r,s,g){this.metaSvc=t,this.cmdSvc=o,this.msgSvc=r,this.route=s,this.router=g,this.toolbars=!0,this.enableSelectAll=!0,this.deviceList=[],this.associatedSvcName="",this.associatedProfileName="",this.selectedDevice=[],this.selectedCmd={},this.selectedCmdSetParams=[],this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.route.queryParams.subscribe(t=>t.svcName?(this.associatedSvcName=t.svcName,void this.getDeviceListByAssociatedSvc(this.associatedSvcName)):t.profileName?(this.associatedProfileName=t.profileName,void this.getDeviceListByAssociatedProfile(this.associatedProfileName)):(this.associatedSvcName="",this.associatedProfileName="",void this.getDeviceListPagination()))}renderPopoverComponent(){setTimeout(()=>{$('[data-toggle="popover"]').popover({trigger:"hover"})},250)}getDeviceList(){""===this.associatedSvcName?""===this.associatedProfileName?this.getDeviceListPagination():this.getDeviceListByAssociatedProfile(this.associatedSvcName):this.getDeviceListByAssociatedSvc(this.associatedSvcName)}getDeviceListByAssociatedSvc(t){this.metaSvc.findDevicesByServiceName(this.pageOffset,this.pageLimit,t).subscribe(o=>this.deviceList=o.devices)}getDeviceListByAssociatedProfile(t){this.metaSvc.findDevicesByProfileName(this.pageOffset,this.pageLimit,t).subscribe(o=>this.deviceList=o.devices)}getDeviceListPagination(){this.metaSvc.allDevicesPagination(this.pageOffset,this.pageLimit).subscribe(t=>{this.deviceList=t.devices})}refresh(){this.associatedProfileName="",this.associatedSvcName="",this.metaSvc.allDevicesPagination(0,this.pageLimit).subscribe(t=>{this.deviceList=t.devices,this.msgSvc.success("refresh"),this.resetPagination()})}edit(){this.router.navigate(["../edit-device"],{relativeTo:this.route,queryParams:{deviceName:this.selectedDevice[0].name}})}deleteConfirm(){$("#deleteConfirmDialog").modal("show")}delete(){this.selectedDevice.forEach((t,o)=>{this.metaSvc.deleteOneDeviceByName(t.name).subscribe(()=>{this.selectedDevice.splice(o,1),this.deviceList.forEach((r,s)=>{if(r.id===t.id)return this.deviceList.splice(s,1),void this.msgSvc.success("remove device ",` Name: ${r.name}`)})})}),this.associatedCmdDeviceName=void 0,this.associatedAutoEventsDeviceName=void 0,$("#deleteConfirmDialog").modal("hide")}checkAutoEvent(t){this.associatedAutoEventsDeviceName=t.name,this.autoEvents=t.autoEvents,this.associatedCmdDeviceName=""}isCheckedAll(){let t=!0;return this.deviceList&&0===this.deviceList.length&&(t=!1),this.deviceList.forEach(o=>{-1===this.selectedDevice.findIndex(r=>r.name===o.name)&&(t=!1)}),t}selectAll(t){this.deviceList.forEach(t.target.checked?r=>{-1===this.selectedDevice.findIndex(s=>s.name===r.name)&&this.selectedDevice.push(r)}:r=>{this.selectedDevice.forEach((s,g)=>{s.name===r.name&&this.selectedDevice.splice(g,1)})})}isChecked(t){return this.selectedDevice.findIndex(o=>o.id===t)>=0}selectOne(t,o){t.target.checked?this.selectedDevice.push(o):this.selectedDevice.forEach((s,g)=>{s.name===o.name&&this.selectedDevice.splice(g,1)})}checkDeviceCommand(t){this.resetResponse(),this.metaSvc.findProfileByName(t.profileName).subscribe(o=>this.associateDeviceProfile=o.profile),this.cmdSvc.findDeviceAssociatedCommnadsByDeviceName(t.name).subscribe(o=>{this.associatedAutoEventsDeviceName="",this.associatedCmdDeviceName=o.deviceCoreCommand.deviceName,this.associatedCmdDeviceId=t.id,this.deviceCoreCommand=o.deviceCoreCommand.coreCommands,this.selectedCmd=this.deviceCoreCommand[0],this.selectedCmdSetParams=this.selectedCmd.parameters})}selectCmd(t){this.selectedCmd=t,this.selectedCmdSetParams=this.selectedCmd.parameters,this.resetResponse()}resetResponse(){this.cmdGetResponse="",this.cmdGetResponseRaw="",this.cmdSetResponse="",this.cmdSetResponseRaw="",this.cmdBinaryResponse=!0,this.cmdBinaryResponseURL=""}issueGetCmd(){var t;this.cmdSvc.issueGetCmd(this.associatedCmdDeviceName,null===(t=this.selectedCmd)||void 0===t?void 0:t.name).subscribe(r=>{this.cmdGetResponseRaw=JSON.stringify(r.event.readings,null,3);let s=[];r.event.readings.forEach(g=>{s.push(g.value)}),this.cmdGetResponse=s.join(",")})}issueSetCmd(){var t,o;let s={};null===(t=this.selectedCmdSetParams)||void 0===t||t.forEach(function(g){""!==$(`#${g.resourceName}`).val().trim()&&(s[g.resourceName]=$(`#${g.resourceName}`).val().trim())}),this.cmdSvc.issueSetCmd(this.associatedCmdDeviceName,null===(o=this.selectedCmd)||void 0===o?void 0:o.name,s).subscribe(g=>{this.cmdSetResponseRaw=JSON.stringify(g,null,3),this.cmdSetResponse=g.message})}onPageSelected(){this.resetPagination(),this.getDeviceList()}prePage(){this.setPagination(-1),this.getDeviceList()}nextPage(){this.setPagination(1),this.getDeviceList()}setPagination(t){1===t?this.pagination+=1:-1===t&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit}resetPagination(){this.pagination=1,this.pageOffset=(this.pagination-1)*this.pageLimit}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.D),e.Y36(m.V),e.Y36(T.e),e.Y36(_.gz),e.Y36(_.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-device-list"]],inputs:{toolbars:"toolbars",enableSelectAll:"enableSelectAll"},decls:95,vars:12,consts:[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","text-danger","mr-2"],[4,"ngIf"],[1,"card-body","p-0","position-relative"],[1,"bg-light","px-2","py-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","mr-1"],["type","button","routerLink","../add-device",1,"btn","btn-info"],[1,"fa","fa-plus","mr-1"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-edit","mr-1"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash","mr-1"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],["type","checkbox","role","button",3,"checked","click"],[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"custom-select",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left"],[1,"page-item"],[1,"fa","fa-angle-double-right"],["hasAssociatedCommand",""],["noAssociatedCommand",""],["id","deleteConfirmDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteConfirmDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteConfirmDialogLabel",1,"modal-title","text-danger"],[1,"fa","fa-warning"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"mr-1"],[1,"text-danger","mr-1"],[1,"user-select-all"],[3,"ngSwitch"],["class","badge badge-success",4,"ngSwitchCase"],["class","badge badge-danger",4,"ngSwitchDefault"],[1,"text-center"],["class","badge badge-danger",4,"ngSwitchCase"],["role","button",1,"badge","badge-primary","text-light",3,"click"],[1,"fa","fa-terminal","font-weight-bolder"],[1,"fa","fa-calendar-check-o","font-weight-bolder"],["routerLink","../../device-profile-center",3,"queryParams"],["routerLink","../../device-service-list"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[4,"ngIf","ngIfElse"],["noAutoEvents",""],[1,"card","mt-3"],[1,"card-header"],[1,"badge","badge-danger","text-light"],[1,"text-primary","mx-2","font-weight-bold"],[1,"card-body","p-0"],[4,"ngFor","ngForOf"],[1,"badge","badge-secondary","badge-pill"],[1,""],[1,"card-body","text-center"],[1,"text-warning"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"text-primary","ml-2","font-weight-bold"],[1,"card-body"],[1,"row"],[1,"col-md-2","col-lg-2"],[1,"card","mb-2"],[1,"list-group","list-group-flush"],["role","button","class","list-group-item list-group-item-action",3,"list-group-item-info","click",4,"ngFor","ngForOf"],[1,"col-md-10","col-lg-10"],["class","card",4,"ngIf"],["role","button",1,"list-group-item","list-group-item-action",3,"click"],[1,"text-primary","font-weight-bold","mr-2"],[1,"fa","fa-thumb-tack","text-danger","mr-1"],[1,"card-body","px-2"],[1,"col-md-5","col-lg-5"],["class","btn btn-primary btn-sm float-right",3,"click",4,"ngIf"],[1,"card-body","overflow-auto"],["hasGetMethod",""],["noGetMethod",""],[1,"col-md-7","col-lg-7"],["hasSetMethod",""],["noSetMethod",""],[1,"btn","btn-primary","btn-sm","float-right",3,"click"],[1,"badge","badge-info"],["class","ml-2 text-primary",4,"ngIf"],[1,"mt-3"],["class","mt-2 bg-secondary p-2 text-light rounded",4,"ngIf"],[1,"ml-2","text-primary"],[1,"mt-2","bg-secondary","p-2","text-light","rounded"],["class","card mb-2",4,"ngIf"],["class","d-flex flex-column bd-highlight",4,"ngIf"],[1,"d-flex","flex-column","bd-highlight"],["class","form p-2 bd-highlight",4,"ngFor","ngForOf"],[1,"form","p-2","bd-highlight"],["valueTypeIsNotBool",""],[3,"for"],[1,"custom-select","custom-select-sm",3,"id","name"],[3,"ngValue"],[1,"form-control","form-control-sm",3,"id","name","placeholder"],[1,"text-primary","mx-1","font-weight-bold"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"i",2),e.YNc(3,Z,7,1,"span",3),e.YNc(4,D,7,1,"span",3),e.YNc(5,N,2,0,"span",3),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"button",7),e.NdJ("click",function(){return o.refresh()}),e.TgZ(10,"span"),e._UZ(11,"i",8),e._uU(12,"Refresh"),e.qZA(),e.qZA(),e.TgZ(13,"button",9),e.TgZ(14,"span"),e._UZ(15,"i",10),e._uU(16,"Add"),e.qZA(),e.qZA(),e.TgZ(17,"button",11),e.NdJ("click",function(){return o.edit()}),e.TgZ(18,"span"),e._UZ(19,"i",12),e._uU(20,"Edit"),e.qZA(),e.qZA(),e.TgZ(21,"button",13),e.NdJ("click",function(){return o.deleteConfirm()}),e.TgZ(22,"span"),e._UZ(23,"i",14),e._uU(24,"Delete"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",15),e.TgZ(26,"table",16),e.TgZ(27,"thead",17),e.TgZ(28,"tr"),e.TgZ(29,"th",18),e.TgZ(30,"input",19),e.NdJ("click",function(s){return o.selectAll(s)}),e.qZA(),e.qZA(),e.TgZ(31,"th",18),e._uU(32,"ID"),e.qZA(),e.TgZ(33,"th",18),e._uU(34,"Name"),e.qZA(),e.TgZ(35,"th",18),e._uU(36,"Description"),e.qZA(),e.TgZ(37,"th",18),e._uU(38,"Labels"),e.qZA(),e.TgZ(39,"th",18),e._uU(40,"AdminState"),e.qZA(),e.TgZ(41,"th",18),e._uU(42,"OperatingState"),e.qZA(),e.TgZ(43,"th",18),e._uU(44,"Command"),e.qZA(),e.TgZ(45,"th",18),e._uU(46,"AutoEvents"),e.qZA(),e.TgZ(47,"th",18),e._uU(48,"AssociatedProfile"),e.qZA(),e.TgZ(49,"th",18),e._uU(50,"AssociatedService"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"tbody"),e.YNc(52,Q,32,21,"tr",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"div",21),e.TgZ(54,"nav",22),e.TgZ(55,"ul",23),e.TgZ(56,"li",24),e.TgZ(57,"span",25),e._uU(58,"items per page"),e.qZA(),e.qZA(),e.TgZ(59,"li",26),e.TgZ(60,"select",27),e.NdJ("ngModelChange",function(s){return o.pageLimit=s})("ngModelChange",function(){return o.onPageSelected()}),e.TgZ(61,"option",28),e._uU(62,"5"),e.qZA(),e.TgZ(63,"option",29),e._uU(64,"10"),e.qZA(),e.TgZ(65,"option",30),e._uU(66,"20"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(67,"li",31),e.TgZ(68,"button",32),e.NdJ("click",function(){return o.prePage()}),e._UZ(69,"i",33),e._uU(70," Previous"),e.qZA(),e.qZA(),e.TgZ(71,"li",34),e.TgZ(72,"button",32),e.NdJ("click",function(){return o.nextPage()}),e._uU(73,"Next "),e._UZ(74,"i",35),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(75,K,4,2,"div",3),e.YNc(76,W,2,3,"div",3),e.YNc(77,me,18,3,"ng-template",null,36,e.W1O),e.YNc(79,ve,11,1,"ng-template",null,37,e.W1O),e.TgZ(81,"div",38),e.TgZ(82,"div",39),e.TgZ(83,"div",40),e.TgZ(84,"div",41),e.TgZ(85,"h5",42),e._UZ(86,"i",43),e._uU(87," Warning "),e.qZA(),e.qZA(),e.TgZ(88,"div",44),e._uU(89," The data will be permanently erased!!! Are you sure to execute delete operation\uff1f "),e.qZA(),e.TgZ(90,"div",45),e.TgZ(91,"button",46),e._uU(92,"Cancel"),e.qZA(),e.TgZ(93,"button",47),e.NdJ("click",function(){return o.delete()}),e._uU(94,"Confirm"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",""!==o.associatedSvcName),e.xp6(1),e.Q6J("ngIf",""!==o.associatedProfileName),e.xp6(1),e.Q6J("ngIf",""===o.associatedProfileName&&""===o.associatedSvcName),e.xp6(12),e.Q6J("disabled",1!==o.selectedDevice.length),e.xp6(4),e.Q6J("disabled",0===o.selectedDevice.length),e.xp6(9),e.Q6J("checked",o.isCheckedAll()),e.xp6(22),e.Q6J("ngForOf",o.deviceList),e.xp6(8),e.Q6J("ngModel",o.pageLimit),e.xp6(8),e.Q6J("disabled",1===o.pagination),e.xp6(4),e.Q6J("disabled",o.pageLimit>o.deviceList.length),e.xp6(3),e.Q6J("ngIf",o.associatedAutoEventsDeviceName),e.xp6(1),e.Q6J("ngIf",o.associatedCmdDeviceName))},directives:[n.O5,_.rH,n.sg,d.EJ,d.JJ,d.On,d.YN,d.Kr,n.RF,n.n9,n.ED,_.yS],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),i})();function he(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"input",24),e.NdJ("click",function(r){const g=e.CHM(t).$implicit;return e.oxw().selectOneSvc(r,g.name)}),e.qZA(),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"date"),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.ALo(18,"date"),e.qZA(),e.qZA()}if(2&i){const t=c.$implicit,o=e.oxw();e.ekj("table-active",o.isSvcChecked(t.name)),e.xp6(2),e.Q6J("checked",o.isSvcChecked(t.name)),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(t.labels),e.xp6(2),e.Oqu(t.adminState),e.xp6(2),e.Oqu(e.xi3(15,10,t.created,"yyyy-MM-dd hh:mm:ss")),e.xp6(3),e.Oqu(e.xi3(18,13,t.modified,"yyyy-MM-dd hh:mm:ss"))}}let L=(()=>{class i{constructor(t){this.metaSvc=t,this.singleDeviceSvcSelectedEvent=new e.vpe,this.deviceServiceList=[],this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.findAllDeviceSvcPagination()}findAllDeviceSvcPagination(){this.metaSvc.findAllDeviceServicesPagination(this.pageOffset,this.pageLimit).subscribe(t=>{this.deviceServiceList=t.services})}onSingleDeviceSvcSelectedEmitter(){this.singleDeviceSvcSelectedEvent.emit(this.deviceSvcSelected)}isSvcChecked(t){var o;return(null===(o=this.deviceSvcSelected)||void 0===o?void 0:o.name)===t}selectOneSvc(t,o){let s=this;t.target.checked?this.deviceServiceList.forEach(function(g){g.name===o&&(s.deviceSvcSelected=g)}):this.deviceSvcSelected=void 0,this.onSingleDeviceSvcSelectedEmitter()}onPageSelected(){this.resetPagination(),this.setPagination(),this.findAllDeviceSvcPagination()}prePage(){this.setPagination(-1),this.findAllDeviceSvcPagination()}nextPage(){this.setPagination(1),this.findAllDeviceSvcPagination()}setPagination(t){1===t?this.pagination+=1:-1===t&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit}resetPagination(){this.pagination=1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-device-service-list"]],inputs:{deviceSvcSelected:"deviceSvcSelected"},outputs:{singleDeviceSvcSelectedEvent:"singleDeviceSvcSelectedEvent"},decls:50,vars:4,consts:[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","mr-2","text-danger"],[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"custom-select",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left"],[1,"page-item"],[1,"fa","fa-angle-double-right"],["type","checkbox","role","button",3,"checked","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"i",2),e.TgZ(3,"span"),e._uU(4,"Device Service List"),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"table",5),e.TgZ(8,"thead",6),e.TgZ(9,"tr"),e.TgZ(10,"th",7),e._uU(11,"#"),e.qZA(),e.TgZ(12,"th",7),e._uU(13,"ID"),e.qZA(),e.TgZ(14,"th",7),e._uU(15,"Name"),e.qZA(),e.TgZ(16,"th",7),e._uU(17,"Description"),e.qZA(),e.TgZ(18,"th",7),e._uU(19,"Labels"),e.qZA(),e.TgZ(20,"th",7),e._uU(21,"AdminState"),e.qZA(),e.TgZ(22,"th",7),e._uU(23,"Created"),e.qZA(),e.TgZ(24,"th",7),e._uU(25,"Modified"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"tbody"),e.YNc(27,he,19,16,"tr",8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",9),e.TgZ(29,"nav",10),e.TgZ(30,"ul",11),e.TgZ(31,"li",12),e.TgZ(32,"span",13),e._uU(33,"items per page"),e.qZA(),e.qZA(),e.TgZ(34,"li",14),e.TgZ(35,"select",15),e.NdJ("ngModelChange",function(s){return o.pageLimit=s})("ngModelChange",function(){return o.onPageSelected()}),e.TgZ(36,"option",16),e._uU(37,"5"),e.qZA(),e.TgZ(38,"option",17),e._uU(39,"10"),e.qZA(),e.TgZ(40,"option",18),e._uU(41,"20"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"li",19),e.TgZ(43,"button",20),e.NdJ("click",function(){return o.prePage()}),e._UZ(44,"i",21),e._uU(45," Previous"),e.qZA(),e.qZA(),e.TgZ(46,"li",22),e.TgZ(47,"button",20),e.NdJ("click",function(){return o.nextPage()}),e._uU(48,"Next "),e._UZ(49,"i",23),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(27),e.Q6J("ngForOf",o.deviceServiceList),e.xp6(8),e.Q6J("ngModel",o.pageLimit),e.xp6(8),e.Q6J("disabled",1===o.pagination),e.xp6(4),e.Q6J("disabled",o.pageLimit>o.deviceServiceList.length))},directives:[n.sg,d.EJ,d.JJ,d.On,d.YN,d.Kr],pipes:[n.uU],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),i})();var M=v(2822);function fe(i,c){1&i&&e._UZ(0,"i",24)}function Ze(i,c){1&i&&e._UZ(0,"i",24)}function Te(i,c){1&i&&e._UZ(0,"i",24)}function Ae(i,c){1&i&&e._UZ(0,"i",24)}function Ce(i,c){1&i&&e._UZ(0,"i",24)}function xe(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().previous()}),e._UZ(1,"i",26),e._uU(2," Previous"),e.qZA()}}function qe(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().next()}),e._uU(1,"Next "),e._UZ(2,"i",28),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.stepStateLock())}}function be(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().skip()}),e._uU(1,"Skip "),e._UZ(2,"i",30),e.qZA()}}function Se(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw().submit()}),e._UZ(1,"i",32),e._uU(2," Submit"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",!t.protocolName)}}function De(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",33),e.TgZ(1,"app-device-service-list",34),e.NdJ("singleDeviceSvcSelectedEvent",function(r){return e.CHM(t),e.oxw().onSingleDeviceSvcSelected(r)}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("deviceSvcSelected",t.selectedSvc)}}function Pe(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",33),e.TgZ(1,"app-device-profile-list",35),e.NdJ("singleProfileSelectedEvent",function(r){return e.CHM(t),e.oxw().onSingleProfileSelected(r)}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("singleProfileSelected",t.selectedProfile)("enableSelectAll",!1)("toolbars",!1)("associatedDeviceColumn",!1)}}function Ue(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"form",36),e.TgZ(1,"div",37),e.TgZ(2,"label",38),e._uU(3,"Name"),e.qZA(),e.TgZ(4,"div",39),e.TgZ(5,"input",40),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().newDevice.name=r}),e.qZA(),e.TgZ(6,"div",41),e.TgZ(7,"small"),e._uU(8,"the device name can't be empty!"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",42),e.TgZ(10,"label",43),e._uU(11,"Description"),e.qZA(),e.TgZ(12,"div",39),e.TgZ(13,"input",44),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().newDevice.description=r}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",42),e.TgZ(15,"label",45),e._uU(16,"Labels"),e.qZA(),e.TgZ(17,"div",39),e.TgZ(18,"input",46),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().deviceLabels=r}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",42),e.TgZ(20,"label",47),e._uU(21,"AdminState"),e.qZA(),e.TgZ(22,"div",39),e.TgZ(23,"select",48),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().newDevice.adminState=r}),e.TgZ(24,"option",49),e._uU(25,"UNLOCKED"),e.qZA(),e.TgZ(26,"option",50),e._uU(27,"LOCKED"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",42),e.TgZ(29,"label",51),e._uU(30,"OperatingState"),e.qZA(),e.TgZ(31,"div",39),e.TgZ(32,"select",52),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().newDevice.operatingState=r}),e.TgZ(33,"option",53),e._uU(34,"UP"),e.qZA(),e.TgZ(35,"option",54),e._uU(36,"DOWN"),e.qZA(),e.TgZ(37,"option",54),e._uU(38,"UNKNOWN"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(5),e.ekj("is-invalid",!t.newDevice.name)("is-valid",t.newDevice.name),e.Q6J("ngModel",t.newDevice.name),e.xp6(8),e.Q6J("ngModel",t.newDevice.description),e.xp6(5),e.Q6J("ngModel",t.deviceLabels),e.xp6(5),e.Q6J("ngModel",t.newDevice.adminState),e.xp6(9),e.Q6J("ngModel",t.newDevice.operatingState)}}function ye(i,c){if(1&i&&(e.TgZ(0,"option",80),e._uU(1),e.qZA()),2&i){const t=c.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function Ne(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",62),e.TgZ(1,"div",57),e.TgZ(2,"form"),e.TgZ(3,"div",37),e.TgZ(4,"label",63),e._uU(5,"Interval"),e.qZA(),e.TgZ(6,"div",39),e.TgZ(7,"div",64),e.TgZ(8,"input",65),e.NdJ("ngModelChange",function(r){return e.CHM(t).$implicit.interval=r}),e.qZA(),e.TgZ(9,"div",66),e.TgZ(10,"select",67),e.NdJ("ngModelChange",function(r){return e.CHM(t).$implicit.unit=r}),e.TgZ(11,"option",68),e._uU(12,"millisecond"),e.qZA(),e.TgZ(13,"option",69),e._uU(14,"second"),e.qZA(),e.TgZ(15,"option",70),e._uU(16,"minute"),e.qZA(),e.TgZ(17,"option",71),e._uU(18,"hour"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",72),e._uU(20," can only be a pure integer number "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",42),e.TgZ(22,"label",63),e._uU(23,"onchange"),e.qZA(),e.TgZ(24,"div",39),e.TgZ(25,"select",73),e.NdJ("ngModelChange",function(r){return e.CHM(t).$implicit.onChange=r}),e.TgZ(26,"option",74),e._uU(27,"true"),e.qZA(),e.TgZ(28,"option",75),e._uU(29,"false"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",42),e.TgZ(31,"label",63),e._uU(32,"resource"),e.qZA(),e.TgZ(33,"div",39),e.TgZ(34,"select",76),e.NdJ("ngModelChange",function(r){return e.CHM(t).$implicit.resource=r}),e.YNc(35,ye,2,2,"option",77),e.qZA(),e.TgZ(36,"div",72),e._uU(37," resource can't be empty "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"button",78),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).removeAutoEvent(s)}),e._UZ(39,"i",79),e._uU(40," Remove"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=c.$implicit,o=e.oxw(2);e.xp6(8),e.ekj("is-invalid",!o.eventIntervalNumType(t.interval))("is-valid",o.eventIntervalNumType(t.interval)),e.Q6J("ngModel",t.interval),e.xp6(2),e.Q6J("ngModel",t.unit),e.xp6(15),e.Q6J("ngModel",t.onChange),e.xp6(9),e.ekj("is-invalid",!t.resource)("is-valid",t.resource),e.Q6J("ngModel",t.resource),e.xp6(1),e.Q6J("ngForOf",o.autoEventResourceNameSet)}}function Me(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",55),e.TgZ(1,"div",1),e.TgZ(2,"span",56),e._uU(3," this step is optional, you can skip it then use scheduler service to create schedule job."),e.qZA(),e.qZA(),e.TgZ(4,"div",57),e.TgZ(5,"p",58),e._UZ(6,"span",59),e.TgZ(7,"span",60),e.NdJ("click",function(){return e.CHM(t),e.oxw().addAutoEvent()}),e._uU(8,"Add More AutoEvent"),e.qZA(),e.qZA(),e.YNc(9,Ne,41,13,"div",61),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(9),e.Q6J("ngForOf",t.autoEventsInternal)}}function Ee(i,c){1&i&&e._UZ(0,"div")}const Le=function(){return{standalone:!0}};function Oe(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"form",97),e.TgZ(2,"div",98),e.TgZ(3,"div",99),e.TgZ(4,"span",100),e._uU(5,"PropertyKey"),e.qZA(),e.qZA(),e._UZ(6,"input",101),e.qZA(),e.TgZ(7,"div",102),e._UZ(8,"i",28),e.qZA(),e.TgZ(9,"div",98),e.TgZ(10,"div",99),e.TgZ(11,"span",100),e._uU(12,"PropertyVaule"),e.qZA(),e.qZA(),e.TgZ(13,"input",103),e.NdJ("ngModelChange",function(r){const g=e.CHM(t).$implicit;return e.oxw(4).selectedAvailTemplate[g]=r}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=c.$implicit,o=e.oxw(4);e.xp6(6),e.Q6J("value",t),e.xp6(7),e.s9C("name",o.selectedAvailTemplate[t]),e.Q6J("ngModel",o.selectedAvailTemplate[t])("ngModelOptions",e.DdM(4,Le))}}function we(i,c){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Oe,14,5,"div",96),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.selectedAvailTemplateProperties)}}function ke(i,c){1&i&&(e.TgZ(0,"h5",107),e._UZ(1,"i",108),e._uU(2," this device service doesn't need to set protocol properties. "),e.qZA())}function Je(i,c){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"span",104),e.TgZ(2,"span",105),e._uU(3," all avaliable protocol templates refer to the device service released by edgex, such as device-virtual, device-rest, device-mqtt, device-modbus "),e.qZA(),e.qZA(),e.YNc(4,ke,3,0,"h5",106)),2&i){const t=e.oxw(3);e.xp6(4),e.Q6J("ngIf",t.protocolName)}}function Ie(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",86),e.TgZ(1,"div",87),e.TgZ(2,"div",88),e.TgZ(3,"label"),e._uU(4,"Protocol Name"),e.qZA(),e.TgZ(5,"select",89),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw(2).protocolName=r})("ngModelChange",function(){return e.CHM(t),e.oxw(2).onAvailProtocolSelect()}),e.TgZ(6,"option",90),e._uU(7,"device-mqtt"),e.qZA(),e.TgZ(8,"option",91),e._uU(9,"device-rest"),e.qZA(),e.TgZ(10,"option",91),e._uU(11,"device-virtual"),e.qZA(),e.TgZ(12,"option",92),e._uU(13,"device-modbus-tcp"),e.qZA(),e.TgZ(14,"option",93),e._uU(15,"device-modbus-rtu"),e.qZA(),e.qZA(),e.TgZ(16,"div",72),e.TgZ(17,"small"),e._uU(18,"the protocol name can't be empty!"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",39),e.YNc(20,we,2,1,"div",94),e.YNc(21,Je,5,1,"ng-template",null,95,e.W1O),e.qZA(),e.qZA()}if(2&i){const t=e.MAs(22),o=e.oxw(2);e.xp6(5),e.ekj("is-invalid",!o.protocolName)("is-valid",o.protocolName),e.Q6J("ngModel",o.protocolName),e.xp6(15),e.Q6J("ngIf",0!==o.selectedAvailTemplateProperties.length)("ngIfElse",t)}}function $e(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"form",97),e.TgZ(2,"div",98),e.TgZ(3,"div",99),e.TgZ(4,"span",100),e._uU(5,"PropertyKey"),e.qZA(),e.qZA(),e.TgZ(6,"input",113),e.NdJ("ngModelChange",function(r){return e.CHM(t).$implicit.key=r}),e.qZA(),e.qZA(),e.TgZ(7,"div",102),e._UZ(8,"i",28),e.qZA(),e.TgZ(9,"div",98),e.TgZ(10,"div",99),e.TgZ(11,"span",100),e._uU(12,"PropertyValue"),e.qZA(),e.qZA(),e.TgZ(13,"input",114),e.NdJ("ngModelChange",function(r){return e.CHM(t).$implicit.value=r}),e.qZA(),e.qZA(),e.TgZ(14,"div",115),e.TgZ(15,"button",78),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(3).removeProtocolProperty(s)}),e._UZ(16,"i",79),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=c.$implicit;e.xp6(6),e.Q6J("ngModel",t.key),e.xp6(7),e.Q6J("ngModel",t.value)}}function Ye(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",86),e.TgZ(1,"div",109),e.TgZ(2,"div",88),e.TgZ(3,"label"),e._uU(4,"Protocol Name"),e.qZA(),e.TgZ(5,"input",110),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw(2).protocolName=r}),e.qZA(),e.TgZ(6,"div",72),e.TgZ(7,"small"),e._uU(8,"the protocol name can't be empty!"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",111),e.TgZ(10,"div",112),e.TgZ(11,"div"),e.TgZ(12,"p",58),e._UZ(13,"span",59),e.TgZ(14,"span",60),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addProtocolProperty()}),e._uU(15,"Add Protocol Property"),e.qZA(),e.qZA(),e.qZA(),e.YNc(16,$e,17,2,"div",96),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(5),e.ekj("is-invalid",!t.protocolName)("is-valid",t.protocolName),e.Q6J("ngModel",t.protocolName),e.xp6(11),e.Q6J("ngForOf",t.protocolPropertyList)}}function Qe(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",55),e.TgZ(1,"div",57),e.TgZ(2,"p",81),e._UZ(3,"span",59),e.TgZ(4,"span",60),e.NdJ("click",function(){return e.CHM(t),e.oxw().setProtocolTemplate("avaliable")}),e._uU(5,"Avaliable Protocol Templates"),e.qZA(),e.qZA(),e.TgZ(6,"p",82),e._UZ(7,"span",59),e.TgZ(8,"span",60),e.NdJ("click",function(){return e.CHM(t),e.oxw().setProtocolTemplate("custom")}),e._uU(9,"Custom Protocol Templates"),e.qZA(),e.qZA(),e.YNc(10,Ee,1,0,"div",83),e.YNc(11,Ie,23,7,"ng-template",null,84,e.W1O),e.YNc(13,Ye,17,6,"ng-template",null,85,e.W1O),e.qZA(),e.qZA()}if(2&i){const t=e.MAs(12),o=e.MAs(14),r=e.oxw();e.xp6(2),e.ekj("badge-primary","avaliable"===r.protocolTemplateModel)("badge-secondary","avaliable"!==r.protocolTemplateModel),e.xp6(4),e.ekj("badge-primary","custom"===r.protocolTemplateModel)("badge-secondary","custom"!==r.protocolTemplateModel),e.xp6(4),e.Q6J("ngIf","custom"===r.protocolTemplateModel)("ngIfThen",o)("ngIfElse",t)}}class Fe{constructor(){this.Schema="",this.Host="",this.Port="",this.User="",this.Password="",this.ClientId="",this.CommandTopic=""}}class Be{constructor(){this.Address="",this.Port="",this.UnitID="",this.Timeout="",this.IdleTimeout=""}}class Re{constructor(){this.Address="",this.UnitID="",this.BaudRate="",this.DataBits="",this.StopBits="",this.Parity="",this.Timeout="",this.IdleTimeout=""}}let Ke=(()=>{class i{constructor(t,o,r,s){this.metaSvc=t,this.msgSvc=o,this.router=r,this.route=s,this.deviceLabels="",this.currentStep=0,this.selectedClass="text-white rounded px-2 bg-success  font-weight-bold",this.noSelectedClass="text-white rounded px-2 bg-secondary  font-weight-bold",this.autoEventResourceNameSet=[],this.autoEventsInternal=[{interval:"",onChange:!1,resource:"",unit:"ms"}],this.protocolTemplateModel="avaliable",this.protocolName="",this.protocolProperty={key:null,value:null},this.protocolPropertyList=[{key:null,value:null}],this.selectedAvailTemplateProperties=[],this.newDevice={adminState:"UNLOCKED",operatingState:"UP"}}ngOnInit(){}onSingleProfileSelected(t){this.selectedProfile=t,this.setupAutoEventResourceNameSet(this.selectedProfile)}setupAutoEventResourceNameSet(t){this.autoEventResourceNameSet=[],t.deviceResources.forEach((o,r)=>{this.autoEventResourceNameSet.push(o.name)}),t.deviceCommands.forEach((o,r)=>{this.autoEventResourceNameSet.push(o.name)})}onSingleDeviceSvcSelected(t){this.selectedSvc=t}onAvailProtocolSelect(){switch(this.protocolName){case"mqtt":return this.selectedAvailTemplate=new Fe,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));case"modbus-tcp":return this.selectedAvailTemplate=new Be,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));case"modbus-rtu":return this.selectedAvailTemplate=new Re,void(this.selectedAvailTemplateProperties=Object.keys(this.selectedAvailTemplate));default:return this.selectedAvailTemplate={},void(this.selectedAvailTemplateProperties=[])}}cleanSelectedAvailTemplateProperties(){this.selectedAvailTemplateProperties=[]}setAutoEventInternal(t){let o;t.forEach(r=>{let s=0;r.interval.indexOf("ms")?s=r.interval.indexOf("ms"):r.interval.indexOf("s")?s=r.interval.indexOf("s"):r.interval.indexOf("m")?s=r.interval.indexOf("m"):r.interval.indexOf("h")&&(s=r.interval.indexOf("h")),o=r.interval.substring(s),this.autoEventsInternal.push({interval:r.interval.slice(0,s),onChange:r.onChange,resource:r.sourceName,unit:o})})}eventIntervalNumType(t){return!isNaN(t)&&parseFloat(t)===parseInt(t)}setProtocolTemplate(t){this.protocolName="",this.cleanSelectedAvailTemplateProperties(),this.cleanCustomProtocolProperty(),this.protocolTemplateModel=t}addProtocolProperty(){this.protocolPropertyList.push({key:"",value:""})}removeProtocolProperty(t){this.protocolPropertyList.splice(this.protocolPropertyList.indexOf(t),1)}cleanCustomProtocolProperty(){this.protocolPropertyList=[],this.protocolPropertyList.push({key:"",value:""})}addAutoEvent(){this.autoEventsInternal.push({interval:"",onChange:!1,resource:"",unit:"ms"})}removeAutoEvent(t){this.autoEventsInternal.splice(this.autoEventsInternal.indexOf(t),1)}stepStateLock(){switch(this.currentStep){case 0:return void 0===this.selectedSvc;case 1:return void 0===this.selectedProfile;case 2:return""===this.newDevice.name;case 3:let t=!1;return this.autoEventsInternal.forEach(o=>{""!==o.resource&&this.eventIntervalNumType(o.interval)||(t=!0)}),t;case 4:default:return!1}}skip(){this.autoEventsInternal=[],this.next()}next(){this.currentStep+=1}previous(){this.currentStep=this.currentStep-1}changeStep(){this.currentStep+=1}submit(){var t,o,r;let s={},g={};"custom"===this.protocolTemplateModel?(this.protocolPropertyList.forEach(C=>{g[C.key]=C.value}),s[this.protocolName]=g):s[this.protocolName]=Object.assign({},this.selectedAvailTemplate);let x=[];this.autoEventsInternal.forEach(C=>{x.push({interval:`${parseInt(C.interval)}${C.unit}`,onChange:!!C.onChange,sourceName:C.resource})}),this.newDevice.labels=null===(t=this.deviceLabels)||void 0===t?void 0:t.split(","),this.newDevice.serviceName=null===(o=this.selectedSvc)||void 0===o?void 0:o.name,this.newDevice.profileName=null===(r=this.selectedProfile)||void 0===r?void 0:r.name,this.newDevice.protocols=s,this.newDevice.autoEvents=x,this.metaSvc.addDevice(this.newDevice).subscribe(()=>{this.msgSvc.success("Add device",`name: ${this.newDevice.name}`),this.router.navigate(["../device-list"],{relativeTo:this.route})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.D),e.Y36(T.e),e.Y36(_.F0),e.Y36(_.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-device"]],decls:47,vars:20,consts:[[1,"card"],[1,"card-header"],[1,"font-weight-bold"],[1,"fa","fa-lightbulb-o","fa-lg","mr-2","text-danger"],[1,"text-secondary"],[1,"card-header","bg-light"],["aria-label","breadcrumb",1,"mb-0","p-0"],[1,"breadcrumb","p-1","mb-0","bg-light"],[1,"breadcrumb-item"],[3,"ngClass"],["class","fa fa-check",4,"ngIf"],[1,"breadcrumb-item","active"],["class","btn btn-info btn-sm",3,"click",4,"ngIf"],["class","btn btn-primary btn-sm float-right",3,"disabled","click",4,"ngIf","ngIfElse"],["class","btn btn-success btn-sm float-right mr-2",3,"click",4,"ngIf"],["stepDone",""],[1,"card-body","p-0"],[3,"ngSwitch"],[3,"ngSwitchCase"],["SelectDeviceService",""],["SelectDeviceProfile",""],["DevicePrimary",""],["CreateAutoEvent",""],["CreateDeviceProtocol",""],[1,"fa","fa-check"],[1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-long-arrow-left"],[1,"btn","btn-primary","btn-sm","float-right",3,"disabled","click"],[1,"fa","fa-long-arrow-right"],[1,"btn","btn-success","btn-sm","float-right","mr-2",3,"click"],[1,"fa","fa-share"],[1,"btn","btn-success","btn-sm","ml-4","float-right",3,"disabled","click"],[1,"fa","fa-save"],[1,"p-2"],[3,"deviceSvcSelected","singleDeviceSvcSelectedEvent"],[3,"singleProfileSelected","enableSelectAll","toolbars","associatedDeviceColumn","singleProfileSelectedEvent"],[1,"px-5","py-4"],[1,"form-group","row","has-validation"],["for","deviceName","required","",1,"col-md-2","col-form-label"],[1,"col-md-10"],["type","text","id","validationDeviceNameFeedback","name","deviceName",1,"form-control",3,"ngModel","ngModelChange"],["id","validationDeviceNameFeedback",1,"invalid-feedback"],[1,"form-group","row"],["for","deviceDesc",1,"col-md-2","col-form-label"],["type","text","name","deviceDescription",1,"form-control",3,"ngModel","ngModelChange"],["for","deviceLabels",1,"col-md-2","col-form-label"],["type","text","name","deviceLabels","placeholder","Multiple Labels are separated by commas: label1,label2,label3",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],["name","deviceAdminState",1,"custom-select",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"],["for","operatingState",1,"col-md-2","col-form-label"],["name","deviceOperatingState",1,"custom-select",3,"ngModel","ngModelChange"],["value","UP"],["value","DOWN"],[1,"card","border-0"],[1,"fa","fa-info-circle","text-warning","font-weight-bold"],[1,"card-body"],[1,"badge","badge-secondary","font-weight-bold"],[1,"fa","fa-plus-circle","mr-2"],["role","button",1,"user-select-none",3,"click"],["class","card mb-3",4,"ngFor","ngForOf"],[1,"card","mb-3"],[1,"col-md-2","col-form-label"],[1,"input-group","mb-3",2,"width","250px"],["type","text","name","interval","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["name","eventIntervalUnit","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","ms"],["value","s"],["value","m"],["value","h"],[1,"invalid-feedback"],["name","onchange",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],["value","true"],["value","false"],["name","resource","required","",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"],[3,"value"],[1,"badge","font-weight-bold","mr-3"],[1,"badge","font-weight-bold"],[4,"ngIf","ngIfThen","ngIfElse"],["avaliProtocolTemplate",""],["customProtocolTemplate",""],[1,"row","border","border-secondary","p-2","rounded-lg","mx-1"],[1,"col-md-2","border-right","border-info"],[1,"form-group"],["type","text","name","protocolName","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","mqtt"],["value","other"],["value","modbus-tcp"],["value","modbus-rtu"],[4,"ngIf","ngIfElse"],["noAvailProperty",""],[4,"ngFor","ngForOf"],[1,"form-inline","mb-1"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","disabled","",1,"form-control",2,"width","300px",3,"value"],[1,"form-group","mx-2"],["type","text",1,"form-control",2,"width","300px",3,"name","ngModel","ngModelOptions","ngModelChange"],[1,"fa","fa-info-circle","fa-lg","text-success","font-weight-bold","mr-1"],[1,"text-muted"],["class","text-warning",4,"ngIf"],[1,"text-warning"],[1,"fa","fa-warning"],[1,"col-md-2","col-lg-2","border-right","border-info"],["type","text","name","protocolName",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-10","col-lg-10"],[1,""],["type","text","name","propertyKey",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],["type","text","name","PropertyValue",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"input-group","ml-2"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"span",2),e._UZ(3,"span",3),e.TgZ(4,"span",4),e._uU(5,"Add Device Wizard"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"nav",6),e.TgZ(8,"ol",7),e.TgZ(9,"li",8),e.TgZ(10,"span",9),e._uU(11,"SelectDeviceService "),e.YNc(12,fe,1,0,"i",10),e.qZA(),e.qZA(),e.TgZ(13,"li",8),e.TgZ(14,"span",9),e._uU(15,"SelectDeviceProfile "),e.YNc(16,Ze,1,0,"i",10),e.qZA(),e.qZA(),e.TgZ(17,"li",8),e.TgZ(18,"span",9),e._uU(19,"DevicePrimary "),e.YNc(20,Te,1,0,"i",10),e.qZA(),e.qZA(),e.TgZ(21,"li",8),e.TgZ(22,"span",9),e._uU(23,"CreateAutoEvent "),e.YNc(24,Ae,1,0,"i",10),e.qZA(),e.qZA(),e.TgZ(25,"li",11),e.TgZ(26,"span",9),e._uU(27,"CreateDeviceProtocol "),e.YNc(28,Ce,1,0,"i",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",1),e.YNc(30,xe,3,0,"button",12),e.YNc(31,qe,3,1,"button",13),e.YNc(32,be,3,0,"button",14),e.YNc(33,Se,3,1,"ng-template",null,15,e.W1O),e.qZA(),e.TgZ(35,"div",16),e.TgZ(36,"div",17),e.YNc(37,De,2,1,"ng-template",18,19,e.W1O),e.YNc(39,Pe,2,4,"ng-template",18,20,e.W1O),e.YNc(41,Ue,39,9,"ng-template",18,21,e.W1O),e.YNc(43,Me,10,1,"ng-template",18,22,e.W1O),e.YNc(45,Qe,15,11,"ng-template",18,23,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const r=e.MAs(34);e.xp6(10),e.Q6J("ngClass",o.currentStep>=0?o.selectedClass:o.noSelectedClass),e.xp6(2),e.Q6J("ngIf",o.currentStep>=1),e.xp6(2),e.Q6J("ngClass",o.currentStep>=1?o.selectedClass:o.noSelectedClass),e.xp6(2),e.Q6J("ngIf",o.currentStep>=2),e.xp6(2),e.Q6J("ngClass",o.currentStep>=2?o.selectedClass:o.noSelectedClass),e.xp6(2),e.Q6J("ngIf",o.currentStep>=3),e.xp6(2),e.Q6J("ngClass",o.currentStep>=3?o.selectedClass:o.noSelectedClass),e.xp6(2),e.Q6J("ngIf",o.currentStep>=4),e.xp6(2),e.Q6J("ngClass",o.currentStep>=4?o.selectedClass:o.noSelectedClass),e.xp6(2),e.Q6J("ngIf",o.currentStep>=5),e.xp6(2),e.Q6J("ngIf",o.currentStep),e.xp6(1),e.Q6J("ngIf",4>o.currentStep)("ngIfElse",r),e.xp6(1),e.Q6J("ngIf",3===o.currentStep),e.xp6(4),e.Q6J("ngSwitch",o.currentStep),e.xp6(1),e.Q6J("ngSwitchCase",0),e.xp6(2),e.Q6J("ngSwitchCase",1),e.xp6(2),e.Q6J("ngSwitchCase",2),e.xp6(2),e.Q6J("ngSwitchCase",3),e.xp6(2),e.Q6J("ngSwitchCase",4)}},directives:[n.mk,n.O5,n.RF,n.n9,L,M.f,d._Y,d.JL,d.F,d.Fj,d.JJ,d.On,d.EJ,d.YN,d.Kr,n.sg,d.Q7],styles:['.breadcrumb[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]:before{color:inherit;font-weight:inherit;content:">>";padding:0 5px}.btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}']}),i})();function He(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"form",40),e.TgZ(2,"div",41),e.TgZ(3,"div",42),e.TgZ(4,"span",43),e._uU(5,"PropertyKey"),e.qZA(),e.qZA(),e.TgZ(6,"input",44),e.NdJ("ngModelChange",function(r){return e.CHM(t).$implicit.key=r}),e.qZA(),e.qZA(),e.TgZ(7,"div",45),e._UZ(8,"i",46),e.qZA(),e.TgZ(9,"div",41),e.TgZ(10,"div",42),e.TgZ(11,"span",43),e._uU(12,"PropertyValue"),e.qZA(),e.qZA(),e.TgZ(13,"input",47),e.NdJ("ngModelChange",function(r){return e.CHM(t).$implicit.value=r}),e.qZA(),e.qZA(),e.TgZ(14,"div",48),e.TgZ(15,"button",49),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).removeProtocolProperty(s)}),e._UZ(16,"i",50),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=c.$implicit;e.xp6(6),e.Q6J("ngModel",t.key),e.xp6(7),e.Q6J("ngModel",t.value)}}function We(i,c){if(1&i&&(e.TgZ(0,"option",65),e._uU(1),e.qZA()),2&i){const t=c.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function je(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"div",9),e.TgZ(2,"form"),e.TgZ(3,"div",51),e.TgZ(4,"label",13),e._uU(5,"Interval"),e.qZA(),e.TgZ(6,"div",14),e.TgZ(7,"div",52),e.TgZ(8,"input",53),e.NdJ("ngModelChange",function(r){return e.CHM(t).$implicit.interval=r}),e.qZA(),e.TgZ(9,"div",54),e.TgZ(10,"select",55),e.NdJ("ngModelChange",function(r){return e.CHM(t).$implicit.unit=r}),e.TgZ(11,"option",56),e._uU(12,"millisecond"),e.qZA(),e.TgZ(13,"option",57),e._uU(14,"second"),e.qZA(),e.TgZ(15,"option",58),e._uU(16,"minute"),e.qZA(),e.TgZ(17,"option",59),e._uU(18,"hour"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",16),e._uU(20," can only be a pure integer number "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",12),e.TgZ(22,"label",13),e._uU(23,"onchange"),e.qZA(),e.TgZ(24,"div",14),e.TgZ(25,"select",60),e.NdJ("ngModelChange",function(r){return e.CHM(t).$implicit.onChange=r}),e.TgZ(26,"option",61),e._uU(27,"true"),e.qZA(),e.TgZ(28,"option",62),e._uU(29,"false"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",12),e.TgZ(31,"label",13),e._uU(32,"resource"),e.qZA(),e.TgZ(33,"div",14),e.TgZ(34,"select",63),e.NdJ("ngModelChange",function(r){return e.CHM(t).$implicit.resource=r}),e.YNc(35,We,2,2,"option",64),e.qZA(),e.TgZ(36,"div",16),e._uU(37," resource can't be empty "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"button",49),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).removeAutoEvent(s)}),e._UZ(39,"i",50),e._uU(40," Remove"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=c.$implicit,o=e.oxw(2);e.xp6(8),e.ekj("is-invalid",!o.eventIntervalNumType(t.interval))("is-valid",o.eventIntervalNumType(t.interval)),e.Q6J("ngModel",t.interval),e.xp6(2),e.Q6J("ngModel",t.unit),e.xp6(15),e.Q6J("ngModel",t.onChange),e.xp6(9),e.ekj("is-invalid",""===t.resource)("is-valid",""!==t.resource),e.Q6J("ngModel",t.resource),e.xp6(1),e.Q6J("ngForOf",o.autoEventResourceNameSet)}}function Ge(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e._UZ(2,"i",3),e.TgZ(3,"span",4),e._uU(4,"Edit Device"),e.qZA(),e.TgZ(5,"span",5),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().save()}),e.TgZ(9,"span"),e._UZ(10,"i",8),e._uU(11,"Save"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",9),e.TgZ(13,"div",10),e.TgZ(14,"div",2),e._UZ(15,"i",11),e._uU(16," Device Primary "),e.qZA(),e.TgZ(17,"div",9),e.TgZ(18,"form"),e.TgZ(19,"div",12),e.TgZ(20,"label",13),e._uU(21,"DeviceName"),e.qZA(),e.TgZ(22,"div",14),e.TgZ(23,"input",15),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().device.name=r}),e.qZA(),e.TgZ(24,"div",16),e._uU(25," device name can't not be empty! "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",12),e.TgZ(27,"label",13),e._uU(28,"Description"),e.qZA(),e.TgZ(29,"div",14),e.TgZ(30,"input",17),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().device.description=r}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"div",12),e.TgZ(32,"label",13),e._uU(33,"Labels"),e.qZA(),e.TgZ(34,"div",14),e.TgZ(35,"input",18),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().deviceLabels=r}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",12),e.TgZ(37,"label",19),e._uU(38,"AdminState"),e.qZA(),e.TgZ(39,"div",14),e.TgZ(40,"select",20),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().device.adminState=r}),e.TgZ(41,"option",21),e._uU(42,"UNLOCKED"),e.qZA(),e.TgZ(43,"option",22),e._uU(44,"LOCKED"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(45,"div",12),e.TgZ(46,"label",23),e._uU(47,"OperatingState"),e.qZA(),e.TgZ(48,"div",14),e.TgZ(49,"select",24),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().device.operatingState=r}),e.TgZ(50,"option",25),e._uU(51,"UP"),e.qZA(),e.TgZ(52,"option",26),e._uU(53,"DOWN"),e.qZA(),e.TgZ(54,"option",26),e._uU(55,"UNKNOWN"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(56,"div",27),e.TgZ(57,"app-device-service-list",28),e.NdJ("singleDeviceSvcSelectedEvent",function(r){return e.CHM(t),e.oxw().onSingleDeviceSvcSelected(r)}),e.qZA(),e.qZA(),e.TgZ(58,"div",27),e.TgZ(59,"app-device-profile-list",29),e.NdJ("singleProfileSelectedEvent",function(r){return e.CHM(t),e.oxw().onSingleProfileSelected(r)}),e.qZA(),e.qZA(),e.TgZ(60,"div",10),e.TgZ(61,"div",2),e._UZ(62,"i",11),e._uU(63," Device Protocol "),e.qZA(),e.TgZ(64,"div",9),e.TgZ(65,"div",1),e.TgZ(66,"div",9),e.TgZ(67,"div",30),e.TgZ(68,"div",31),e.TgZ(69,"div",32),e.TgZ(70,"label"),e._uU(71,"Protocol Name"),e.qZA(),e.TgZ(72,"input",33),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().protocolName=r}),e.qZA(),e.TgZ(73,"div",16),e.TgZ(74,"small"),e._uU(75,"the protocol name can't be empty!"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(76,"div",34),e.TgZ(77,"div"),e.TgZ(78,"p",35),e._UZ(79,"span",36),e.TgZ(80,"span",37),e.NdJ("click",function(){return e.CHM(t),e.oxw().addProtocolProperty()}),e._uU(81,"Add Protocol Property"),e.qZA(),e.qZA(),e.qZA(),e.YNc(82,He,17,2,"div",38),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(83,"div",10),e.TgZ(84,"div",2),e._UZ(85,"i",11),e._uU(86," AutoEvents "),e.qZA(),e.TgZ(87,"div",9),e.TgZ(88,"p",35),e._UZ(89,"span",36),e.TgZ(90,"span",37),e.NdJ("click",function(){return e.CHM(t),e.oxw().addAutoEvent()}),e._uU(91,"Add More AutoEvent"),e.qZA(),e.qZA(),e.YNc(92,je,41,13,"div",39),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(6),e.Oqu(t.device.name),e.xp6(2),e.Q6J("disabled",t.validateBeforeSave()),e.xp6(15),e.ekj("is-invalid",""===t.device.name),e.Q6J("ngModel",t.device.name),e.xp6(7),e.Q6J("ngModel",t.device.description),e.xp6(5),e.Q6J("ngModel",t.deviceLabels),e.xp6(5),e.Q6J("ngModel",t.device.adminState),e.xp6(9),e.Q6J("ngModel",t.device.operatingState),e.xp6(8),e.Q6J("deviceSvcSelected",t.selectedSvc),e.xp6(2),e.Q6J("enableSelectAll",!1)("toolbars",!1)("singleProfileSelected",t.selectedProfile)("associatedDeviceColumn",!1),e.xp6(13),e.ekj("is-invalid",!t.protocolName)("is-valid",t.protocolName),e.Q6J("ngModel",t.protocolName),e.xp6(10),e.Q6J("ngForOf",t.protocolPropertyList),e.xp6(10),e.Q6J("ngForOf",t.autoEventsInternal)}}let Ve=(()=>{class i{constructor(t,o,r,s){this.router=t,this.route=o,this.metaSvc=r,this.msgSvc=s,this.autoEventsInternal=[],this.autoEventResourceNameSet=[],this.protocolProperty={key:"",value:""},this.protocolPropertyList=[]}ngOnInit(){this.route.queryParams.subscribe(t=>{this.metaSvc.findDeviceByName(t.deviceName).subscribe(r=>{var s;this.device=r.device,this.deviceLabels=null===(s=this.device.labels)||void 0===s?void 0:s.join(","),this.setAutoEventInternal(this.device.autoEvents),this.protocolName=Object.keys(this.device.protocols)[0];for(const[g,x]of Object.entries(this.device.protocols[this.protocolName]))this.protocolPropertyList.push({key:g,value:x});this.setDefaultDeviceSvcSelected(this.device.serviceName),this.setDefaultDeviceProfileSelected(this.device.profileName)})})}onSingleProfileSelected(t){this.selectedProfile=t,this.resetAutoEventsInternal(),this.setupAutoEventResourceNameSet(this.selectedProfile)}onSingleDeviceSvcSelected(t){this.selectedSvc=t}setDefaultDeviceSvcSelected(t){this.metaSvc.findDevcieServiceByName(t).subscribe(o=>{this.selectedSvc=o.service})}setDefaultDeviceProfileSelected(t){this.metaSvc.findProfileByName(t).subscribe(o=>{this.selectedProfile=o.profile,this.setupAutoEventResourceNameSet(this.selectedProfile)})}resetAutoEventsInternal(){this.autoEventsInternal=[]}setupAutoEventResourceNameSet(t){t.deviceResources.forEach((o,r)=>{this.autoEventResourceNameSet.push(o.name)}),t.deviceCommands.forEach((o,r)=>{this.autoEventResourceNameSet.push(o.name)})}setAutoEventInternal(t){let o;null==t||t.forEach(r=>{let s=0;-1!==r.interval.indexOf("ms")?s=r.interval.indexOf("ms"):-1!==r.interval.indexOf("s")?s=r.interval.indexOf("s"):-1!==r.interval.indexOf("m")?s=r.interval.indexOf("m"):-1!==r.interval.indexOf("h")&&(s=r.interval.indexOf("h")),o=r.interval.substring(s),this.autoEventsInternal.push({interval:r.interval.slice(0,s),onChange:!!r.onChange,resource:r.sourceName,unit:o})})}eventIntervalNumType(t){return!isNaN(t)&&parseFloat(t)===parseInt(t)}addProtocolProperty(){this.protocolPropertyList.push({key:"",value:""})}removeProtocolProperty(t){this.protocolPropertyList.splice(this.protocolPropertyList.indexOf(t),1)}addAutoEvent(){this.autoEventsInternal.push({interval:"",onChange:!1,resource:"",unit:"ms"})}removeAutoEvent(t){this.autoEventsInternal.splice(this.autoEventsInternal.indexOf(t),1)}validateBeforeSave(){var t;if((null===(t=this.device)||void 0===t?void 0:t.name)&&this.protocolName){let o=!1;return this.autoEventsInternal.forEach(r=>{this.eventIntervalNumType(r.interval)&&""!==r.resource||(o=!0)}),o}return!0}save(){var t,o,r;let s=this.device,g={},x={};s.labels=null===(t=this.deviceLabels)||void 0===t?void 0:t.split(","),s.serviceName=null===(o=this.selectedSvc)||void 0===o?void 0:o.name,s.profileName=null===(r=this.selectedProfile)||void 0===r?void 0:r.name,this.protocolPropertyList.forEach(C=>{x[C.key]=C.value}),g[this.protocolName]=x,s.protocols=g,s.autoEvents=[],this.autoEventsInternal.forEach(C=>{s.autoEvents.push({interval:`${parseInt(C.interval)}${C.unit}`,onChange:!!C.onChange,sourceName:C.resource})}),this.metaSvc.updateDevice(s).subscribe(()=>{var C;this.msgSvc.success("update device",`name: ${null===(C=this.device)||void 0===C?void 0:C.name}`),this.router.navigate(["../device-list"],{relativeTo:this.route})})}showTips(){$(".a-question-circle-o").tooltip("toggle")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.F0),e.Y36(_.gz),e.Y36(f.D),e.Y36(T.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-device"]],decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-edit","text-danger","fa-lg"],[1,"mx-2"],[1,"text-primary"],[1,"card-header","py-1"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-save","mr-1"],[1,"card-body"],[1,"card","mb-3"],[1,"fa","fa-tags","fa-lg","text-danger"],[1,"form-group","row"],[1,"col-md-2","col-form-label"],[1,"col-md-10"],["type","text","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"invalid-feedback"],["type","text","name","description",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","labels",1,"form-control",3,"ngModel","ngModelChange"],["for","adminState",1,"col-md-2","col-form-label"],["name","adminState",1,"custom-select",3,"ngModel","ngModelChange"],["value","UNLOCKED"],["value","LOCKED"],["for","operatingState",1,"col-md-2","col-form-label"],["name","operatingState",1,"custom-select",3,"ngModel","ngModelChange"],["value","UP"],["value","DOWN"],[1,"mb-3"],[3,"deviceSvcSelected","singleDeviceSvcSelectedEvent"],[3,"enableSelectAll","toolbars","singleProfileSelected","associatedDeviceColumn","singleProfileSelectedEvent"],[1,"row"],[1,"col-md-2","col-lg-2","border-right","border-secondary"],[1,"form-group"],["type","text","name","protocolName",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-10","col-lg-10"],[1,"badge","badge-secondary","font-weight-bold"],[1,"fa","fa-plus-circle","mr-2"],["role","button",1,"user-select-none",3,"click"],[4,"ngFor","ngForOf"],["class","card mb-3",4,"ngFor","ngForOf"],[1,"form-inline","mb-1"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","name","propertyKey",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"form-group","mx-2"],[1,"fa","fa-long-arrow-right"],["type","text","name","PropertyValue",1,"form-control",2,"width","300px",3,"ngModel","ngModelChange"],[1,"input-group","ml-2"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash"],[1,"form-group","row","has-validation"],[1,"input-group","mb-3",2,"width","250px"],["type","text","name","interval","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["name","eventIntervalUnit","required","",1,"custom-select",3,"ngModel","ngModelChange"],["value","ms"],["value","s"],["value","m"],["value","h"],["name","onchange",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],["value","true"],["value","false"],["name","resource","required","",1,"custom-select",2,"width","250px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,o){1&t&&e.YNc(0,Ge,93,21,"div",0),2&t&&e.Q6J("ngIf",o.device)},directives:[n.O5,d._Y,d.JL,d.F,d.Fj,d.Q7,d.JJ,d.On,d.EJ,d.YN,d.Kr,L,M.f,n.sg],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),i})(),ze=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-device-profile-center"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},directives:[_.lC],styles:[""]}),i})();var O=v(1177);let Xe=(()=>{class i{constructor(t,o,r,s,g){this.metaSvc=t,this.msgSvc=o,this.errSvc=r,this.router=s,this.route=g}ngOnInit(){this.renderYamlSource()}renderYamlSource(){let t=document.getElementById("editor");this.codeMirrorEditor=CodeMirror.fromTextArea(t,{mode:"yaml",theme:"gruvbox-dark",foldGutter:!0,smartIndent:!0,showCursorWhenSelecting:!0,lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],autofocus:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,cursorHeight:.85,autocorrect:!0}),this.codeMirrorEditor.setSize("auto","600px"),this.codeMirrorEditor.on("drop",(o,r)=>{var s;this.yamlFile=null===(s=r.dataTransfer)||void 0===s?void 0:s.files[0]}),this.codeMirrorEditor.on("paste",(o,r)=>{})}submit(){this.profileYamlSource=this.codeMirrorEditor.getValue(),this.metaSvc.addProfileYamlByNameViaUIBackend(this.profileYamlSource).subscribe(t=>{this.errSvc.handleErrorForV2API(t)||(this.msgSvc.success("Add profile"),this.router.navigate(["../device-profile-list"],{relativeTo:this.route}))})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.D),e.Y36(T.e),e.Y36(O.T),e.Y36(_.F0),e.Y36(_.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-profile"]],decls:15,vars:0,consts:[[1,"card"],[1,"card-header"],[1,"text-danger","font-weight-bold","fa","fa-code","mr-2"],[1,"mr-3","font-weight-bold"],[1,"fa","fa-info-circle","text-success","font-weight-bold"],[1,"float-right"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save","mr-1"],[1,"card-body","p-0"],["id","editor","name","editor"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"span"),e._UZ(3,"span",2),e.TgZ(4,"span",3),e._uU(5,"Add Profile"),e.qZA(),e.TgZ(6,"span",4),e._uU(7,"\xa0drag-and-drop is enabled"),e.qZA(),e.qZA(),e.TgZ(8,"span",5),e.TgZ(9,"button",6),e.NdJ("click",function(){return o.submit()}),e._UZ(10,"i",7),e.TgZ(11,"span"),e._uU(12,"Submit"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",8),e._UZ(14,"textarea",9),e.qZA(),e.qZA())},styles:[""]}),i})(),et=(()=>{class i{constructor(t,o,r,s,g){this.metaSvc=t,this.msgSvc=o,this.errSvc=r,this.router=s,this.route=g}ngOnInit(){this.renderYamlSource(),this.route.queryParams.subscribe(t=>{t.profileName&&(this.profileName=t.profileName,this.metaSvc.findProfileYamlByNameViaUIBackend(t.profileName).subscribe(o=>{this.codeMirrorEditor.setValue(o),this.codeMirrorEditor.refresh()}))})}update(){this.codeMirrorEditor.refresh(),this.metaSvc.updateProfileYamlContentViaUIBackend(this.codeMirrorEditor.getValue()).subscribe(t=>{this.errSvc.handleErrorForV2API(t)||(this.msgSvc.success("Update profile",`name: ${this.profileName}`),this.router.navigate(["../device-profile-list"],{relativeTo:this.route}))})}renderYamlSource(){let t=document.getElementById("editor-edit");this.codeMirrorEditor=CodeMirror.fromTextArea(t,{mode:"yaml",theme:"gruvbox-dark",foldGutter:!0,smartIndent:!0,showCursorWhenSelecting:!0,lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],autofocus:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0,cursorHeight:.85,autocorrect:!0}),this.codeMirrorEditor.setSize("auto","600px")}ngOnDestroy(){this.codeMirrorEditor=null}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.D),e.Y36(T.e),e.Y36(O.T),e.Y36(_.F0),e.Y36(_.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-profile"]],decls:12,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"text-danger","fa","fa-edit","mr-2"],[1,"float-right"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-save","mr-1"],[1,"card-body","p-0"],["id","editor-edit","name","editor"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"span"),e._UZ(3,"span",2),e._uU(4),e.qZA(),e.TgZ(5,"span",3),e.TgZ(6,"button",4),e.NdJ("click",function(){return o.update()}),e.TgZ(7,"span"),e._UZ(8,"i",5),e._uU(9,"Save"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",6),e._UZ(11,"textarea",7),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.hij("",o.profileName," "))},styles:[""]}),i})(),tt=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-provision-watcher-center"]],decls:2,vars:0,template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"provision-watcher-center works!"),e.qZA())},styles:[""]}),i})(),it=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-provision-watcher-list"]],decls:2,vars:0,template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"provision-watcher-list works!"),e.qZA())},styles:[""]}),i})(),nt=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-provision-watcher"]],decls:2,vars:0,template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"add-provision-watcher works!"),e.qZA())},styles:[""]}),i})();const rt=[{path:"",component:b,children:[{path:"",redirectTo:"device-service-list",pathMatch:"full"},{path:"device-service-list",component:S},{path:"device-center",component:u,children:[{path:"",redirectTo:"device-list",pathMatch:"full"},{path:"device-list",component:_e},{path:"add-device",component:Ke},{path:"edit-device",component:Ve}]},{path:"device-profile-center",component:ze,children:[{path:"",redirectTo:"device-profile-list",pathMatch:"full"},{path:"device-profile-list",component:M.f},{path:"edit-profile",component:et},{path:"add-profile",component:Xe}]},{path:"provision-watcher-center",component:tt,children:[{path:"",redirectTo:"provision-watcher-list",pathMatch:"full"},{path:"provision-watcher-list",component:it},{path:"edit-provision-watcher",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-provision-watcher"]],decls:2,vars:0,template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"edit-provision-watcher works!"),e.qZA())},styles:[""]}),i})()},{path:"add-provision-watcher",component:nt}]}]}];let st=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[_.Bz.forChild(rt)],_.Bz]}),i})(),ct=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[n.ez,d.u5,st]]}),i})()},2822:(U,q,v)=>{v.d(q,{f:()=>y});var n=v(476),d=v(2437),_=v(7822),e=v(9502),b=v(8583),f=v(3092);function T(A,S){if(1&A){const u=n.EpF();n.TgZ(0,"div",37),n.TgZ(1,"div",38),n.TgZ(2,"button",39),n.NdJ("click",function(){return n.CHM(u),n.oxw().refresh()}),n.TgZ(3,"span"),n._UZ(4,"i",40),n._uU(5,"Refresh"),n.qZA(),n.qZA(),n.TgZ(6,"button",41),n.TgZ(7,"span"),n._UZ(8,"i",42),n._uU(9,"Add"),n.qZA(),n.qZA(),n.TgZ(10,"button",43),n.NdJ("click",function(){return n.CHM(u),n.oxw().edit()}),n.TgZ(11,"span"),n._UZ(12,"i",44),n._uU(13,"Edit"),n.qZA(),n.qZA(),n.TgZ(14,"button",45),n.NdJ("click",function(){return n.CHM(u),n.oxw().deleteConfirm()}),n.TgZ(15,"span"),n._UZ(16,"i",46),n._uU(17,"Delete"),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&A){const u=n.oxw();n.xp6(10),n.Q6J("disabled",1!==u.multiProfilesSelected.length),n.xp6(4),n.Q6J("disabled",0===u.multiProfilesSelected.length)}}function a(A,S){if(1&A){const u=n.EpF();n.TgZ(0,"input",47),n.NdJ("click",function(Z){return n.CHM(u),n.oxw().selectAll(Z)}),n.qZA()}if(2&A){const u=n.oxw();n.Q6J("checked",u.isCheckedAll())}}function l(A,S){1&A&&(n.TgZ(0,"th",8),n._uU(1,"AssociatedDevice"),n.qZA())}const p=function(A){return{profileName:A}};function h(A,S){if(1&A&&(n.TgZ(0,"td",51),n.TgZ(1,"a",52),n._UZ(2,"i",53),n.qZA(),n.qZA()),2&A){const u=n.oxw().$implicit;n.xp6(1),n.Q6J("queryParams",n.VKq(1,p,u.name))}}function P(A,S){if(1&A){const u=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td"),n.TgZ(2,"input",48),n.NdJ("click",function(Z){const N=n.CHM(u).$implicit;return n.oxw().selectOne(Z,N.name)}),n.qZA(),n.qZA(),n.TgZ(3,"td",49),n._uU(4),n.qZA(),n.TgZ(5,"td",49),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.YNc(9,h,3,3,"td",50),n.TgZ(10,"td"),n._uU(11),n.qZA(),n.TgZ(12,"td"),n._uU(13),n.qZA(),n.TgZ(14,"td"),n._uU(15),n.qZA(),n.qZA()}if(2&A){const u=S.$implicit,m=n.oxw();n.ekj("table-active",m.isChecked(u.name)),n.xp6(2),n.s9C("value",u.name),n.Q6J("checked",m.isChecked(u.name)),n.xp6(2),n.Oqu(u.id),n.xp6(2),n.Oqu(u.name),n.xp6(2),n.Oqu(u.description),n.xp6(1),n.Q6J("ngIf",m.associatedDeviceColumn),n.xp6(2),n.Oqu(u.labels),n.xp6(2),n.Oqu(u.manufacturer),n.xp6(2),n.Oqu(u.model)}}let y=(()=>{class A{constructor(u,m,Z,D){this.metaSvc=u,this.msgSvc=m,this.route=Z,this.router=D,this.associatedDeviceColumn=!0,this.toolbars=!0,this.enableSelectAll=!0,this.singleProfileSelectedEvent=new n.vpe,this.multipleProfileSelectedEvent=new n.vpe,this.profileList=[],this.multiProfilesSelected=[],this.pagination=1,this.pageLimit=5,this.pageOffset=(this.pagination-1)*this.pageLimit}ngOnInit(){this.route.queryParams.subscribe(u=>{u.profileName?this.metaSvc.findProfileByName(u.profileName).subscribe(m=>{this.profileList=[],this.profileList.push(m.profile)}):this.findAllDeviceProfilesPagination()})}findAllDeviceProfilesPagination(){this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(u=>{this.profileList=u.profiles})}onSingleProfileSelectedEmitter(){this.singleProfileSelectedEvent.emit(this.singleProfileSelected)}onMultipleProfileSelectedEmitter(){this.multipleProfileSelectedEvent.emit(this.multiProfilesSelected)}refresh(){this.metaSvc.allDeviceProfolesPagination(0,this.pageLimit).subscribe(u=>{this.profileList=u.profiles,this.msgSvc.success("refresh"),this.pagination=1,this.resetCheckbox()})}onPageSelected(){this.resetPagination(),this.setPagination(),this.findAllDeviceProfilesPagination()}prePage(){this.setPagination(-1),this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(u=>{this.profileList=u.profiles})}nextPage(){this.setPagination(1),this.metaSvc.allDeviceProfolesPagination(this.pageOffset,this.pageLimit).subscribe(u=>{this.profileList=u.profiles})}setPageLimit(u){this.pageLimit=u}setPagination(u){1===u?this.pagination+=1:-1===u&&(this.pagination-=1),this.pageOffset=(this.pagination-1)*this.pageLimit,this.resetCheckbox()}resetPagination(){this.pagination=1,this.resetCheckbox()}resetCheckbox(){}edit(){this.router.navigate(["../edit-profile"],{relativeTo:this.route,queryParams:{profileName:this.multiProfilesSelected[0]}})}deleteConfirm(){$("#deleteConfirmDialog").modal("show")}delete(){this.multiProfilesSelected.forEach(u=>{this.metaSvc.deleteProfileByName(u).subscribe(()=>{this.multiProfilesSelected=[],this.profileList.forEach((m,Z)=>{m.name==u&&(this.profileList.splice(Z,1),this.msgSvc.success("delete",`  Name: ${m.name}`))})})}),$("#deleteConfirmDialog").modal("hide")}isSingleProfileChecked(u){var m;return(null===(m=this.singleProfileSelected)||void 0===m?void 0:m.name)===u}selectSingleProfile(u,m){u.target.checked?this.profileList.forEach(D=>{D.name===m&&(this.singleProfileSelected=D)}):this.singleProfileSelected=void 0,this.onSingleProfileSelectedEmitter()}isCheckedAll(){let u=!0;return this.profileList&&0===this.profileList.length&&(u=!1),this.profileList.forEach(m=>{-1===this.multiProfilesSelected.indexOf(m.name)&&(u=!1)}),u}selectAll(u){this.profileList.forEach(u.target.checked?Z=>{this.multiProfilesSelected.includes(Z.name)||this.multiProfilesSelected.push(Z.name)}:Z=>{this.multiProfilesSelected.includes(Z.name)&&this.multiProfilesSelected.splice(this.multiProfilesSelected.indexOf(Z.name),1)}),this.onMultipleProfileSelectedEmitter()}isChecked(u){return this.enableSelectAll?this.multiProfilesSelected.includes(u):this.isSingleProfileChecked(u)}selectOne(u,m){this.enableSelectAll?(u.target.checked?this.multiProfilesSelected.push(m):this.multiProfilesSelected.splice(this.multiProfilesSelected.indexOf(m),1),this.onMultipleProfileSelectedEmitter()):this.selectSingleProfile(u,m)}}return A.\u0275fac=function(u){return new(u||A)(n.Y36(d.D),n.Y36(_.e),n.Y36(e.gz),n.Y36(e.F0))},A.\u0275cmp=n.Xpm({type:A,selectors:[["app-device-profile-list"]],inputs:{associatedDeviceColumn:"associatedDeviceColumn",toolbars:"toolbars",enableSelectAll:"enableSelectAll",multiProfilesSelected:"multiProfilesSelected",singleProfileSelected:"singleProfileSelected"},outputs:{singleProfileSelectedEvent:"singleProfileSelectedEvent",multipleProfileSelectedEvent:"multipleProfileSelectedEvent"},decls:64,vars:7,consts:[[1,"card"],[1,"card-header","font-weight-bold"],[1,"fa","fa-list","text-danger","mr-2"],[1,"card-body","p-0"],["class","bg-light px-2 py-2",4,"ngIf"],[1,"table-responsive"],[1,"table","table-hover","text-truncate"],[1,"thead-light"],["scope","col"],["type","checkbox",3,"checked","click",4,"ngIf"],["scope","col",4,"ngIf"],[3,"table-active",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","p-1"],["aria-label","navigation"],[1,"pagination","justify-content-end","m-0"],[1,"page-item","mr-2","mt-1"],[1,"align-middle"],[1,"page-item","mr-2"],["name","pageLimit","id","pageLimit",1,"custom-select",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","20"],[1,"page-item","mr-1"],[1,"page-link","btn",3,"disabled","click"],[1,"fa","fa-angle-double-left"],[1,"page-item"],[1,"fa","fa-angle-double-right"],["id","deleteConfirmDialog","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteConfirmDialogLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteConfirmDialogLabel",1,"modal-title","text-danger"],[1,"fa","fa-warning"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger",3,"click"],[1,"bg-light","px-2","py-2"],["role","group",1,"btn-group","btn-group-sm"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh","mr-1"],["type","button","routerLink","../add-profile",1,"btn","btn-info"],[1,"fa","fa-plus","mr-1"],["type","button","data-toggle","tooltip","data-placement","top","title","only one should be selected",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-edit","mr-1"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash","mr-1"],["type","checkbox",3,"checked","click"],["type","checkbox",3,"value","checked","click"],[1,"user-select-all"],["class","text-center",4,"ngIf"],[1,"text-center"],["routerLink","../../device-center",1,"badge","badge-pill","badge-primary",3,"queryParams"],[1,"fa","fa-sitemap"]],template:function(u,m){1&u&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n.TgZ(3,"span"),n._uU(4,"Device Profile List"),n.qZA(),n.qZA(),n.TgZ(5,"div",3),n.YNc(6,T,18,2,"div",4),n.TgZ(7,"div",5),n.TgZ(8,"table",6),n.TgZ(9,"thead",7),n.TgZ(10,"tr"),n.TgZ(11,"th",8),n.YNc(12,a,1,1,"input",9),n.qZA(),n.TgZ(13,"th",8),n._uU(14,"ID"),n.qZA(),n.TgZ(15,"th",8),n._uU(16,"Name"),n.qZA(),n.TgZ(17,"th",8),n._uU(18,"Description"),n.qZA(),n.YNc(19,l,2,0,"th",10),n.TgZ(20,"th",8),n._uU(21,"Labels"),n.qZA(),n.TgZ(22,"th",8),n._uU(23,"Manufacturer"),n.qZA(),n.TgZ(24,"th",8),n._uU(25,"Model"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(26,"tbody"),n.YNc(27,P,16,11,"tr",11),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(28,"div",12),n.TgZ(29,"nav",13),n.TgZ(30,"ul",14),n.TgZ(31,"li",15),n.TgZ(32,"span",16),n._uU(33,"items per page"),n.qZA(),n.qZA(),n.TgZ(34,"li",17),n.TgZ(35,"select",18),n.NdJ("ngModelChange",function(D){return m.pageLimit=D})("ngModelChange",function(){return m.onPageSelected()}),n.TgZ(36,"option",19),n._uU(37,"5"),n.qZA(),n.TgZ(38,"option",20),n._uU(39,"10"),n.qZA(),n.TgZ(40,"option",21),n._uU(41,"20"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(42,"li",22),n.TgZ(43,"button",23),n.NdJ("click",function(){return m.prePage()}),n._UZ(44,"i",24),n._uU(45," Previous"),n.qZA(),n.qZA(),n.TgZ(46,"li",25),n.TgZ(47,"button",23),n.NdJ("click",function(){return m.nextPage()}),n._uU(48,"Next "),n._UZ(49,"i",26),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(50,"div",27),n.TgZ(51,"div",28),n.TgZ(52,"div",29),n.TgZ(53,"div",30),n.TgZ(54,"h5",31),n._UZ(55,"i",32),n._uU(56," Warning "),n.qZA(),n.qZA(),n.TgZ(57,"div",33),n._uU(58," The data will be permanently erased!!! Are you sure to execute delete operation\uff1f "),n.qZA(),n.TgZ(59,"div",34),n.TgZ(60,"button",35),n._uU(61,"Cancel"),n.qZA(),n.TgZ(62,"button",36),n.NdJ("click",function(){return m.delete()}),n._uU(63,"Confirm"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&u&&(n.xp6(6),n.Q6J("ngIf",m.toolbars),n.xp6(6),n.Q6J("ngIf",m.enableSelectAll),n.xp6(7),n.Q6J("ngIf",m.associatedDeviceColumn),n.xp6(8),n.Q6J("ngForOf",m.profileList),n.xp6(8),n.Q6J("ngModel",m.pageLimit),n.xp6(8),n.Q6J("disabled",1===m.pagination),n.xp6(4),n.Q6J("disabled",m.pageLimit>m.profileList.length))},directives:[b.O5,b.sg,f.EJ,f.JJ,f.On,f.YN,f.Kr,e.rH,e.yS],styles:[".btn[disabled][_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),A})()},7982:(U,q,v)=>{v.d(q,{V:()=>b});var n=v(1841),d=v(5894),_=v(476),e=v(1177);let b=(()=>{class f{constructor(a,l){this.http=a,this.errorSvc=l,this.endpoint="/command",this.version="/api/v2",this.urlPrefix=`${this.endpoint}${this.version}`,this.endpointHealthUrl="/ping",this.versionUrl="/version",this.configUrl="/config",this.deviceCoreCommandListUrl=`${this.urlPrefix}/device/all`,this.commandsByDeviceIdUrl=`${this.urlPrefix}/device/`,this.commandsByDeviceNameUrl=`${this.urlPrefix}/device/name/`,this.issueCmdByDeviceNameAndCmdNameUrl=`${this.urlPrefix}/device/name/`,this.httpPostOrPutJSONOptions={headers:new n.WM({"Content-type":"application/json",Authorization:""})}}getConfig(){return this.http.get(`${this.urlPrefix}${this.configUrl}`).pipe((0,d.K)(l=>this.errorSvc.handleError(l)))}findCommnadsByDeviceId(a){return this.http.get(`${this.commandsByDeviceIdUrl}${a}`).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}allDeviceCoreCommandsPagination(a,l){return this.http.get(`${this.deviceCoreCommandListUrl}?offset=${a}&limit=${l}`).pipe((0,d.K)(h=>this.errorSvc.handleError(h)))}findDeviceAssociatedCommnadsByDeviceName(a){return this.http.get(`${this.commandsByDeviceNameUrl}${a}`).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}findAllDeviceCommnads(){return this.http.get(`${this.urlPrefix}/device`).pipe((0,d.K)(l=>this.errorSvc.handleError(l)))}issueGetBinaryCmd(a,l){return this.http.request("GET",`${this.commandsByDeviceIdUrl}${a}/command/${l}`,{responseType:"arraybuffer"}).pipe((0,d.K)(h=>this.errorSvc.handleError(h)))}issueGetCmd(a,l){return this.http.get(`${this.issueCmdByDeviceNameAndCmdNameUrl}${a}/${l}`).pipe((0,d.K)(h=>this.errorSvc.handleError(h)))}issueSetCmd(a,l,p){return this.http.put(`${this.issueCmdByDeviceNameAndCmdNameUrl}${a}/${l}`,JSON.stringify(p),this.httpPostOrPutJSONOptions).pipe((0,d.K)(P=>this.errorSvc.handleError(P)))}}return f.\u0275fac=function(a){return new(a||f)(_.LFG(n.eN),_.LFG(e.T))},f.\u0275prov=_.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},1177:(U,q,v)=>{v.d(q,{T:()=>f});var n=v(1776),d=v(8853),e=v(476),b=v(7822);let f=(()=>{class T{constructor(l){this.msgSvc=l}handleErrorForV2API(l){let p=Object.prototype.toString.call(l);if("[object Array]"===p){if(!l[0].statusCode.toString().startsWith("20"))return this.msgSvc.errors(`code: ${l[0].statusCode}, message: ${l[0].message}`),!0}else if("[object Object]"===p&&!l.statusCode.toString().startsWith("20"))return this.msgSvc.errors(`code: ${l.statusCode}, message: ${l.message}`),!0;return!1}handleError(l){return l.error instanceof ErrorEvent?this.msgSvc.errors(`'An error occurred:', ${l.error.message}`):"[object Object]"===Object.prototype.toString.call(l.error)?this.msgSvc.errors(`code: ${l.error.statusCode} , message: ${l.error.message}`):"[object String]"===Object.prototype.toString.call(l.error)?this.msgSvc.errors(`code: ${l.status} , message: ${l.error}`):this.msgSvc.errors(`code: ${l.status} , message: ${l.message}`),function(T,a){var l=(0,d.m)(T)?T:function(){return T},p=function(h){return h.error(l())};return new n.y(p)}(`Backend returned code ${l.error.statusCode}, body was: ${l.error.message}`)}}return T.\u0275fac=function(l){return new(l||T)(e.LFG(b.e))},T.\u0275prov=e.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()},2437:(U,q,v)=>{v.d(q,{D:()=>b});var n=v(1841),d=v(5894),_=v(476),e=v(1177);let b=(()=>{class f{constructor(a,l){this.http=a,this.errorSvc=l,this.endpoint="/metadata",this.version="/api/v2",this.urlPrefix=`${this.endpoint}${this.version}`,this.configUrl="/config",this.devicesListUrl=`${this.urlPrefix}/device/all`,this.addOneDeviceUrl=`${this.urlPrefix}/device`,this.updateOneDeviceUrl=`${this.urlPrefix}/device`,this.deleteOneDeviceByIdUrl=`${this.urlPrefix}/device/Id`,this.deleteOneDeviceByNameUrl=`${this.urlPrefix}/device/name`,this.findDeviceByNameUrl=`${this.urlPrefix}/device/name`,this.findDeviceByIdUrl=`${this.urlPrefix}/device/id`,this.findDevicesByServiceIdUrl=`${this.urlPrefix}/device/service/id`,this.findDevicesByServiceNameUrl=`${this.urlPrefix}/device/service/name`,this.findDevicesByProfileIdUrl=`${this.urlPrefix}/device/profile/id`,this.findDevicesByProfileNameUrl=`${this.urlPrefix}/device/profile/name`,this.deviceServicesListUrl=`${this.urlPrefix}/deviceservice/all`,this.updateDeviceServiceUrl=`${this.urlPrefix}/deviceservice`,this.findDeviceServiceByIdUrl=`${this.urlPrefix}/deviceservice/id`,this.findDeviceServiceByNameUrl=`${this.urlPrefix}/deviceservice/name`,this.deviceProfilesListUrl=`${this.urlPrefix}/deviceprofile/all`,this.findProfilesByIdUrl=`${this.urlPrefix}/deviceprofile`,this.findProfilesByNameUrl=`${this.urlPrefix}/deviceprofile/name`,this.updateDeviceProfileUrl=`${this.urlPrefix}/deviceprofile`,this.uploadProfileYamlFileUrl=`${this.urlPrefix}/deviceprofile/uploadfile`,this.uploadProfileYamlContentUrl=`${this.urlPrefix}/deviceprofile/upload`,this.deviceProfileYamlUrl=`${this.urlPrefix}/deviceprofile/yaml`,this.deleteProfileByIdUrl=`${this.urlPrefix}/deviceprofile/id`,this.deleteProfileByNamedUrl=`${this.urlPrefix}/deviceprofile/name`,this.httpPostOrPutJSONOptions={headers:new n.WM({"Content-type":"application/json",Authorization:""})}}getConfig(){return this.http.get(`${this.urlPrefix}${this.configUrl}`).pipe((0,d.K)(l=>this.errorSvc.handleError(l)))}allDevices(){return this.http.get(`${this.devicesListUrl}`).pipe((0,d.K)(l=>this.errorSvc.handleError(l)))}allDevicesPagination(a,l){return this.http.get(`${this.devicesListUrl}?offset=${a}&limit=${l}`).pipe((0,d.K)(h=>this.errorSvc.handleError(h)))}addDevice(a){let l=`${this.addOneDeviceUrl}`;return a.apiVersion="v2",this.http.post(l,JSON.stringify([{apiVersion:"v2",device:a}]),this.httpPostOrPutJSONOptions).pipe((0,d.K)(h=>this.errorSvc.handleError(h)))}deleteOneDeviceByName(a){return this.http.delete(`${this.deleteOneDeviceByNameUrl}/${a}`).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}deleteOneDeviceById(a){return this.http.delete(`${this.deleteOneDeviceByIdUrl}/${a}`).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}updateDevice(a){return this.http.patch(`${this.updateOneDeviceUrl}`,JSON.stringify([{apiVersion:"v2",device:a}]),{headers:new n.WM({"Content-type":"application/json"})}).pipe((0,d.K)(h=>this.errorSvc.handleError(h)))}findDeviceByName(a){return this.http.get(`${this.findDeviceByNameUrl}/${a}`).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}findDeviceById(a){return this.http.get(`${this.findDeviceByIdUrl}/${a}`).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}findDevicesByServiceId(a){return this.http.get(`${this.findDevicesByServiceIdUrl}/${a}`).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}findDevicesByServiceName(a,l,p){return this.http.get(`${this.findDevicesByServiceNameUrl}/${p}?offset=${a}&limit=${l}`).pipe((0,d.K)(P=>this.errorSvc.handleError(P)))}findDevicesByProfileId(a){return this.http.get(`${this.findDevicesByProfileIdUrl}/${a}`).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}findDevicesByProfileName(a,l,p){return this.http.get(`${this.findDevicesByProfileNameUrl}/${p}?offset=${a}&limit=${l}`).pipe((0,d.K)(P=>this.errorSvc.handleError(P)))}allDeviceServices(){return this.http.get(`${this.deviceServicesListUrl}?offset=0&limit=-1`).pipe((0,d.K)(l=>this.errorSvc.handleError(l)))}findAllDeviceServicesPagination(a,l){return this.http.get(`${this.deviceServicesListUrl}?offset=${a}&limit=${l}`).pipe((0,d.K)(h=>this.errorSvc.handleError(h)))}updateDeviceService(a){return this.http.patch(`${this.updateDeviceServiceUrl}`,JSON.stringify([{apiVersion:"v2",service:a}]),this.httpPostOrPutJSONOptions).pipe((0,d.K)(h=>this.errorSvc.handleError(h)))}findDevcieServiceById(a){return this.http.get(`${this.findDeviceServiceByIdUrl}/${a}`).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}findDevcieServiceByName(a){return this.http.get(`${this.findDeviceServiceByNameUrl}/${a}`).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}allDeviceProfoles(){return this.http.get(`${this.deviceProfilesListUrl}?offset=0&limit=-1`).pipe((0,d.K)(l=>this.errorSvc.handleError(l)))}allDeviceProfolesPagination(a,l){return this.http.get(`${this.deviceProfilesListUrl}?offset=${a}&limit=${l}`).pipe((0,d.K)(h=>this.errorSvc.handleError(h)))}addProfileYamlByNameViaUIBackend(a){return this.http.request("POST","/api/v2/profile/yaml",{body:a,responseType:"text"}).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}findProfileById(a){return this.http.get(`${this.findProfilesByIdUrl}/${a}`).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}findProfileByName(a){return this.http.get(`${this.findProfilesByNameUrl}/${a}`).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}findProfileYamlByNameViaUIBackend(a){return this.http.request("GET","/api/v2/profile/yaml/name/"+a,{responseType:"text"}).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}uploadProfileYamlFile(a){return this.http.request("POST",`${this.uploadProfileYamlFileUrl}`,{body:a,responseType:"text"}).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}updateDeviceProfile(a){return this.http.put(`${this.updateDeviceProfileUrl}`,a,this.httpPostOrPutJSONOptions).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}updateProfileYamlContentViaUIBackend(a){return this.http.put("/api/v2/profile/yaml",a,{headers:new n.WM({"Content-Type":"text/plain; charset=utf-8"})}).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}uploadProfileYamlContent(a){return this.http.request("POST",`${this.uploadProfileYamlContentUrl}`,{body:a,responseType:"text",headers:new n.WM({"Content-Type":"text/plain; charset=utf-8"})}).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}findProfileYamlById(a){return this.http.request("GET",`${this.deviceProfileYamlUrl}/${a}`,{responseType:"text"})}deleteProfileById(a){return this.http.delete(`${this.deleteProfileByIdUrl}/${a}`).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}deleteProfileByName(a){return this.http.delete(`${this.deleteProfileByNamedUrl}/${a}`).pipe((0,d.K)(p=>this.errorSvc.handleError(p)))}}return f.\u0275fac=function(a){return new(a||f)(_.LFG(n.eN),_.LFG(e.T))},f.\u0275prov=_.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()}}]);